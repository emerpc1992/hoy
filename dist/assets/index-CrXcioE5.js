var Yk=Object.defineProperty;var Qk=(t,e,n)=>e in t?Yk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var dt=(t,e,n)=>Qk(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var W0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function QN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Xk(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var XN={exports:{}},Tg={},JN={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af=Symbol.for("react.element"),Jk=Symbol.for("react.portal"),Zk=Symbol.for("react.fragment"),eP=Symbol.for("react.strict_mode"),tP=Symbol.for("react.profiler"),nP=Symbol.for("react.provider"),rP=Symbol.for("react.context"),iP=Symbol.for("react.forward_ref"),sP=Symbol.for("react.suspense"),oP=Symbol.for("react.memo"),aP=Symbol.for("react.lazy"),D5=Symbol.iterator;function lP(t){return t===null||typeof t!="object"?null:(t=D5&&t[D5]||t["@@iterator"],typeof t=="function"?t:null)}var ZN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eS=Object.assign,tS={};function yh(t,e,n){this.props=t,this.context=e,this.refs=tS,this.updater=n||ZN}yh.prototype.isReactComponent={};yh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nS(){}nS.prototype=yh.prototype;function Ov(t,e,n){this.props=t,this.context=e,this.refs=tS,this.updater=n||ZN}var Fv=Ov.prototype=new nS;Fv.constructor=Ov;eS(Fv,yh.prototype);Fv.isPureReactComponent=!0;var M5=Array.isArray,rS=Object.prototype.hasOwnProperty,Vv={current:null},iS={key:!0,ref:!0,__self:!0,__source:!0};function sS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)rS.call(e,r)&&!iS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Af,type:t,key:s,ref:o,props:i,_owner:Vv.current}}function cP(t,e){return{$$typeof:Af,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Af}function uP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var O5=/\/+/g;function G0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uP(""+t.key):e.toString(36)}function om(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Af:case Jk:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+G0(o,0):r,M5(i)?(n="",t!=null&&(n=t.replace(O5,"$&/")+"/"),om(i,e,n,"",function(u){return u})):i!=null&&(Bv(i)&&(i=cP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(O5,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",M5(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+G0(s,a);o+=om(s,e,n,l,i)}else if(l=lP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+G0(s,a++),o+=om(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vp(t,e,n){if(t==null)return t;var r=[],i=0;return om(t,r,"","",function(s){return e.call(n,s,i++)}),r}function hP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wr={current:null},am={transition:null},dP={ReactCurrentDispatcher:Wr,ReactCurrentBatchConfig:am,ReactCurrentOwner:Vv};function oS(){throw Error("act(...) is not supported in production builds of React.")}At.Children={map:vp,forEach:function(t,e,n){vp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vp(t,function(){e++}),e},toArray:function(t){return vp(t,function(e){return e})||[]},only:function(t){if(!Bv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};At.Component=yh;At.Fragment=Zk;At.Profiler=tP;At.PureComponent=Ov;At.StrictMode=eP;At.Suspense=sP;At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dP;At.act=oS;At.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=eS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Vv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)rS.call(e,l)&&!iS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Af,type:t.type,key:i,ref:s,props:r,_owner:o}};At.createContext=function(t){return t={$$typeof:rP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nP,_context:t},t.Consumer=t};At.createElement=sS;At.createFactory=function(t){var e=sS.bind(null,t);return e.type=t,e};At.createRef=function(){return{current:null}};At.forwardRef=function(t){return{$$typeof:iP,render:t}};At.isValidElement=Bv;At.lazy=function(t){return{$$typeof:aP,_payload:{_status:-1,_result:t},_init:hP}};At.memo=function(t,e){return{$$typeof:oP,type:t,compare:e===void 0?null:e}};At.startTransition=function(t){var e=am.transition;am.transition={};try{t()}finally{am.transition=e}};At.unstable_act=oS;At.useCallback=function(t,e){return Wr.current.useCallback(t,e)};At.useContext=function(t){return Wr.current.useContext(t)};At.useDebugValue=function(){};At.useDeferredValue=function(t){return Wr.current.useDeferredValue(t)};At.useEffect=function(t,e){return Wr.current.useEffect(t,e)};At.useId=function(){return Wr.current.useId()};At.useImperativeHandle=function(t,e,n){return Wr.current.useImperativeHandle(t,e,n)};At.useInsertionEffect=function(t,e){return Wr.current.useInsertionEffect(t,e)};At.useLayoutEffect=function(t,e){return Wr.current.useLayoutEffect(t,e)};At.useMemo=function(t,e){return Wr.current.useMemo(t,e)};At.useReducer=function(t,e,n){return Wr.current.useReducer(t,e,n)};At.useRef=function(t){return Wr.current.useRef(t)};At.useState=function(t){return Wr.current.useState(t)};At.useSyncExternalStore=function(t,e,n){return Wr.current.useSyncExternalStore(t,e,n)};At.useTransition=function(){return Wr.current.useTransition()};At.version="18.3.1";JN.exports=At;var we=JN.exports;const Ig=QN(we);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fP=we,pP=Symbol.for("react.element"),mP=Symbol.for("react.fragment"),gP=Object.prototype.hasOwnProperty,yP=fP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vP={key:!0,ref:!0,__self:!0,__source:!0};function aS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gP.call(e,r)&&!vP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:pP,type:t,key:s,ref:o,props:i,_owner:yP.current}}Tg.Fragment=mP;Tg.jsx=aS;Tg.jsxs=aS;XN.exports=Tg;var c=XN.exports,lS={exports:{}},Pi={},cS={exports:{}},uS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,X){var se=K.length;K.push(X);e:for(;0<se;){var me=se-1>>>1,O=K[me];if(0<i(O,X))K[me]=X,K[se]=O,se=me;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var X=K[0],se=K.pop();if(se!==X){K[0]=se;e:for(var me=0,O=K.length,$=O>>>1;me<$;){var Q=2*(me+1)-1,te=K[Q],re=Q+1,pe=K[re];if(0>i(te,se))re<O&&0>i(pe,te)?(K[me]=pe,K[re]=se,me=re):(K[me]=te,K[Q]=se,me=Q);else if(re<O&&0>i(pe,se))K[me]=pe,K[re]=se,me=re;else break e}}return X}function i(K,X){var se=K.sortIndex-X.sortIndex;return se!==0?se:K.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,p=null,m=3,g=!1,v=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(K){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=K)r(u),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(u)}}function I(K){if(w=!1,S(K),!v)if(n(l)!==null)v=!0,Z(F);else{var X=n(u);X!==null&&J(I,X.startTime-K)}}function F(K,X){v=!1,w&&(w=!1,x(N),N=-1),g=!0;var se=m;try{for(S(X),p=n(l);p!==null&&(!(p.expirationTime>X)||K&&!k());){var me=p.callback;if(typeof me=="function"){p.callback=null,m=p.priorityLevel;var O=me(p.expirationTime<=X);X=t.unstable_now(),typeof O=="function"?p.callback=O:p===n(l)&&r(l),S(X)}else r(l);p=n(l)}if(p!==null)var $=!0;else{var Q=n(u);Q!==null&&J(I,Q.startTime-X),$=!1}return $}finally{p=null,m=se,g=!1}}var V=!1,P=null,N=-1,L=5,M=-1;function k(){return!(t.unstable_now()-M<L)}function T(){if(P!==null){var K=t.unstable_now();M=K;var X=!0;try{X=P(!0,K)}finally{X?D():(V=!1,P=null)}}else V=!1}var D;if(typeof _=="function")D=function(){_(T)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ae=Y.port2;Y.port1.onmessage=T,D=function(){ae.postMessage(null)}}else D=function(){C(T,0)};function Z(K){P=K,V||(V=!0,D())}function J(K,X){N=C(function(){K(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Z(F))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(K){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var se=m;m=X;try{return K()}finally{m=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,X){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=m;m=K;try{return X()}finally{m=se}},t.unstable_scheduleCallback=function(K,X,se){var me=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?me+se:me):se=me,K){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=se+O,K={id:h++,callback:X,priorityLevel:K,startTime:se,expirationTime:O,sortIndex:-1},se>me?(K.sortIndex=se,e(u,K),n(l)===null&&K===n(u)&&(w?(x(N),N=-1):w=!0,J(I,se-me))):(K.sortIndex=O,e(l,K),v||g||(v=!0,Z(F))),K},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(K){var X=m;return function(){var se=m;m=X;try{return K.apply(this,arguments)}finally{m=se}}}})(uS);cS.exports=uS;var xP=cS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bP=we,ki=xP;function Oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hS=new Set,Ud={};function Dc(t,e){Zu(t,e),Zu(t+"Capture",e)}function Zu(t,e){for(Ud[t]=e,t=0;t<e.length;t++)hS.add(e[t])}var $o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Z1=Object.prototype.hasOwnProperty,wP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F5={},V5={};function _P(t){return Z1.call(V5,t)?!0:Z1.call(F5,t)?!1:wP.test(t)?V5[t]=!0:(F5[t]=!0,!1)}function NP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SP(t,e,n,r){if(e===null||typeof e>"u"||NP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pr[t]=new Gr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pr[e]=new Gr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pr[t]=new Gr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pr[t]=new Gr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pr[t]=new Gr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pr[t]=new Gr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pr[t]=new Gr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pr[t]=new Gr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pr[t]=new Gr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Uv=/[\-:]([a-z])/g;function zv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Uv,zv);pr[e]=new Gr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Uv,zv);pr[e]=new Gr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Uv,zv);pr[e]=new Gr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pr[t]=new Gr(t,1,!1,t.toLowerCase(),null,!1,!1)});pr.xlinkHref=new Gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pr[t]=new Gr(t,1,!1,t.toLowerCase(),null,!0,!0)});function qv(t,e,n,r){var i=pr.hasOwnProperty(e)?pr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SP(e,n,i,r)&&(n=null),r||i===null?_P(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var na=bP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xp=Symbol.for("react.element"),Au=Symbol.for("react.portal"),Cu=Symbol.for("react.fragment"),Hv=Symbol.for("react.strict_mode"),ey=Symbol.for("react.profiler"),dS=Symbol.for("react.provider"),fS=Symbol.for("react.context"),$v=Symbol.for("react.forward_ref"),ty=Symbol.for("react.suspense"),ny=Symbol.for("react.suspense_list"),Wv=Symbol.for("react.memo"),Fa=Symbol.for("react.lazy"),pS=Symbol.for("react.offscreen"),B5=Symbol.iterator;function $h(t){return t===null||typeof t!="object"?null:(t=B5&&t[B5]||t["@@iterator"],typeof t=="function"?t:null)}var bn=Object.assign,K0;function ad(t){if(K0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);K0=e&&e[1]||""}return`
`+K0+t}var Y0=!1;function Q0(t,e){if(!t||Y0)return"";Y0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Y0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ad(t):""}function AP(t){switch(t.tag){case 5:return ad(t.type);case 16:return ad("Lazy");case 13:return ad("Suspense");case 19:return ad("SuspenseList");case 0:case 2:case 15:return t=Q0(t.type,!1),t;case 11:return t=Q0(t.type.render,!1),t;case 1:return t=Q0(t.type,!0),t;default:return""}}function ry(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cu:return"Fragment";case Au:return"Portal";case ey:return"Profiler";case Hv:return"StrictMode";case ty:return"Suspense";case ny:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fS:return(t.displayName||"Context")+".Consumer";case dS:return(t._context.displayName||"Context")+".Provider";case $v:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wv:return e=t.displayName||null,e!==null?e:ry(t.type)||"Memo";case Fa:e=t._payload,t=t._init;try{return ry(t(e))}catch{}}return null}function CP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ry(e);case 8:return e===Hv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EP(t){var e=mS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bp(t){t._valueTracker||(t._valueTracker=EP(t))}function gS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Lm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function iy(t,e){var n=e.checked;return bn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function U5(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yS(t,e){e=e.checked,e!=null&&qv(t,"checked",e,!1)}function sy(t,e){yS(t,e);var n=pl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?oy(t,e.type,n):e.hasOwnProperty("defaultValue")&&oy(t,e.type,pl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function z5(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function oy(t,e,n){(e!=="number"||Lm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ld=Array.isArray;function Vu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ay(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return bn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function q5(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Oe(92));if(ld(n)){if(1<n.length)throw Error(Oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pl(n)}}function vS(t,e){var n=pl(e.value),r=pl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function H5(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ly(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wp,bS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wp=wp||document.createElement("div"),wp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kP=["Webkit","ms","Moz","O"];Object.keys(vd).forEach(function(t){kP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vd[e]=vd[t]})});function wS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vd.hasOwnProperty(t)&&vd[t]?(""+e).trim():e+"px"}function _S(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var PP=bn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cy(t,e){if(e){if(PP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Oe(62))}}function uy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hy=null;function Gv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dy=null,Bu=null,Uu=null;function $5(t){if(t=kf(t)){if(typeof dy!="function")throw Error(Oe(280));var e=t.stateNode;e&&(e=Mg(e),dy(t.stateNode,t.type,e))}}function NS(t){Bu?Uu?Uu.push(t):Uu=[t]:Bu=t}function SS(){if(Bu){var t=Bu,e=Uu;if(Uu=Bu=null,$5(t),e)for(t=0;t<e.length;t++)$5(e[t])}}function AS(t,e){return t(e)}function CS(){}var X0=!1;function ES(t,e,n){if(X0)return t(e,n);X0=!0;try{return AS(t,e,n)}finally{X0=!1,(Bu!==null||Uu!==null)&&(CS(),SS())}}function qd(t,e){var n=t.stateNode;if(n===null)return null;var r=Mg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Oe(231,e,typeof n));return n}var fy=!1;if($o)try{var Wh={};Object.defineProperty(Wh,"passive",{get:function(){fy=!0}}),window.addEventListener("test",Wh,Wh),window.removeEventListener("test",Wh,Wh)}catch{fy=!1}function TP(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var xd=!1,Rm=null,Dm=!1,py=null,IP={onError:function(t){xd=!0,Rm=t}};function jP(t,e,n,r,i,s,o,a,l){xd=!1,Rm=null,TP.apply(IP,arguments)}function LP(t,e,n,r,i,s,o,a,l){if(jP.apply(this,arguments),xd){if(xd){var u=Rm;xd=!1,Rm=null}else throw Error(Oe(198));Dm||(Dm=!0,py=u)}}function Mc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function W5(t){if(Mc(t)!==t)throw Error(Oe(188))}function RP(t){var e=t.alternate;if(!e){if(e=Mc(t),e===null)throw Error(Oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return W5(i),t;if(s===r)return W5(i),e;s=s.sibling}throw Error(Oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Oe(189))}}if(n.alternate!==r)throw Error(Oe(190))}if(n.tag!==3)throw Error(Oe(188));return n.stateNode.current===n?t:e}function PS(t){return t=RP(t),t!==null?TS(t):null}function TS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=TS(t);if(e!==null)return e;t=t.sibling}return null}var IS=ki.unstable_scheduleCallback,G5=ki.unstable_cancelCallback,DP=ki.unstable_shouldYield,MP=ki.unstable_requestPaint,Ln=ki.unstable_now,OP=ki.unstable_getCurrentPriorityLevel,Kv=ki.unstable_ImmediatePriority,jS=ki.unstable_UserBlockingPriority,Mm=ki.unstable_NormalPriority,FP=ki.unstable_LowPriority,LS=ki.unstable_IdlePriority,jg=null,Gs=null;function VP(t){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(jg,t,void 0,(t.current.flags&128)===128)}catch{}}var ys=Math.clz32?Math.clz32:zP,BP=Math.log,UP=Math.LN2;function zP(t){return t>>>=0,t===0?32:31-(BP(t)/UP|0)|0}var _p=64,Np=4194304;function cd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Om(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=cd(a):(s&=o,s!==0&&(r=cd(s)))}else o=n&~i,o!==0?r=cd(o):s!==0&&(r=cd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ys(e),i=1<<n,r|=t[n],e&=~i;return r}function qP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ys(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=qP(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function my(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function RS(){var t=_p;return _p<<=1,!(_p&4194240)&&(_p=64),t}function J0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ys(e),t[e]=n}function $P(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ys(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Yv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ys(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Yt=0;function DS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var MS,Qv,OS,FS,VS,gy=!1,Sp=[],tl=null,nl=null,rl=null,Hd=new Map,$d=new Map,Ua=[],WP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K5(t,e){switch(t){case"focusin":case"focusout":tl=null;break;case"dragenter":case"dragleave":nl=null;break;case"mouseover":case"mouseout":rl=null;break;case"pointerover":case"pointerout":Hd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$d.delete(e.pointerId)}}function Gh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=kf(e),e!==null&&Qv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function GP(t,e,n,r,i){switch(e){case"focusin":return tl=Gh(tl,t,e,n,r,i),!0;case"dragenter":return nl=Gh(nl,t,e,n,r,i),!0;case"mouseover":return rl=Gh(rl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Hd.set(s,Gh(Hd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,$d.set(s,Gh($d.get(s)||null,t,e,n,r,i)),!0}return!1}function BS(t){var e=ac(t.target);if(e!==null){var n=Mc(e);if(n!==null){if(e=n.tag,e===13){if(e=kS(n),e!==null){t.blockedOn=e,VS(t.priority,function(){OS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hy=r,n.target.dispatchEvent(r),hy=null}else return e=kf(n),e!==null&&Qv(e),t.blockedOn=n,!1;e.shift()}return!0}function Y5(t,e,n){lm(t)&&n.delete(e)}function KP(){gy=!1,tl!==null&&lm(tl)&&(tl=null),nl!==null&&lm(nl)&&(nl=null),rl!==null&&lm(rl)&&(rl=null),Hd.forEach(Y5),$d.forEach(Y5)}function Kh(t,e){t.blockedOn===e&&(t.blockedOn=null,gy||(gy=!0,ki.unstable_scheduleCallback(ki.unstable_NormalPriority,KP)))}function Wd(t){function e(i){return Kh(i,t)}if(0<Sp.length){Kh(Sp[0],t);for(var n=1;n<Sp.length;n++){var r=Sp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(tl!==null&&Kh(tl,t),nl!==null&&Kh(nl,t),rl!==null&&Kh(rl,t),Hd.forEach(e),$d.forEach(e),n=0;n<Ua.length;n++)r=Ua[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ua.length&&(n=Ua[0],n.blockedOn===null);)BS(n),n.blockedOn===null&&Ua.shift()}var zu=na.ReactCurrentBatchConfig,Fm=!0;function YP(t,e,n,r){var i=Yt,s=zu.transition;zu.transition=null;try{Yt=1,Xv(t,e,n,r)}finally{Yt=i,zu.transition=s}}function QP(t,e,n,r){var i=Yt,s=zu.transition;zu.transition=null;try{Yt=4,Xv(t,e,n,r)}finally{Yt=i,zu.transition=s}}function Xv(t,e,n,r){if(Fm){var i=yy(t,e,n,r);if(i===null)l1(t,e,r,Vm,n),K5(t,r);else if(GP(i,t,e,n,r))r.stopPropagation();else if(K5(t,r),e&4&&-1<WP.indexOf(t)){for(;i!==null;){var s=kf(i);if(s!==null&&MS(s),s=yy(t,e,n,r),s===null&&l1(t,e,r,Vm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else l1(t,e,r,null,n)}}var Vm=null;function yy(t,e,n,r){if(Vm=null,t=Gv(r),t=ac(t),t!==null)if(e=Mc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vm=t,null}function US(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OP()){case Kv:return 1;case jS:return 4;case Mm:case FP:return 16;case LS:return 536870912;default:return 16}default:return 16}}var Ka=null,Jv=null,cm=null;function zS(){if(cm)return cm;var t,e=Jv,n=e.length,r,i="value"in Ka?Ka.value:Ka.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return cm=i.slice(t,1<r?1-r:void 0)}function um(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ap(){return!0}function Q5(){return!1}function Ti(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ap:Q5,this.isPropagationStopped=Q5,this}return bn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ap)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ap)},persist:function(){},isPersistent:Ap}),e}var vh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zv=Ti(vh),Ef=bn({},vh,{view:0,detail:0}),XP=Ti(Ef),Z0,e1,Yh,Lg=bn({},Ef,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:e2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yh&&(Yh&&t.type==="mousemove"?(Z0=t.screenX-Yh.screenX,e1=t.screenY-Yh.screenY):e1=Z0=0,Yh=t),Z0)},movementY:function(t){return"movementY"in t?t.movementY:e1}}),X5=Ti(Lg),JP=bn({},Lg,{dataTransfer:0}),ZP=Ti(JP),eT=bn({},Ef,{relatedTarget:0}),t1=Ti(eT),tT=bn({},vh,{animationName:0,elapsedTime:0,pseudoElement:0}),nT=Ti(tT),rT=bn({},vh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iT=Ti(rT),sT=bn({},vh,{data:0}),J5=Ti(sT),oT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lT[t])?!!e[t]:!1}function e2(){return cT}var uT=bn({},Ef,{key:function(t){if(t.key){var e=oT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=um(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:e2,charCode:function(t){return t.type==="keypress"?um(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?um(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hT=Ti(uT),dT=bn({},Lg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z5=Ti(dT),fT=bn({},Ef,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:e2}),pT=Ti(fT),mT=bn({},vh,{propertyName:0,elapsedTime:0,pseudoElement:0}),gT=Ti(mT),yT=bn({},Lg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vT=Ti(yT),xT=[9,13,27,32],t2=$o&&"CompositionEvent"in window,bd=null;$o&&"documentMode"in document&&(bd=document.documentMode);var bT=$o&&"TextEvent"in window&&!bd,qS=$o&&(!t2||bd&&8<bd&&11>=bd),eb=" ",tb=!1;function HS(t,e){switch(t){case"keyup":return xT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $S(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Eu=!1;function wT(t,e){switch(t){case"compositionend":return $S(e);case"keypress":return e.which!==32?null:(tb=!0,eb);case"textInput":return t=e.data,t===eb&&tb?null:t;default:return null}}function _T(t,e){if(Eu)return t==="compositionend"||!t2&&HS(t,e)?(t=zS(),cm=Jv=Ka=null,Eu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qS&&e.locale!=="ko"?null:e.data;default:return null}}var NT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!NT[t.type]:e==="textarea"}function WS(t,e,n,r){NS(r),e=Bm(e,"onChange"),0<e.length&&(n=new Zv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wd=null,Gd=null;function ST(t){r4(t,0)}function Rg(t){var e=Tu(t);if(gS(e))return t}function AT(t,e){if(t==="change")return e}var GS=!1;if($o){var n1;if($o){var r1="oninput"in document;if(!r1){var rb=document.createElement("div");rb.setAttribute("oninput","return;"),r1=typeof rb.oninput=="function"}n1=r1}else n1=!1;GS=n1&&(!document.documentMode||9<document.documentMode)}function ib(){wd&&(wd.detachEvent("onpropertychange",KS),Gd=wd=null)}function KS(t){if(t.propertyName==="value"&&Rg(Gd)){var e=[];WS(e,Gd,t,Gv(t)),ES(ST,e)}}function CT(t,e,n){t==="focusin"?(ib(),wd=e,Gd=n,wd.attachEvent("onpropertychange",KS)):t==="focusout"&&ib()}function ET(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rg(Gd)}function kT(t,e){if(t==="click")return Rg(e)}function PT(t,e){if(t==="input"||t==="change")return Rg(e)}function TT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bs=typeof Object.is=="function"?Object.is:TT;function Kd(t,e){if(bs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Z1.call(e,i)||!bs(t[i],e[i]))return!1}return!0}function sb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ob(t,e){var n=sb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sb(n)}}function YS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?YS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function QS(){for(var t=window,e=Lm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lm(t.document)}return e}function n2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function IT(t){var e=QS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&YS(n.ownerDocument.documentElement,n)){if(r!==null&&n2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ob(n,s);var o=ob(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jT=$o&&"documentMode"in document&&11>=document.documentMode,ku=null,vy=null,_d=null,xy=!1;function ab(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xy||ku==null||ku!==Lm(r)||(r=ku,"selectionStart"in r&&n2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_d&&Kd(_d,r)||(_d=r,r=Bm(vy,"onSelect"),0<r.length&&(e=new Zv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ku)))}function Cp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pu={animationend:Cp("Animation","AnimationEnd"),animationiteration:Cp("Animation","AnimationIteration"),animationstart:Cp("Animation","AnimationStart"),transitionend:Cp("Transition","TransitionEnd")},i1={},XS={};$o&&(XS=document.createElement("div").style,"AnimationEvent"in window||(delete Pu.animationend.animation,delete Pu.animationiteration.animation,delete Pu.animationstart.animation),"TransitionEvent"in window||delete Pu.transitionend.transition);function Dg(t){if(i1[t])return i1[t];if(!Pu[t])return t;var e=Pu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in XS)return i1[t]=e[n];return t}var JS=Dg("animationend"),ZS=Dg("animationiteration"),e4=Dg("animationstart"),t4=Dg("transitionend"),n4=new Map,lb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sl(t,e){n4.set(t,e),Dc(e,[t])}for(var s1=0;s1<lb.length;s1++){var o1=lb[s1],LT=o1.toLowerCase(),RT=o1[0].toUpperCase()+o1.slice(1);Sl(LT,"on"+RT)}Sl(JS,"onAnimationEnd");Sl(ZS,"onAnimationIteration");Sl(e4,"onAnimationStart");Sl("dblclick","onDoubleClick");Sl("focusin","onFocus");Sl("focusout","onBlur");Sl(t4,"onTransitionEnd");Zu("onMouseEnter",["mouseout","mouseover"]);Zu("onMouseLeave",["mouseout","mouseover"]);Zu("onPointerEnter",["pointerout","pointerover"]);Zu("onPointerLeave",["pointerout","pointerover"]);Dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ud="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ud));function cb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LP(r,e,void 0,t),t.currentTarget=null}function r4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;cb(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;cb(i,a,u),s=l}}}if(Dm)throw t=py,Dm=!1,py=null,t}function hn(t,e){var n=e[Sy];n===void 0&&(n=e[Sy]=new Set);var r=t+"__bubble";n.has(r)||(i4(e,t,2,!1),n.add(r))}function a1(t,e,n){var r=0;e&&(r|=4),i4(n,t,r,e)}var Ep="_reactListening"+Math.random().toString(36).slice(2);function Yd(t){if(!t[Ep]){t[Ep]=!0,hS.forEach(function(n){n!=="selectionchange"&&(DT.has(n)||a1(n,!1,t),a1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ep]||(e[Ep]=!0,a1("selectionchange",!1,e))}}function i4(t,e,n,r){switch(US(e)){case 1:var i=YP;break;case 4:i=QP;break;default:i=Xv}n=i.bind(null,e,n,t),i=void 0,!fy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function l1(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ac(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}ES(function(){var u=s,h=Gv(n),p=[];e:{var m=n4.get(t);if(m!==void 0){var g=Zv,v=t;switch(t){case"keypress":if(um(n)===0)break e;case"keydown":case"keyup":g=hT;break;case"focusin":v="focus",g=t1;break;case"focusout":v="blur",g=t1;break;case"beforeblur":case"afterblur":g=t1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=X5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ZP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=pT;break;case JS:case ZS:case e4:g=nT;break;case t4:g=gT;break;case"scroll":g=XP;break;case"wheel":g=vT;break;case"copy":case"cut":case"paste":g=iT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Z5}var w=(e&4)!==0,C=!w&&t==="scroll",x=w?m!==null?m+"Capture":null:m;w=[];for(var _=u,S;_!==null;){S=_;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,x!==null&&(I=qd(_,x),I!=null&&w.push(Qd(_,I,S)))),C)break;_=_.return}0<w.length&&(m=new g(m,v,null,n,h),p.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==hy&&(v=n.relatedTarget||n.fromElement)&&(ac(v)||v[Wo]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?ac(v):null,v!==null&&(C=Mc(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(w=X5,I="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(w=Z5,I="onPointerLeave",x="onPointerEnter",_="pointer"),C=g==null?m:Tu(g),S=v==null?m:Tu(v),m=new w(I,_+"leave",g,n,h),m.target=C,m.relatedTarget=S,I=null,ac(h)===u&&(w=new w(x,_+"enter",v,n,h),w.target=S,w.relatedTarget=C,I=w),C=I,g&&v)t:{for(w=g,x=v,_=0,S=w;S;S=gu(S))_++;for(S=0,I=x;I;I=gu(I))S++;for(;0<_-S;)w=gu(w),_--;for(;0<S-_;)x=gu(x),S--;for(;_--;){if(w===x||x!==null&&w===x.alternate)break t;w=gu(w),x=gu(x)}w=null}else w=null;g!==null&&ub(p,m,g,w,!1),v!==null&&C!==null&&ub(p,C,v,w,!0)}}e:{if(m=u?Tu(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var F=AT;else if(nb(m))if(GS)F=PT;else{F=ET;var V=CT}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(F=kT);if(F&&(F=F(t,u))){WS(p,F,n,h);break e}V&&V(t,m,u),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&oy(m,"number",m.value)}switch(V=u?Tu(u):window,t){case"focusin":(nb(V)||V.contentEditable==="true")&&(ku=V,vy=u,_d=null);break;case"focusout":_d=vy=ku=null;break;case"mousedown":xy=!0;break;case"contextmenu":case"mouseup":case"dragend":xy=!1,ab(p,n,h);break;case"selectionchange":if(jT)break;case"keydown":case"keyup":ab(p,n,h)}var P;if(t2)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Eu?HS(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(qS&&n.locale!=="ko"&&(Eu||N!=="onCompositionStart"?N==="onCompositionEnd"&&Eu&&(P=zS()):(Ka=h,Jv="value"in Ka?Ka.value:Ka.textContent,Eu=!0)),V=Bm(u,N),0<V.length&&(N=new J5(N,t,null,n,h),p.push({event:N,listeners:V}),P?N.data=P:(P=$S(n),P!==null&&(N.data=P)))),(P=bT?wT(t,n):_T(t,n))&&(u=Bm(u,"onBeforeInput"),0<u.length&&(h=new J5("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=P))}r4(p,e)})}function Qd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=qd(t,n),s!=null&&r.unshift(Qd(t,s,i)),s=qd(t,e),s!=null&&r.push(Qd(t,s,i))),t=t.return}return r}function gu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ub(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=qd(n,s),l!=null&&o.unshift(Qd(n,l,a))):i||(l=qd(n,s),l!=null&&o.push(Qd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var MT=/\r\n?/g,OT=/\u0000|\uFFFD/g;function hb(t){return(typeof t=="string"?t:""+t).replace(MT,`
`).replace(OT,"")}function kp(t,e,n){if(e=hb(e),hb(t)!==e&&n)throw Error(Oe(425))}function Um(){}var by=null,wy=null;function _y(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ny=typeof setTimeout=="function"?setTimeout:void 0,FT=typeof clearTimeout=="function"?clearTimeout:void 0,db=typeof Promise=="function"?Promise:void 0,VT=typeof queueMicrotask=="function"?queueMicrotask:typeof db<"u"?function(t){return db.resolve(null).then(t).catch(BT)}:Ny;function BT(t){setTimeout(function(){throw t})}function c1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Wd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wd(e)}function il(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xh=Math.random().toString(36).slice(2),Hs="__reactFiber$"+xh,Xd="__reactProps$"+xh,Wo="__reactContainer$"+xh,Sy="__reactEvents$"+xh,UT="__reactListeners$"+xh,zT="__reactHandles$"+xh;function ac(t){var e=t[Hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wo]||n[Hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fb(t);t!==null;){if(n=t[Hs])return n;t=fb(t)}return e}t=n,n=t.parentNode}return null}function kf(t){return t=t[Hs]||t[Wo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Tu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Oe(33))}function Mg(t){return t[Xd]||null}var Ay=[],Iu=-1;function Al(t){return{current:t}}function mn(t){0>Iu||(t.current=Ay[Iu],Ay[Iu]=null,Iu--)}function on(t,e){Iu++,Ay[Iu]=t.current,t.current=e}var ml={},Dr=Al(ml),li=Al(!1),Sc=ml;function eh(t,e){var n=t.type.contextTypes;if(!n)return ml;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ci(t){return t=t.childContextTypes,t!=null}function zm(){mn(li),mn(Dr)}function pb(t,e,n){if(Dr.current!==ml)throw Error(Oe(168));on(Dr,e),on(li,n)}function s4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Oe(108,CP(t)||"Unknown",i));return bn({},n,r)}function qm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ml,Sc=Dr.current,on(Dr,t),on(li,li.current),!0}function mb(t,e,n){var r=t.stateNode;if(!r)throw Error(Oe(169));n?(t=s4(t,e,Sc),r.__reactInternalMemoizedMergedChildContext=t,mn(li),mn(Dr),on(Dr,t)):mn(li),on(li,n)}var Do=null,Og=!1,u1=!1;function o4(t){Do===null?Do=[t]:Do.push(t)}function qT(t){Og=!0,o4(t)}function Cl(){if(!u1&&Do!==null){u1=!0;var t=0,e=Yt;try{var n=Do;for(Yt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Do=null,Og=!1}catch(i){throw Do!==null&&(Do=Do.slice(t+1)),IS(Kv,Cl),i}finally{Yt=e,u1=!1}}return null}var ju=[],Lu=0,Hm=null,$m=0,zi=[],qi=0,Ac=null,Oo=1,Fo="";function tc(t,e){ju[Lu++]=$m,ju[Lu++]=Hm,Hm=t,$m=e}function a4(t,e,n){zi[qi++]=Oo,zi[qi++]=Fo,zi[qi++]=Ac,Ac=t;var r=Oo;t=Fo;var i=32-ys(r)-1;r&=~(1<<i),n+=1;var s=32-ys(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Oo=1<<32-ys(e)+i|n<<i|r,Fo=s+t}else Oo=1<<s|n<<i|r,Fo=t}function r2(t){t.return!==null&&(tc(t,1),a4(t,1,0))}function i2(t){for(;t===Hm;)Hm=ju[--Lu],ju[Lu]=null,$m=ju[--Lu],ju[Lu]=null;for(;t===Ac;)Ac=zi[--qi],zi[qi]=null,Fo=zi[--qi],zi[qi]=null,Oo=zi[--qi],zi[qi]=null}var Ci=null,_i=null,yn=!1,ps=null;function l4(t,e){var n=Hi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ci=t,_i=il(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ci=t,_i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ac!==null?{id:Oo,overflow:Fo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Hi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ci=t,_i=null,!0):!1;default:return!1}}function Cy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ey(t){if(yn){var e=_i;if(e){var n=e;if(!gb(t,e)){if(Cy(t))throw Error(Oe(418));e=il(n.nextSibling);var r=Ci;e&&gb(t,e)?l4(r,n):(t.flags=t.flags&-4097|2,yn=!1,Ci=t)}}else{if(Cy(t))throw Error(Oe(418));t.flags=t.flags&-4097|2,yn=!1,Ci=t}}}function yb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ci=t}function Pp(t){if(t!==Ci)return!1;if(!yn)return yb(t),yn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_y(t.type,t.memoizedProps)),e&&(e=_i)){if(Cy(t))throw c4(),Error(Oe(418));for(;e;)l4(t,e),e=il(e.nextSibling)}if(yb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_i=il(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_i=null}}else _i=Ci?il(t.stateNode.nextSibling):null;return!0}function c4(){for(var t=_i;t;)t=il(t.nextSibling)}function th(){_i=Ci=null,yn=!1}function s2(t){ps===null?ps=[t]:ps.push(t)}var HT=na.ReactCurrentBatchConfig;function Qh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Oe(309));var r=n.stateNode}if(!r)throw Error(Oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Oe(284));if(!n._owner)throw Error(Oe(290,t))}return t}function Tp(t,e){throw t=Object.prototype.toString.call(e),Error(Oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vb(t){var e=t._init;return e(t._payload)}function u4(t){function e(x,_){if(t){var S=x.deletions;S===null?(x.deletions=[_],x.flags|=16):S.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function i(x,_){return x=ll(x,_),x.index=0,x.sibling=null,x}function s(x,_,S){return x.index=S,t?(S=x.alternate,S!==null?(S=S.index,S<_?(x.flags|=2,_):S):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,_,S,I){return _===null||_.tag!==6?(_=y1(S,x.mode,I),_.return=x,_):(_=i(_,S),_.return=x,_)}function l(x,_,S,I){var F=S.type;return F===Cu?h(x,_,S.props.children,I,S.key):_!==null&&(_.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Fa&&vb(F)===_.type)?(I=i(_,S.props),I.ref=Qh(x,_,S),I.return=x,I):(I=ym(S.type,S.key,S.props,null,x.mode,I),I.ref=Qh(x,_,S),I.return=x,I)}function u(x,_,S,I){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=v1(S,x.mode,I),_.return=x,_):(_=i(_,S.children||[]),_.return=x,_)}function h(x,_,S,I,F){return _===null||_.tag!==7?(_=gc(S,x.mode,I,F),_.return=x,_):(_=i(_,S),_.return=x,_)}function p(x,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=y1(""+_,x.mode,S),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xp:return S=ym(_.type,_.key,_.props,null,x.mode,S),S.ref=Qh(x,null,_),S.return=x,S;case Au:return _=v1(_,x.mode,S),_.return=x,_;case Fa:var I=_._init;return p(x,I(_._payload),S)}if(ld(_)||$h(_))return _=gc(_,x.mode,S,null),_.return=x,_;Tp(x,_)}return null}function m(x,_,S,I){var F=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return F!==null?null:a(x,_,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case xp:return S.key===F?l(x,_,S,I):null;case Au:return S.key===F?u(x,_,S,I):null;case Fa:return F=S._init,m(x,_,F(S._payload),I)}if(ld(S)||$h(S))return F!==null?null:h(x,_,S,I,null);Tp(x,S)}return null}function g(x,_,S,I,F){if(typeof I=="string"&&I!==""||typeof I=="number")return x=x.get(S)||null,a(_,x,""+I,F);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case xp:return x=x.get(I.key===null?S:I.key)||null,l(_,x,I,F);case Au:return x=x.get(I.key===null?S:I.key)||null,u(_,x,I,F);case Fa:var V=I._init;return g(x,_,S,V(I._payload),F)}if(ld(I)||$h(I))return x=x.get(S)||null,h(_,x,I,F,null);Tp(_,I)}return null}function v(x,_,S,I){for(var F=null,V=null,P=_,N=_=0,L=null;P!==null&&N<S.length;N++){P.index>N?(L=P,P=null):L=P.sibling;var M=m(x,P,S[N],I);if(M===null){P===null&&(P=L);break}t&&P&&M.alternate===null&&e(x,P),_=s(M,_,N),V===null?F=M:V.sibling=M,V=M,P=L}if(N===S.length)return n(x,P),yn&&tc(x,N),F;if(P===null){for(;N<S.length;N++)P=p(x,S[N],I),P!==null&&(_=s(P,_,N),V===null?F=P:V.sibling=P,V=P);return yn&&tc(x,N),F}for(P=r(x,P);N<S.length;N++)L=g(P,x,N,S[N],I),L!==null&&(t&&L.alternate!==null&&P.delete(L.key===null?N:L.key),_=s(L,_,N),V===null?F=L:V.sibling=L,V=L);return t&&P.forEach(function(k){return e(x,k)}),yn&&tc(x,N),F}function w(x,_,S,I){var F=$h(S);if(typeof F!="function")throw Error(Oe(150));if(S=F.call(S),S==null)throw Error(Oe(151));for(var V=F=null,P=_,N=_=0,L=null,M=S.next();P!==null&&!M.done;N++,M=S.next()){P.index>N?(L=P,P=null):L=P.sibling;var k=m(x,P,M.value,I);if(k===null){P===null&&(P=L);break}t&&P&&k.alternate===null&&e(x,P),_=s(k,_,N),V===null?F=k:V.sibling=k,V=k,P=L}if(M.done)return n(x,P),yn&&tc(x,N),F;if(P===null){for(;!M.done;N++,M=S.next())M=p(x,M.value,I),M!==null&&(_=s(M,_,N),V===null?F=M:V.sibling=M,V=M);return yn&&tc(x,N),F}for(P=r(x,P);!M.done;N++,M=S.next())M=g(P,x,N,M.value,I),M!==null&&(t&&M.alternate!==null&&P.delete(M.key===null?N:M.key),_=s(M,_,N),V===null?F=M:V.sibling=M,V=M);return t&&P.forEach(function(T){return e(x,T)}),yn&&tc(x,N),F}function C(x,_,S,I){if(typeof S=="object"&&S!==null&&S.type===Cu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case xp:e:{for(var F=S.key,V=_;V!==null;){if(V.key===F){if(F=S.type,F===Cu){if(V.tag===7){n(x,V.sibling),_=i(V,S.props.children),_.return=x,x=_;break e}}else if(V.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Fa&&vb(F)===V.type){n(x,V.sibling),_=i(V,S.props),_.ref=Qh(x,V,S),_.return=x,x=_;break e}n(x,V);break}else e(x,V);V=V.sibling}S.type===Cu?(_=gc(S.props.children,x.mode,I,S.key),_.return=x,x=_):(I=ym(S.type,S.key,S.props,null,x.mode,I),I.ref=Qh(x,_,S),I.return=x,x=I)}return o(x);case Au:e:{for(V=S.key;_!==null;){if(_.key===V)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(x,_.sibling),_=i(_,S.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=v1(S,x.mode,I),_.return=x,x=_}return o(x);case Fa:return V=S._init,C(x,_,V(S._payload),I)}if(ld(S))return v(x,_,S,I);if($h(S))return w(x,_,S,I);Tp(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(x,_.sibling),_=i(_,S),_.return=x,x=_):(n(x,_),_=y1(S,x.mode,I),_.return=x,x=_),o(x)):n(x,_)}return C}var nh=u4(!0),h4=u4(!1),Wm=Al(null),Gm=null,Ru=null,o2=null;function a2(){o2=Ru=Gm=null}function l2(t){var e=Wm.current;mn(Wm),t._currentValue=e}function ky(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qu(t,e){Gm=t,o2=Ru=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ai=!0),t.firstContext=null)}function Gi(t){var e=t._currentValue;if(o2!==t)if(t={context:t,memoizedValue:e,next:null},Ru===null){if(Gm===null)throw Error(Oe(308));Ru=t,Gm.dependencies={lanes:0,firstContext:t}}else Ru=Ru.next=t;return e}var lc=null;function c2(t){lc===null?lc=[t]:lc.push(t)}function d4(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,c2(e)):(n.next=i.next,i.next=n),e.interleaved=n,Go(t,r)}function Go(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Va=!1;function u2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ot&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Go(t,n)}return i=r.interleaved,i===null?(e.next=e,c2(r)):(e.next=i.next,i.next=e),r.interleaved=e,Go(t,n)}function hm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yv(t,n)}}function xb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Km(t,e,n,r){var i=t.updateQueue;Va=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,h=u=l=null,a=s;do{var m=a.lane,g=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(m=e,g=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){p=v.call(g,p,m);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,m=typeof v=="function"?v.call(g,p,m):v,m==null)break e;p=bn({},p,m);break e;case 2:Va=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,l=p):h=h.next=g,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ec|=o,t.lanes=o,t.memoizedState=p}}function bb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Oe(191,i));i.call(r)}}}var Pf={},Ks=Al(Pf),Jd=Al(Pf),Zd=Al(Pf);function cc(t){if(t===Pf)throw Error(Oe(174));return t}function h2(t,e){switch(on(Zd,e),on(Jd,t),on(Ks,Pf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ly(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ly(e,t)}mn(Ks),on(Ks,e)}function rh(){mn(Ks),mn(Jd),mn(Zd)}function p4(t){cc(Zd.current);var e=cc(Ks.current),n=ly(e,t.type);e!==n&&(on(Jd,t),on(Ks,n))}function d2(t){Jd.current===t&&(mn(Ks),mn(Jd))}var vn=Al(0);function Ym(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var h1=[];function f2(){for(var t=0;t<h1.length;t++)h1[t]._workInProgressVersionPrimary=null;h1.length=0}var dm=na.ReactCurrentDispatcher,d1=na.ReactCurrentBatchConfig,Cc=0,xn=null,Kn=null,tr=null,Qm=!1,Nd=!1,ef=0,$T=0;function wr(){throw Error(Oe(321))}function p2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bs(t[n],e[n]))return!1;return!0}function m2(t,e,n,r,i,s){if(Cc=s,xn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dm.current=t===null||t.memoizedState===null?YT:QT,t=n(r,i),Nd){s=0;do{if(Nd=!1,ef=0,25<=s)throw Error(Oe(301));s+=1,tr=Kn=null,e.updateQueue=null,dm.current=XT,t=n(r,i)}while(Nd)}if(dm.current=Xm,e=Kn!==null&&Kn.next!==null,Cc=0,tr=Kn=xn=null,Qm=!1,e)throw Error(Oe(300));return t}function g2(){var t=ef!==0;return ef=0,t}function zs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?xn.memoizedState=tr=t:tr=tr.next=t,tr}function Ki(){if(Kn===null){var t=xn.alternate;t=t!==null?t.memoizedState:null}else t=Kn.next;var e=tr===null?xn.memoizedState:tr.next;if(e!==null)tr=e,Kn=t;else{if(t===null)throw Error(Oe(310));Kn=t,t={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},tr===null?xn.memoizedState=tr=t:tr=tr.next=t}return tr}function tf(t,e){return typeof e=="function"?e(t):e}function f1(t){var e=Ki(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=Kn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Cc&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,xn.lanes|=h,Ec|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,bs(r,e.memoizedState)||(ai=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,xn.lanes|=s,Ec|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function p1(t){var e=Ki(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);bs(s,e.memoizedState)||(ai=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function m4(){}function g4(t,e){var n=xn,r=Ki(),i=e(),s=!bs(r.memoizedState,i);if(s&&(r.memoizedState=i,ai=!0),r=r.queue,y2(x4.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tr!==null&&tr.memoizedState.tag&1){if(n.flags|=2048,nf(9,v4.bind(null,n,r,i,e),void 0,null),nr===null)throw Error(Oe(349));Cc&30||y4(n,e,i)}return i}function y4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xn.updateQueue,e===null?(e={lastEffect:null,stores:null},xn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function v4(t,e,n,r){e.value=n,e.getSnapshot=r,b4(e)&&w4(t)}function x4(t,e,n){return n(function(){b4(e)&&w4(t)})}function b4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bs(t,n)}catch{return!0}}function w4(t){var e=Go(t,1);e!==null&&vs(e,t,1,-1)}function wb(t){var e=zs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tf,lastRenderedState:t},e.queue=t,t=t.dispatch=KT.bind(null,xn,t),[e.memoizedState,t]}function nf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xn.updateQueue,e===null?(e={lastEffect:null,stores:null},xn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _4(){return Ki().memoizedState}function fm(t,e,n,r){var i=zs();xn.flags|=t,i.memoizedState=nf(1|e,n,void 0,r===void 0?null:r)}function Fg(t,e,n,r){var i=Ki();r=r===void 0?null:r;var s=void 0;if(Kn!==null){var o=Kn.memoizedState;if(s=o.destroy,r!==null&&p2(r,o.deps)){i.memoizedState=nf(e,n,s,r);return}}xn.flags|=t,i.memoizedState=nf(1|e,n,s,r)}function _b(t,e){return fm(8390656,8,t,e)}function y2(t,e){return Fg(2048,8,t,e)}function N4(t,e){return Fg(4,2,t,e)}function S4(t,e){return Fg(4,4,t,e)}function A4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function C4(t,e,n){return n=n!=null?n.concat([t]):null,Fg(4,4,A4.bind(null,e,t),n)}function v2(){}function E4(t,e){var n=Ki();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&p2(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function k4(t,e){var n=Ki();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&p2(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function P4(t,e,n){return Cc&21?(bs(n,e)||(n=RS(),xn.lanes|=n,Ec|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ai=!0),t.memoizedState=n)}function WT(t,e){var n=Yt;Yt=n!==0&&4>n?n:4,t(!0);var r=d1.transition;d1.transition={};try{t(!1),e()}finally{Yt=n,d1.transition=r}}function T4(){return Ki().memoizedState}function GT(t,e,n){var r=al(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},I4(t))j4(e,n);else if(n=d4(t,e,n,r),n!==null){var i=$r();vs(n,t,r,i),L4(n,e,r)}}function KT(t,e,n){var r=al(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(I4(t))j4(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,bs(a,o)){var l=e.interleaved;l===null?(i.next=i,c2(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=d4(t,e,i,r),n!==null&&(i=$r(),vs(n,t,r,i),L4(n,e,r))}}function I4(t){var e=t.alternate;return t===xn||e!==null&&e===xn}function j4(t,e){Nd=Qm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function L4(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yv(t,n)}}var Xm={readContext:Gi,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useInsertionEffect:wr,useLayoutEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useMutableSource:wr,useSyncExternalStore:wr,useId:wr,unstable_isNewReconciler:!1},YT={readContext:Gi,useCallback:function(t,e){return zs().memoizedState=[t,e===void 0?null:e],t},useContext:Gi,useEffect:_b,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fm(4194308,4,A4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fm(4194308,4,t,e)},useInsertionEffect:function(t,e){return fm(4,2,t,e)},useMemo:function(t,e){var n=zs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=GT.bind(null,xn,t),[r.memoizedState,t]},useRef:function(t){var e=zs();return t={current:t},e.memoizedState=t},useState:wb,useDebugValue:v2,useDeferredValue:function(t){return zs().memoizedState=t},useTransition:function(){var t=wb(!1),e=t[0];return t=WT.bind(null,t[1]),zs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xn,i=zs();if(yn){if(n===void 0)throw Error(Oe(407));n=n()}else{if(n=e(),nr===null)throw Error(Oe(349));Cc&30||y4(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,_b(x4.bind(null,r,s,t),[t]),r.flags|=2048,nf(9,v4.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=zs(),e=nr.identifierPrefix;if(yn){var n=Fo,r=Oo;n=(r&~(1<<32-ys(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ef++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$T++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QT={readContext:Gi,useCallback:E4,useContext:Gi,useEffect:y2,useImperativeHandle:C4,useInsertionEffect:N4,useLayoutEffect:S4,useMemo:k4,useReducer:f1,useRef:_4,useState:function(){return f1(tf)},useDebugValue:v2,useDeferredValue:function(t){var e=Ki();return P4(e,Kn.memoizedState,t)},useTransition:function(){var t=f1(tf)[0],e=Ki().memoizedState;return[t,e]},useMutableSource:m4,useSyncExternalStore:g4,useId:T4,unstable_isNewReconciler:!1},XT={readContext:Gi,useCallback:E4,useContext:Gi,useEffect:y2,useImperativeHandle:C4,useInsertionEffect:N4,useLayoutEffect:S4,useMemo:k4,useReducer:p1,useRef:_4,useState:function(){return p1(tf)},useDebugValue:v2,useDeferredValue:function(t){var e=Ki();return Kn===null?e.memoizedState=t:P4(e,Kn.memoizedState,t)},useTransition:function(){var t=p1(tf)[0],e=Ki().memoizedState;return[t,e]},useMutableSource:m4,useSyncExternalStore:g4,useId:T4,unstable_isNewReconciler:!1};function hs(t,e){if(t&&t.defaultProps){e=bn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Py(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:bn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vg={isMounted:function(t){return(t=t._reactInternals)?Mc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$r(),i=al(t),s=zo(r,i);s.payload=e,n!=null&&(s.callback=n),e=sl(t,s,i),e!==null&&(vs(e,t,i,r),hm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$r(),i=al(t),s=zo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=sl(t,s,i),e!==null&&(vs(e,t,i,r),hm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$r(),r=al(t),i=zo(n,r);i.tag=2,e!=null&&(i.callback=e),e=sl(t,i,r),e!==null&&(vs(e,t,r,n),hm(e,t,r))}};function Nb(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Kd(n,r)||!Kd(i,s):!0}function R4(t,e,n){var r=!1,i=ml,s=e.contextType;return typeof s=="object"&&s!==null?s=Gi(s):(i=ci(e)?Sc:Dr.current,r=e.contextTypes,s=(r=r!=null)?eh(t,i):ml),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Sb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vg.enqueueReplaceState(e,e.state,null)}function Ty(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},u2(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Gi(s):(s=ci(e)?Sc:Dr.current,i.context=eh(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Py(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vg.enqueueReplaceState(i,i.state,null),Km(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ih(t,e){try{var n="",r=e;do n+=AP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function m1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Iy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var JT=typeof WeakMap=="function"?WeakMap:Map;function D4(t,e,n){n=zo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zm||(Zm=!0,Uy=r),Iy(t,e)},n}function M4(t,e,n){n=zo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Iy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Iy(t,e),typeof r!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ab(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new JT;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=dI.bind(null,t,e,n),e.then(t,t))}function Cb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Eb(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zo(-1,1),e.tag=2,sl(n,e,1))),n.lanes|=1),t)}var ZT=na.ReactCurrentOwner,ai=!1;function qr(t,e,n,r){e.child=t===null?h4(e,null,n,r):nh(e,t.child,n,r)}function kb(t,e,n,r,i){n=n.render;var s=e.ref;return qu(e,i),r=m2(t,e,n,r,s,i),n=g2(),t!==null&&!ai?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ko(t,e,i)):(yn&&n&&r2(e),e.flags|=1,qr(t,e,r,i),e.child)}function Pb(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!C2(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,O4(t,e,s,r,i)):(t=ym(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Kd,n(o,r)&&t.ref===e.ref)return Ko(t,e,i)}return e.flags|=1,t=ll(s,r),t.ref=e.ref,t.return=e,e.child=t}function O4(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Kd(s,r)&&t.ref===e.ref)if(ai=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ai=!0);else return e.lanes=t.lanes,Ko(t,e,i)}return jy(t,e,n,r,i)}function F4(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(Mu,wi),wi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,on(Mu,wi),wi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,on(Mu,wi),wi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,on(Mu,wi),wi|=r;return qr(t,e,i,n),e.child}function V4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jy(t,e,n,r,i){var s=ci(n)?Sc:Dr.current;return s=eh(e,s),qu(e,i),n=m2(t,e,n,r,s,i),r=g2(),t!==null&&!ai?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ko(t,e,i)):(yn&&r&&r2(e),e.flags|=1,qr(t,e,n,i),e.child)}function Tb(t,e,n,r,i){if(ci(n)){var s=!0;qm(e)}else s=!1;if(qu(e,i),e.stateNode===null)pm(t,e),R4(e,n,r),Ty(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Gi(u):(u=ci(n)?Sc:Dr.current,u=eh(e,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Sb(e,o,r,u),Va=!1;var m=e.memoizedState;o.state=m,Km(e,r,o,i),l=e.memoizedState,a!==r||m!==l||li.current||Va?(typeof h=="function"&&(Py(e,n,h,r),l=e.memoizedState),(a=Va||Nb(e,n,a,r,m,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,f4(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:hs(e.type,a),o.props=u,p=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Gi(l):(l=ci(n)?Sc:Dr.current,l=eh(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&Sb(e,o,r,l),Va=!1,m=e.memoizedState,o.state=m,Km(e,r,o,i);var v=e.memoizedState;a!==p||m!==v||li.current||Va?(typeof g=="function"&&(Py(e,n,g,r),v=e.memoizedState),(u=Va||Nb(e,n,u,r,m,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ly(t,e,n,r,s,i)}function Ly(t,e,n,r,i,s){V4(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&mb(e,n,!1),Ko(t,e,s);r=e.stateNode,ZT.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=nh(e,t.child,null,s),e.child=nh(e,null,a,s)):qr(t,e,a,s),e.memoizedState=r.state,i&&mb(e,n,!0),e.child}function B4(t){var e=t.stateNode;e.pendingContext?pb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pb(t,e.context,!1),h2(t,e.containerInfo)}function Ib(t,e,n,r,i){return th(),s2(i),e.flags|=256,qr(t,e,n,r),e.child}var Ry={dehydrated:null,treeContext:null,retryLane:0};function Dy(t){return{baseLanes:t,cachePool:null,transitions:null}}function U4(t,e,n){var r=e.pendingProps,i=vn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),on(vn,i&1),t===null)return Ey(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=zg(o,r,0,null),t=gc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Dy(n),e.memoizedState=Ry,t):x2(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return eI(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ll(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ll(a,s):(s=gc(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Dy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ry,r}return s=t.child,t=s.sibling,r=ll(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function x2(t,e){return e=zg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ip(t,e,n,r){return r!==null&&s2(r),nh(e,t.child,null,n),t=x2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=m1(Error(Oe(422))),Ip(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=zg({mode:"visible",children:r.children},i,0,null),s=gc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&nh(e,t.child,null,o),e.child.memoizedState=Dy(o),e.memoizedState=Ry,s);if(!(e.mode&1))return Ip(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Oe(419)),r=m1(s,r,void 0),Ip(t,e,o,r)}if(a=(o&t.childLanes)!==0,ai||a){if(r=nr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Go(t,i),vs(r,t,i,-1))}return A2(),r=m1(Error(Oe(421))),Ip(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=fI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,_i=il(i.nextSibling),Ci=e,yn=!0,ps=null,t!==null&&(zi[qi++]=Oo,zi[qi++]=Fo,zi[qi++]=Ac,Oo=t.id,Fo=t.overflow,Ac=e),e=x2(e,r.children),e.flags|=4096,e)}function jb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ky(t.return,e,n)}function g1(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function z4(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(qr(t,e,r.children,n),r=vn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jb(t,n,e);else if(t.tag===19)jb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(on(vn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ym(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),g1(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ym(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}g1(e,!0,n,null,s);break;case"together":g1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ko(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ec|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Oe(153));if(e.child!==null){for(t=e.child,n=ll(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ll(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tI(t,e,n){switch(e.tag){case 3:B4(e),th();break;case 5:p4(e);break;case 1:ci(e.type)&&qm(e);break;case 4:h2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;on(Wm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(on(vn,vn.current&1),e.flags|=128,null):n&e.child.childLanes?U4(t,e,n):(on(vn,vn.current&1),t=Ko(t,e,n),t!==null?t.sibling:null);on(vn,vn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return z4(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),on(vn,vn.current),r)break;return null;case 22:case 23:return e.lanes=0,F4(t,e,n)}return Ko(t,e,n)}var q4,My,H4,$4;q4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};My=function(){};H4=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,cc(Ks.current);var s=null;switch(n){case"input":i=iy(t,i),r=iy(t,r),s=[];break;case"select":i=bn({},i,{value:void 0}),r=bn({},r,{value:void 0}),s=[];break;case"textarea":i=ay(t,i),r=ay(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Um)}cy(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ud.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ud.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&hn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};$4=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xh(t,e){if(!yn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _r(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nI(t,e,n){var r=e.pendingProps;switch(i2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(e),null;case 1:return ci(e.type)&&zm(),_r(e),null;case 3:return r=e.stateNode,rh(),mn(li),mn(Dr),f2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ps!==null&&(Hy(ps),ps=null))),My(t,e),_r(e),null;case 5:d2(e);var i=cc(Zd.current);if(n=e.type,t!==null&&e.stateNode!=null)H4(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Oe(166));return _r(e),null}if(t=cc(Ks.current),Pp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Hs]=e,r[Xd]=s,t=(e.mode&1)!==0,n){case"dialog":hn("cancel",r),hn("close",r);break;case"iframe":case"object":case"embed":hn("load",r);break;case"video":case"audio":for(i=0;i<ud.length;i++)hn(ud[i],r);break;case"source":hn("error",r);break;case"img":case"image":case"link":hn("error",r),hn("load",r);break;case"details":hn("toggle",r);break;case"input":U5(r,s),hn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},hn("invalid",r);break;case"textarea":q5(r,s),hn("invalid",r)}cy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&kp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&kp(r.textContent,a,t),i=["children",""+a]):Ud.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&hn("scroll",r)}switch(n){case"input":bp(r),z5(r,s,!0);break;case"textarea":bp(r),H5(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Um)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Hs]=e,t[Xd]=r,q4(t,e,!1,!1),e.stateNode=t;e:{switch(o=uy(n,r),n){case"dialog":hn("cancel",t),hn("close",t),i=r;break;case"iframe":case"object":case"embed":hn("load",t),i=r;break;case"video":case"audio":for(i=0;i<ud.length;i++)hn(ud[i],t);i=r;break;case"source":hn("error",t),i=r;break;case"img":case"image":case"link":hn("error",t),hn("load",t),i=r;break;case"details":hn("toggle",t),i=r;break;case"input":U5(t,r),i=iy(t,r),hn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=bn({},r,{value:void 0}),hn("invalid",t);break;case"textarea":q5(t,r),i=ay(t,r),hn("invalid",t);break;default:i=r}cy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_S(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&zd(t,l):typeof l=="number"&&zd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ud.hasOwnProperty(s)?l!=null&&s==="onScroll"&&hn("scroll",t):l!=null&&qv(t,s,l,o))}switch(n){case"input":bp(t),z5(t,r,!1);break;case"textarea":bp(t),H5(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Vu(t,!!r.multiple,s,!1):r.defaultValue!=null&&Vu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Um)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _r(e),null;case 6:if(t&&e.stateNode!=null)$4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Oe(166));if(n=cc(Zd.current),cc(Ks.current),Pp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hs]=e,(s=r.nodeValue!==n)&&(t=Ci,t!==null))switch(t.tag){case 3:kp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hs]=e,e.stateNode=r}return _r(e),null;case 13:if(mn(vn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yn&&_i!==null&&e.mode&1&&!(e.flags&128))c4(),th(),e.flags|=98560,s=!1;else if(s=Pp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Oe(317));s[Hs]=e}else th(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_r(e),s=!1}else ps!==null&&(Hy(ps),ps=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||vn.current&1?Xn===0&&(Xn=3):A2())),e.updateQueue!==null&&(e.flags|=4),_r(e),null);case 4:return rh(),My(t,e),t===null&&Yd(e.stateNode.containerInfo),_r(e),null;case 10:return l2(e.type._context),_r(e),null;case 17:return ci(e.type)&&zm(),_r(e),null;case 19:if(mn(vn),s=e.memoizedState,s===null)return _r(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Xh(s,!1);else{if(Xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ym(t),o!==null){for(e.flags|=128,Xh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return on(vn,vn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ln()>sh&&(e.flags|=128,r=!0,Xh(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ym(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!yn)return _r(e),null}else 2*Ln()-s.renderingStartTime>sh&&n!==1073741824&&(e.flags|=128,r=!0,Xh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ln(),e.sibling=null,n=vn.current,on(vn,r?n&1|2:n&1),e):(_r(e),null);case 22:case 23:return S2(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wi&1073741824&&(_r(e),e.subtreeFlags&6&&(e.flags|=8192)):_r(e),null;case 24:return null;case 25:return null}throw Error(Oe(156,e.tag))}function rI(t,e){switch(i2(e),e.tag){case 1:return ci(e.type)&&zm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rh(),mn(li),mn(Dr),f2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return d2(e),null;case 13:if(mn(vn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Oe(340));th()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return mn(vn),null;case 4:return rh(),null;case 10:return l2(e.type._context),null;case 22:case 23:return S2(),null;case 24:return null;default:return null}}var jp=!1,Tr=!1,iI=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Du(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){En(t,e,r)}else n.current=null}function Oy(t,e,n){try{n()}catch(r){En(t,e,r)}}var Lb=!1;function sI(t,e){if(by=Fm,t=QS(),n2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,p=t,m=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++h===r&&(l=o),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(wy={focusedElem:t,selectionRange:n},Fm=!1,Qe=e;Qe!==null;)if(e=Qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Qe=t;else for(;Qe!==null;){e=Qe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,C=v.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?w:hs(e.type,w),C);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(I){En(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,Qe=t;break}Qe=e.return}return v=Lb,Lb=!1,v}function Sd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Oy(e,n,s)}i=i.next}while(i!==r)}}function Bg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function W4(t){var e=t.alternate;e!==null&&(t.alternate=null,W4(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hs],delete e[Xd],delete e[Sy],delete e[UT],delete e[zT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function G4(t){return t.tag===5||t.tag===3||t.tag===4}function Rb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||G4(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Um));else if(r!==4&&(t=t.child,t!==null))for(Vy(t,e,n),t=t.sibling;t!==null;)Vy(t,e,n),t=t.sibling}function By(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(By(t,e,n),t=t.sibling;t!==null;)By(t,e,n),t=t.sibling}var cr=null,fs=!1;function ja(t,e,n){for(n=n.child;n!==null;)K4(t,e,n),n=n.sibling}function K4(t,e,n){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(jg,n)}catch{}switch(n.tag){case 5:Tr||Du(n,e);case 6:var r=cr,i=fs;cr=null,ja(t,e,n),cr=r,fs=i,cr!==null&&(fs?(t=cr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cr.removeChild(n.stateNode));break;case 18:cr!==null&&(fs?(t=cr,n=n.stateNode,t.nodeType===8?c1(t.parentNode,n):t.nodeType===1&&c1(t,n),Wd(t)):c1(cr,n.stateNode));break;case 4:r=cr,i=fs,cr=n.stateNode.containerInfo,fs=!0,ja(t,e,n),cr=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Oy(n,e,o),i=i.next}while(i!==r)}ja(t,e,n);break;case 1:if(!Tr&&(Du(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){En(n,e,a)}ja(t,e,n);break;case 21:ja(t,e,n);break;case 22:n.mode&1?(Tr=(r=Tr)||n.memoizedState!==null,ja(t,e,n),Tr=r):ja(t,e,n);break;default:ja(t,e,n)}}function Db(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iI),e.forEach(function(r){var i=pI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ls(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:cr=a.stateNode,fs=!1;break e;case 3:cr=a.stateNode.containerInfo,fs=!0;break e;case 4:cr=a.stateNode.containerInfo,fs=!0;break e}a=a.return}if(cr===null)throw Error(Oe(160));K4(s,o,i),cr=null,fs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){En(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Y4(e,t),e=e.sibling}function Y4(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ls(e,t),Fs(t),r&4){try{Sd(3,t,t.return),Bg(3,t)}catch(w){En(t,t.return,w)}try{Sd(5,t,t.return)}catch(w){En(t,t.return,w)}}break;case 1:ls(e,t),Fs(t),r&512&&n!==null&&Du(n,n.return);break;case 5:if(ls(e,t),Fs(t),r&512&&n!==null&&Du(n,n.return),t.flags&32){var i=t.stateNode;try{zd(i,"")}catch(w){En(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&yS(i,s),uy(a,o);var u=uy(a,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?_S(i,p):h==="dangerouslySetInnerHTML"?bS(i,p):h==="children"?zd(i,p):qv(i,h,p,u)}switch(a){case"input":sy(i,s);break;case"textarea":vS(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Vu(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Vu(i,!!s.multiple,s.defaultValue,!0):Vu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xd]=s}catch(w){En(t,t.return,w)}}break;case 6:if(ls(e,t),Fs(t),r&4){if(t.stateNode===null)throw Error(Oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){En(t,t.return,w)}}break;case 3:if(ls(e,t),Fs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wd(e.containerInfo)}catch(w){En(t,t.return,w)}break;case 4:ls(e,t),Fs(t);break;case 13:ls(e,t),Fs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(_2=Ln())),r&4&&Db(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tr=(u=Tr)||h,ls(e,t),Tr=u):ls(e,t),Fs(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Qe=t,h=t.child;h!==null;){for(p=Qe=h;Qe!==null;){switch(m=Qe,g=m.child,m.tag){case 0:case 11:case 14:case 15:Sd(4,m,m.return);break;case 1:Du(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){En(r,n,w)}}break;case 5:Du(m,m.return);break;case 22:if(m.memoizedState!==null){Ob(p);continue}}g!==null?(g.return=m,Qe=g):Ob(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wS("display",o))}catch(w){En(t,t.return,w)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(w){En(t,t.return,w)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ls(e,t),Fs(t),r&4&&Db(t);break;case 21:break;default:ls(e,t),Fs(t)}}function Fs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(G4(n)){var r=n;break e}n=n.return}throw Error(Oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zd(i,""),r.flags&=-33);var s=Rb(t);By(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Rb(t);Vy(t,a,o);break;default:throw Error(Oe(161))}}catch(l){En(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oI(t,e,n){Qe=t,Q4(t)}function Q4(t,e,n){for(var r=(t.mode&1)!==0;Qe!==null;){var i=Qe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||jp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Tr;a=jp;var u=Tr;if(jp=o,(Tr=l)&&!u)for(Qe=i;Qe!==null;)o=Qe,l=o.child,o.tag===22&&o.memoizedState!==null?Fb(i):l!==null?(l.return=o,Qe=l):Fb(i);for(;s!==null;)Qe=s,Q4(s),s=s.sibling;Qe=i,jp=a,Tr=u}Mb(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Qe=s):Mb(t)}}function Mb(t){for(;Qe!==null;){var e=Qe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tr||Bg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:hs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bb(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Wd(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}Tr||e.flags&512&&Fy(e)}catch(m){En(e,e.return,m)}}if(e===t){Qe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Qe=n;break}Qe=e.return}}function Ob(t){for(;Qe!==null;){var e=Qe;if(e===t){Qe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Qe=n;break}Qe=e.return}}function Fb(t){for(;Qe!==null;){var e=Qe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bg(4,e)}catch(l){En(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){En(e,i,l)}}var s=e.return;try{Fy(e)}catch(l){En(e,s,l)}break;case 5:var o=e.return;try{Fy(e)}catch(l){En(e,o,l)}}}catch(l){En(e,e.return,l)}if(e===t){Qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Qe=a;break}Qe=e.return}}var aI=Math.ceil,Jm=na.ReactCurrentDispatcher,b2=na.ReactCurrentOwner,Wi=na.ReactCurrentBatchConfig,Ot=0,nr=null,Hn=null,dr=0,wi=0,Mu=Al(0),Xn=0,rf=null,Ec=0,Ug=0,w2=0,Ad=null,ii=null,_2=0,sh=1/0,Ro=null,Zm=!1,Uy=null,ol=null,Lp=!1,Ya=null,eg=0,Cd=0,zy=null,mm=-1,gm=0;function $r(){return Ot&6?Ln():mm!==-1?mm:mm=Ln()}function al(t){return t.mode&1?Ot&2&&dr!==0?dr&-dr:HT.transition!==null?(gm===0&&(gm=RS()),gm):(t=Yt,t!==0||(t=window.event,t=t===void 0?16:US(t.type)),t):1}function vs(t,e,n,r){if(50<Cd)throw Cd=0,zy=null,Error(Oe(185));Cf(t,n,r),(!(Ot&2)||t!==nr)&&(t===nr&&(!(Ot&2)&&(Ug|=n),Xn===4&&za(t,dr)),ui(t,r),n===1&&Ot===0&&!(e.mode&1)&&(sh=Ln()+500,Og&&Cl()))}function ui(t,e){var n=t.callbackNode;HP(t,e);var r=Om(t,t===nr?dr:0);if(r===0)n!==null&&G5(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&G5(n),e===1)t.tag===0?qT(Vb.bind(null,t)):o4(Vb.bind(null,t)),VT(function(){!(Ot&6)&&Cl()}),n=null;else{switch(DS(r)){case 1:n=Kv;break;case 4:n=jS;break;case 16:n=Mm;break;case 536870912:n=LS;break;default:n=Mm}n=i3(n,X4.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function X4(t,e){if(mm=-1,gm=0,Ot&6)throw Error(Oe(327));var n=t.callbackNode;if(Hu()&&t.callbackNode!==n)return null;var r=Om(t,t===nr?dr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=tg(t,r);else{e=r;var i=Ot;Ot|=2;var s=Z4();(nr!==t||dr!==e)&&(Ro=null,sh=Ln()+500,mc(t,e));do try{uI();break}catch(a){J4(t,a)}while(!0);a2(),Jm.current=s,Ot=i,Hn!==null?e=0:(nr=null,dr=0,e=Xn)}if(e!==0){if(e===2&&(i=my(t),i!==0&&(r=i,e=qy(t,i))),e===1)throw n=rf,mc(t,0),za(t,r),ui(t,Ln()),n;if(e===6)za(t,r);else{if(i=t.current.alternate,!(r&30)&&!lI(i)&&(e=tg(t,r),e===2&&(s=my(t),s!==0&&(r=s,e=qy(t,s))),e===1))throw n=rf,mc(t,0),za(t,r),ui(t,Ln()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Oe(345));case 2:nc(t,ii,Ro);break;case 3:if(za(t,r),(r&130023424)===r&&(e=_2+500-Ln(),10<e)){if(Om(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){$r(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ny(nc.bind(null,t,ii,Ro),e);break}nc(t,ii,Ro);break;case 4:if(za(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ys(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ln()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aI(r/1960))-r,10<r){t.timeoutHandle=Ny(nc.bind(null,t,ii,Ro),r);break}nc(t,ii,Ro);break;case 5:nc(t,ii,Ro);break;default:throw Error(Oe(329))}}}return ui(t,Ln()),t.callbackNode===n?X4.bind(null,t):null}function qy(t,e){var n=Ad;return t.current.memoizedState.isDehydrated&&(mc(t,e).flags|=256),t=tg(t,e),t!==2&&(e=ii,ii=n,e!==null&&Hy(e)),t}function Hy(t){ii===null?ii=t:ii.push.apply(ii,t)}function lI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!bs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function za(t,e){for(e&=~w2,e&=~Ug,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ys(e),r=1<<n;t[n]=-1,e&=~r}}function Vb(t){if(Ot&6)throw Error(Oe(327));Hu();var e=Om(t,0);if(!(e&1))return ui(t,Ln()),null;var n=tg(t,e);if(t.tag!==0&&n===2){var r=my(t);r!==0&&(e=r,n=qy(t,r))}if(n===1)throw n=rf,mc(t,0),za(t,e),ui(t,Ln()),n;if(n===6)throw Error(Oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,nc(t,ii,Ro),ui(t,Ln()),null}function N2(t,e){var n=Ot;Ot|=1;try{return t(e)}finally{Ot=n,Ot===0&&(sh=Ln()+500,Og&&Cl())}}function kc(t){Ya!==null&&Ya.tag===0&&!(Ot&6)&&Hu();var e=Ot;Ot|=1;var n=Wi.transition,r=Yt;try{if(Wi.transition=null,Yt=1,t)return t()}finally{Yt=r,Wi.transition=n,Ot=e,!(Ot&6)&&Cl()}}function S2(){wi=Mu.current,mn(Mu)}function mc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,FT(n)),Hn!==null)for(n=Hn.return;n!==null;){var r=n;switch(i2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zm();break;case 3:rh(),mn(li),mn(Dr),f2();break;case 5:d2(r);break;case 4:rh();break;case 13:mn(vn);break;case 19:mn(vn);break;case 10:l2(r.type._context);break;case 22:case 23:S2()}n=n.return}if(nr=t,Hn=t=ll(t.current,null),dr=wi=e,Xn=0,rf=null,w2=Ug=Ec=0,ii=Ad=null,lc!==null){for(e=0;e<lc.length;e++)if(n=lc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}lc=null}return t}function J4(t,e){do{var n=Hn;try{if(a2(),dm.current=Xm,Qm){for(var r=xn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Qm=!1}if(Cc=0,tr=Kn=xn=null,Nd=!1,ef=0,b2.current=null,n===null||n.return===null){Xn=1,rf=e,Hn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=dr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Cb(o);if(g!==null){g.flags&=-257,Eb(g,o,a,s,e),g.mode&1&&Ab(s,u,e),e=g,l=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){Ab(s,u,e),A2();break e}l=Error(Oe(426))}}else if(yn&&a.mode&1){var C=Cb(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Eb(C,o,a,s,e),s2(ih(l,a));break e}}s=l=ih(l,a),Xn!==4&&(Xn=2),Ad===null?Ad=[s]:Ad.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=D4(s,l,e);xb(s,x);break e;case 1:a=l;var _=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ol===null||!ol.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=M4(s,a,e);xb(s,I);break e}}s=s.return}while(s!==null)}t3(n)}catch(F){e=F,Hn===n&&n!==null&&(Hn=n=n.return);continue}break}while(!0)}function Z4(){var t=Jm.current;return Jm.current=Xm,t===null?Xm:t}function A2(){(Xn===0||Xn===3||Xn===2)&&(Xn=4),nr===null||!(Ec&268435455)&&!(Ug&268435455)||za(nr,dr)}function tg(t,e){var n=Ot;Ot|=2;var r=Z4();(nr!==t||dr!==e)&&(Ro=null,mc(t,e));do try{cI();break}catch(i){J4(t,i)}while(!0);if(a2(),Ot=n,Jm.current=r,Hn!==null)throw Error(Oe(261));return nr=null,dr=0,Xn}function cI(){for(;Hn!==null;)e3(Hn)}function uI(){for(;Hn!==null&&!DP();)e3(Hn)}function e3(t){var e=r3(t.alternate,t,wi);t.memoizedProps=t.pendingProps,e===null?t3(t):Hn=e,b2.current=null}function t3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rI(n,e),n!==null){n.flags&=32767,Hn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xn=6,Hn=null;return}}else if(n=nI(n,e,wi),n!==null){Hn=n;return}if(e=e.sibling,e!==null){Hn=e;return}Hn=e=t}while(e!==null);Xn===0&&(Xn=5)}function nc(t,e,n){var r=Yt,i=Wi.transition;try{Wi.transition=null,Yt=1,hI(t,e,n,r)}finally{Wi.transition=i,Yt=r}return null}function hI(t,e,n,r){do Hu();while(Ya!==null);if(Ot&6)throw Error(Oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if($P(t,s),t===nr&&(Hn=nr=null,dr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lp||(Lp=!0,i3(Mm,function(){return Hu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wi.transition,Wi.transition=null;var o=Yt;Yt=1;var a=Ot;Ot|=4,b2.current=null,sI(t,n),Y4(n,t),IT(wy),Fm=!!by,wy=by=null,t.current=n,oI(n),MP(),Ot=a,Yt=o,Wi.transition=s}else t.current=n;if(Lp&&(Lp=!1,Ya=t,eg=i),s=t.pendingLanes,s===0&&(ol=null),VP(n.stateNode),ui(t,Ln()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zm)throw Zm=!1,t=Uy,Uy=null,t;return eg&1&&t.tag!==0&&Hu(),s=t.pendingLanes,s&1?t===zy?Cd++:(Cd=0,zy=t):Cd=0,Cl(),null}function Hu(){if(Ya!==null){var t=DS(eg),e=Wi.transition,n=Yt;try{if(Wi.transition=null,Yt=16>t?16:t,Ya===null)var r=!1;else{if(t=Ya,Ya=null,eg=0,Ot&6)throw Error(Oe(331));var i=Ot;for(Ot|=4,Qe=t.current;Qe!==null;){var s=Qe,o=s.child;if(Qe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Qe=u;Qe!==null;){var h=Qe;switch(h.tag){case 0:case 11:case 15:Sd(8,h,s)}var p=h.child;if(p!==null)p.return=h,Qe=p;else for(;Qe!==null;){h=Qe;var m=h.sibling,g=h.return;if(W4(h),h===u){Qe=null;break}if(m!==null){m.return=g,Qe=m;break}Qe=g}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}Qe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Qe=o;else e:for(;Qe!==null;){if(s=Qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Sd(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Qe=x;break e}Qe=s.return}}var _=t.current;for(Qe=_;Qe!==null;){o=Qe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Qe=S;else e:for(o=_;Qe!==null;){if(a=Qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bg(9,a)}}catch(F){En(a,a.return,F)}if(a===o){Qe=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,Qe=I;break e}Qe=a.return}}if(Ot=i,Cl(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(jg,t)}catch{}r=!0}return r}finally{Yt=n,Wi.transition=e}}return!1}function Bb(t,e,n){e=ih(n,e),e=D4(t,e,1),t=sl(t,e,1),e=$r(),t!==null&&(Cf(t,1,e),ui(t,e))}function En(t,e,n){if(t.tag===3)Bb(t,t,n);else for(;e!==null;){if(e.tag===3){Bb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ol===null||!ol.has(r))){t=ih(n,t),t=M4(e,t,1),e=sl(e,t,1),t=$r(),e!==null&&(Cf(e,1,t),ui(e,t));break}}e=e.return}}function dI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$r(),t.pingedLanes|=t.suspendedLanes&n,nr===t&&(dr&n)===n&&(Xn===4||Xn===3&&(dr&130023424)===dr&&500>Ln()-_2?mc(t,0):w2|=n),ui(t,e)}function n3(t,e){e===0&&(t.mode&1?(e=Np,Np<<=1,!(Np&130023424)&&(Np=4194304)):e=1);var n=$r();t=Go(t,e),t!==null&&(Cf(t,e,n),ui(t,n))}function fI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),n3(t,n)}function pI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Oe(314))}r!==null&&r.delete(e),n3(t,n)}var r3;r3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||li.current)ai=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ai=!1,tI(t,e,n);ai=!!(t.flags&131072)}else ai=!1,yn&&e.flags&1048576&&a4(e,$m,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pm(t,e),t=e.pendingProps;var i=eh(e,Dr.current);qu(e,n),i=m2(null,e,r,t,i,n);var s=g2();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ci(r)?(s=!0,qm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,u2(e),i.updater=Vg,e.stateNode=i,i._reactInternals=e,Ty(e,r,t,n),e=Ly(null,e,r,!0,s,n)):(e.tag=0,yn&&s&&r2(e),qr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=gI(r),t=hs(r,t),i){case 0:e=jy(null,e,r,t,n);break e;case 1:e=Tb(null,e,r,t,n);break e;case 11:e=kb(null,e,r,t,n);break e;case 14:e=Pb(null,e,r,hs(r.type,t),n);break e}throw Error(Oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hs(r,i),jy(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hs(r,i),Tb(t,e,r,i,n);case 3:e:{if(B4(e),t===null)throw Error(Oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,f4(t,e),Km(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ih(Error(Oe(423)),e),e=Ib(t,e,r,n,i);break e}else if(r!==i){i=ih(Error(Oe(424)),e),e=Ib(t,e,r,n,i);break e}else for(_i=il(e.stateNode.containerInfo.firstChild),Ci=e,yn=!0,ps=null,n=h4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(th(),r===i){e=Ko(t,e,n);break e}qr(t,e,r,n)}e=e.child}return e;case 5:return p4(e),t===null&&Ey(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,_y(r,i)?o=null:s!==null&&_y(r,s)&&(e.flags|=32),V4(t,e),qr(t,e,o,n),e.child;case 6:return t===null&&Ey(e),null;case 13:return U4(t,e,n);case 4:return h2(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=nh(e,null,r,n):qr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hs(r,i),kb(t,e,r,i,n);case 7:return qr(t,e,e.pendingProps,n),e.child;case 8:return qr(t,e,e.pendingProps.children,n),e.child;case 12:return qr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,on(Wm,r._currentValue),r._currentValue=o,s!==null)if(bs(s.value,o)){if(s.children===i.children&&!li.current){e=Ko(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=zo(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),ky(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ky(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}qr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,qu(e,n),i=Gi(i),r=r(i),e.flags|=1,qr(t,e,r,n),e.child;case 14:return r=e.type,i=hs(r,e.pendingProps),i=hs(r.type,i),Pb(t,e,r,i,n);case 15:return O4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hs(r,i),pm(t,e),e.tag=1,ci(r)?(t=!0,qm(e)):t=!1,qu(e,n),R4(e,r,i),Ty(e,r,i,n),Ly(null,e,r,!0,t,n);case 19:return z4(t,e,n);case 22:return F4(t,e,n)}throw Error(Oe(156,e.tag))};function i3(t,e){return IS(t,e)}function mI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(t,e,n,r){return new mI(t,e,n,r)}function C2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gI(t){if(typeof t=="function")return C2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$v)return 11;if(t===Wv)return 14}return 2}function ll(t,e){var n=t.alternate;return n===null?(n=Hi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ym(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")C2(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cu:return gc(n.children,i,s,e);case Hv:o=8,i|=8;break;case ey:return t=Hi(12,n,e,i|2),t.elementType=ey,t.lanes=s,t;case ty:return t=Hi(13,n,e,i),t.elementType=ty,t.lanes=s,t;case ny:return t=Hi(19,n,e,i),t.elementType=ny,t.lanes=s,t;case pS:return zg(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dS:o=10;break e;case fS:o=9;break e;case $v:o=11;break e;case Wv:o=14;break e;case Fa:o=16,r=null;break e}throw Error(Oe(130,t==null?t:typeof t,""))}return e=Hi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function gc(t,e,n,r){return t=Hi(7,t,r,e),t.lanes=n,t}function zg(t,e,n,r){return t=Hi(22,t,r,e),t.elementType=pS,t.lanes=n,t.stateNode={isHidden:!1},t}function y1(t,e,n){return t=Hi(6,t,null,e),t.lanes=n,t}function v1(t,e,n){return e=Hi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J0(0),this.expirationTimes=J0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function E2(t,e,n,r,i,s,o,a,l){return t=new yI(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Hi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},u2(s),t}function vI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Au,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function s3(t){if(!t)return ml;t=t._reactInternals;e:{if(Mc(t)!==t||t.tag!==1)throw Error(Oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ci(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Oe(171))}if(t.tag===1){var n=t.type;if(ci(n))return s4(t,n,e)}return e}function o3(t,e,n,r,i,s,o,a,l){return t=E2(n,r,!0,t,i,s,o,a,l),t.context=s3(null),n=t.current,r=$r(),i=al(n),s=zo(r,i),s.callback=e??null,sl(n,s,i),t.current.lanes=i,Cf(t,i,r),ui(t,r),t}function qg(t,e,n,r){var i=e.current,s=$r(),o=al(i);return n=s3(n),e.context===null?e.context=n:e.pendingContext=n,e=zo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=sl(i,e,o),t!==null&&(vs(t,i,o,s),hm(t,i,o)),o}function ng(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ub(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function k2(t,e){Ub(t,e),(t=t.alternate)&&Ub(t,e)}function xI(){return null}var a3=typeof reportError=="function"?reportError:function(t){console.error(t)};function P2(t){this._internalRoot=t}Hg.prototype.render=P2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Oe(409));qg(t,e,null,null)};Hg.prototype.unmount=P2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kc(function(){qg(null,t,null,null)}),e[Wo]=null}};function Hg(t){this._internalRoot=t}Hg.prototype.unstable_scheduleHydration=function(t){if(t){var e=FS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ua.length&&e!==0&&e<Ua[n].priority;n++);Ua.splice(n,0,t),n===0&&BS(t)}};function T2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zb(){}function bI(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ng(o);s.call(u)}}var o=o3(e,r,t,0,null,!1,!1,"",zb);return t._reactRootContainer=o,t[Wo]=o.current,Yd(t.nodeType===8?t.parentNode:t),kc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ng(l);a.call(u)}}var l=E2(t,0,!1,null,null,!1,!1,"",zb);return t._reactRootContainer=l,t[Wo]=l.current,Yd(t.nodeType===8?t.parentNode:t),kc(function(){qg(e,l,n,r)}),l}function Wg(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ng(o);a.call(l)}}qg(e,o,t,i)}else o=bI(n,e,t,i,r);return ng(o)}MS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=cd(e.pendingLanes);n!==0&&(Yv(e,n|1),ui(e,Ln()),!(Ot&6)&&(sh=Ln()+500,Cl()))}break;case 13:kc(function(){var r=Go(t,1);if(r!==null){var i=$r();vs(r,t,1,i)}}),k2(t,1)}};Qv=function(t){if(t.tag===13){var e=Go(t,134217728);if(e!==null){var n=$r();vs(e,t,134217728,n)}k2(t,134217728)}};OS=function(t){if(t.tag===13){var e=al(t),n=Go(t,e);if(n!==null){var r=$r();vs(n,t,e,r)}k2(t,e)}};FS=function(){return Yt};VS=function(t,e){var n=Yt;try{return Yt=t,e()}finally{Yt=n}};dy=function(t,e,n){switch(e){case"input":if(sy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Mg(r);if(!i)throw Error(Oe(90));gS(r),sy(r,i)}}}break;case"textarea":vS(t,n);break;case"select":e=n.value,e!=null&&Vu(t,!!n.multiple,e,!1)}};AS=N2;CS=kc;var wI={usingClientEntryPoint:!1,Events:[kf,Tu,Mg,NS,SS,N2]},Jh={findFiberByHostInstance:ac,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_I={bundleType:Jh.bundleType,version:Jh.version,rendererPackageName:Jh.rendererPackageName,rendererConfig:Jh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:na.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=PS(t),t===null?null:t.stateNode},findFiberByHostInstance:Jh.findFiberByHostInstance||xI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rp.isDisabled&&Rp.supportsFiber)try{jg=Rp.inject(_I),Gs=Rp}catch{}}Pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wI;Pi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T2(e))throw Error(Oe(200));return vI(t,e,null,n)};Pi.createRoot=function(t,e){if(!T2(t))throw Error(Oe(299));var n=!1,r="",i=a3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=E2(t,1,!1,null,null,n,!1,r,i),t[Wo]=e.current,Yd(t.nodeType===8?t.parentNode:t),new P2(e)};Pi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Oe(188)):(t=Object.keys(t).join(","),Error(Oe(268,t)));return t=PS(e),t=t===null?null:t.stateNode,t};Pi.flushSync=function(t){return kc(t)};Pi.hydrate=function(t,e,n){if(!$g(e))throw Error(Oe(200));return Wg(null,t,e,!0,n)};Pi.hydrateRoot=function(t,e,n){if(!T2(t))throw Error(Oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=a3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=o3(e,null,t,1,n??null,i,!1,s,o),t[Wo]=e.current,Yd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Hg(e)};Pi.render=function(t,e,n){if(!$g(e))throw Error(Oe(200));return Wg(null,t,e,!1,n)};Pi.unmountComponentAtNode=function(t){if(!$g(t))throw Error(Oe(40));return t._reactRootContainer?(kc(function(){Wg(null,null,t,!1,function(){t._reactRootContainer=null,t[Wo]=null})}),!0):!1};Pi.unstable_batchedUpdates=N2;Pi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$g(n))throw Error(Oe(200));if(t==null||t._reactInternals===void 0)throw Error(Oe(38));return Wg(t,e,n,!1,r)};Pi.version="18.3.1-next-f1338f8080-20240426";function l3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l3)}catch(t){console.error(t)}}l3(),lS.exports=Pi;var NI=lS.exports,c3,qb=NI;c3=qb.createRoot,qb.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),St=(t,e)=>{const n=we.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},h)=>we.createElement("svg",{ref:h,...SI,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${AI(t)}`,a].join(" "),...u},[...e.map(([p,m])=>we.createElement(p,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=St("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=St("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=St("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=St("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=St("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=St("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=St("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=St("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=St("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=St("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=St("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=St("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=St("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=St("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=St("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=St("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=St("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=St("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=St("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=St("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=St("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=St("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=St("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=St("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=St("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=St("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=St("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=St("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=St("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=St("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=St("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=St("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=St("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=St("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=St("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=St("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=St("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=St("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=St("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ba={errors:{invalidCredentials:"Credenciales inválidas"},modules:{appointments:"Gestión de Citas",products:"Gestión de Productos",sales:"Gestión de Ventas",clients:"Gestión de Clientes",pettyCash:"Gestión de Caja Chica",expenses:"Gestión de Gastos",credits:"Gestión de Créditos",staff:"Gestión de Colaboradores",reports:"Reportes",settings:"Configuración"},buttons:{login:"Iniciar Sesión",logout:"Cerrar Sesión"},placeholders:{username:"Usuario",password:"Contraseña"},underConstruction:"Este módulo está en construcción"};function WI({username:t,password:e,error:n,onUsernameChange:r,onPasswordChange:i,onSubmit:s,primaryColor:o,loginButtonColor:a}){return c.jsxs("form",{className:"mt-8 space-y-6",onSubmit:s,children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"username",className:"sr-only",children:Ba.placeholders.username}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(M2,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:t,onChange:l=>r(l.target.value),className:"appearance-none relative block w-full px-12 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:z-10 sm:text-sm",style:{"--tw-ring-color":o},placeholder:Ba.placeholders.username})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"sr-only",children:Ba.placeholders.password}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(MI,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:e,onChange:l=>i(l.target.value),className:"appearance-none relative block w-full px-12 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:z-10 sm:text-sm",style:{"--tw-ring-color":o},placeholder:Ba.placeholders.password})]})]})]}),n&&c.jsx("p",{className:"text-red-500 text-sm text-center",children:n==="Invalid credentials"?Ba.errors.invalidCredentials:n}),c.jsx("button",{type:"submit",style:{backgroundColor:a},className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors",children:Ba.buttons.login})]})}function GI(){return c.jsx("header",{className:"bg-white shadow-sm",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:c.jsx("div",{className:"flex items-center justify-end"})})})}const $b={name:"MASTER FACTU",slogan:"TU NEGOCIO EN UN CLICK",year:new Date().getFullYear()},Wb={width:70,fontSize:10,showLogo:!0,showHeader:!0,showFooter:!0,headerText:"",footerText:"¡Gracias por su compra!",additionalNotes:"Este documento es un comprobante válido",logo:{url:"",width:150,height:80},header:{title:$b.name,subtitle:$b.slogan,address:"",phone:"",email:""}};var Gb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},KI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},p3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(m=64)),r.push(n[h],n[p],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(f3(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new YI;const m=s<<2|a>>4;if(r.push(m),u!==64){const g=a<<4&240|u>>2;if(r.push(g),p!==64){const v=u<<6&192|p;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QI=function(t){const e=f3(t);return p3.encodeByteArray(e,!0)},rg=function(t){return QI(t).replace(/\./g,"")},m3=function(t){try{return p3.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=()=>XI().__FIREBASE_DEFAULTS__,ZI=()=>{if(typeof process>"u"||typeof Gb>"u")return;const t=Gb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ej=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&m3(t[1]);return e&&JSON.parse(e)},Qg=()=>{try{return JI()||ZI()||ej()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},g3=t=>{var e,n;return(n=(e=Qg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},y3=t=>{const e=g3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},v3=()=>{var t;return(t=Qg())===null||t===void 0?void 0:t.config},x3=t=>{var e;return(e=Qg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rg(JSON.stringify(n)),rg(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mr())}function rj(){var t;const e=(t=Qg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ij(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aj(){const t=Mr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lj(){return!rj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cj(){try{return typeof indexedDB=="object"}catch{return!1}}function uj(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj="FirebaseError";class ao extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hj,Object.setPrototypeOf(this,ao.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jf.prototype.create)}}class jf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?dj(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ao(i,a,r)}}function dj(t,e){return t.replace(fj,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const fj=/\{\$([^}]+)}/g;function pj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ig(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Kb(s)&&Kb(o)){if(!ig(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Kb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mj(t,e){const n=new gj(t,e);return n.subscribe.bind(n)}class gj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yj(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=x1),i.error===void 0&&(i.error=x1),i.complete===void 0&&(i.complete=x1);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function x1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t){return t&&t._delegate?t._delegate:t}class gl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tj;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bj(e))try{this.getOrInitializeService({instanceIdentifier:rc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=rc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rc){return this.instances.has(e)}getOptions(e=rc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rc){return this.component?this.component.multipleInstances?e:rc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xj(t){return t===rc?void 0:t}function bj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Tt||(Tt={}));const _j={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},Nj=Tt.INFO,Sj={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},Aj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Sj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class V2{constructor(e){this.name=e,this._logLevel=Nj,this._logHandler=Aj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_j[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...e),this._logHandler(this,Tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...e),this._logHandler(this,Tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...e),this._logHandler(this,Tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...e),this._logHandler(this,Tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...e),this._logHandler(this,Tt.ERROR,...e)}}const Cj=(t,e)=>e.some(n=>t instanceof n);let Yb,Qb;function Ej(){return Yb||(Yb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kj(){return Qb||(Qb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w3=new WeakMap,$y=new WeakMap,_3=new WeakMap,b1=new WeakMap,B2=new WeakMap;function Pj(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(cl(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&w3.set(n,t)}).catch(()=>{}),B2.set(e,t),e}function Tj(t){if($y.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});$y.set(t,e)}let Wy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $y.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ij(t){Wy=t(Wy)}function jj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(w1(this),e,...n);return _3.set(r,e.sort?e.sort():[e]),cl(r)}:kj().includes(t)?function(...e){return t.apply(w1(this),e),cl(w3.get(this))}:function(...e){return cl(t.apply(w1(this),e))}}function Lj(t){return typeof t=="function"?jj(t):(t instanceof IDBTransaction&&Tj(t),Cj(t,Ej())?new Proxy(t,Wy):t)}function cl(t){if(t instanceof IDBRequest)return Pj(t);if(b1.has(t))return b1.get(t);const e=Lj(t);return e!==t&&(b1.set(t,e),B2.set(e,t)),e}const w1=t=>B2.get(t);function Rj(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=cl(o);return r&&o.addEventListener("upgradeneeded",l=>{r(cl(o.result),l.oldVersion,l.newVersion,cl(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Dj=["get","getKey","getAll","getAllKeys","count"],Mj=["put","add","delete","clear"],_1=new Map;function Xb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_1.get(e))return _1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Mj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Dj.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return _1.set(e,s),s}Ij(t=>({...t,get:(e,n,r)=>Xb(e,n)||t.get(e,n,r),has:(e,n)=>!!Xb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Fj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gy="@firebase/app",Jb="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new V2("@firebase/app"),Vj="@firebase/app-compat",Bj="@firebase/analytics-compat",Uj="@firebase/analytics",zj="@firebase/app-check-compat",qj="@firebase/app-check",Hj="@firebase/auth",$j="@firebase/auth-compat",Wj="@firebase/database",Gj="@firebase/data-connect",Kj="@firebase/database-compat",Yj="@firebase/functions",Qj="@firebase/functions-compat",Xj="@firebase/installations",Jj="@firebase/installations-compat",Zj="@firebase/messaging",e6="@firebase/messaging-compat",t6="@firebase/performance",n6="@firebase/performance-compat",r6="@firebase/remote-config",i6="@firebase/remote-config-compat",s6="@firebase/storage",o6="@firebase/storage-compat",a6="@firebase/firestore",l6="@firebase/vertexai-preview",c6="@firebase/firestore-compat",u6="firebase",h6="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="[DEFAULT]",d6={[Gy]:"fire-core",[Vj]:"fire-core-compat",[Uj]:"fire-analytics",[Bj]:"fire-analytics-compat",[qj]:"fire-app-check",[zj]:"fire-app-check-compat",[Hj]:"fire-auth",[$j]:"fire-auth-compat",[Wj]:"fire-rtdb",[Gj]:"fire-data-connect",[Kj]:"fire-rtdb-compat",[Yj]:"fire-fn",[Qj]:"fire-fn-compat",[Xj]:"fire-iid",[Jj]:"fire-iid-compat",[Zj]:"fire-fcm",[e6]:"fire-fcm-compat",[t6]:"fire-perf",[n6]:"fire-perf-compat",[r6]:"fire-rc",[i6]:"fire-rc-compat",[s6]:"fire-gcs",[o6]:"fire-gcs-compat",[a6]:"fire-fst",[c6]:"fire-fst-compat",[l6]:"fire-vertex","fire-js":"fire-js",[u6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=new Map,f6=new Map,Yy=new Map;function Zb(t,e){try{t.container.addComponent(e)}catch(n){Yo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pc(t){const e=t.name;if(Yy.has(e))return Yo.debug(`There were multiple attempts to register component ${e}.`),!1;Yy.set(e,t);for(const n of sg.values())Zb(n,t);for(const n of f6.values())Zb(n,t);return!0}function Xg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qa(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ul=new jf("app","Firebase",p6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ul.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=h6;function N3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ky,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ul.create("bad-app-name",{appName:String(i)});if(n||(n=v3()),!n)throw ul.create("no-options");const s=sg.get(i);if(s){if(ig(n,s.options)&&ig(r,s.config))return s;throw ul.create("duplicate-app",{appName:i})}const o=new wj(i);for(const l of Yy.values())o.addComponent(l);const a=new m6(n,r,o);return sg.set(i,a),a}function U2(t=Ky){const e=sg.get(t);if(!e&&t===Ky&&v3())return N3();if(!e)throw ul.create("no-app",{appName:t});return e}function Ys(t,e,n){var r;let i=(r=d6[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yo.warn(a.join(" "));return}Pc(new gl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6="firebase-heartbeat-database",y6=1,sf="firebase-heartbeat-store";let N1=null;function S3(){return N1||(N1=Rj(g6,y6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sf)}catch(n){console.warn(n)}}}}).catch(t=>{throw ul.create("idb-open",{originalErrorMessage:t.message})})),N1}async function v6(t){try{const n=(await S3()).transaction(sf),r=await n.objectStore(sf).get(A3(t));return await n.done,r}catch(e){if(e instanceof ao)Yo.warn(e.message);else{const n=ul.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yo.warn(n.message)}}}async function ew(t,e){try{const r=(await S3()).transaction(sf,"readwrite");await r.objectStore(sf).put(e,A3(t)),await r.done}catch(n){if(n instanceof ao)Yo.warn(n.message);else{const r=ul.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yo.warn(r.message)}}}function A3(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=1024,b6=30*24*60*60*1e3;class w6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=b6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tw(),{heartbeatsToSend:r,unsentEntries:i}=_6(this._heartbeatsCache.heartbeats),s=rg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Yo.warn(n),""}}}function tw(){return new Date().toISOString().substring(0,10)}function _6(t,e=x6){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),nw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class N6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cj()?uj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await v6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ew(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ew(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nw(t){return rg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t){Pc(new gl("platform-logger",e=>new Oj(e),"PRIVATE")),Pc(new gl("heartbeat",e=>new w6(e),"PRIVATE")),Ys(Gy,Jb,t),Ys(Gy,Jb,"esm2017"),Ys("fire-js","")}S6("");var rw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yc,C3;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,N){function L(){}L.prototype=N.prototype,P.D=N.prototype,P.prototype=new L,P.prototype.constructor=P,P.C=function(M,k,T){for(var D=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)D[Y-2]=arguments[Y];return N.prototype[k].apply(M,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,N,L){L||(L=0);var M=Array(16);if(typeof N=="string")for(var k=0;16>k;++k)M[k]=N.charCodeAt(L++)|N.charCodeAt(L++)<<8|N.charCodeAt(L++)<<16|N.charCodeAt(L++)<<24;else for(k=0;16>k;++k)M[k]=N[L++]|N[L++]<<8|N[L++]<<16|N[L++]<<24;N=P.g[0],L=P.g[1],k=P.g[2];var T=P.g[3],D=N+(T^L&(k^T))+M[0]+3614090360&4294967295;N=L+(D<<7&4294967295|D>>>25),D=T+(k^N&(L^k))+M[1]+3905402710&4294967295,T=N+(D<<12&4294967295|D>>>20),D=k+(L^T&(N^L))+M[2]+606105819&4294967295,k=T+(D<<17&4294967295|D>>>15),D=L+(N^k&(T^N))+M[3]+3250441966&4294967295,L=k+(D<<22&4294967295|D>>>10),D=N+(T^L&(k^T))+M[4]+4118548399&4294967295,N=L+(D<<7&4294967295|D>>>25),D=T+(k^N&(L^k))+M[5]+1200080426&4294967295,T=N+(D<<12&4294967295|D>>>20),D=k+(L^T&(N^L))+M[6]+2821735955&4294967295,k=T+(D<<17&4294967295|D>>>15),D=L+(N^k&(T^N))+M[7]+4249261313&4294967295,L=k+(D<<22&4294967295|D>>>10),D=N+(T^L&(k^T))+M[8]+1770035416&4294967295,N=L+(D<<7&4294967295|D>>>25),D=T+(k^N&(L^k))+M[9]+2336552879&4294967295,T=N+(D<<12&4294967295|D>>>20),D=k+(L^T&(N^L))+M[10]+4294925233&4294967295,k=T+(D<<17&4294967295|D>>>15),D=L+(N^k&(T^N))+M[11]+2304563134&4294967295,L=k+(D<<22&4294967295|D>>>10),D=N+(T^L&(k^T))+M[12]+1804603682&4294967295,N=L+(D<<7&4294967295|D>>>25),D=T+(k^N&(L^k))+M[13]+4254626195&4294967295,T=N+(D<<12&4294967295|D>>>20),D=k+(L^T&(N^L))+M[14]+2792965006&4294967295,k=T+(D<<17&4294967295|D>>>15),D=L+(N^k&(T^N))+M[15]+1236535329&4294967295,L=k+(D<<22&4294967295|D>>>10),D=N+(k^T&(L^k))+M[1]+4129170786&4294967295,N=L+(D<<5&4294967295|D>>>27),D=T+(L^k&(N^L))+M[6]+3225465664&4294967295,T=N+(D<<9&4294967295|D>>>23),D=k+(N^L&(T^N))+M[11]+643717713&4294967295,k=T+(D<<14&4294967295|D>>>18),D=L+(T^N&(k^T))+M[0]+3921069994&4294967295,L=k+(D<<20&4294967295|D>>>12),D=N+(k^T&(L^k))+M[5]+3593408605&4294967295,N=L+(D<<5&4294967295|D>>>27),D=T+(L^k&(N^L))+M[10]+38016083&4294967295,T=N+(D<<9&4294967295|D>>>23),D=k+(N^L&(T^N))+M[15]+3634488961&4294967295,k=T+(D<<14&4294967295|D>>>18),D=L+(T^N&(k^T))+M[4]+3889429448&4294967295,L=k+(D<<20&4294967295|D>>>12),D=N+(k^T&(L^k))+M[9]+568446438&4294967295,N=L+(D<<5&4294967295|D>>>27),D=T+(L^k&(N^L))+M[14]+3275163606&4294967295,T=N+(D<<9&4294967295|D>>>23),D=k+(N^L&(T^N))+M[3]+4107603335&4294967295,k=T+(D<<14&4294967295|D>>>18),D=L+(T^N&(k^T))+M[8]+1163531501&4294967295,L=k+(D<<20&4294967295|D>>>12),D=N+(k^T&(L^k))+M[13]+2850285829&4294967295,N=L+(D<<5&4294967295|D>>>27),D=T+(L^k&(N^L))+M[2]+4243563512&4294967295,T=N+(D<<9&4294967295|D>>>23),D=k+(N^L&(T^N))+M[7]+1735328473&4294967295,k=T+(D<<14&4294967295|D>>>18),D=L+(T^N&(k^T))+M[12]+2368359562&4294967295,L=k+(D<<20&4294967295|D>>>12),D=N+(L^k^T)+M[5]+4294588738&4294967295,N=L+(D<<4&4294967295|D>>>28),D=T+(N^L^k)+M[8]+2272392833&4294967295,T=N+(D<<11&4294967295|D>>>21),D=k+(T^N^L)+M[11]+1839030562&4294967295,k=T+(D<<16&4294967295|D>>>16),D=L+(k^T^N)+M[14]+4259657740&4294967295,L=k+(D<<23&4294967295|D>>>9),D=N+(L^k^T)+M[1]+2763975236&4294967295,N=L+(D<<4&4294967295|D>>>28),D=T+(N^L^k)+M[4]+1272893353&4294967295,T=N+(D<<11&4294967295|D>>>21),D=k+(T^N^L)+M[7]+4139469664&4294967295,k=T+(D<<16&4294967295|D>>>16),D=L+(k^T^N)+M[10]+3200236656&4294967295,L=k+(D<<23&4294967295|D>>>9),D=N+(L^k^T)+M[13]+681279174&4294967295,N=L+(D<<4&4294967295|D>>>28),D=T+(N^L^k)+M[0]+3936430074&4294967295,T=N+(D<<11&4294967295|D>>>21),D=k+(T^N^L)+M[3]+3572445317&4294967295,k=T+(D<<16&4294967295|D>>>16),D=L+(k^T^N)+M[6]+76029189&4294967295,L=k+(D<<23&4294967295|D>>>9),D=N+(L^k^T)+M[9]+3654602809&4294967295,N=L+(D<<4&4294967295|D>>>28),D=T+(N^L^k)+M[12]+3873151461&4294967295,T=N+(D<<11&4294967295|D>>>21),D=k+(T^N^L)+M[15]+530742520&4294967295,k=T+(D<<16&4294967295|D>>>16),D=L+(k^T^N)+M[2]+3299628645&4294967295,L=k+(D<<23&4294967295|D>>>9),D=N+(k^(L|~T))+M[0]+4096336452&4294967295,N=L+(D<<6&4294967295|D>>>26),D=T+(L^(N|~k))+M[7]+1126891415&4294967295,T=N+(D<<10&4294967295|D>>>22),D=k+(N^(T|~L))+M[14]+2878612391&4294967295,k=T+(D<<15&4294967295|D>>>17),D=L+(T^(k|~N))+M[5]+4237533241&4294967295,L=k+(D<<21&4294967295|D>>>11),D=N+(k^(L|~T))+M[12]+1700485571&4294967295,N=L+(D<<6&4294967295|D>>>26),D=T+(L^(N|~k))+M[3]+2399980690&4294967295,T=N+(D<<10&4294967295|D>>>22),D=k+(N^(T|~L))+M[10]+4293915773&4294967295,k=T+(D<<15&4294967295|D>>>17),D=L+(T^(k|~N))+M[1]+2240044497&4294967295,L=k+(D<<21&4294967295|D>>>11),D=N+(k^(L|~T))+M[8]+1873313359&4294967295,N=L+(D<<6&4294967295|D>>>26),D=T+(L^(N|~k))+M[15]+4264355552&4294967295,T=N+(D<<10&4294967295|D>>>22),D=k+(N^(T|~L))+M[6]+2734768916&4294967295,k=T+(D<<15&4294967295|D>>>17),D=L+(T^(k|~N))+M[13]+1309151649&4294967295,L=k+(D<<21&4294967295|D>>>11),D=N+(k^(L|~T))+M[4]+4149444226&4294967295,N=L+(D<<6&4294967295|D>>>26),D=T+(L^(N|~k))+M[11]+3174756917&4294967295,T=N+(D<<10&4294967295|D>>>22),D=k+(N^(T|~L))+M[2]+718787259&4294967295,k=T+(D<<15&4294967295|D>>>17),D=L+(T^(k|~N))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+N&4294967295,P.g[1]=P.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+k&4294967295,P.g[3]=P.g[3]+T&4294967295}r.prototype.u=function(P,N){N===void 0&&(N=P.length);for(var L=N-this.blockSize,M=this.B,k=this.h,T=0;T<N;){if(k==0)for(;T<=L;)i(this,P,T),T+=this.blockSize;if(typeof P=="string"){for(;T<N;)if(M[k++]=P.charCodeAt(T++),k==this.blockSize){i(this,M),k=0;break}}else for(;T<N;)if(M[k++]=P[T++],k==this.blockSize){i(this,M),k=0;break}}this.h=k,this.o+=N},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var N=1;N<P.length-8;++N)P[N]=0;var L=8*this.o;for(N=P.length-8;N<P.length;++N)P[N]=L&255,L/=256;for(this.u(P),P=Array(16),N=L=0;4>N;++N)for(var M=0;32>M;M+=8)P[L++]=this.g[N]>>>M&255;return P};function s(P,N){var L=a;return Object.prototype.hasOwnProperty.call(L,P)?L[P]:L[P]=N(P)}function o(P,N){this.h=N;for(var L=[],M=!0,k=P.length-1;0<=k;k--){var T=P[k]|0;M&&T==N||(L[k]=T,M=!1)}this.g=L}var a={};function l(P){return-128<=P&&128>P?s(P,function(N){return new o([N|0],0>N?-1:0)}):new o([P|0],0>P?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return p;if(0>P)return C(u(-P));for(var N=[],L=1,M=0;P>=L;M++)N[M]=P/L|0,L*=4294967296;return new o(N,0)}function h(P,N){if(P.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(P.charAt(0)=="-")return C(h(P.substring(1),N));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=u(Math.pow(N,8)),M=p,k=0;k<P.length;k+=8){var T=Math.min(8,P.length-k),D=parseInt(P.substring(k,k+T),N);8>T?(T=u(Math.pow(N,T)),M=M.j(T).add(u(D))):(M=M.j(L),M=M.add(u(D)))}return M}var p=l(0),m=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-C(this).m();for(var P=0,N=1,L=0;L<this.g.length;L++){var M=this.i(L);P+=(0<=M?M:4294967296+M)*N,N*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(v(this))return"0";if(w(this))return"-"+C(this).toString(P);for(var N=u(Math.pow(P,6)),L=this,M="";;){var k=I(L,N).g;L=x(L,k.j(N));var T=((0<L.g.length?L.g[0]:L.h)>>>0).toString(P);if(L=k,v(L))return T+M;for(;6>T.length;)T="0"+T;M=T+M}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function v(P){if(P.h!=0)return!1;for(var N=0;N<P.g.length;N++)if(P.g[N]!=0)return!1;return!0}function w(P){return P.h==-1}t.l=function(P){return P=x(this,P),w(P)?-1:v(P)?0:1};function C(P){for(var N=P.g.length,L=[],M=0;M<N;M++)L[M]=~P.g[M];return new o(L,~P.h).add(m)}t.abs=function(){return w(this)?C(this):this},t.add=function(P){for(var N=Math.max(this.g.length,P.g.length),L=[],M=0,k=0;k<=N;k++){var T=M+(this.i(k)&65535)+(P.i(k)&65535),D=(T>>>16)+(this.i(k)>>>16)+(P.i(k)>>>16);M=D>>>16,T&=65535,D&=65535,L[k]=D<<16|T}return new o(L,L[L.length-1]&-2147483648?-1:0)};function x(P,N){return P.add(C(N))}t.j=function(P){if(v(this)||v(P))return p;if(w(this))return w(P)?C(this).j(C(P)):C(C(this).j(P));if(w(P))return C(this.j(C(P)));if(0>this.l(g)&&0>P.l(g))return u(this.m()*P.m());for(var N=this.g.length+P.g.length,L=[],M=0;M<2*N;M++)L[M]=0;for(M=0;M<this.g.length;M++)for(var k=0;k<P.g.length;k++){var T=this.i(M)>>>16,D=this.i(M)&65535,Y=P.i(k)>>>16,ae=P.i(k)&65535;L[2*M+2*k]+=D*ae,_(L,2*M+2*k),L[2*M+2*k+1]+=T*ae,_(L,2*M+2*k+1),L[2*M+2*k+1]+=D*Y,_(L,2*M+2*k+1),L[2*M+2*k+2]+=T*Y,_(L,2*M+2*k+2)}for(M=0;M<N;M++)L[M]=L[2*M+1]<<16|L[2*M];for(M=N;M<2*N;M++)L[M]=0;return new o(L,0)};function _(P,N){for(;(P[N]&65535)!=P[N];)P[N+1]+=P[N]>>>16,P[N]&=65535,N++}function S(P,N){this.g=P,this.h=N}function I(P,N){if(v(N))throw Error("division by zero");if(v(P))return new S(p,p);if(w(P))return N=I(C(P),N),new S(C(N.g),C(N.h));if(w(N))return N=I(P,C(N)),new S(C(N.g),N.h);if(30<P.g.length){if(w(P)||w(N))throw Error("slowDivide_ only works with positive integers.");for(var L=m,M=N;0>=M.l(P);)L=F(L),M=F(M);var k=V(L,1),T=V(M,1);for(M=V(M,2),L=V(L,2);!v(M);){var D=T.add(M);0>=D.l(P)&&(k=k.add(L),T=D),M=V(M,1),L=V(L,1)}return N=x(P,k.j(N)),new S(k,N)}for(k=p;0<=P.l(N);){for(L=Math.max(1,Math.floor(P.m()/N.m())),M=Math.ceil(Math.log(L)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),T=u(L),D=T.j(N);w(D)||0<D.l(P);)L-=M,T=u(L),D=T.j(N);v(T)&&(T=m),k=k.add(T),P=x(P,D)}return new S(k,P)}t.A=function(P){return I(this,P).h},t.and=function(P){for(var N=Math.max(this.g.length,P.g.length),L=[],M=0;M<N;M++)L[M]=this.i(M)&P.i(M);return new o(L,this.h&P.h)},t.or=function(P){for(var N=Math.max(this.g.length,P.g.length),L=[],M=0;M<N;M++)L[M]=this.i(M)|P.i(M);return new o(L,this.h|P.h)},t.xor=function(P){for(var N=Math.max(this.g.length,P.g.length),L=[],M=0;M<N;M++)L[M]=this.i(M)^P.i(M);return new o(L,this.h^P.h)};function F(P){for(var N=P.g.length+1,L=[],M=0;M<N;M++)L[M]=P.i(M)<<1|P.i(M-1)>>>31;return new o(L,P.h)}function V(P,N){var L=N>>5;N%=32;for(var M=P.g.length-L,k=[],T=0;T<M;T++)k[T]=0<N?P.i(T+L)>>>N|P.i(T+L+1)<<32-N:P.i(T+L);return new o(k,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,C3=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,yc=o}).apply(typeof rw<"u"?rw:typeof self<"u"?self:typeof window<"u"?window:{});var Dp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E3,hd,k3,vm,Qy,P3,T3,I3;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,E,R){return f==Array.prototype||f==Object.prototype||(f[E]=R.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dp=="object"&&Dp];for(var E=0;E<f.length;++E){var R=f[E];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function i(f,E){if(E)e:{var R=r;f=f.split(".");for(var H=0;H<f.length-1;H++){var he=f[H];if(!(he in R))break e;R=R[he]}f=f[f.length-1],H=R[f],E=E(H),E!=H&&E!=null&&e(R,f,{configurable:!0,writable:!0,value:E})}}function s(f,E){f instanceof String&&(f+="");var R=0,H=!1,he={next:function(){if(!H&&R<f.length){var xe=R++;return{value:E(xe,f[xe]),done:!1}}return H=!0,{done:!0,value:void 0}}};return he[Symbol.iterator]=function(){return he},he}i("Array.prototype.values",function(f){return f||function(){return s(this,function(E,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var E=typeof f;return E=E!="object"?E:f?Array.isArray(f)?"array":E:"null",E=="array"||E=="object"&&typeof f.length=="number"}function u(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function h(f,E,R){return f.call.apply(f.bind,arguments)}function p(f,E,R){if(!f)throw Error();if(2<arguments.length){var H=Array.prototype.slice.call(arguments,2);return function(){var he=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(he,H),f.apply(E,he)}}return function(){return f.apply(E,arguments)}}function m(f,E,R){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function g(f,E){var R=Array.prototype.slice.call(arguments,1);return function(){var H=R.slice();return H.push.apply(H,arguments),f.apply(this,H)}}function v(f,E){function R(){}R.prototype=E.prototype,f.aa=E.prototype,f.prototype=new R,f.prototype.constructor=f,f.Qb=function(H,he,xe){for(var je=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)je[yt-2]=arguments[yt];return E.prototype[he].apply(H,je)}}function w(f){const E=f.length;if(0<E){const R=Array(E);for(let H=0;H<E;H++)R[H]=f[H];return R}return[]}function C(f,E){for(let R=1;R<arguments.length;R++){const H=arguments[R];if(l(H)){const he=f.length||0,xe=H.length||0;f.length=he+xe;for(let je=0;je<xe;je++)f[he+je]=H[je]}else f.push(H)}}class x{constructor(E,R){this.i=E,this.j=R,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function _(f){return/^[\s\xa0]*$/.test(f)}function S(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function I(f){return I[" "](f),f}I[" "]=function(){};var F=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function V(f,E,R){for(const H in f)E.call(R,f[H],H,f)}function P(f,E){for(const R in f)E.call(void 0,f[R],R,f)}function N(f){const E={};for(const R in f)E[R]=f[R];return E}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,E){let R,H;for(let he=1;he<arguments.length;he++){H=arguments[he];for(R in H)f[R]=H[R];for(let xe=0;xe<L.length;xe++)R=L[xe],Object.prototype.hasOwnProperty.call(H,R)&&(f[R]=H[R])}}function k(f){var E=1;f=f.split(":");const R=[];for(;0<E&&f.length;)R.push(f.shift()),E--;return f.length&&R.push(f.join(":")),R}function T(f){a.setTimeout(()=>{throw f},0)}function D(){var f=X;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class Y{constructor(){this.h=this.g=null}add(E,R){const H=ae.get();H.set(E,R),this.h?this.h.next=H:this.g=H,this.h=H}}var ae=new x(()=>new Z,f=>f.reset());class Z{constructor(){this.next=this.g=this.h=null}set(E,R){this.h=E,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let J,K=!1,X=new Y,se=()=>{const f=a.Promise.resolve(void 0);J=()=>{f.then(me)}};var me=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(R){T(R)}var E=ae;E.j(f),100>E.h&&(E.h++,f.next=E.g,E.g=f)}K=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const R=()=>{};a.addEventListener("test",R,E),a.removeEventListener("test",R,E)}catch{}return f}();function te(f,E){if($.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var R=this.type=f.type,H=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget){if(F){e:{try{I(E.nodeName);var he=!0;break e}catch{}he=!1}he||(E=null)}}else R=="mouseover"?E=f.fromElement:R=="mouseout"&&(E=f.toElement);this.relatedTarget=E,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:re[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&te.aa.h.call(this)}}v(te,$);var re={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),ge=0;function be(f,E,R,H,he){this.listener=f,this.proxy=null,this.src=E,this.type=R,this.capture=!!H,this.ha=he,this.key=++ge,this.da=this.fa=!1}function Re(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Le(f){this.src=f,this.g={},this.h=0}Le.prototype.add=function(f,E,R,H,he){var xe=f.toString();f=this.g[xe],f||(f=this.g[xe]=[],this.h++);var je=Be(f,E,H,he);return-1<je?(E=f[je],R||(E.fa=!1)):(E=new be(E,this.src,xe,!!H,he),E.fa=R,f.push(E)),E};function Ve(f,E){var R=E.type;if(R in f.g){var H=f.g[R],he=Array.prototype.indexOf.call(H,E,void 0),xe;(xe=0<=he)&&Array.prototype.splice.call(H,he,1),xe&&(Re(E),f.g[R].length==0&&(delete f.g[R],f.h--))}}function Be(f,E,R,H){for(var he=0;he<f.length;++he){var xe=f[he];if(!xe.da&&xe.listener==E&&xe.capture==!!R&&xe.ha==H)return he}return-1}var rt="closure_lm_"+(1e6*Math.random()|0),Ae={};function ie(f,E,R,H,he){if(Array.isArray(E)){for(var xe=0;xe<E.length;xe++)ie(f,E[xe],R,H,he);return null}return R=gt(R),f&&f[pe]?f.K(E,R,u(H)?!!H.capture:!!H,he):mt(f,E,R,!1,H,he)}function mt(f,E,R,H,he,xe){if(!E)throw Error("Invalid event type");var je=u(he)?!!he.capture:!!he,yt=et(f);if(yt||(f[rt]=yt=new Le(f)),R=yt.add(E,R,H,je,xe),R.proxy)return R;if(H=Je(),R.proxy=H,H.src=f,H.listener=R,f.addEventListener)Q||(he=je),he===void 0&&(he=!1),f.addEventListener(E.toString(),H,he);else if(f.attachEvent)f.attachEvent($e(E.toString()),H);else if(f.addListener&&f.removeListener)f.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Je(){function f(R){return E.call(f.src,f.listener,R)}const E=qe;return f}function Me(f,E,R,H,he){if(Array.isArray(E))for(var xe=0;xe<E.length;xe++)Me(f,E[xe],R,H,he);else H=u(H)?!!H.capture:!!H,R=gt(R),f&&f[pe]?(f=f.i,E=String(E).toString(),E in f.g&&(xe=f.g[E],R=Be(xe,R,H,he),-1<R&&(Re(xe[R]),Array.prototype.splice.call(xe,R,1),xe.length==0&&(delete f.g[E],f.h--)))):f&&(f=et(f))&&(E=f.g[E.toString()],f=-1,E&&(f=Be(E,R,H,he)),(R=-1<f?E[f]:null)&&Fe(R))}function Fe(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[pe])Ve(E.i,f);else{var R=f.type,H=f.proxy;E.removeEventListener?E.removeEventListener(R,H,f.capture):E.detachEvent?E.detachEvent($e(R),H):E.addListener&&E.removeListener&&E.removeListener(H),(R=et(E))?(Ve(R,f),R.h==0&&(R.src=null,E[rt]=null)):Re(f)}}}function $e(f){return f in Ae?Ae[f]:Ae[f]="on"+f}function qe(f,E){if(f.da)f=!0;else{E=new te(E,this);var R=f.listener,H=f.ha||f.src;f.fa&&Fe(f),f=R.call(H,E)}return f}function et(f){return f=f[rt],f instanceof Le?f:null}var ut="__closure_events_fn_"+(1e9*Math.random()>>>0);function gt(f){return typeof f=="function"?f:(f[ut]||(f[ut]=function(E){return f.handleEvent(E)}),f[ut])}function tt(){O.call(this),this.i=new Le(this),this.M=this,this.F=null}v(tt,O),tt.prototype[pe]=!0,tt.prototype.removeEventListener=function(f,E,R,H){Me(this,f,E,R,H)};function lt(f,E){var R,H=f.F;if(H)for(R=[];H;H=H.F)R.push(H);if(f=f.M,H=E.type||E,typeof E=="string")E=new $(E,f);else if(E instanceof $)E.target=E.target||f;else{var he=E;E=new $(H,f),M(E,he)}if(he=!0,R)for(var xe=R.length-1;0<=xe;xe--){var je=E.g=R[xe];he=Rt(je,H,!0,E)&&he}if(je=E.g=f,he=Rt(je,H,!0,E)&&he,he=Rt(je,H,!1,E)&&he,R)for(xe=0;xe<R.length;xe++)je=E.g=R[xe],he=Rt(je,H,!1,E)&&he}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var f=this.i,E;for(E in f.g){for(var R=f.g[E],H=0;H<R.length;H++)Re(R[H]);delete f.g[E],f.h--}}this.F=null},tt.prototype.K=function(f,E,R,H){return this.i.add(String(f),E,!1,R,H)},tt.prototype.L=function(f,E,R,H){return this.i.add(String(f),E,!0,R,H)};function Rt(f,E,R,H){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();for(var he=!0,xe=0;xe<E.length;++xe){var je=E[xe];if(je&&!je.da&&je.capture==R){var yt=je.listener,Ct=je.ha||je.src;je.fa&&Ve(f.i,je),he=yt.call(Ct,H)!==!1&&he}}return he&&!H.defaultPrevented}function at(f,E,R){if(typeof f=="function")R&&(f=m(f,R));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(f,E||0)}function Nt(f){f.g=at(()=>{f.g=null,f.i&&(f.i=!1,Nt(f))},f.l);const E=f.h;f.h=null,f.m.apply(null,E)}class We extends O{constructor(E,R){super(),this.m=E,this.l=R,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Nt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _n(f){O.call(this),this.h=f,this.g={}}v(_n,O);var Pt=[];function Yr(f){V(f.g,function(E,R){this.g.hasOwnProperty(R)&&Fe(E)},f),f.g={}}_n.prototype.N=function(){_n.aa.N.call(this),Yr(this)},_n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bt=a.JSON.stringify,tn=a.JSON.parse,Ii=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function jt(){}jt.prototype.h=null;function Ss(f){return f.h||(f.h=f.i())}function ln(){}var ir={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function di(){$.call(this,"d")}v(di,$);function nn(){$.call(this,"c")}v(nn,$);var it={},Dt=null;function ji(){return Dt=Dt||new tt}it.La="serverreachability";function Fn(f){$.call(this,it.La,f)}v(Fn,$);function yr(f){const E=ji();lt(E,new Fn(E))}it.STAT_EVENT="statevent";function fi(f,E){$.call(this,it.STAT_EVENT,f),this.stat=E}v(fi,$);function Ye(f){const E=ji();lt(E,new fi(E,f))}it.Ma="timingevent";function Qr(f,E){$.call(this,it.Ma,f),this.size=E}v(Qr,$);function vr(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},E)}function Vn(){this.g=!0}Vn.prototype.xa=function(){this.g=!1};function kn(f,E,R,H,he,xe){f.info(function(){if(f.g)if(xe)for(var je="",yt=xe.split("&"),Ct=0;Ct<yt.length;Ct++){var vt=yt[Ct].split("=");if(1<vt.length){var qt=vt[0];vt=vt[1];var Jt=qt.split("_");je=2<=Jt.length&&Jt[1]=="type"?je+(qt+"="+vt+"&"):je+(qt+"=redacted&")}}else je=null;else je=xe;return"XMLHTTP REQ ("+H+") [attempt "+he+"]: "+E+`
`+R+`
`+je})}function Nn(f,E,R,H,he,xe,je){f.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+he+"]: "+E+`
`+R+`
`+xe+" "+je})}function Bn(f,E,R,H){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+Xi(f,R)+(H?" "+H:"")})}function ra(f,E){f.info(function(){return"TIMEOUT: "+E})}Vn.prototype.info=function(){};function Xi(f,E){if(!f.g)return E;if(!E)return null;try{var R=JSON.parse(E);if(R){for(f=0;f<R.length;f++)if(Array.isArray(R[f])){var H=R[f];if(!(2>H.length)){var he=H[1];if(Array.isArray(he)&&!(1>he.length)){var xe=he[0];if(xe!="noop"&&xe!="stop"&&xe!="close")for(var je=1;je<he.length;je++)he[je]=""}}}}return Bt(R)}catch{return E}}var xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Or;function Fr(){}v(Fr,jt),Fr.prototype.g=function(){return new XMLHttpRequest},Fr.prototype.i=function(){return{}},Or=new Fr;function Pn(f,E,R,H){this.j=f,this.i=E,this.l=R,this.R=H||1,this.U=new _n(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pi}function pi(){this.i=null,this.g="",this.h=!1}var As={},Cs={};function Es(f,E,R){f.L=1,f.v=yo(Vr(E)),f.m=R,f.P=!0,ho(f,null)}function ho(f,E){f.F=Date.now(),ia(f),f.A=Vr(f.v);var R=f.A,H=f.R;Array.isArray(H)||(H=[String(H)]),ht(R.i,"t",H),f.C=0,R=f.j.J,f.h=new pi,f.g=B(f.j,R?E:null,!f.m),0<f.O&&(f.M=new We(m(f.Y,f,f.g),f.O)),E=f.U,R=f.g,H=f.ca;var he="readystatechange";Array.isArray(he)||(he&&(Pt[0]=he.toString()),he=Pt);for(var xe=0;xe<he.length;xe++){var je=ie(R,he[xe],H||E.handleEvent,!1,E.h||E);if(!je)break;E.g[je.key]=je}E=f.H?N(f.H):{},f.m?(f.u||(f.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,E)):(f.u="GET",f.g.ea(f.A,f.u,null,E)),yr(),kn(f.i,f.u,f.A,f.l,f.R,f.m)}Pn.prototype.ca=function(f){f=f.target;const E=this.M;E&&Wn(f)==3?E.j():this.Y(f)},Pn.prototype.Y=function(f){try{if(f==this.g)e:{const Jt=Wn(this.g);var E=this.g.Ba();const ss=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||tu(this.g)))){this.J||Jt!=4||E==7||(E==8||0>=ss?yr(3):yr(2)),ks(this);var R=this.g.Z();this.X=R;t:if(fo(this)){var H=tu(this.g);f="";var he=H.length,xe=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ji(this),Ps(this);var je="";break t}this.h.i=new a.TextDecoder}for(E=0;E<he;E++)this.h.h=!0,f+=this.h.i.decode(H[E],{stream:!(xe&&E==he-1)});H.length=0,this.h.g+=f,this.C=0,je=this.h.g}else je=this.g.oa();if(this.o=R==200,Nn(this.i,this.u,this.A,this.l,this.R,Jt,R),this.o){if(this.T&&!this.K){t:{if(this.g){var yt,Ct=this.g;if((yt=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(yt)){var vt=yt;break t}}vt=null}if(R=vt)Bn(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,po(this,R);else{this.o=!1,this.s=3,Ye(12),Ji(this),Ps(this);break e}}if(this.P){R=!0;let or;for(;!this.J&&this.C<je.length;)if(or=Wc(this,je),or==Cs){Jt==4&&(this.s=4,Ye(14),R=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(or==As){this.s=4,Ye(15),Bn(this.i,this.l,je,"[Invalid Chunk]"),R=!1;break}else Bn(this.i,this.l,or,null),po(this,or);if(fo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||je.length!=0||this.h.h||(this.s=1,Ye(16),R=!1),this.o=this.o&&R,!R)Bn(this.i,this.l,je,"[Invalid Chunked Response]"),Ji(this),Ps(this);else if(0<je.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+je.length),va(qt),qt.M=!0,Ye(11))}}else Bn(this.i,this.l,je,null),po(this,je);Jt==4&&Ji(this),this.o&&!this.J&&(Jt==4?Rs(this.j,this):(this.o=!1,ia(this)))}else js(this.g),R==400&&0<je.indexOf("Unknown SID")?(this.s=3,Ye(12)):(this.s=0,Ye(13)),Ji(this),Ps(this)}}}catch{}finally{}};function fo(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Wc(f,E){var R=f.C,H=E.indexOf(`
`,R);return H==-1?Cs:(R=Number(E.substring(R,H)),isNaN(R)?As:(H+=1,H+R>E.length?Cs:(E=E.slice(H,H+R),f.C=H+R,E)))}Pn.prototype.cancel=function(){this.J=!0,Ji(this)};function ia(f){f.S=Date.now()+f.I,Gc(f,f.I)}function Gc(f,E){if(f.B!=null)throw Error("WatchDog timer not null");f.B=vr(m(f.ba,f),E)}function ks(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Pn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ra(this.i,this.A),this.L!=2&&(yr(),Ye(17)),Ji(this),this.s=2,Ps(this)):Gc(this,this.S-f)};function Ps(f){f.j.G==0||f.J||Rs(f.j,f)}function Ji(f){ks(f);var E=f.M;E&&typeof E.ma=="function"&&E.ma(),f.M=null,Yr(f.U),f.g&&(E=f.g,f.g=null,E.abort(),E.ma())}function po(f,E){try{var R=f.j;if(R.G!=0&&(R.g==f||Ll(R.h,f))){if(!f.K&&Ll(R.h,f)&&R.G==3){try{var H=R.Da.g.parse(E)}catch{H=null}if(Array.isArray(H)&&H.length==3){var he=H;if(he[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<f.F)is(R),pa(R);else break e;_o(R),Ye(18)}}else R.za=he[1],0<R.za-R.T&&37500>he[2]&&R.F&&R.v==0&&!R.C&&(R.C=vr(m(R.Za,R),6e3));if(1>=mo(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else br(R,11)}else if((f.K||R.g==f)&&is(R),!_(E))for(he=R.Da.g.parse(E),E=0;E<he.length;E++){let vt=he[E];if(R.T=vt[0],vt=vt[1],R.G==2)if(vt[0]=="c"){R.K=vt[1],R.ia=vt[2];const qt=vt[3];qt!=null&&(R.la=qt,R.j.info("VER="+R.la));const Jt=vt[4];Jt!=null&&(R.Aa=Jt,R.j.info("SVER="+R.Aa));const ss=vt[5];ss!=null&&typeof ss=="number"&&0<ss&&(H=1.5*ss,R.L=H,R.j.info("backChannelRequestTimeoutMs_="+H)),H=R;const or=f.g;if(or){const Ds=or.g?or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ds){var xe=H.h;xe.g||Ds.indexOf("spdy")==-1&&Ds.indexOf("quic")==-1&&Ds.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(cn(xe,xe.h),xe.h=null))}if(H.D){const Ms=or.g?or.g.getResponseHeader("X-HTTP-Session-Id"):null;Ms&&(H.ya=Ms,Ht(H.I,H.D,Ms))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-f.F,R.j.info("Handshake RTT: "+R.R+"ms")),H=R;var je=f;if(H.qa=b(H,H.J?H.ia:null,H.W),je.K){Rl(H.h,je);var yt=je,Ct=H.L;Ct&&(yt.I=Ct),yt.B&&(ks(yt),ia(yt)),H.g=je}else ya(H);0<R.i.length&&ma(R)}else vt[0]!="stop"&&vt[0]!="close"||br(R,7);else R.G==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?br(R,7):rs(R):vt[0]!="noop"&&R.l&&R.l.ta(vt),R.v=0)}}yr(4)}catch{}}var Eh=class{constructor(f,E){this.g=f,this.map=E}};function jl(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function mo(f){return f.h?1:f.g?f.g.size:0}function Ll(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function cn(f,E){f.g?f.g.add(E):f.h=E}function Rl(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}jl.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Dl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let E=f.i;for(const R of f.g.values())E=E.concat(R.D);return E}return w(f.i)}function Yc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var E=[],R=f.length,H=0;H<R;H++)E.push(f[H]);return E}E=[],R=0;for(H in f)E[R++]=f[H];return E}function Ml(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var E=[];f=f.length;for(var R=0;R<f;R++)E.push(R);return E}E=[],R=0;for(const H in f)E[R++]=H;return E}}}function Qc(f,E){if(f.forEach&&typeof f.forEach=="function")f.forEach(E,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,E,void 0);else for(var R=Ml(f),H=Yc(f),he=H.length,xe=0;xe<he;xe++)E.call(void 0,H[xe],R&&R[xe],f)}var Jr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sa(f,E){if(f){f=f.split("&");for(var R=0;R<f.length;R++){var H=f[R].indexOf("="),he=null;if(0<=H){var xe=f[R].substring(0,H);he=f[R].substring(H+1)}else xe=f[R];E(xe,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function Sn(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Sn){this.h=f.h,go(this,f.j),this.o=f.o,this.g=f.g,oa(this,f.s),this.l=f.l;var E=f.i,R=new Ts;R.i=E.i,E.g&&(R.g=new Map(E.g),R.h=E.h),Ol(this,R),this.m=f.m}else f&&(E=String(f).match(Jr))?(this.h=!1,go(this,E[1]||"",!0),this.o=vo(E[2]||""),this.g=vo(E[3]||"",!0),oa(this,E[4]),this.l=vo(E[5]||"",!0),Ol(this,E[6]||"",!0),this.m=vo(E[7]||"")):(this.h=!1,this.i=new Ts(null,this.h))}Sn.prototype.toString=function(){var f=[],E=this.j;E&&f.push(Zi(E,Xc,!0),":");var R=this.g;return(R||E=="file")&&(f.push("//"),(E=this.o)&&f.push(Zi(E,Xc,!0),"@"),f.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&f.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&f.push("/"),f.push(Zi(R,R.charAt(0)=="/"?es:Ph,!0))),(R=this.i.toString())&&f.push("?",R),(R=this.m)&&f.push("#",Zi(R,la)),f.join("")};function Vr(f){return new Sn(f)}function go(f,E,R){f.j=R?vo(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function oa(f,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);f.s=E}else f.s=null}function Ol(f,E,R){E instanceof Ts?(f.i=E,Th(f.i,f.h)):(R||(E=Zi(E,aa)),f.i=new Ts(E,f.h))}function Ht(f,E,R){f.i.set(E,R)}function yo(f){return Ht(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function vo(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Zi(f,E,R){return typeof f=="string"?(f=encodeURI(f).replace(E,kh),R&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function kh(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Xc=/[#\/\?@]/g,Ph=/[#\?:]/g,es=/[#\?]/g,aa=/[#\?@]/g,la=/#/g;function Ts(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function un(f){f.g||(f.g=new Map,f.h=0,f.i&&sa(f.i,function(E,R){f.add(decodeURIComponent(E.replace(/\+/g," ")),R)}))}t=Ts.prototype,t.add=function(f,E){un(this),this.i=null,f=Is(this,f);var R=this.g.get(f);return R||this.g.set(f,R=[]),R.push(E),this.h+=1,this};function Jc(f,E){un(f),E=Is(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function Fl(f,E){return un(f),E=Is(f,E),f.g.has(E)}t.forEach=function(f,E){un(this),this.g.forEach(function(R,H){R.forEach(function(he){f.call(E,he,H,this)},this)},this)},t.na=function(){un(this);const f=Array.from(this.g.values()),E=Array.from(this.g.keys()),R=[];for(let H=0;H<E.length;H++){const he=f[H];for(let xe=0;xe<he.length;xe++)R.push(E[H])}return R},t.V=function(f){un(this);let E=[];if(typeof f=="string")Fl(this,f)&&(E=E.concat(this.g.get(Is(this,f))));else{f=Array.from(this.g.values());for(let R=0;R<f.length;R++)E=E.concat(f[R])}return E},t.set=function(f,E){return un(this),this.i=null,f=Is(this,f),Fl(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},t.get=function(f,E){return f?(f=this.V(f),0<f.length?String(f[0]):E):E};function ht(f,E,R){Jc(f,E),0<R.length&&(f.i=null,f.g.set(Is(f,E),w(R)),f.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],E=Array.from(this.g.keys());for(var R=0;R<E.length;R++){var H=E[R];const xe=encodeURIComponent(String(H)),je=this.V(H);for(H=0;H<je.length;H++){var he=xe;je[H]!==""&&(he+="="+encodeURIComponent(String(je[H]))),f.push(he)}}return this.i=f.join("&")};function Is(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function Th(f,E){E&&!f.j&&(un(f),f.i=null,f.g.forEach(function(R,H){var he=H.toLowerCase();H!=he&&(Jc(this,H),ht(this,he,R))},f)),f.j=E}function Li(f,E){const R=new Vn;if(a.Image){const H=new Image;H.onload=g(mi,R,"TestLoadImage: loaded",!0,E,H),H.onerror=g(mi,R,"TestLoadImage: error",!1,E,H),H.onabort=g(mi,R,"TestLoadImage: abort",!1,E,H),H.ontimeout=g(mi,R,"TestLoadImage: timeout",!1,E,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=f}else E(!1)}function Zc(f,E){const R=new Vn,H=new AbortController,he=setTimeout(()=>{H.abort(),mi(R,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:H.signal}).then(xe=>{clearTimeout(he),xe.ok?mi(R,"TestPingServer: ok",!0,E):mi(R,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(he),mi(R,"TestPingServer: error",!1,E)})}function mi(f,E,R,H,he){try{he&&(he.onload=null,he.onerror=null,he.onabort=null,he.ontimeout=null),H(R)}catch{}}function ca(){this.g=new Ii}function Vl(f,E,R){const H=R||"";try{Qc(f,function(he,xe){let je=he;u(he)&&(je=Bt(he)),E.push(H+xe+"="+encodeURIComponent(je))})}catch(he){throw E.push(H+"type="+encodeURIComponent("_badmap")),he}}function ua(f){this.l=f.Ub||null,this.j=f.eb||!1}v(ua,jt),ua.prototype.g=function(){return new ha(this.l,this.j)},ua.prototype.i=function(f){return function(){return f}}({});function ha(f,E){tt.call(this),this.D=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(ha,tt),t=ha.prototype,t.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=E,this.readyState=1,gi(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(E.body=f),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ts(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,gi(this)),this.g&&(this.readyState=3,gi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;eu(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function eu(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?ts(this):gi(this),this.readyState==3&&eu(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,ts(this))},t.Qa=function(f){this.g&&(this.response=f,ts(this))},t.ga=function(){this.g&&ts(this)};function ts(f){f.readyState=4,f.l=null,f.j=null,f.v=null,gi(f)}t.setRequestHeader=function(f,E){this.u.append(f,E)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],E=this.h.entries();for(var R=E.next();!R.done;)R=R.value,f.push(R[0]+": "+R[1]),R=E.next();return f.join(`\r
`)};function gi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ns(f){let E="";return V(f,function(R,H){E+=H,E+=":",E+=R,E+=`\r
`}),E}function Bl(f,E,R){e:{for(H in R){var H=!1;break e}H=!0}H||(R=ns(R),typeof f=="string"?R!=null&&encodeURIComponent(String(R)):Ht(f,E,R))}function zt(f){tt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(zt,tt);var Ul=/^https?$/i,da=["POST","PUT"];t=zt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,E,R,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Or.g(),this.v=this.o?Ss(this.o):Ss(Or),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(xe){zl(this,xe);return}if(f=R||"",R=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var he in H)R.set(he,H[he]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const xe of H.keys())R.set(xe,H.get(xe));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(R.keys()).find(xe=>xe.toLowerCase()=="content-type"),he=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(da,E,void 0))||H||he||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,je]of R)this.g.setRequestHeader(xe,je);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yi(this),this.u=!0,this.g.send(f),this.u=!1}catch(xe){zl(this,xe)}};function zl(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.m=5,ql(f),xo(f)}function ql(f){f.A||(f.A=!0,lt(f,"complete"),lt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,lt(this,"complete"),lt(this,"abort"),xo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xo(this,!0)),zt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Hl(this):this.bb())},t.bb=function(){Hl(this)};function Hl(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Wn(f)!=4||f.Z()!=2)){if(f.u&&Wn(f)==4)at(f.Ea,0,f);else if(lt(f,"readystatechange"),Wn(f)==4){f.h=!1;try{const je=f.Z();e:switch(je){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var R;if(!(R=E)){var H;if(H=je===0){var he=String(f.D).match(Jr)[1]||null;!he&&a.self&&a.self.location&&(he=a.self.location.protocol.slice(0,-1)),H=!Ul.test(he?he.toLowerCase():"")}R=H}if(R)lt(f,"complete"),lt(f,"success");else{f.m=6;try{var xe=2<Wn(f)?f.g.statusText:""}catch{xe=""}f.l=xe+" ["+f.Z()+"]",ql(f)}}finally{xo(f)}}}}function xo(f,E){if(f.g){yi(f);const R=f.g,H=f.v[0]?()=>{}:null;f.g=null,f.v=null,E||lt(f,"ready");try{R.onreadystatechange=H}catch{}}}function yi(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Wn(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),tn(E)}};function tu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function js(f){const E={};f=(f.g&&2<=Wn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<f.length;H++){if(_(f[H]))continue;var R=k(f[H]);const he=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const xe=E[he]||[];E[he]=xe,xe.push(R)}P(E,function(H){return H.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sr(f,E,R){return R&&R.internalChannelParams&&R.internalChannelParams[f]||E}function fa(f){this.Aa=0,this.i=[],this.j=new Vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sr("baseRetryDelayMs",5e3,f),this.cb=sr("retryDelaySeedMs",1e4,f),this.Wa=sr("forwardChannelMaxRetries",2,f),this.wa=sr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new jl(f&&f.concurrentRequestLimit),this.Da=new ca,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=fa.prototype,t.la=8,t.G=1,t.connect=function(f,E,R,H){Ye(0),this.W=f,this.H=E||{},R&&H!==void 0&&(this.H.OSID=R,this.H.OAID=H),this.F=this.X,this.I=b(this,null,this.W),ma(this)};function rs(f){if(bo(f),f.G==3){var E=f.U++,R=Vr(f.I);if(Ht(R,"SID",f.K),Ht(R,"RID",E),Ht(R,"TYPE","terminate"),Ls(f,R),E=new Pn(f,f.j,E),E.L=2,E.v=yo(Vr(R)),R=!1,a.navigator&&a.navigator.sendBeacon)try{R=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!R&&a.Image&&(new Image().src=E.v,R=!0),R||(E.g=B(E.j,null),E.g.ea(E.v)),E.F=Date.now(),ia(E)}ba(f)}function pa(f){f.g&&(va(f),f.g.cancel(),f.g=null)}function bo(f){pa(f),f.u&&(a.clearTimeout(f.u),f.u=null),is(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function ma(f){if(!Kc(f.h)&&!f.s){f.s=!0;var E=f.Ga;J||se(),K||(J(),K=!0),X.add(E,f),f.B=0}}function $l(f,E){return mo(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=E.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=vr(m(f.Ga,f,E),xa(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const he=new Pn(this,this.j,f);let xe=this.o;if(this.S&&(xe?(xe=N(xe),M(xe,this.S)):xe=this.S),this.m!==null||this.O||(he.H=xe,xe=null),this.P)e:{for(var E=0,R=0;R<this.i.length;R++){t:{var H=this.i[R];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(E+=H,4096<E){E=R;break e}if(E===4096||R===this.i.length-1){E=R+1;break e}}E=1e3}else E=1e3;E=wo(this,he,E),R=Vr(this.I),Ht(R,"RID",f),Ht(R,"CVER",22),this.D&&Ht(R,"X-HTTP-Session-Id",this.D),Ls(this,R),xe&&(this.O?E="headers="+encodeURIComponent(String(ns(xe)))+"&"+E:this.m&&Bl(R,this.m,xe)),cn(this.h,he),this.Ua&&Ht(R,"TYPE","init"),this.P?(Ht(R,"$req",E),Ht(R,"SID","null"),he.T=!0,Es(he,R,null)):Es(he,R,E),this.G=2}}else this.G==3&&(f?ga(this,f):this.i.length==0||Kc(this.h)||ga(this))};function ga(f,E){var R;E?R=E.l:R=f.U++;const H=Vr(f.I);Ht(H,"SID",f.K),Ht(H,"RID",R),Ht(H,"AID",f.T),Ls(f,H),f.m&&f.o&&Bl(H,f.m,f.o),R=new Pn(f,f.j,R,f.B+1),f.m===null&&(R.H=f.o),E&&(f.i=E.D.concat(f.i)),E=wo(f,R,1e3),R.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),cn(f.h,R),Es(R,H,E)}function Ls(f,E){f.H&&V(f.H,function(R,H){Ht(E,H,R)}),f.l&&Qc({},function(R,H){Ht(E,H,R)})}function wo(f,E,R){R=Math.min(f.i.length,R);var H=f.l?m(f.l.Na,f.l,f):null;e:{var he=f.i;let xe=-1;for(;;){const je=["count="+R];xe==-1?0<R?(xe=he[0].g,je.push("ofs="+xe)):xe=0:je.push("ofs="+xe);let yt=!0;for(let Ct=0;Ct<R;Ct++){let vt=he[Ct].g;const qt=he[Ct].map;if(vt-=xe,0>vt)xe=Math.max(0,he[Ct].g-100),yt=!1;else try{Vl(qt,je,"req"+vt+"_")}catch{H&&H(qt)}}if(yt){H=je.join("&");break e}}}return f=f.i.splice(0,R),E.D=f,H}function ya(f){if(!f.g&&!f.u){f.Y=1;var E=f.Fa;J||se(),K||(J(),K=!0),X.add(E,f),f.v=0}}function _o(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=vr(m(f.Fa,f),xa(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=vr(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ye(10),pa(this),nu(this))};function va(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function nu(f){f.g=new Pn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var E=Vr(f.qa);Ht(E,"RID","rpc"),Ht(E,"SID",f.K),Ht(E,"AID",f.T),Ht(E,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ht(E,"TO",f.ja),Ht(E,"TYPE","xmlhttp"),Ls(f,E),f.m&&f.o&&Bl(E,f.m,f.o),f.L&&(f.g.I=f.L);var R=f.g;f=f.ia,R.L=1,R.v=yo(Vr(E)),R.m=null,R.P=!0,ho(R,f)}t.Za=function(){this.C!=null&&(this.C=null,pa(this),_o(this),Ye(19))};function is(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Rs(f,E){var R=null;if(f.g==E){is(f),va(f),f.g=null;var H=2}else if(Ll(f.h,E))R=E.D,Rl(f.h,E),H=1;else return;if(f.G!=0){if(E.o)if(H==1){R=E.m?E.m.length:0,E=Date.now()-E.F;var he=f.B;H=ji(),lt(H,new Qr(H,R)),ma(f)}else ya(f);else if(he=E.s,he==3||he==0&&0<E.X||!(H==1&&$l(f,E)||H==2&&_o(f)))switch(R&&0<R.length&&(E=f.h,E.i=E.i.concat(R)),he){case 1:br(f,5);break;case 4:br(f,10);break;case 3:br(f,6);break;default:br(f,2)}}}function xa(f,E){let R=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(R*=2),R*E}function br(f,E){if(f.j.info("Error code "+E),E==2){var R=m(f.fb,f),H=f.Xa;const he=!H;H=new Sn(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||go(H,"https"),yo(H),he?Li(H.toString(),R):Zc(H.toString(),R)}else Ye(2);f.G=0,f.l&&f.l.sa(E),ba(f),bo(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function ba(f){if(f.G=0,f.ka=[],f.l){const E=Dl(f.h);(E.length!=0||f.i.length!=0)&&(C(f.ka,E),C(f.ka,f.i),f.h.i.length=0,w(f.i),f.i.length=0),f.l.ra()}}function b(f,E,R){var H=R instanceof Sn?Vr(R):new Sn(R);if(H.g!="")E&&(H.g=E+"."+H.g),oa(H,H.s);else{var he=a.location;H=he.protocol,E=E?E+"."+he.hostname:he.hostname,he=+he.port;var xe=new Sn(null);H&&go(xe,H),E&&(xe.g=E),he&&oa(xe,he),R&&(xe.l=R),H=xe}return R=f.D,E=f.ya,R&&E&&Ht(H,R,E),Ht(H,"VER",f.la),Ls(f,H),H}function B(f,E,R){if(E&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Ca&&!f.pa?new zt(new ua({eb:R})):new zt(f.pa),E.Ha(f.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ne(){}t=ne.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function oe(){}oe.prototype.g=function(f,E){return new de(f,E)};function de(f,E){tt.call(this),this.g=new fa(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(f?f["X-WebChannel-Client-Profile"]=E.va:f={"X-WebChannel-Client-Profile":E.va}),this.g.S=f,(f=E&&E.Sb)&&!_(f)&&(this.g.m=f),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!_(E)&&(this.g.D=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new ze(this)}v(de,tt),de.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},de.prototype.close=function(){rs(this.g)},de.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var R={};R.__data__=f,f=R}else this.u&&(R={},R.__data__=Bt(f),f=R);E.i.push(new Eh(E.Ya++,f)),E.G==3&&ma(E)},de.prototype.N=function(){this.g.l=null,delete this.j,rs(this.g),delete this.g,de.aa.N.call(this)};function Se(f){di.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){e:{for(const R in E){f=R;break e}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}v(Se,di);function Ie(){nn.call(this),this.status=1}v(Ie,nn);function ze(f){this.g=f}v(ze,ne),ze.prototype.ua=function(){lt(this.g,"a")},ze.prototype.ta=function(f){lt(this.g,new Se(f))},ze.prototype.sa=function(f){lt(this.g,new Ie)},ze.prototype.ra=function(){lt(this.g,"b")},oe.prototype.createWebChannel=oe.prototype.g,de.prototype.send=de.prototype.o,de.prototype.open=de.prototype.m,de.prototype.close=de.prototype.close,I3=function(){return new oe},T3=function(){return ji()},P3=it,Qy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xr.NO_ERROR=0,xr.TIMEOUT=8,xr.HTTP_ERROR=6,vm=xr,Xr.COMPLETE="complete",k3=Xr,ln.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",tt.prototype.listen=tt.prototype.K,hd=ln,zt.prototype.listenOnce=zt.prototype.L,zt.prototype.getLastError=zt.prototype.Ka,zt.prototype.getLastErrorCode=zt.prototype.Ba,zt.prototype.getStatus=zt.prototype.Z,zt.prototype.getResponseJson=zt.prototype.Oa,zt.prototype.getResponseText=zt.prototype.oa,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Ha,E3=zt}).apply(typeof Dp<"u"?Dp:typeof self<"u"?self:typeof window<"u"?window:{});const iw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new V2("@firebase/firestore");function Zh(){return Tc.logLevel}function Ze(t,...e){if(Tc.logLevel<=Tt.DEBUG){const n=e.map(z2);Tc.debug(`Firestore (${bh}): ${t}`,...n)}}function Qo(t,...e){if(Tc.logLevel<=Tt.ERROR){const n=e.map(z2);Tc.error(`Firestore (${bh}): ${t}`,...n)}}function oh(t,...e){if(Tc.logLevel<=Tt.WARN){const n=e.map(z2);Tc.warn(`Firestore (${bh}): ${t}`,...n)}}function z2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t="Unexpected state"){const e=`FIRESTORE (${bh}) INTERNAL ASSERTION FAILED: `+t;throw Qo(e),new Error(e)}function Qt(t,e){t||pt()}function wt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends ao{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class A6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pr.UNAUTHENTICATED))}shutdown(){}}class C6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class E6{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new qo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qo,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qo)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qt(typeof r.accessToken=="string"),new j3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qt(e===null||typeof e=="string"),new Pr(e)}}class k6{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class P6{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new k6(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class T6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Qt(this.o===void 0);const r=s=>{s.error!=null&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ze("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qt(typeof n.token=="string"),this.R=n.token,new T6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=j6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ft(t,e){return t<e?-1:t>e?1:0}function ah(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ke(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ke(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ke(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ke(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gn.fromMillis(Date.now())}static fromDate(e){return gn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new gn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new gn(0,0))}static max(){return new bt(new gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,r){n===void 0?n=0:n>e.length&&pt(),r===void 0?r=e.length-n:r>e.length-n&&pt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return of.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof of?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class fn extends of{construct(e,n,r){return new fn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ke(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new fn(n)}static emptyPath(){return new fn([])}}const L6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends of{construct(e,n,r){return new hr(e,n,r)}static isValidIdentifier(e){return L6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new hr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ke(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ke(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ke(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ke(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(n)}static emptyPath(){return new hr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.path=e}static fromPath(e){return new nt(fn.fromString(e))}static fromName(e){return new nt(fn.fromString(e).popFirst(5))}static empty(){return new nt(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new fn(e.slice()))}}function R6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(r===1e9?new gn(n+1,0):new gn(n,r));return new yl(i,nt.empty(),e)}function D6(t){return new yl(t.readTime,t.key,-1)}class yl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yl(bt.min(),nt.empty(),-1)}static max(){return new yl(bt.max(),nt.empty(),-1)}}function M6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=nt.comparator(t.documentKey,e.documentKey),n!==0?n:Ft(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class F6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rf(t){if(t.code!==Pe.FAILED_PRECONDITION||t.message!==O6)throw t;Ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new De((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof De?n:De.resolve(n)}catch(n){return De.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):De.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):De.reject(n)}static resolve(e){return new De((n,r)=>{n(e)})}static reject(e){return new De((n,r)=>{r(e)})}static waitFor(e){return new De((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=De.resolve(!1);for(const r of e)n=n.next(i=>i?De.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new De((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new De((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function V6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Df(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}q2.oe=-1;function Jg(t){return t==null}function og(t){return t===0&&1/t==-1/0}function B6(t){return typeof t=="number"&&Number.isInteger(t)&&!og(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function R3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){this.comparator=e,this.root=n||ur.EMPTY}insert(e,n){return new wn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mp(this.root,e,this.comparator,!0)}}class Mp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ur.RED,this.left=i??ur.EMPTY,this.right=s??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ur(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ur.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ur(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.comparator=e,this.data=new wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ow(this.data.getIterator())}getIteratorFrom(e){return new ow(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof fr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new fr(this.comparator);return n.data=e,n}}class ow{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new Ni([])}unionWith(e){let n=new fr(hr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ni(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ah(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new D3("Invalid base64 string: "+s):s}}(e);return new gr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new gr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gr.EMPTY_BYTE_STRING=new gr("");const U6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vl(t){if(Qt(!!t),typeof t=="string"){let e=0;const n=U6.exec(t);if(Qt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(t.seconds),nanos:jn(t.nanos)}}function jn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ic(t){return typeof t=="string"?gr.fromBase64String(t):gr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $2(t){const e=t.mapValue.fields.__previous_value__;return H2(e)?$2(e):e}function af(t){const e=vl(t.mapValue.fields.__local_write_time__.timestampValue);return new gn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class lf{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new lf("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof lf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function jc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?H2(t)?4:H6(t)?9007199254740991:q6(t)?10:11:pt()}function ro(t,e){if(t===e)return!0;const n=jc(t);if(n!==jc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return af(t).isEqual(af(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=vl(i.timestampValue),a=vl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ic(i.bytesValue).isEqual(Ic(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return jn(i.geoPointValue.latitude)===jn(s.geoPointValue.latitude)&&jn(i.geoPointValue.longitude)===jn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return jn(i.integerValue)===jn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=jn(i.doubleValue),a=jn(s.doubleValue);return o===a?og(o)===og(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ah(t.arrayValue.values||[],e.arrayValue.values||[],ro);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(sw(o)!==sw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ro(o[l],a[l])))return!1;return!0}(t,e);default:return pt()}}function cf(t,e){return(t.values||[]).find(n=>ro(n,e))!==void 0}function lh(t,e){if(t===e)return 0;const n=jc(t),r=jc(e);if(n!==r)return Ft(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ft(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=jn(s.integerValue||s.doubleValue),l=jn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return aw(t.timestampValue,e.timestampValue);case 4:return aw(af(t),af(e));case 5:return Ft(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ic(s),l=Ic(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Ft(a[u],l[u]);if(h!==0)return h}return Ft(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ft(jn(s.latitude),jn(o.latitude));return a!==0?a:Ft(jn(s.longitude),jn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return lw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const p=s.fields||{},m=o.fields||{},g=(a=p.value)===null||a===void 0?void 0:a.arrayValue,v=(l=m.value)===null||l===void 0?void 0:l.arrayValue,w=Ft(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:lw(g,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Op.mapValue&&o===Op.mapValue)return 0;if(s===Op.mapValue)return 1;if(o===Op.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const m=Ft(l[p],h[p]);if(m!==0)return m;const g=lh(a[l[p]],u[h[p]]);if(g!==0)return g}return Ft(l.length,h.length)}(t.mapValue,e.mapValue);default:throw pt()}}function aw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ft(t,e);const n=vl(t),r=vl(e),i=Ft(n.seconds,r.seconds);return i!==0?i:Ft(n.nanos,r.nanos)}function lw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=lh(n[i],r[i]);if(s)return s}return Ft(n.length,r.length)}function ch(t){return Xy(t)}function Xy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ic(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return nt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Xy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Xy(n.fields[o])}`;return i+"}"}(t.mapValue):pt()}function cw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jy(t){return!!t&&"integerValue"in t}function W2(t){return!!t&&"arrayValue"in t}function uw(t){return!!t&&"nullValue"in t}function hw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xm(t){return!!t&&"mapValue"in t}function q6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ed(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ed(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ed(t.arrayValue.values[n]);return e}return Object.assign({},t)}function H6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.value=e}static empty(){return new si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ed(n)}setAll(e){let n=hr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ed(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());xm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ro(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Fc(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new si(Ed(this.value))}}function M3(t){const e=[];return Fc(t.fields,(n,r)=>{const i=new hr([n]);if(xm(r)){const s=M3(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ir(e,0,bt.min(),bt.min(),bt.min(),si.empty(),0)}static newFoundDocument(e,n,r,i){return new Ir(e,1,n,bt.min(),r,i,0)}static newNoDocument(e,n){return new Ir(e,2,n,bt.min(),bt.min(),si.empty(),0)}static newUnknownDocument(e,n){return new Ir(e,3,n,bt.min(),bt.min(),si.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n){this.position=e,this.inclusive=n}}function dw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=nt.comparator(nt.fromName(o.referenceValue),n.key):r=lh(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function fw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ro(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n="asc"){this.field=e,this.dir=n}}function $6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{}class $n extends O3{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new G6(e,n,r):n==="array-contains"?new Q6(e,r):n==="in"?new X6(e,r):n==="not-in"?new J6(e,r):n==="array-contains-any"?new Z6(e,r):new $n(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new K6(e,r):new Y6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(lh(n,this.value)):n!==null&&jc(this.value)===jc(n)&&this.matchesComparison(lh(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ws extends O3{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ws(e,n)}matches(e){return F3(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function F3(t){return t.op==="and"}function V3(t){return W6(t)&&F3(t)}function W6(t){for(const e of t.filters)if(e instanceof ws)return!1;return!0}function Zy(t){if(t instanceof $n)return t.field.canonicalString()+t.op.toString()+ch(t.value);if(V3(t))return t.filters.map(e=>Zy(e)).join(",");{const e=t.filters.map(n=>Zy(n)).join(",");return`${t.op}(${e})`}}function B3(t,e){return t instanceof $n?function(r,i){return i instanceof $n&&r.op===i.op&&r.field.isEqual(i.field)&&ro(r.value,i.value)}(t,e):t instanceof ws?function(r,i){return i instanceof ws&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&B3(o,i.filters[a]),!0):!1}(t,e):void pt()}function U3(t){return t instanceof $n?function(n){return`${n.field.canonicalString()} ${n.op} ${ch(n.value)}`}(t):t instanceof ws?function(n){return n.op.toString()+" {"+n.getFilters().map(U3).join(" ,")+"}"}(t):"Filter"}class G6 extends $n{constructor(e,n,r){super(e,n,r),this.key=nt.fromName(r.referenceValue)}matches(e){const n=nt.comparator(e.key,this.key);return this.matchesComparison(n)}}class K6 extends $n{constructor(e,n){super(e,"in",n),this.keys=z3("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Y6 extends $n{constructor(e,n){super(e,"not-in",n),this.keys=z3("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function z3(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>nt.fromName(r.referenceValue))}class Q6 extends $n{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return W2(n)&&cf(n.arrayValue,this.value)}}class X6 extends $n{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cf(this.value.arrayValue,n)}}class J6 extends $n{constructor(e,n){super(e,"not-in",n)}matches(e){if(cf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!cf(this.value.arrayValue,n)}}class Z6 extends $n{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!W2(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function pw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new eL(t,e,n,r,i,s,o)}function G2(t){const e=wt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Jg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ch(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ch(r)).join(",")),e.ue=n}return e.ue}function K2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!B3(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fw(t.startAt,e.startAt)&&fw(t.endAt,e.endAt)}function ev(t){return nt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function tL(t,e,n,r,i,s,o,a){return new wh(t,e,n,r,i,s,o,a)}function Zg(t){return new wh(t)}function mw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function q3(t){return t.collectionGroup!==null}function kd(t){const e=wt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new fr(hr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new uf(s,r))}),n.has(hr.keyField().canonicalString())||e.ce.push(new uf(hr.keyField(),r))}return e.ce}function Qs(t){const e=wt(t);return e.le||(e.le=nL(e,kd(t))),e.le}function nL(t,e){if(t.limitType==="F")return pw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new uf(i.field,s)});const n=t.endAt?new ag(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ag(t.startAt.position,t.startAt.inclusive):null;return pw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tv(t,e){const n=t.filters.concat([e]);return new wh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nv(t,e,n){return new wh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function e0(t,e){return K2(Qs(t),Qs(e))&&t.limitType===e.limitType}function H3(t){return`${G2(Qs(t))}|lt:${t.limitType}`}function bu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>U3(i)).join(", ")}]`),Jg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ch(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ch(i)).join(",")),`Target(${r})`}(Qs(t))}; limitType=${t.limitType})`}function t0(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):nt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of kd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=dw(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,kd(r),i)||r.endAt&&!function(o,a,l){const u=dw(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,kd(r),i))}(t,e)}function rL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $3(t){return(e,n)=>{let r=!1;for(const i of kd(t)){const s=iL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function iL(t,e,n){const r=t.field.isKeyField()?nt.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?lh(l,u):pt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fc(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return R3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new wn(nt.comparator);function Xo(){return sL}const W3=new wn(nt.comparator);function dd(...t){let e=W3;for(const n of t)e=e.insert(n.key,n);return e}function G3(t){let e=W3;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function uc(){return Pd()}function K3(){return Pd()}function Pd(){return new _h(t=>t.toString(),(t,e)=>t.isEqual(e))}const oL=new wn(nt.comparator),aL=new fr(nt.comparator);function kt(...t){let e=aL;for(const n of t)e=e.add(n);return e}const lL=new fr(Ft);function cL(){return lL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:og(e)?"-0":e}}function Y3(t){return{integerValue:""+t}}function uL(t,e){return B6(e)?Y3(e):Y2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(){this._=void 0}}function hL(t,e,n){return t instanceof lg?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&H2(s)&&(s=$2(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof hf?X3(t,e):t instanceof df?J3(t,e):function(i,s){const o=Q3(i,s),a=gw(o)+gw(i.Pe);return Jy(o)&&Jy(i.Pe)?Y3(a):Y2(i.serializer,a)}(t,e)}function dL(t,e,n){return t instanceof hf?X3(t,e):t instanceof df?J3(t,e):n}function Q3(t,e){return t instanceof cg?function(r){return Jy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class lg extends n0{}class hf extends n0{constructor(e){super(),this.elements=e}}function X3(t,e){const n=Z3(e);for(const r of t.elements)n.some(i=>ro(i,r))||n.push(r);return{arrayValue:{values:n}}}class df extends n0{constructor(e){super(),this.elements=e}}function J3(t,e){let n=Z3(e);for(const r of t.elements)n=n.filter(i=>!ro(i,r));return{arrayValue:{values:n}}}class cg extends n0{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function gw(t){return jn(t.integerValue||t.doubleValue)}function Z3(t){return W2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof hf&&i instanceof hf||r instanceof df&&i instanceof df?ah(r.elements,i.elements,ro):r instanceof cg&&i instanceof cg?ro(r.Pe,i.Pe):r instanceof lg&&i instanceof lg}(t.transform,e.transform)}class pL{constructor(e,n){this.version=e,this.transformResults=n}}class xs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xs}static exists(e){return new xs(void 0,e)}static updateTime(e){return new xs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class r0{}function eA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Q2(t.key,xs.none()):new Mf(t.key,t.data,xs.none());{const n=t.data,r=si.empty();let i=new fr(hr.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new El(t.key,r,new Ni(i.toArray()),xs.none())}}function mL(t,e,n){t instanceof Mf?function(i,s,o){const a=i.value.clone(),l=vw(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof El?function(i,s,o){if(!bm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=vw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(tA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Td(t,e,n,r){return t instanceof Mf?function(s,o,a,l){if(!bm(s.precondition,o))return a;const u=s.value.clone(),h=xw(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof El?function(s,o,a,l){if(!bm(s.precondition,o))return a;const u=xw(s.fieldTransforms,l,o),h=o.data;return h.setAll(tA(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return bm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function gL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Q3(r.transform,i||null);s!=null&&(n===null&&(n=si.empty()),n.set(r.field,s))}return n||null}function yw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ah(r,i,(s,o)=>fL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mf extends r0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class El extends r0{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function vw(t,e,n){const r=new Map;Qt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,dL(o,a,n[i]))}return r}function xw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,hL(s,o,e))}return r}class Q2 extends r0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yL extends r0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&mL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Td(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Td(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=K3();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=eA(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),kt())}isEqual(e){return this.batchId===e.batchId&&ah(this.mutations,e.mutations,(n,r)=>yw(n,r))&&ah(this.baseMutations,e.baseMutations,(n,r)=>yw(n,r))}}class X2{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Qt(e.mutations.length===r.length);let i=function(){return oL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new X2(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn,Lt;function wL(t){switch(t){default:return pt();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function nA(t){if(t===void 0)return Qo("GRPC error has no .code"),Pe.UNKNOWN;switch(t){case qn.OK:return Pe.OK;case qn.CANCELLED:return Pe.CANCELLED;case qn.UNKNOWN:return Pe.UNKNOWN;case qn.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case qn.INTERNAL:return Pe.INTERNAL;case qn.UNAVAILABLE:return Pe.UNAVAILABLE;case qn.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case qn.NOT_FOUND:return Pe.NOT_FOUND;case qn.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case qn.ABORTED:return Pe.ABORTED;case qn.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case qn.DATA_LOSS:return Pe.DATA_LOSS;default:return pt()}}(Lt=qn||(qn={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=new yc([4294967295,4294967295],0);function bw(t){const e=_L().encode(t),n=new C3;return n.update(e),new Uint8Array(n.digest())}function ww(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yc([n,r],0),new yc([i,s],0)]}class J2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fd(`Invalid padding: ${n}`);if(r<0)throw new fd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fd(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=yc.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(yc.fromNumber(r)));return i.compare(NL)===1&&(i=new yc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=bw(e),[r,i]=ww(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new J2(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=bw(e),[r,i]=ww(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Of.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new i0(bt.min(),i,new wn(Ft),Xo(),kt())}}class Of{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Of(r,n,kt(),kt(),kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class rA{constructor(e,n){this.targetId=e,this.me=n}}class iA{constructor(e,n,r=gr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class _w{constructor(){this.fe=0,this.ge=Sw(),this.pe=gr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=kt(),n=kt(),r=kt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:pt()}}),new Of(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Sw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class SL{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xo(),this.qe=Nw(),this.Qe=new wn(Ft)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:pt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(ev(s))if(r===0){const o=new nt(s.path);this.Ue(n,o,Ir.newNoDocument(o,bt.min()))}else Qt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ic(r).toUint8Array()}catch(l){if(l instanceof D3)return oh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new J2(o,i,s)}catch(l){return oh(l instanceof fd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&ev(a.target)){const l=new nt(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ir.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=kt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new i0(e,n,this.Qe,this.ke,r);return this.ke=Xo(),this.qe=Nw(),this.Qe=new wn(Ft),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new _w,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new fr(Ft),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ze("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _w),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Nw(){return new wn(nt.comparator)}function Sw(){return new wn(nt.comparator)}const AL={asc:"ASCENDING",desc:"DESCENDING"},CL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EL={and:"AND",or:"OR"};class kL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rv(t,e){return t.useProto3Json||Jg(e)?e:{value:e}}function ug(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function PL(t,e){return ug(t,e.toTimestamp())}function Xs(t){return Qt(!!t),bt.fromTimestamp(function(n){const r=vl(n);return new gn(r.seconds,r.nanos)}(t))}function Z2(t,e){return iv(t,e).canonicalString()}function iv(t,e){const n=function(i){return new fn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oA(t){const e=fn.fromString(t);return Qt(hA(e)),e}function sv(t,e){return Z2(t.databaseId,e.path)}function S1(t,e){const n=oA(e);if(n.get(1)!==t.databaseId.projectId)throw new Ke(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ke(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new nt(lA(n))}function aA(t,e){return Z2(t.databaseId,e)}function TL(t){const e=oA(t);return e.length===4?fn.emptyPath():lA(e)}function ov(t){return new fn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lA(t){return Qt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Aw(t,e,n){return{name:sv(t,e),fields:n.value.mapValue.fields}}function IL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:pt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Qt(h===void 0||typeof h=="string"),gr.fromBase64String(h||"")):(Qt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),gr.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?Pe.UNKNOWN:nA(u.code);return new Ke(h,u.message||"")}(o);n=new iA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=S1(t,r.document.name),s=Xs(r.document.updateTime),o=r.document.createTime?Xs(r.document.createTime):bt.min(),a=new si({mapValue:{fields:r.document.fields}}),l=Ir.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new wm(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=S1(t,r.document),s=r.readTime?Xs(r.readTime):bt.min(),o=Ir.newNoDocument(i,s),a=r.removedTargetIds||[];n=new wm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=S1(t,r.document),s=r.removedTargetIds||[];n=new wm([],s,i,null)}else{if(!("filter"in e))return pt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new bL(i,s),a=r.targetId;n=new rA(a,o)}}return n}function jL(t,e){let n;if(e instanceof Mf)n={update:Aw(t,e.key,e.value)};else if(e instanceof Q2)n={delete:sv(t,e.key)};else if(e instanceof El)n={update:Aw(t,e.key,e.data),updateMask:UL(e.fieldMask)};else{if(!(e instanceof yL))return pt();n={verify:sv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof lg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof hf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof df)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof cg)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw pt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:PL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:pt()}(t,e.precondition)),n}function LL(t,e){return t&&t.length>0?(Qt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Xs(i.updateTime):Xs(s);return o.isEqual(bt.min())&&(o=Xs(s)),new pL(o,i.transformResults||[])}(n,e))):[]}function RL(t,e){return{documents:[aA(t,e.path)]}}function DL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=aA(t,i);const s=function(u){if(u.length!==0)return uA(ws.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:wu(m.field),direction:FL(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=rv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function ML(t){let e=TL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qt(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const m=cA(p);return m instanceof ws&&V3(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(v){return new uf(_u(v.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Jg(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,g=p.values||[];return new ag(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,g=p.values||[];return new ag(g,m)}(n.endAt)),tL(e,i,o,s,a,"F",l,u)}function OL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_u(n.unaryFilter.field);return $n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=_u(n.unaryFilter.field);return $n.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=_u(n.unaryFilter.field);return $n.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_u(n.unaryFilter.field);return $n.create(o,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}(t):t.fieldFilter!==void 0?function(n){return $n.create(_u(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ws.create(n.compositeFilter.filters.map(r=>cA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pt()}}(n.compositeFilter.op))}(t):pt()}function FL(t){return AL[t]}function VL(t){return CL[t]}function BL(t){return EL[t]}function wu(t){return{fieldPath:t.canonicalString()}}function _u(t){return hr.fromServerFormat(t.fieldPath)}function uA(t){return t instanceof $n?function(n){if(n.op==="=="){if(hw(n.value))return{unaryFilter:{field:wu(n.field),op:"IS_NAN"}};if(uw(n.value))return{unaryFilter:{field:wu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hw(n.value))return{unaryFilter:{field:wu(n.field),op:"IS_NOT_NAN"}};if(uw(n.value))return{unaryFilter:{field:wu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wu(n.field),op:VL(n.op),value:n.value}}}(t):t instanceof ws?function(n){const r=n.getFilters().map(i=>uA(i));return r.length===1?r[0]:{compositeFilter:{op:BL(n.op),filters:r}}}(t):pt()}function UL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n,r,i,s=bt.min(),o=bt.min(),a=gr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.ct=e}}function qL(t){const e=ML({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this.un=new $L}addToCollectionParentIndex(e,n){return this.un.add(n),De.resolve()}getCollectionParents(e,n){return De.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return De.resolve()}deleteFieldIndex(e,n){return De.resolve()}deleteAllFieldIndexes(e){return De.resolve()}createTargetIndexes(e,n){return De.resolve()}getDocumentsMatchingTarget(e,n){return De.resolve(null)}getIndexType(e,n){return De.resolve(0)}getFieldIndexes(e,n){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}getMinOffset(e,n){return De.resolve(yl.min())}getMinOffsetFromCollectionGroup(e,n){return De.resolve(yl.min())}updateCollectionGroup(e,n,r){return De.resolve()}updateIndexEntries(e,n){return De.resolve()}}class $L{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new fr(fn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fr(fn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new uh(0)}static kn(){return new uh(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(){this.changes=new _h(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ir.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?De.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Td(r.mutation,i,Ni.empty(),gn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,kt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=kt()){const i=uc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=dd();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=uc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,kt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Xo();const o=Pd(),a=function(){return Pd()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof El)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Td(h.mutation,u,h.mutation.getFieldMask(),gn.now())):o.set(u.key,Ni.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var p;return a.set(u,new GL(h,(p=o.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Pd();let i=new wn((o,a)=>o-a),s=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Ni.empty();h=a.applyToLocalView(u,h),r.set(l,h);const p=(i.get(a.batchId)||kt()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,p=K3();h.forEach(m=>{if(!s.has(m)){const g=eA(n.get(m),r.get(m));g!==null&&p.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return De.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return nt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):q3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):De.resolve(uc());let a=-1,l=s;return o.next(u=>De.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?De.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,kt())).next(h=>({batchId:a,changes:G3(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new nt(n)).next(r=>{let i=dd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=dd();return this.indexManager.getCollectionParents(e,s).next(a=>De.forEach(a,l=>{const u=function(p,m){return new wh(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ir.newInvalidDocument(h)))});let a=dd();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Td(h.mutation,u,Ni.empty(),gn.now()),t0(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return De.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Xs(i.createTime)}}(n)),De.resolve()}getNamedQuery(e,n){return De.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:qL(i.bundledQuery),readTime:Xs(i.readTime)}}(n)),De.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this.overlays=new wn(nt.comparator),this.Ir=new Map}getOverlay(e,n){return De.resolve(this.overlays.get(n))}getOverlays(e,n){const r=uc();return De.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),De.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),De.resolve()}getOverlaysForCollection(e,n,r){const i=uc(),s=n.length+1,o=new nt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return De.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new wn((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=uc(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=uc(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return De.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xL(n,r));let s=this.Ir.get(n);s===void 0&&(s=kt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(){this.sessionToken=gr.EMPTY_BYTE_STRING}getSessionToken(e){return De.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,De.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.Tr=new fr(er.Er),this.dr=new fr(er.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new er(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new er(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new nt(new fn([])),r=new er(n,e),i=new er(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new nt(new fn([])),r=new er(n,e),i=new er(n,e+1);let s=kt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new er(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class er{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return nt.comparator(e.key,n.key)||Ft(e.wr,n.wr)}static Ar(e,n){return Ft(e.wr,n.wr)||nt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new fr(er.Er)}checkEmpty(e){return De.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new vL(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new er(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return De.resolve(o)}lookupMutationBatch(e,n){return De.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return De.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return De.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new er(n,0),i=new er(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),De.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new fr(Ft);return n.forEach(i=>{const s=new er(i,0),o=new er(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),De.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;nt.isDocumentKey(s)||(s=s.child(""));const o=new er(new nt(s),0);let a=new fr(Ft);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),De.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Qt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return De.forEach(n.mutations,i=>{const s=new er(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new er(n,0),i=this.br.firstAfterOrEqual(r);return De.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,De.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e){this.Mr=e,this.docs=function(){return new wn(nt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return De.resolve(r?r.document.mutableCopy():Ir.newInvalidDocument(n))}getEntries(e,n){let r=Xo();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ir.newInvalidDocument(i))}),De.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Xo();const o=n.path,a=new nt(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||M6(D6(h),r)<=0||(i.has(h.key)||t0(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return De.resolve(s)}getAllFromCollectionGroup(e,n,r,i){pt()}Or(e,n){return De.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new eR(this)}getSize(e){return De.resolve(this.size)}}class eR extends WL{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),De.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.persistence=e,this.Nr=new _h(n=>G2(n),K2),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ex,this.targetCount=0,this.kr=uh.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),De.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new uh(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,De.resolve()}updateTargetData(e,n){return this.Kn(n),De.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),De.waitFor(s).next(()=>i)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return De.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),De.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),De.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),De.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return De.resolve(r)}containsKey(e,n){return De.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new q2(0),this.Kr=!1,this.Kr=!0,this.$r=new XL,this.referenceDelegate=e(this),this.Ur=new tR(this),this.indexManager=new HL,this.remoteDocumentCache=function(i){return new ZL(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new zL(n),this.Gr=new YL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new JL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ze("MemoryPersistence","Starting transaction:",e);const i=new rR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return De.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class rR extends F6{constructor(e){super(),this.currentSequenceNumber=e}}class tx{constructor(e){this.persistence=e,this.Jr=new ex,this.Yr=null}static Zr(e){return new tx(e)}get Xr(){if(this.Yr)return this.Yr;throw pt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),De.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),De.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),De.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.Xr,r=>{const i=nt.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,bt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return De.or([()=>De.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=kt(),i=kt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new nx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lj()?8:V6(Mr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new iR;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Zh()<=Tt.DEBUG&&Ze("QueryEngine","SDK will not create cache indexes for query:",bu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),De.resolve()):(Zh()<=Tt.DEBUG&&Ze("QueryEngine","Query:",bu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Zh()<=Tt.DEBUG&&Ze("QueryEngine","The SDK decides to create cache indexes for query:",bu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qs(n))):De.resolve())}Yi(e,n){if(mw(n))return De.resolve(null);let r=Qs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=nv(n,null,"F"),r=Qs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=kt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,nv(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return mw(n)||i.isEqual(bt.min())?De.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?De.resolve(null):(Zh()<=Tt.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bu(n)),this.rs(e,o,n,R6(i,-1)).next(a=>a))})}ts(e,n){let r=new fr($3(e));return n.forEach((i,s)=>{t0(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Zh()<=Tt.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",bu(n)),this.Ji.getDocumentsMatchingQuery(e,n,yl.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new wn(Ft),this._s=new _h(s=>G2(s),K2),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function aR(t,e,n,r){return new oR(t,e,n,r)}async function dA(t,e){const n=wt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=kt();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function lR(t,e){const n=wt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const p=u.batch,m=p.keys();let g=De.resolve();return m.forEach(v=>{g=g.next(()=>h.getEntry(l,v)).next(w=>{const C=u.docVersions.get(v);Qt(C!==null),w.version.compareTo(C)<0&&(p.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=kt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function fA(t){const e=wt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function cR(t,e){const n=wt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(gr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(p,g),function(w,C,x){return w.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=Xo(),u=kt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(uR(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(bt.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return De.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function uR(t,e,n){let r=kt(),i=kt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Xo();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(bt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ze("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function hR(t,e){const n=wt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dR(t,e){const n=wt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,De.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Xa(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function av(t,e,n){const r=wt(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Df(o))throw o;Ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Cw(t,e,n){const r=wt(t);let i=bt.min(),s=kt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const p=wt(l),m=p._s.get(h);return m!==void 0?De.resolve(p.os.get(m)):p.Ur.getTargetData(u,h)}(r,o,Qs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:bt.min(),n?s:kt())).next(a=>(fR(r,rL(e),a),{documents:a,Ts:s})))}function fR(t,e,n){let r=t.us.get(e)||bt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Ew{constructor(){this.activeTargetIds=cL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pR{constructor(){this.so=new Ew,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ew,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fp=null;function A1(){return Fp===null?Fp=function(){return 268435456+Math.round(2147483648*Math.random())}():Fp++,"0x"+Fp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="WebChannelConnection";class vR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=A1(),l=this.xo(n,r.toUriEncodedString());Ze("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(h=>(Ze("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw oh("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bh}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=gR[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=A1();return new Promise((o,a)=>{const l=new E3;l.setWithCredentials(!0),l.listenOnce(k3.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vm.NO_ERROR:const h=l.getResponseJson();Ze(Nr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case vm.TIMEOUT:Ze(Nr,`RPC '${e}' ${s} timed out`),a(new Ke(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case vm.HTTP_ERROR:const p=l.getStatus();if(Ze(Nr,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const v=function(C){const x=C.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(x)>=0?x:Pe.UNKNOWN}(g.status);a(new Ke(v,g.message))}else a(new Ke(Pe.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ke(Pe.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{Ze(Nr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Ze(Nr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=A1(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I3(),a=T3(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Ze(Nr,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=o.createWebChannel(h,l);let m=!1,g=!1;const v=new yR({Io:C=>{g?Ze(Nr,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(m||(Ze(Nr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),Ze(Nr,`RPC '${e}' stream ${i} sending:`,C),p.send(C))},To:()=>p.close()}),w=(C,x,_)=>{C.listen(x,S=>{try{_(S)}catch(I){setTimeout(()=>{throw I},0)}})};return w(p,hd.EventType.OPEN,()=>{g||(Ze(Nr,`RPC '${e}' stream ${i} transport opened.`),v.yo())}),w(p,hd.EventType.CLOSE,()=>{g||(g=!0,Ze(Nr,`RPC '${e}' stream ${i} transport closed`),v.So())}),w(p,hd.EventType.ERROR,C=>{g||(g=!0,oh(Nr,`RPC '${e}' stream ${i} transport errored:`,C),v.So(new Ke(Pe.UNAVAILABLE,"The operation could not be completed")))}),w(p,hd.EventType.MESSAGE,C=>{var x;if(!g){const _=C.data[0];Qt(!!_);const S=_,I=S.error||((x=S[0])===null||x===void 0?void 0:x.error);if(I){Ze(Nr,`RPC '${e}' stream ${i} received error:`,I);const F=I.status;let V=function(L){const M=qn[L];if(M!==void 0)return nA(M)}(F),P=I.message;V===void 0&&(V=Pe.INTERNAL,P="Unknown error status: "+F+" with message "+I.message),g=!0,v.So(new Ke(V,P)),p.close()}else Ze(Nr,`RPC '${e}' stream ${i} received:`,_),v.bo(_)}}),w(a,P3.STAT_EVENT,C=>{C.stat===Qy.PROXY?Ze(Nr,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Qy.NOPROXY&&Ze(Nr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function C1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t){return new kL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new pA(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Pe.RESOURCE_EXHAUSTED?(Qo(n.toString()),Qo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Ke(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xR extends mA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=IL(this.serializer,e),r=function(s){if(!("targetChange"in s))return bt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?bt.min():o.readTime?Xs(o.readTime):bt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ov(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=ev(l)?{documents:RL(s,l)}:{query:DL(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sA(s,o.resumeToken);const u=rv(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(bt.min())>0){a.readTime=ug(s,o.snapshotVersion.toTimestamp());const u=rv(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=OL(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ov(this.serializer),n.removeTarget=e,this.a_(n)}}class bR extends mA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,Qt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=LL(e.writeResults,e.commitTime),r=Xs(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ov(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>jL(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ke(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,iv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ke(Pe.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,iv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ke(Pe.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class _R{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qo(n),this.D_=!1):Ze("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Vc(this)&&(Ze("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=wt(l);u.L_.add(4),await Ff(u),u.q_.set("Unknown"),u.L_.delete(4),await o0(u)}(this))})}),this.q_=new _R(r,i)}}async function o0(t){if(Vc(t))for(const e of t.B_)await e(!0)}async function Ff(t){for(const e of t.B_)await e(!1)}function gA(t,e){const n=wt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ox(n)?sx(n):Nh(n).r_()&&ix(n,e))}function rx(t,e){const n=wt(t),r=Nh(n);n.N_.delete(e),r.r_()&&yA(n,e),n.N_.size===0&&(r.r_()?r.o_():Vc(n)&&n.q_.set("Unknown"))}function ix(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(bt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nh(t).A_(e)}function yA(t,e){t.Q_.xe(e),Nh(t).R_(e)}function sx(t){t.Q_=new SL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Nh(t).start(),t.q_.v_()}function ox(t){return Vc(t)&&!Nh(t).n_()&&t.N_.size>0}function Vc(t){return wt(t).L_.size===0}function vA(t){t.Q_=void 0}async function SR(t){t.q_.set("Online")}async function AR(t){t.N_.forEach((e,n)=>{ix(t,e)})}async function CR(t,e){vA(t),ox(t)?(t.q_.M_(e),sx(t)):t.q_.set("Unknown")}async function ER(t,e,n){if(t.q_.set("Online"),e instanceof iA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hg(t,r)}else if(e instanceof wm?t.Q_.Ke(e):e instanceof rA?t.Q_.He(e):t.Q_.We(e),!n.isEqual(bt.min()))try{const r=await fA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(gr.EMPTY_BYTE_STRING,h.snapshotVersion)),yA(s,l);const p=new Xa(h.target,l,u,h.sequenceNumber);ix(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ze("RemoteStore","Failed to raise snapshot:",r),await hg(t,r)}}async function hg(t,e,n){if(!Df(e))throw e;t.L_.add(1),await Ff(t),t.q_.set("Offline"),n||(n=()=>fA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ze("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await o0(t)})}function xA(t,e){return e().catch(n=>hg(t,n,e))}async function a0(t){const e=wt(t),n=xl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;kR(e);)try{const i=await hR(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,PR(e,i)}catch(i){await hg(e,i)}bA(e)&&wA(e)}function kR(t){return Vc(t)&&t.O_.length<10}function PR(t,e){t.O_.push(e);const n=xl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function bA(t){return Vc(t)&&!xl(t).n_()&&t.O_.length>0}function wA(t){xl(t).start()}async function TR(t){xl(t).p_()}async function IR(t){const e=xl(t);for(const n of t.O_)e.m_(n.mutations)}async function jR(t,e,n){const r=t.O_.shift(),i=X2.from(r,e,n);await xA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await a0(t)}async function LR(t,e){e&&xl(t).V_&&await async function(r,i){if(function(o){return wL(o)&&o!==Pe.ABORTED}(i.code)){const s=r.O_.shift();xl(r).s_(),await xA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await a0(r)}}(t,e),bA(t)&&wA(t)}async function Pw(t,e){const n=wt(t);n.asyncQueue.verifyOperationInProgress(),Ze("RemoteStore","RemoteStore received new credentials");const r=Vc(n);n.L_.add(3),await Ff(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await o0(n)}async function RR(t,e){const n=wt(t);e?(n.L_.delete(2),await o0(n)):e||(n.L_.add(2),await Ff(n),n.q_.set("Unknown"))}function Nh(t){return t.K_||(t.K_=function(n,r,i){const s=wt(n);return s.w_(),new xR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:SR.bind(null,t),Ro:AR.bind(null,t),mo:CR.bind(null,t),d_:ER.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ox(t)?sx(t):t.q_.set("Unknown")):(await t.K_.stop(),vA(t))})),t.K_}function xl(t){return t.U_||(t.U_=function(n,r,i){const s=wt(n);return s.w_(),new bR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:TR.bind(null,t),mo:LR.bind(null,t),f_:IR.bind(null,t),g_:jR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await a0(t)):(await t.U_.stop(),t.O_.length>0&&(Ze("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new ax(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ke(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lx(t,e){if(Qo("AsyncQueue",`${e}: ${t}`),Df(t))return new Ke(Pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.comparator=e?(n,r)=>e(n,r)||nt.comparator(n.key,r.key):(n,r)=>nt.comparator(n.key,r.key),this.keyedMap=dd(),this.sortedSet=new wn(this.comparator)}static emptySet(e){return new $u(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $u)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $u;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.W_=new wn(nt.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class hh{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new hh(e,n,$u.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&e0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class MR{constructor(){this.queries=Iw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=wt(n),s=i.queries;i.queries=Iw(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Ke(Pe.ABORTED,"Firestore shutting down"))}}function Iw(){return new _h(t=>H3(t),e0)}async function cx(t,e){const n=wt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new DR,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=lx(o,`Initialization of query '${bu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&hx(n)}async function ux(t,e){const n=wt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function OR(t,e){const n=wt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&hx(n)}function FR(t,e,n){const r=wt(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function hx(t){t.Y_.forEach(e=>{e.next()})}var lv,jw;(jw=lv||(lv={})).ea="default",jw.Cache="cache";class dx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new hh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=hh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==lv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.key=e}}class NA{constructor(e){this.key=e}}class VR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=kt(),this.mutatedKeys=kt(),this.Aa=$3(e),this.Ra=new $u(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Tw,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),g=t0(this.query,p)?p:null,v=!!m&&this.mutatedKeys.has(m.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;m&&g?m.data.isEqual(g.data)?v!==w&&(r.track({type:3,doc:g}),C=!0):this.ga(m,g)||(r.track({type:2,doc:g}),C=!0,(l&&this.Aa(g,l)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),C=!0):m&&!g&&(r.track({type:1,doc:m}),C=!0,(l||u)&&(a=!0)),C&&(g?(o=o.add(g),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,p)=>function(g,v){const w=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return w(g)-w(v)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new hh(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Tw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=kt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new NA(r))}),this.da.forEach(r=>{e.has(r)||n.push(new _A(r))}),n}ba(e){this.Ta=e.Ts,this.da=kt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return hh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class BR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UR{constructor(e){this.key=e,this.va=!1}}class zR{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new _h(a=>H3(a),e0),this.Ma=new Map,this.xa=new Set,this.Oa=new wn(nt.comparator),this.Na=new Map,this.La=new ex,this.Ba={},this.ka=new Map,this.qa=uh.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function qR(t,e,n=!0){const r=PA(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await SA(r,e,n,!0),i}async function HR(t,e){const n=PA(t);await SA(n,e,!0,!1)}async function SA(t,e,n,r){const i=await dR(t.localStore,Qs(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await $R(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&gA(t.remoteStore,i),a}async function $R(t,e,n,r,i){t.Ka=(p,m,g)=>async function(w,C,x,_){let S=C.view.ma(x);S.ns&&(S=await Cw(w.localStore,C.query,!1).then(({documents:P})=>C.view.ma(P,S)));const I=_&&_.targetChanges.get(C.targetId),F=_&&_.targetMismatches.get(C.targetId)!=null,V=C.view.applyChanges(S,w.isPrimaryClient,I,F);return Rw(w,C.targetId,V.wa),V.snapshot}(t,p,m,g);const s=await Cw(t.localStore,e,!0),o=new VR(e,s.Ts),a=o.ma(s.documents),l=Of.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Rw(t,n,u.wa);const h=new BR(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function WR(t,e,n){const r=wt(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!e0(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await av(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&rx(r.remoteStore,i.targetId),cv(r,i.targetId)}).catch(Rf)):(cv(r,i.targetId),await av(r.localStore,i.targetId,!0))}async function GR(t,e){const n=wt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rx(n.remoteStore,r.targetId))}async function KR(t,e,n){const r=tD(t);try{const i=await function(o,a){const l=wt(o),u=gn.now(),h=a.reduce((g,v)=>g.add(v.key),kt());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Xo(),w=kt();return l.cs.getEntries(g,h).next(C=>{v=C,v.forEach((x,_)=>{_.isValidDocument()||(w=w.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(C=>{p=C;const x=[];for(const _ of a){const S=gL(_,p.get(_.key).overlayedDocument);S!=null&&x.push(new El(_.key,S,M3(S.value.mapValue),xs.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,x,a)}).next(C=>{m=C;const x=C.applyToLocalDocumentSet(p,w);return l.documentOverlayCache.saveOverlays(g,C.batchId,x)})}).then(()=>({batchId:m.batchId,changes:G3(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new wn(Ft)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Vf(r,i.changes),await a0(r.remoteStore)}catch(i){const s=lx(i,"Failed to persist write");n.reject(s)}}async function AA(t,e){const n=wt(t);try{const r=await cR(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Qt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Qt(o.va):i.removedDocuments.size>0&&(Qt(o.va),o.va=!1))}),await Vf(n,r,e)}catch(r){await Rf(r)}}function Lw(t,e,n){const r=wt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=wt(o);l.onlineState=a;let u=!1;l.queries.forEach((h,p)=>{for(const m of p.j_)m.Z_(a)&&(u=!0)}),u&&hx(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YR(t,e,n){const r=wt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new wn(nt.comparator);o=o.insert(s,Ir.newNoDocument(s,bt.min()));const a=kt().add(s),l=new i0(bt.min(),new Map,new wn(Ft),o,a);await AA(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),fx(r)}else await av(r.localStore,e,!1).then(()=>cv(r,e,n)).catch(Rf)}async function QR(t,e){const n=wt(t),r=e.batch.batchId;try{const i=await lR(n.localStore,e);EA(n,r,null),CA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vf(n,i)}catch(i){await Rf(i)}}async function XR(t,e,n){const r=wt(t);try{const i=await function(o,a){const l=wt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(Qt(p!==null),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);EA(r,e,n),CA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vf(r,i)}catch(i){await Rf(i)}}function CA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function EA(t,e,n){const r=wt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function cv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||kA(t,r)})}function kA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(rx(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),fx(t))}function Rw(t,e,n){for(const r of n)r instanceof _A?(t.La.addReference(r.key,e),JR(t,r)):r instanceof NA?(Ze("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||kA(t,r.key)):pt()}function JR(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ze("SyncEngine","New document in limbo: "+n),t.xa.add(r),fx(t))}function fx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new nt(fn.fromString(e)),r=t.qa.next();t.Na.set(r,new UR(n)),t.Oa=t.Oa.insert(n,r),gA(t.remoteStore,new Xa(Qs(Zg(n.path)),r,"TargetPurposeLimboResolution",q2.oe))}}async function Vf(t,e,n){const r=wt(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);const p=nx.Wi(l.targetId,u);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const h=wt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>De.forEach(u,m=>De.forEach(m.$i,g=>h.persistence.referenceDelegate.addReference(p,m.targetId,g)).next(()=>De.forEach(m.Ui,g=>h.persistence.referenceDelegate.removeReference(p,m.targetId,g)))))}catch(p){if(!Df(p))throw p;Ze("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const g=h.os.get(m),v=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(v);h.os=h.os.insert(m,w)}}}(r.localStore,s))}async function ZR(t,e){const n=wt(t);if(!n.currentUser.isEqual(e)){Ze("SyncEngine","User change. New user:",e.toKey());const r=await dA(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Ke(Pe.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vf(n,r.hs)}}function eD(t,e){const n=wt(t),r=n.Na.get(e);if(r&&r.va)return kt().add(r.key);{let i=kt();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function PA(t){const e=wt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YR.bind(null,e),e.Ca.d_=OR.bind(null,e.eventManager),e.Ca.$a=FR.bind(null,e.eventManager),e}function tD(t){const e=wt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XR.bind(null,e),e}class dg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=s0(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return aR(this.persistence,new sR,e.initialUser,this.serializer)}Ga(e){return new nR(tx.Zr,this.serializer)}Wa(e){return new pR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dg.provider={build:()=>new dg};class uv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZR.bind(null,this.syncEngine),await RR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MR}()}createDatastore(e){const n=s0(e.databaseInfo.databaseId),r=function(s){return new vR(s)}(e.databaseInfo);return function(s,o,a,l){return new wR(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new NR(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Lw(this.syncEngine,n,0),function(){return kw.D()?new kw:new mR}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const p=new zR(i,s,o,a,l,u);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=wt(i);Ze("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ff(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}uv.provider={build:()=>new uv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Qo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Pr.UNAUTHENTICATED,this.clientId=L3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Ze("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ze("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=lx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function E1(t,e){t.asyncQueue.verifyOperationInProgress(),Ze("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await dA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Dw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rD(t);Ze("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Pw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Pw(e.remoteStore,i)),t._onlineComponents=e}async function rD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ze("FirestoreClient","Using user provided OfflineComponentProvider");try{await E1(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Pe.FAILED_PRECONDITION||i.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;oh("Error using user provided cache. Falling back to memory cache: "+n),await E1(t,new dg)}}else Ze("FirestoreClient","Using default OfflineComponentProvider"),await E1(t,new dg);return t._offlineComponents}async function TA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ze("FirestoreClient","Using user provided OnlineComponentProvider"),await Dw(t,t._uninitializedComponentsProvider._online)):(Ze("FirestoreClient","Using default OnlineComponentProvider"),await Dw(t,new uv))),t._onlineComponents}function iD(t){return TA(t).then(e=>e.syncEngine)}async function fg(t){const e=await TA(t),n=e.eventManager;return n.onListen=qR.bind(null,e.syncEngine),n.onUnlisten=WR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GR.bind(null,e.syncEngine),n}function sD(t,e,n={}){const r=new qo;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new px({next:m=>{h.Za(),o.enqueueAndForget(()=>ux(s,p));const g=m.docs.has(a);!g&&m.fromCache?u.reject(new Ke(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new Ke(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new dx(Zg(a.path),h,{includeMetadataChanges:!0,_a:!0});return cx(s,p)}(await fg(t),t.asyncQueue,e,n,r)),r.promise}function oD(t,e,n={}){const r=new qo;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new px({next:m=>{h.Za(),o.enqueueAndForget(()=>ux(s,p)),m.fromCache&&l.source==="server"?u.reject(new Ke(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new dx(a,h,{includeMetadataChanges:!0,_a:!0});return cx(s,p)}(await fg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t,e,n){if(!n)throw new Ke(Pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aD(t,e,n,r){if(e===!0&&r===!0)throw new Ke(Pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ow(t){if(!nt.isDocumentKey(t))throw new Ke(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fw(t){if(nt.isDocumentKey(t))throw new Ke(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function l0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pt()}function Ei(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ke(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=l0(t);throw new Ke(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ke(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ke(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ke(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ke(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ke(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class c0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ke(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ke(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new A6;switch(r.type){case"firstParty":return new P6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ke(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Mw.get(n);r&&(Ze("ComponentProvider","Removing Datastore"),Mw.delete(n),r.terminate())}(this),Promise.resolve()}}function lD(t,e,n,r={}){var i;const s=(t=Ei(t,c0))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&oh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Pr.MOCK_USER;else{a=b3(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ke(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Pr(u)}t._authCredentials=new C6(new j3(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new kl(this.firestore,e,this._query)}}class Rr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rr(this.firestore,e,this._key)}}class hl extends kl{constructor(e,n,r){super(e,n,Zg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rr(this.firestore,null,new nt(e))}withConverter(e){return new hl(this.firestore,e,this._path)}}function LA(t,e,...n){if(t=mr(t),jA("collection","path",e),t instanceof c0){const r=fn.fromString(e,...n);return Fw(r),new hl(t,null,r)}{if(!(t instanceof Rr||t instanceof hl))throw new Ke(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fn.fromString(e,...n));return Fw(r),new hl(t.firestore,null,r)}}function Bf(t,e,...n){if(t=mr(t),arguments.length===1&&(e=L3.newId()),jA("doc","path",e),t instanceof c0){const r=fn.fromString(e,...n);return Ow(r),new Rr(t,null,new nt(r))}{if(!(t instanceof Rr||t instanceof hl))throw new Ke(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fn.fromString(e,...n));return Ow(r),new Rr(t.firestore,t instanceof hl?t.converter:null,new nt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new pA(this,"async_queue_retry"),this.Vu=()=>{const r=C1();r&&Ze("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=C1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=C1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new qo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Df(e))throw e;Ze("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Qo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=ax.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&pt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Uw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class bl extends c0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Bw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bw(e),this._firestoreClient=void 0,await e}}}function cD(t,e){const n=typeof t=="object"?t:U2(),r=typeof t=="string"?t:"(default)",i=Xg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=y3("firestore");s&&lD(i,...s)}return i}function u0(t){if(t._terminated)throw new Ke(Pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uD(t),t._firestoreClient}function uD(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,h){return new z6(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,IA(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new nD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dh(gr.fromBase64String(e))}catch(n){throw new Ke(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dh(gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ke(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ke(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ke(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=/^__.*__$/;class dD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new El(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mf(e,this.data,n,this.fieldTransforms)}}class RA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new El(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function DA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class vx{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new vx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return pg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(DA(this.Cu)&&hD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class fD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||s0(e)}Qu(e,n,r,i=!1){return new vx({Cu:e,methodName:n,qu:r,path:hr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xx(t){const e=t._freezeSettings(),n=s0(t._databaseId);return new fD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pD(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);bx("Data must be an object, but it was:",o,r);const a=MA(r,o);let l,u;if(s.merge)l=new Ni(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const m=hv(e,p,n);if(!o.contains(m))throw new Ke(Pe.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);FA(h,m)||h.push(m)}l=new Ni(h),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new dD(new si(a),l,u)}class d0 extends mx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof d0}}function mD(t,e,n,r){const i=t.Qu(1,e,n);bx("Data must be an object, but it was:",i,r);const s=[],o=si.empty();Fc(r,(l,u)=>{const h=wx(e,l,n);u=mr(u);const p=i.Nu(h);if(u instanceof d0)s.push(h);else{const m=Uf(u,p);m!=null&&(s.push(h),o.set(h,m))}});const a=new Ni(s);return new RA(o,a,i.fieldTransforms)}function gD(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[hv(e,r,n)],l=[i];if(s.length%2!=0)throw new Ke(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(hv(e,s[m])),l.push(s[m+1]);const u=[],h=si.empty();for(let m=a.length-1;m>=0;--m)if(!FA(u,a[m])){const g=a[m];let v=l[m];v=mr(v);const w=o.Nu(g);if(v instanceof d0)u.push(g);else{const C=Uf(v,w);C!=null&&(u.push(g),h.set(g,C))}}const p=new Ni(u);return new RA(h,p,o.fieldTransforms)}function yD(t,e,n,r=!1){return Uf(n,t.Qu(r?4:3,e))}function Uf(t,e){if(OA(t=mr(t)))return bx("Unsupported field value:",e,t),MA(t,e);if(t instanceof mx)return function(r,i){if(!DA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Uf(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=mr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=gn.fromDate(r);return{timestampValue:ug(i.serializer,s)}}if(r instanceof gn){const s=new gn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ug(i.serializer,s)}}if(r instanceof gx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dh)return{bytesValue:sA(i.serializer,r._byteString)};if(r instanceof Rr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Z2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yx)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Y2(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${l0(r)}`)}(t,e)}function MA(t,e){const n={};return R3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fc(t,(r,i)=>{const s=Uf(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function OA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gn||t instanceof gx||t instanceof dh||t instanceof Rr||t instanceof mx||t instanceof yx)}function bx(t,e,n){if(!OA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=l0(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function hv(t,e,n){if((e=mr(e))instanceof h0)return e._internalPath;if(typeof e=="string")return wx(t,e);throw pg("Field path arguments must be of type string or ",t,!1,void 0,n)}const vD=new RegExp("[~\\*/\\[\\]]");function wx(t,e,n){if(e.search(vD)>=0)throw pg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new h0(...e.split("."))._internalPath}catch{throw pg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pg(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ke(Pe.INVALID_ARGUMENT,a+t+l)}function FA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(f0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xD extends VA{data(){return super.data()}}function f0(t,e){return typeof e=="string"?wx(t,e):e instanceof h0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ke(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _x{}class UA extends _x{}function dv(t,e,...n){let r=[];e instanceof _x&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Nx).length,a=s.filter(l=>l instanceof p0).length;if(o>1||o>0&&a>0)throw new Ke(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class p0 extends UA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new p0(e,n,r)}_apply(e){const n=this._parse(e);return zA(e._query,n),new kl(e.firestore,e.converter,tv(e._query,n))}_parse(e){const n=xx(e.firestore);return function(s,o,a,l,u,h,p){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Ke(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){qw(p,h);const g=[];for(const v of p)g.push(zw(l,s,v));m={arrayValue:{values:g}}}else m=zw(l,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||qw(p,h),m=yD(a,o,p,h==="in"||h==="not-in");return $n.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bD(t,e,n){const r=e,i=f0("where",t);return p0._create(i,r,n)}class Nx extends _x{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ws.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)zA(o,l),o=tv(o,l)}(e._query,n),new kl(e.firestore,e.converter,tv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sx extends UA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sx(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Ke(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ke(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uf(s,o)}(e._query,this._field,this._direction);return new kl(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new wh(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function wD(t,e="asc"){const n=e,r=f0("orderBy",t);return Sx._create(r,n)}function zw(t,e,n){if(typeof(n=mr(n))=="string"){if(n==="")throw new Ke(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!q3(e)&&n.indexOf("/")!==-1)throw new Ke(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(fn.fromString(n));if(!nt.isDocumentKey(r))throw new Ke(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cw(t,new nt(r))}if(n instanceof Rr)return cw(t,n._key);throw new Ke(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${l0(n)}.`)}function qw(t,e){if(!Array.isArray(t)||t.length===0)throw new Ke(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zA(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ke(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ke(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _D{convertValue(e,n="none"){switch(jc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fc(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>jn(o.doubleValue));return new yx(s)}convertGeoPoint(e){return new gx(jn(e.latitude),jn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(af(e));default:return null}}convertTimestamp(e){const n=vl(e);return new gn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=fn.fromString(e);Qt(hA(r));const i=new lf(r.get(1),r.get(3)),s=new nt(r.popFirst(5));return i.isEqual(n)||Qo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qA extends VA{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _m(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(f0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _m extends qA{data(e={}){return super.data(e)}}class HA{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new pd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _m(this._firestore,this._userDataWriter,r.key,r,new pd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ke(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new _m(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new _m(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:SD(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function SD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t){t=Ei(t,Rr);const e=Ei(t.firestore,bl);return sD(u0(e),t._key).then(n=>WA(e,t,n))}class Ax extends _D{constructor(e){super(),this.firestore=e}convertBytes(e){return new dh(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,n)}}function CD(t){t=Ei(t,kl);const e=Ei(t.firestore,bl),n=u0(e),r=new Ax(e);return BA(t._query),oD(n,t._query).then(i=>new HA(e,r,t,i))}function $A(t,e,n){t=Ei(t,Rr);const r=Ei(t.firestore,bl),i=ND(t.converter,e);return Cx(r,[pD(xx(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xs.none())])}function ED(t,e,n,...r){t=Ei(t,Rr);const i=Ei(t.firestore,bl),s=xx(i);let o;return o=typeof(e=mr(e))=="string"||e instanceof h0?gD(s,"updateDoc",t._key,e,n,r):mD(s,"updateDoc",t._key,e),Cx(i,[o.toMutation(t._key,xs.exists(!0))])}function kD(t){return Cx(Ei(t.firestore,bl),[new Q2(t._key,xs.none())])}function PD(t,...e){var n,r,i;t=mr(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Uw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Uw(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,u,h;if(t instanceof Rr)u=Ei(t.firestore,bl),h=Zg(t._key.path),l={next:p=>{e[o]&&e[o](WA(u,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Ei(t,kl);u=Ei(p.firestore,bl),h=p._query;const m=new Ax(u);l={next:g=>{e[o]&&e[o](new HA(u,m,p,g))},error:e[o+1],complete:e[o+2]},BA(t._query)}return function(m,g,v,w){const C=new px(w),x=new dx(g,C,v);return m.asyncQueue.enqueueAndForget(async()=>cx(await fg(m),x)),()=>{C.Za(),m.asyncQueue.enqueueAndForget(async()=>ux(await fg(m),x))}}(u0(u),h,a,l)}function Cx(t,e){return function(r,i){const s=new qo;return r.asyncQueue.enqueueAndForget(async()=>KR(await iD(r),i,s)),s.promise}(u0(t),e)}function WA(t,e,n){const r=n.docs.get(e._key),i=new Ax(t);return new qA(t,i,e._key,r,new pd(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){bh=i})(Oc),Pc(new gl("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new bl(new E6(r.getProvider("auth-internal")),new I6(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ke(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lf(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ys(iw,"4.7.3",e),Ys(iw,"4.7.3","esm2017")})();var TD="firebase",ID="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ys(TD,ID,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="firebasestorage.googleapis.com",jD="storageBucket",LD=2*60*1e3,RD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends ao{constructor(e,n,r=0){super(k1(e),`Firebase Storage: ${n} (${k1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lo.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return k1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var io;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(io||(io={}));function k1(t){return"storage/"+t}function DD(){const t="An unknown error occurred, please check the error payload for server response.";return new lo(io.UNKNOWN,t)}function MD(){return new lo(io.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function OD(){return new lo(io.CANCELED,"User canceled the upload/download.")}function FD(t){return new lo(io.INVALID_URL,"Invalid URL '"+t+"'.")}function VD(t){return new lo(io.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Hw(t){return new lo(io.INVALID_ARGUMENT,t)}function KA(){return new lo(io.APP_DELETED,"The Firebase app was deleted.")}function BD(t){return new lo(io.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ms.makeFromUrl(e,n)}catch{return new ms(e,"")}if(r.path==="")return r;throw VD(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),v={bucket:1,path:3},w=n===GA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",x=new RegExp(`^https?://${w}/${i}/${C}`,"i"),S=[{regex:a,indices:l,postModify:s},{regex:g,indices:v,postModify:u},{regex:x,indices:{bucket:1,path:2},postModify:u}];for(let I=0;I<S.length;I++){const F=S[I],V=F.regex.exec(e);if(V){const P=V[F.indices.bucket];let N=V[F.indices.path];N||(N=""),r=new ms(P,N),F.postModify(r);break}}if(r==null)throw FD(e);return r}}class UD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...C){u||(u=!0,e.apply(null,C))}function p(C){i=setTimeout(()=>{i=null,t(g,l())},C)}function m(){s&&clearTimeout(s)}function g(C,...x){if(u){m();return}if(C){m(),h.call(null,C,...x);return}if(l()||o){m(),h.call(null,C,...x);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,p(S)}let v=!1;function w(C){v||(v=!0,m(),!u&&(i!==null?(C||(a=2),clearTimeout(i),p(0)):C||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,w(!0)},n),w}function qD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(t){return t!==void 0}function $w(t,e,n,r){if(r<e)throw Hw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Hw(`Invalid value for '${t}'. Expected ${n} or less.`)}function $D(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var mg;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(mg||(mg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,r,i,s,o,a,l,u,h,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Vp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===mg.NO_ERROR,l=s.getStatus();if(!a||WD(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===mg.ABORT;r(!1,new Vp(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Vp(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());HD(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=DD();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?KA():OD();o(l)}else{const l=MD();o(l)}};this.canceled_?n(!1,new Vp(!1,null,!0)):this.backoffId_=zD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function KD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function YD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function XD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function JD(t,e,n,r,i,s,o=!0){const a=$D(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return QD(u,e),KD(u,n),YD(u,s),XD(u,r),new GD(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function e7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n){this._service=e,n instanceof ms?this._location=n:this._location=ms.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new gg(e,n)}get root(){const e=new ms(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return e7(this._location.path)}get storage(){return this._service}get parent(){const e=ZD(this._location.path);if(e===null)return null;const n=new ms(this._location.bucket,e);return new gg(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw BD(e)}}function Ww(t,e){const n=e==null?void 0:e[jD];return n==null?null:ms.makeFromBucketSpec(n,t)}function t7(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:b3(i,t.app.options.projectId))}class n7{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=GA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=LD,this._maxUploadRetryTime=RD,this._requests=new Set,i!=null?this._bucket=ms.makeFromBucketSpec(i,this._host):this._bucket=Ww(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ms.makeFromBucketSpec(this._url,e):this._bucket=Ww(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$w("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$w("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gg(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new UD(KA());{const o=JD(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Gw="@firebase/storage",Kw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="storage";function r7(t=U2(),e){t=mr(t);const r=Xg(t,YA).getImmediate({identifier:e}),i=y3("storage");return i&&i7(r,...i),r}function i7(t,e,n,r={}){t7(t,e,n,r)}function s7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new n7(n,r,i,e,Oc)}function o7(){Pc(new gl(YA,s7,"PUBLIC").setMultipleInstances(!0)),Ys(Gw,Kw,""),Ys(Gw,Kw,"esm2017")}o7();function Ex(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function QA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const a7=QA,XA=new jf("auth","Firebase",QA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=new V2("@firebase/auth");function l7(t,...e){yg.logLevel<=Tt.WARN&&yg.warn(`Auth (${Oc}): ${t}`,...e)}function Nm(t,...e){yg.logLevel<=Tt.ERROR&&yg.error(`Auth (${Oc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t,...e){throw kx(t,...e)}function Js(t,...e){return kx(t,...e)}function JA(t,e,n){const r=Object.assign(Object.assign({},a7()),{[e]:n});return new jf("auth","Firebase",r).create(e,{appName:t.name})}function vc(t){return JA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return XA.create(t,...e)}function ft(t,e,...n){if(!t)throw kx(e,...n)}function Vo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nm(e),new Error(e)}function Zo(t,e){t||Vo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function c7(){return Yw()==="http:"||Yw()==="https:"}function Yw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(c7()||sj()||"connection"in navigator)?navigator.onLine:!0}function h7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zo(n>e,"Short delay should be less than long delay!"),this.isMobile=nj()||oj()}get(){return u7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e){Zo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=new zf(3e4,6e4);function Tx(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Sh(t,e,n,r,i={}){return eC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Lf(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return ij()||(u.referrerPolicy="no-referrer"),ZA.fetch()(tC(t,t.config.apiHost,n,a),u)})}async function eC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},d7),e);try{const i=new m7(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Bp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bp(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Bp(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Bp(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw JA(t,h,u);Jo(t,h)}}catch(i){if(i instanceof ao)throw i;Jo(t,"network-request-failed",{message:String(i)})}}async function p7(t,e,n,r,i={}){const s=await Sh(t,e,n,r,i);return"mfaPendingCredential"in s&&Jo(t,"multi-factor-auth-required",{_serverResponse:s}),s}function tC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Px(t.config,i):`${t.config.apiScheme}://${i}`}class m7{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Js(this.auth,"network-request-failed")),f7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Js(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g7(t,e){return Sh(t,"POST","/v1/accounts:delete",e)}async function nC(t,e){return Sh(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y7(t,e=!1){const n=mr(t),r=await n.getIdToken(e),i=Ix(r);ft(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Id(P1(i.auth_time)),issuedAtTime:Id(P1(i.iat)),expirationTime:Id(P1(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function P1(t){return Number(t)*1e3}function Ix(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nm("JWT malformed, contained fewer than 3 sections"),null;try{const i=m3(n);return i?JSON.parse(i):(Nm("Failed to decode base64 JWT payload"),null)}catch(i){return Nm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Qw(t){const e=Ix(t);return ft(e,"internal-error"),ft(typeof e.exp<"u","internal-error"),ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ff(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ao&&v7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function v7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Id(this.lastLoginAt),this.creationTime=Id(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vg(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ff(t,nC(n,{idToken:r}));ft(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?rC(s.providerUserInfo):[],a=w7(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pv(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function b7(t){const e=mr(t);await vg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function w7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rC(t){return t.map(e=>{var{providerId:n}=e,r=Ex(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _7(t,e){const n=await eC(t,{},async()=>{const r=Lf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=tC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ZA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function N7(t,e){return Sh(t,"POST","/v2/accounts:revokeToken",Tx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ft(e.idToken,"internal-error"),ft(typeof e.idToken<"u","internal-error"),ft(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ft(e.length!==0,"internal-error");const n=Qw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await _7(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Wu;return r&&(ft(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ft(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ft(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wu,this.toJSON())}_performRefresh(){return Vo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t,e){ft(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ex(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new x7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ff(this,this.stsTokenManager.getToken(this.auth,e));return ft(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return y7(this,e)}reload(){return b7(this)}_assign(e){this!==e&&(ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qa(this.auth.app))return Promise.reject(vc(this.auth));const e=await this.getIdToken();return await ff(this,g7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:I,isAnonymous:F,providerData:V,stsTokenManager:P}=n;ft(S&&P,e,"internal-error");const N=Wu.fromJSON(this.name,P);ft(typeof S=="string",e,"internal-error"),La(p,e.name),La(m,e.name),ft(typeof I=="boolean",e,"internal-error"),ft(typeof F=="boolean",e,"internal-error"),La(g,e.name),La(v,e.name),La(w,e.name),La(C,e.name),La(x,e.name),La(_,e.name);const L=new Bo({uid:S,auth:e,email:m,emailVerified:I,displayName:p,isAnonymous:F,photoURL:v,phoneNumber:g,tenantId:w,stsTokenManager:N,createdAt:x,lastLoginAt:_});return V&&Array.isArray(V)&&(L.providerData=V.map(M=>Object.assign({},M))),C&&(L._redirectEventId=C),L}static async _fromIdTokenResponse(e,n,r=!1){const i=new Wu;i.updateFromServerResponse(n);const s=new Bo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vg(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ft(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?rC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Wu;a.updateFromIdToken(r);const l=new Bo({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=new Map;function Uo(t){Zo(t instanceof Function,"Expected a class definition");let e=Xw.get(t);return e?(Zo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iC.type="NONE";const Jw=iC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e,n){return`firebase:${t}:${e}:${n}`}class Gu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Sm(this.userKey,i.apiKey,s),this.fullPersistenceKey=Sm("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Gu(Uo(Jw),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Uo(Jw);const o=Sm(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const p=Bo._fromJSON(e,h);u!==s&&(a=p),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Gu(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Gu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uC(e))return"Blackberry";if(hC(e))return"Webos";if(oC(e))return"Safari";if((e.includes("chrome/")||aC(e))&&!e.includes("edge/"))return"Chrome";if(cC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sC(t=Mr()){return/firefox\//i.test(t)}function oC(t=Mr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aC(t=Mr()){return/crios\//i.test(t)}function lC(t=Mr()){return/iemobile/i.test(t)}function cC(t=Mr()){return/android/i.test(t)}function uC(t=Mr()){return/blackberry/i.test(t)}function hC(t=Mr()){return/webos/i.test(t)}function jx(t=Mr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function S7(t=Mr()){var e;return jx(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function A7(){return aj()&&document.documentMode===10}function dC(t=Mr()){return jx(t)||cC(t)||hC(t)||uC(t)||/windows phone/i.test(t)||lC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t,e=[]){let n;switch(t){case"Browser":n=Zw(Mr());break;case"Worker":n=`${Zw(Mr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E7(t,e={}){return Sh(t,"GET","/v2/passwordPolicy",Tx(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7=6;class P7{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:k7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new e_(this),this.idTokenSubscription=new e_(this),this.beforeStateQueue=new C7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Uo(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Gu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nC(this,{idToken:e}),r=await Bo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qa(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=h7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qa(this.app))return Promise.reject(vc(this));const n=e?mr(e):null;return n&&ft(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qa(this.app)?Promise.reject(vc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qa(this.app)?Promise.reject(vc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Uo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await E7(this),n=new P7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await N7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Uo(e)||this._popupRedirectResolver;ft(n,this,"argument-error"),this.redirectPersistenceManager=await Gu.create(this,[Uo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&l7(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Lx(t){return mr(t)}class e_{constructor(e){this.auth=e,this.observer=null,this.addObserver=mj(n=>this.observer=n)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function I7(t){Rx=t}function j7(t){return Rx.loadJS(t)}function L7(){return Rx.gapiScript}function R7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(t,e){const n=Xg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ig(s,e??{}))return i;Jo(i,"already-initialized")}return n.initialize({options:e})}function M7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Uo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function O7(t,e,n){const r=Lx(t);ft(r._canInitEmulator,r,"emulator-config-failed"),ft(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=pC(e),{host:o,port:a}=F7(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),V7()}function pC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function F7(t){const e=pC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:t_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:t_(o)}}}function t_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function V7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vo("not implemented")}_getIdTokenResponse(e){return Vo("not implemented")}_linkToIdToken(e,n){return Vo("not implemented")}_getReauthenticationResolver(e){return Vo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(t,e){return p7(t,"POST","/v1/accounts:signInWithIdp",Tx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7="http://localhost";class Lc extends mC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Lc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jo("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ex(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Lc(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ku(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ku(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ku(e,n)}buildRequest(){const e={requestUri:B7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends gC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends qf{constructor(){super("facebook.com")}static credential(e){return Lc._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qa.credentialFromTaggedObject(e)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qa.credential(e.oauthAccessToken)}catch{return null}}}qa.FACEBOOK_SIGN_IN_METHOD="facebook.com";qa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends qf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Lc._fromParams({providerId:Ha.PROVIDER_ID,signInMethod:Ha.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ha.credentialFromTaggedObject(e)}static credentialFromError(e){return Ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ha.credential(n,r)}catch{return null}}}Ha.GOOGLE_SIGN_IN_METHOD="google.com";Ha.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends qf{constructor(){super("github.com")}static credential(e){return Lc._fromParams({providerId:$a.PROVIDER_ID,signInMethod:$a.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $a.credentialFromTaggedObject(e)}static credentialFromError(e){return $a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $a.credential(e.oauthAccessToken)}catch{return null}}}$a.GITHUB_SIGN_IN_METHOD="github.com";$a.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends qf{constructor(){super("twitter.com")}static credential(e,n){return Lc._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Wa.credential(n,r)}catch{return null}}}Wa.TWITTER_SIGN_IN_METHOD="twitter.com";Wa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Bo._fromIdTokenResponse(e,r,i),o=n_(r);return new fh({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=n_(r);return new fh({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function n_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends ao{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,xg.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new xg(e,n,r,i)}}function yC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?xg._fromErrorAndOperation(t,s,e,r):s})}async function U7(t,e,n=!1){const r=await ff(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fh._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z7(t,e,n=!1){const{auth:r}=t;if(Qa(r.app))return Promise.reject(vc(r));const i="reauthenticate";try{const s=await ff(t,yC(r,i,e,t),n);ft(s.idToken,r,"internal-error");const o=Ix(s.idToken);ft(o,r,"internal-error");const{sub:a}=o;return ft(t.uid===a,r,"user-mismatch"),fh._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Jo(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q7(t,e,n=!1){if(Qa(t.app))return Promise.reject(vc(t));const r="signIn",i=await yC(t,r,e),s=await fh._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function H7(t,e,n,r){return mr(t).onIdTokenChanged(e,n,r)}function $7(t,e,n){return mr(t).beforeAuthStateChanged(e,n)}const bg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bg,"1"),this.storage.removeItem(bg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7=1e3,G7=10;class xC extends vC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);A7()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,G7):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},W7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xC.type="LOCAL";const K7=xC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC extends vC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bC.type="SESSION";const wC=bC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new m0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await Y7(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}m0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Dx("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(){return window}function X7(t){Zs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(){return typeof Zs().WorkerGlobalScope<"u"&&typeof Zs().importScripts=="function"}async function J7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Z7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function e8(){return _C()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="firebaseLocalStorageDb",t8=1,wg="firebaseLocalStorage",SC="fbase_key";class Hf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function g0(t,e){return t.transaction([wg],e?"readwrite":"readonly").objectStore(wg)}function n8(){const t=indexedDB.deleteDatabase(NC);return new Hf(t).toPromise()}function mv(){const t=indexedDB.open(NC,t8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wg,{keyPath:SC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wg)?e(r):(r.close(),await n8(),e(await mv()))})})}async function r_(t,e,n){const r=g0(t,!0).put({[SC]:e,value:n});return new Hf(r).toPromise()}async function r8(t,e){const n=g0(t,!1).get(e),r=await new Hf(n).toPromise();return r===void 0?null:r.value}function i_(t,e){const n=g0(t,!0).delete(e);return new Hf(n).toPromise()}const i8=800,s8=3;class AC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>s8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _C()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=m0._getInstance(e8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await J7(),!this.activeServiceWorker)return;this.sender=new Q7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Z7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mv();return await r_(e,bg,"1"),await i_(e,bg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>r_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>r8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>i_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=g0(i,!1).getAll();return new Hf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AC.type="LOCAL";const o8=AC;new zf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(t,e){return e?Uo(e):(ft(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx extends mC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ku(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ku(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ku(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function l8(t){return q7(t.auth,new Mx(t),t.bypassAuthState)}function c8(t){const{auth:e,user:n}=t;return ft(n,e,"internal-error"),z7(n,new Mx(t),t.bypassAuthState)}async function u8(t){const{auth:e,user:n}=t;return ft(n,e,"internal-error"),U7(n,new Mx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return l8;case"linkViaPopup":case"linkViaRedirect":return u8;case"reauthViaPopup":case"reauthViaRedirect":return c8;default:Jo(this.auth,"internal-error")}}resolve(e){Zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=new zf(2e3,1e4);class Ou extends CC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ou.currentPopupAction&&Ou.currentPopupAction.cancel(),Ou.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ft(e,this.auth,"internal-error"),e}async onExecution(){Zo(this.filter.length===1,"Popup operations only handle one event");const e=Dx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Js(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Js(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ou.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Js(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h8.get())};e()}}Ou.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8="pendingRedirect",Am=new Map;class f8 extends CC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Am.get(this.auth._key());if(!e){try{const r=await p8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Am.set(this.auth._key(),e)}return this.bypassAuthState||Am.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function p8(t,e){const n=y8(e),r=g8(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function m8(t,e){Am.set(t._key(),e)}function g8(t){return Uo(t._redirectPersistence)}function y8(t){return Sm(d8,t.config.apiKey,t.name)}async function v8(t,e,n=!1){if(Qa(t.app))return Promise.reject(vc(t));const r=Lx(t),i=a8(r,e),o=await new f8(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=10*60*1e3;class b8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!w8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!EC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Js(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x8&&this.cachedEventUids.clear(),this.cachedEventUids.has(s_(e))}saveEventToCache(e){this.cachedEventUids.add(s_(e)),this.lastProcessedEventTime=Date.now()}}function s_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function EC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function w8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _8(t,e={}){return Sh(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S8=/^https?/;async function A8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _8(t);for(const n of e)try{if(C8(n))return}catch{}Jo(t,"unauthorized-domain")}function C8(t){const e=fv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!S8.test(n))return!1;if(N8.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8=new zf(3e4,6e4);function o_(){const t=Zs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function k8(t){return new Promise((e,n)=>{var r,i,s;function o(){o_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{o_(),n(Js(t,"network-request-failed"))},timeout:E8.get()})}if(!((i=(r=Zs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Zs().gapi)===null||s===void 0)&&s.load)o();else{const a=R7("iframefcb");return Zs()[a]=()=>{gapi.load?o():n(Js(t,"network-request-failed"))},j7(`${L7()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Cm=null,e})}let Cm=null;function P8(t){return Cm=Cm||k8(t),Cm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8=new zf(5e3,15e3),I8="__/auth/iframe",j8="emulator/auth/iframe",L8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D8(t){const e=t.config;ft(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Px(e,j8):`https://${t.config.authDomain}/${I8}`,r={apiKey:e.apiKey,appName:t.name,v:Oc},i=R8.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Lf(r).slice(1)}`}async function M8(t){const e=await P8(t),n=Zs().gapi;return ft(n,t,"internal-error"),e.open({where:document.body,url:D8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:L8,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Js(t,"network-request-failed"),a=Zs().setTimeout(()=>{s(o)},T8.get());function l(){Zs().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F8=500,V8=600,B8="_blank",U8="http://localhost";class a_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function z8(t,e,n,r=F8,i=V8){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},O8),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Mr().toLowerCase();n&&(a=aC(u)?B8:n),sC(u)&&(e=e||U8,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[g,v])=>`${m}${g}=${v},`,"");if(S7(u)&&a!=="_self")return q8(e||"",a),new a_(null);const p=window.open(e||"",a,h);ft(p,t,"popup-blocked");try{p.focus()}catch{}return new a_(p)}function q8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8="__/auth/handler",$8="emulator/auth/handler",W8=encodeURIComponent("fac");async function l_(t,e,n,r,i,s){ft(t.config.authDomain,t,"auth-domain-config-required"),ft(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oc,eventId:i};if(e instanceof gC){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pj(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof qf){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${W8}=${encodeURIComponent(l)}`:"";return`${G8(t)}?${Lf(a).slice(1)}${u}`}function G8({config:t}){return t.emulator?Px(t,$8):`https://${t.authDomain}/${H8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="webStorageSupport";class K8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wC,this._completeRedirectFn=v8,this._overrideRedirectResult=m8}async _openPopup(e,n,r,i){var s;Zo((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await l_(e,n,r,fv(),i);return z8(e,o,Dx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await l_(e,n,r,fv(),i);return X7(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zo(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await M8(e),r=new b8(e);return n.register("authEvent",i=>(ft(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(T1,{type:T1},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[T1];o!==void 0&&n(!!o),Jo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=A8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dC()||oC()||jx()}}const Y8=K8;var c_="@firebase/auth",u_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J8(t){Pc(new gl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ft(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fC(t)},u=new T7(r,i,s,l);return M7(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pc(new gl("auth-internal",e=>{const n=Lx(e.getProvider("auth").getImmediate());return(r=>new Q8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ys(c_,u_,X8(t)),Ys(c_,u_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=5*60,eM=x3("authIdTokenMaxAge")||Z8;let h_=null;const tM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eM)return;const i=n==null?void 0:n.token;h_!==i&&(h_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function nM(t=U2()){const e=Xg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=D7(t,{popupRedirectResolver:Y8,persistence:[o8,K7,wC]}),r=x3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=tM(s.toString());$7(n,o,()=>o(n.currentUser)),H7(n,a=>o(a))}}const i=g3("auth");return i&&O7(n,`http://${i}`),n}function rM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}I7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Js("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",rM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J8("Browser");const iM={apiKey:"AIzaSyB3SBiS2vz-V7uMsIodidROF2pTmmmRsK0",authDomain:"alvarosalon1.firebaseapp.com",projectId:"alvarosalon1",storageBucket:"alvarosalon1.firebasestorage.app",messagingSenderId:"356998393587",appId:"1:356998393587:web:604fe99e9f687fafadd186"},Ox=N3(iM),sM=nM(Ox),Pl=cD(Ox),oM=r7(Ox),kC="settings/appearance";async function aM(t){try{await $A(Bf(Pl,kC),t)}catch(e){throw console.error("Error saving appearance settings:",e),e}}async function lM(){try{const t=Bf(Pl,kC),e=await AD(t);return e.exists()?e.data():null}catch(t){throw console.error("Error getting appearance settings:",t),t}}const cM={colors:{primary:"#2563EB",secondary:"#E5E7EB",loginButton:"#2563EB"},images:{loginLogo:"",favicon:"",loginBackground:"https://images.unsplash.com/photo-1562322140-8baeececf3df?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80"},branding:{name:"MASTER FACTU",slogan:"TU NEGOCIO EN UN CLICK",browserTitle:"MASTER FACTU - Sistema de Gestión"},invoiceSettings:{sales:{...Wb},credits:{...Wb}}};function Tl(){const[t,e]=we.useState(cM),[n,r]=we.useState(!0),[i,s]=we.useState(null);return we.useEffect(()=>{(async()=>{try{const p=await lM();p&&e(p),r(!1)}catch(p){s(p),r(!1)}})()},[]),we.useEffect(()=>{if(!n&&!i){if(document.title=t.branding.browserTitle,t.images.favicon){const h=document.querySelector("link[rel*='icon']")||document.createElement("link");h.type="image/x-icon",h.rel="shortcut icon",h.href=t.images.favicon,document.getElementsByTagName("head")[0].appendChild(h)}aM(t).catch(console.error)}},[t,n,i]),{...t,loading:n,error:i,updateColors:h=>{e(p=>({...p,colors:{...p.colors,...h}}))},updateImages:h=>{e(p=>({...p,images:{...p.images,...h}}))},updateBranding:h=>{e(p=>({...p,branding:h}))},updateInvoiceSettings:h=>{e(p=>({...p,invoiceSettings:h}))}}}function PC({showSlogan:t=!0,className:e="",variant:n="default"}){const{branding:r,colors:i,images:s}=Tl(),o=n==="compact"?"text-lg":"text-2xl",a=n==="compact"?"h-6 w-6":"h-8 w-8";return c.jsxs("div",{className:`text-center ${e}`,children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.loginLogo?c.jsx("img",{src:s.loginLogo,alt:r.name,className:a}):c.jsx(D2,{className:`${a}`,style:{color:i.primary}}),c.jsx("h2",{className:`${o} font-bold text-gray-900`,style:{color:i.primary},children:r.name})]}),t&&c.jsx("p",{className:"text-sm font-medium mt-1",style:{color:i.primary},children:r.slogan})]})}const uM=[{id:"appointments",label:"Citas",icon:c.jsx(TI,{})},{id:"products",label:"Productos",icon:c.jsx(BI,{})},{id:"sales",label:"Ventas",icon:c.jsx($I,{})},{id:"clients",label:"Clientes",icon:c.jsx(O2,{})},{id:"pettyCash",label:"Caja Chica",icon:c.jsx(h3,{})},{id:"expenses",label:"Gastos",icon:c.jsx(F2,{})},{id:"credits",label:"Créditos",icon:c.jsx(Gg,{})},{id:"staff",label:"Colaboradores",icon:c.jsx(jI,{})},{id:"reports",label:"Reportes",icon:c.jsx(u3,{})},{id:"settings",label:"Configuración",icon:c.jsx(qI,{})}];function hM({currentModule:t,onModuleChange:e,onLogout:n,userRole:r}){const{colors:i}=Tl(),s=uM.filter(o=>r==="admin"?!0:["appointments","sales","clients","pettyCash","expenses","credits","reports"].includes(o.id));return c.jsxs("div",{className:"w-64 bg-white h-screen shadow-lg flex flex-col",children:[c.jsx("div",{className:"p-4 border-b",children:c.jsx(PC,{showSlogan:!1,variant:"compact"})}),c.jsx("nav",{className:"flex-1 overflow-y-auto p-4",children:s.map(o=>c.jsxs("button",{onClick:()=>e(o.id),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg mb-2 transition-colors",style:{backgroundColor:t===o.id?`${i.primary}15`:"transparent",color:t===o.id?i.primary:"rgb(75, 85, 99)"},children:[Ig.cloneElement(o.icon,{className:"h-5 w-5",style:{color:t===o.id?i.primary:"currentColor"}}),c.jsx("span",{children:o.label})]},o.id))}),c.jsx("div",{className:"p-4 border-t",children:c.jsxs("button",{onClick:n,className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[c.jsx(OI,{className:"h-5 w-5"}),c.jsx("span",{children:Ba.buttons.logout})]})})]})}function dM(){const t="CITA",e=Date.now().toString().slice(-6),n=Math.random().toString(36).substring(2,5).toUpperCase();return`${t}-${e}-${n}`}function TC({appointment:t,onSubmit:e,onCancel:n}){const[r,i]=we.useState(t||{code:dM(),clientName:"",phone:"",reservationCost:0,date:"",time:"",notes:"",status:"pending"}),s=o=>{o.preventDefault(),e(r)};return c.jsxs("form",{onSubmit:s,className:"bg-white p-6 rounded-lg shadow-sm border space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código de Cita"}),c.jsx("input",{type:"text",value:r.code,readOnly:!0,className:"w-full px-3 py-2 border rounded-lg bg-gray-50"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),c.jsxs("select",{value:r.status,onChange:o=>i({...r,status:o.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"pending",children:"Pendiente"}),c.jsx("option",{value:"completed",children:"Completada"}),c.jsx("option",{value:"cancelled",children:"Cancelada"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Cliente"}),c.jsx("input",{type:"text",value:r.clientName,onChange:o=>i({...r,clientName:o.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),c.jsx("input",{type:"tel",value:r.phone,onChange:o=>i({...r,phone:o.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Costo de Reserva"}),c.jsx("input",{type:"number",value:r.reservationCost,onChange:o=>i({...r,reservationCost:Number(o.target.value)}),required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),c.jsx("input",{type:"date",value:r.date,onChange:o=>i({...r,date:o.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora"}),c.jsx("input",{type:"time",value:r.time,onChange:o=>i({...r,time:o.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nota"}),c.jsx("textarea",{value:r.notes,onChange:o=>i({...r,notes:o.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:t?"Actualizar Cita":"Crear Cita"})]})]})}function fM(t){return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}function _e(t){return new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD"}).format(t)}function pM(t){const e=`¡Hola ${t}! 👋

Gracias por ser nuestro cliente. Estamos aquí para ayudarte en lo que necesites.

¿En qué podemos servirte hoy? 🤝`;return encodeURIComponent(e)}function IC(t){return"reservationCost"in t?mM(t):gM(t)}function mM(t){const e=`¡Gracias por agendar tu cita con nosotros! 🙏

Detalles de tu cita:
📅 Fecha: ${t.date}
⏰ Hora: ${t.time}
💰 Costo de reserva: $${t.reservationCost}

Estamos encantados de poder atenderte y de ofrecerte la mejor experiencia posible. Te esperamos en el día y hora acordados.

Si necesitas cualquier cosa antes de la cita, no dudes en contactarnos. 😊`;return encodeURIComponent(e)}function gM(t){const e=t.products.map(r=>`- ${r.name} (${r.quantity}x) - ${_e(r.subtotal)}`).join(`
`),n=`¡Gracias por elegirnos para tu financiamiento! 🙏

Nos complace informarte que tu crédito ha sido aprobado y ya está disponible para que lo utilices de la manera que necesites. Estamos aquí para brindarte todo el apoyo que requieras durante este proceso.

Detalles del crédito:
👤 Cliente: ${t.clientName}
📅 Fecha de vencimiento: ${new Date(t.dueDate).toLocaleDateString()}
💰 Monto total: ${_e(t.amount)}

Productos financiados:
${e}

Si tienes alguna pregunta o necesitas asistencia, no dudes en contactarnos. ¡Estamos para servirte! 😊`;return encodeURIComponent(n)}function Fx(t,e){return`https://wa.me/${t.replace(/\D/g,"")}?text=${e}`}function yM({appointments:t,onUpdate:e,onDelete:n}){const[r,i]=we.useState(null),s=u=>{e(u.code,u),i(null)},o=u=>{const h=IC(u),p=Fx(u.phone,h);window.open(p,"_blank")},a=u=>{switch(u){case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}},l=u=>({pending:"Pendiente",completed:"Completada",cancelled:"Cancelada"})[u];return t.length===0?c.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:c.jsx("p",{className:"text-gray-500",children:"No hay citas programadas"})}):c.jsx("div",{className:"space-y-4",children:t.map(u=>c.jsx("div",{className:`bg-white p-6 rounded-lg shadow-sm border ${u.status==="cancelled"?"border-red-200":"border-gray-200"}`,children:r===u.code?c.jsx(TC,{appointment:u,onSubmit:s,onCancel:()=>i(null)}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:u.clientName}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${a(u.status)}`,children:l(u.status)})]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Código: ",u.code]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>o(u),className:"p-2 text-gray-400 hover:text-green-600 rounded-lg transition-colors flex items-center gap-2",title:"Enviar mensaje por WhatsApp",children:c.jsx(R2,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>i(u.code),className:"p-2 text-gray-400 hover:text-blue-600 rounded-lg transition-colors",title:"Editar cita",children:c.jsx(Tf,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>n(u.code),className:"p-2 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Eliminar cita",children:c.jsx(Kr,{className:"h-5 w-5"})})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Teléfono:"})," ",u.phone]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Costo:"})," ",_e(u.reservationCost)]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Fecha:"})," ",fM(u.date)]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Hora:"})," ",u.time]})]}),u.notes&&c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Nota:"})," ",u.notes]})]})},u.code))})}function vM({searchTerm:t,onSearchChange:e}){return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(If,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{type:"text",value:t,onChange:n=>e(n.target.value),placeholder:"Buscar por nombre o código...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-sm"})]})}const xM=[{value:"all",label:"Todas",color:"bg-gray-100 text-gray-800 border-gray-200"},{value:"pending",label:"Pendientes",color:"bg-yellow-100 text-yellow-800 border-yellow-200"},{value:"completed",label:"Completadas",color:"bg-green-100 text-green-800 border-green-200"},{value:"cancelled",label:"Canceladas",color:"bg-red-100 text-red-800 border-red-200"}];function bM({selectedStatus:t,onStatusChange:e}){return c.jsx("div",{className:"flex flex-wrap gap-2",children:xM.map(n=>c.jsx("button",{onClick:()=>e(n.value),className:`px-4 py-2 rounded-full text-sm font-medium border transition-colors ${n.color} ${t===n.value?"ring-2 ring-offset-2 ring-blue-500":"hover:opacity-80"}`,children:n.label},n.value))})}async function jC(t,e,n){try{const r=Bf(Pl,t,e);await $A(r,{...n,updatedAt:gn.now()})}catch(r){throw console.error(`Error saving ${t}:`,r),r}}async function LC(t,e,n){try{const r=Bf(Pl,t,e);await ED(r,{...n,updatedAt:gn.now()})}catch(r){throw console.error(`Error updating ${t}:`,r),r}}async function RC(t,e){try{const n=Bf(Pl,t,e);await kD(n)}catch(n){throw console.error(`Error deleting ${t}:`,n),n}}async function Vx(t,e,n,r="desc"){try{let i=LA(Pl,t);return e.forEach(({field:o,operator:a,value:l})=>{i=dv(i,bD(o,a,l))}),n&&(i=dv(i,wD(n,r))),(await CD(i)).docs.map(o=>({id:o.id,...o.data()}))}catch(i){throw console.error(`Error querying ${t}:`,i),i}}const y0="appointments";async function wM(t){await jC(y0,t.code,{...t,date:gn.fromDate(new Date(t.date))})}async function _M(t,e){e.date&&(e.date=gn.fromDate(new Date(e.date))),await LC(y0,t,e)}async function NM(t){await RC(y0,t)}async function SM(t,e,n){const r=[{field:"date",operator:">=",value:gn.fromDate(t)},{field:"date",operator:"<=",value:gn.fromDate(e)}];return n&&r.push({field:"status",operator:"==",value:n}),(await Vx(y0,r,"date")).map(s=>({...s,date:s.date.toDate().toISOString()}))}function DC(t,e={}){const[n,r]=we.useState([]),[i,s]=we.useState(!0),[o,a]=we.useState(null);return we.useEffect(()=>{const l=LA(Pl,t),u=e.queryConstraints?dv(l,...e.queryConstraints):l,h=PD(u,p=>{const m=p.docs.map(g=>({id:g.id,...g.data()}));r(e.transform?m.map(e.transform):m),s(!1),a(null)},p=>{console.error(`Error fetching ${t}:`,p),a(p),s(!1)});return()=>h()},[t,e.queryConstraints]),{data:n,loading:i,error:o}}function AM(){const{data:t,loading:e,error:n}=DC("appointments",{transform:a=>({...a,date:a.date.toDate().toISOString()})});return{appointments:t,loading:e,error:n,addAppointment:async a=>{await wM(a)},updateAppointment:async(a,l)=>{await _M(a,l)},deleteAppointment:async a=>{await NM(a)},queryAppointmentsByDate:async(a,l,u)=>await SM(a,l,u)}}function CM(t,e,n){return t.filter(r=>{if(n!=="all"&&r.status!==n)return!1;if(e.trim()){const i=e.toLowerCase().trim(),s=r.clientName.toLowerCase().includes(i),o=r.code.toLowerCase().includes(i);return s||o}return!0})}function EM(){const[t,e]=we.useState(!1),[n,r]=we.useState(""),[i,s]=we.useState("all"),{appointments:o,addAppointment:a,updateAppointment:l,deleteAppointment:u}=AM(),h=m=>{a(m),e(!1)},p=CM(o,n,i);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gestión de Citas"}),c.jsxs("button",{onClick:()=>e(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[c.jsx(oo,{className:"h-5 w-5"}),c.jsx("span",{children:"Nueva Cita"})]})]}),t&&c.jsx(TC,{onSubmit:h,onCancel:()=>e(!1)}),c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[c.jsx("div",{className:"md:w-64",children:c.jsx(vM,{searchTerm:n,onSearchChange:r})}),c.jsx(bM,{selectedStatus:i,onStatusChange:s})]}),c.jsx(yM,{appointments:p,onUpdate:l,onDelete:u})]})}function MC({initialName:t="",onSubmit:e,onCancel:n}){const[r,i]=we.useState(t),s=o=>{o.preventDefault(),r.trim()&&e(r.trim())};return c.jsxs("form",{onSubmit:s,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Categoría"}),c.jsx("input",{type:"text",value:r,onChange:o=>i(o.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:t?"Actualizar Categoría":"Crear Categoría"})]})]})}function kM({categories:t,onUpdate:e,onDelete:n}){const[r,i]=we.useState(null);return t.length===0?c.jsx("div",{className:"text-center py-4 bg-gray-50 rounded-lg",children:c.jsx("p",{className:"text-gray-500",children:"No hay categorías creadas"})}):c.jsx("div",{className:"space-y-2",children:t.map(s=>c.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:r===s.id?c.jsx(MC,{initialName:s.name,onSubmit:o=>{e(s.id,o),i(null)},onCancel:()=>i(null)}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-gray-700",children:s.name}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>i(s.id),className:"p-1 text-gray-400 hover:text-blue-600 rounded transition-colors",children:c.jsx(Tf,{className:"h-4 w-4"})}),c.jsx("button",{onClick:()=>n(s.id),className:"p-1 text-gray-400 hover:text-red-600 rounded transition-colors",children:c.jsx(Kr,{className:"h-4 w-4"})})]})]})},s.id))})}function PM({categories:t,onAddCategory:e,onUpdateCategory:n,onDeleteCategory:r}){const[i,s]=we.useState(!1);return c.jsxs("section",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Categorías"}),c.jsxs("button",{onClick:()=>s(!0),className:"flex items-center space-x-2 px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[c.jsx(oo,{className:"h-4 w-4"}),c.jsx("span",{children:"Nueva Categoría"})]})]}),i&&c.jsx(MC,{onSubmit:o=>{e(o),s(!1)},onCancel:()=>s(!1)}),c.jsx(kM,{categories:t,onUpdate:n,onDelete:r})]})}function TM({products:t,categories:e,onEdit:n,onDelete:r}){const i=o=>{var a;return((a=e.find(l=>l.id===o))==null?void 0:a.name)||"Sin categoría"},s=o=>o.quantity<=0?{label:"Sin Stock",class:"bg-red-100 text-red-800 border-red-200"}:o.quantity<=o.lowStockAlert?{label:"Stock Bajo",class:"bg-yellow-100 text-yellow-800 border-yellow-200"}:{label:"En Stock",class:"bg-green-100 text-green-800 border-green-200"};return t.length===0?c.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:c.jsx("p",{className:"text-gray-500",children:"No hay productos registrados"})}):c.jsx("div",{className:"grid gap-4",children:t.map(o=>{const a=s(o);return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex space-x-4",children:[o.imageUrl&&c.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-20 h-20 object-cover rounded-lg",onError:l=>{l.currentTarget.src="https://via.placeholder.com/80?text=No+Image"}}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o.name}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${a.class}`,children:a.label})]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Código: ",o.code]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Categoría: ",i(o.category)]})]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>n(o),className:"p-2 text-gray-400 hover:text-blue-600 rounded-lg transition-colors",title:"Editar producto",children:c.jsx(Tf,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>r(o.code),className:"p-2 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Eliminar producto",children:c.jsx(Kr,{className:"h-5 w-5"})})]})]}),c.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Cantidad:"})," ",o.quantity," unidades"]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Precio de Costo:"})," ",_e(o.costPrice)]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Precio de Venta:"})," ",_e(o.salePrice)]})]}),o.notes&&c.jsxs("div",{className:"mt-2 text-sm",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Notas:"})," ",o.notes]})]},o.code)})})}function IM(){const t="PROD",e=Date.now().toString().slice(-6),n=Math.random().toString(36).substring(2,5).toUpperCase();return`${t}-${e}-${n}`}function jM({product:t,categories:e,onSubmit:n,onCancel:r}){var a;const[i,s]=we.useState({code:(t==null?void 0:t.code)||IM(),name:(t==null?void 0:t.name)||"",quantity:(t==null?void 0:t.quantity)||0,costPrice:(t==null?void 0:t.costPrice)||0,salePrice:(t==null?void 0:t.salePrice)||0,category:(t==null?void 0:t.category)||((a=e[0])==null?void 0:a.id)||"",lowStockAlert:(t==null?void 0:t.lowStockAlert)||5,notes:(t==null?void 0:t.notes)||"",imageUrl:(t==null?void 0:t.imageUrl)||""}),o=l=>{l.preventDefault(),n(i)};return c.jsxs("form",{onSubmit:o,className:"bg-white p-6 rounded-lg shadow-sm border space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código del Producto"}),c.jsx("input",{type:"text",value:i.code,onChange:l=>s({...i,code:l.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Producto"}),c.jsx("input",{type:"text",value:i.name,onChange:l=>s({...i,name:l.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoría"}),c.jsx("select",{value:i.category,onChange:l=>s({...i,category:l.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",children:e.map(l=>c.jsx("option",{value:l.id,children:l.name},l.id))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cantidad"}),c.jsx("input",{type:"number",value:i.quantity,onChange:l=>s({...i,quantity:Number(l.target.value)}),required:!0,min:"0",className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alerta de Stock Bajo"}),c.jsx("input",{type:"number",value:i.lowStockAlert,onChange:l=>s({...i,lowStockAlert:Number(l.target.value)}),required:!0,min:"0",className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio de Costo"}),c.jsx("input",{type:"number",value:i.costPrice,onChange:l=>s({...i,costPrice:Number(l.target.value)}),required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio de Venta"}),c.jsx("input",{type:"number",value:i.salePrice,onChange:l=>s({...i,salePrice:Number(l.target.value)}),required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL de la Imagen (opcional)"}),c.jsx("input",{type:"url",value:i.imageUrl,onChange:l=>s({...i,imageUrl:l.target.value}),placeholder:"https://ejemplo.com/imagen.jpg",className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),c.jsx("textarea",{value:i.notes,onChange:l=>s({...i,notes:l.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:t?"Actualizar Producto":"Crear Producto"})]})]})}const $f="products";async function LM(t){await jC($f,t.code,t)}async function RM(t,e){await LC($f,t,e)}async function DM(t){await RC($f,t)}async function MM(t){return await Vx($f,[{field:"category",operator:"==",value:t}])}async function OM(){return await Vx($f,[{field:"quantity",operator:"<=",value:"lowStockAlert"}],"quantity","asc")}function Il(){const{data:t,loading:e,error:n}=DC("products");return{products:t,loading:e,error:n,addProduct:async l=>{await LM(l)},updateProduct:async(l,u)=>{await RM(l,u)},deleteProduct:async l=>{await DM(l)},getProductsByCategory:async l=>await MM(l),getLowStockProducts:async()=>await OM()}}const OC="masterFactu:categories";function FM(t){try{localStorage.setItem(OC,JSON.stringify(t))}catch(e){console.error("Error saving categories:",e)}}function VM(){try{const t=localStorage.getItem(OC);return t?JSON.parse(t):null}catch(t){return console.error("Error loading categories:",t),null}}function FC(){const t="CAT",e=Date.now().toString().slice(-6),n=Math.random().toString(36).substring(2,5).toUpperCase();return`${t}-${e}-${n}`}function VC(){const[t,e]=we.useState(()=>VM()||[]);return we.useEffect(()=>{FM(t)},[t]),{categories:t,addCategory:s=>{const o={id:FC(),name:s};e(a=>[...a,o])},updateCategory:(s,o)=>{e(a=>a.map(l=>l.id===s?{...l,name:o}:l))},deleteCategory:s=>{e(o=>o.filter(a=>a.id!==s))}}}function BM(){const[t,e]=we.useState(!1),[n,r]=we.useState(null),{products:i,addProduct:s,updateProduct:o,deleteProduct:a}=Il(),{categories:l,addCategory:u,updateCategory:h,deleteCategory:p}=VC(),m=v=>{s(v),e(!1)},g=v=>{o(v.code,v),r(null)};return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gestión de Productos"}),c.jsxs("button",{onClick:()=>e(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[c.jsx(oo,{className:"h-5 w-5"}),c.jsx("span",{children:"Nuevo Producto"})]})]}),c.jsx(PM,{categories:l,onAddCategory:u,onUpdateCategory:h,onDeleteCategory:p}),(t||n)&&c.jsx(jM,{product:n,categories:l,onSubmit:n?g:m,onCancel:()=>{e(!1),r(null)}}),c.jsx(TM,{products:i,categories:l,onEdit:r,onDelete:a})]})}function UM({payment:t}){const e=n=>{switch(n){case"cash":return c.jsx(PI,{className:"h-4 w-4 text-green-600"});case"card":return c.jsx(Gg,{className:"h-4 w-4 text-blue-600"});case"transfer":return c.jsx(kI,{className:"h-4 w-4 text-purple-600"})}};return c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e(t.method),c.jsx("span",{children:t.method==="cash"?"Efectivo":t.method==="card"?"Tarjeta":"Transferencia"}),t.reference&&c.jsxs("span",{className:"text-gray-500",children:["(",t.reference,")"]})]})}function zM({staff:t}){return c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[c.jsx(M2,{className:"h-4 w-4"}),c.jsxs("span",{children:[t.member.name," (",t.commission,"% - ",_e(t.commissionAmount),")"]})]})}function qM({sale:t}){return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t.client.name}),c.jsx("span",{className:"text-sm text-gray-500",children:new Date(t.date).toLocaleDateString()}),t.status==="cancelled"?c.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Cancelada"}):c.jsx(UM,{payment:t.payment})]}),t.staff&&c.jsx("div",{className:"mt-1",children:c.jsx(zM,{staff:t.staff})})]})}function HM({products:t}){return c.jsxs("div",{className:"mt-4 space-y-2",children:[c.jsx("h4",{className:"font-medium text-gray-700",children:"Productos:"}),t.map((e,n)=>c.jsxs("div",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[e.imageUrl&&c.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-12 h-12 object-cover rounded",onError:r=>{r.currentTarget.src="https://via.placeholder.com/48?text=No+Image"}}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:e.name}),c.jsxs("p",{className:"text-sm text-gray-600",children:[e.quantity,"x ",_e(e.salePrice)]})]})]}),c.jsx("span",{className:"font-medium",children:_e(e.subtotal)})]},n))]})}function $M({businessName:t,invoiceNumber:e}){return c.jsxs("div",{className:"text-center mb-4",children:[c.jsx("h1",{className:"text-xl font-bold mb-1",children:t}),c.jsx("p",{className:"text-sm",children:"Comprobante de Venta"}),c.jsxs("p",{className:"text-sm",children:["N° ",e]})]})}function WM({sale:t}){return c.jsxs("div",{className:"text-center space-y-1 text-sm",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Cliente:"})," ",t.client.name]}),t.client.phone&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Tel:"})," ",t.client.phone]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(t.date).toLocaleDateString()]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Hora:"})," ",new Date(t.date).toLocaleTimeString()]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Pago:"})," ",t.payment.method==="cash"?"Efectivo":t.payment.method==="card"?"Tarjeta":"Transferencia"]}),t.payment.reference&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Ref:"})," ",t.payment.reference]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Venta:"})," ",t.id]})]})}function GM({products:t}){return c.jsx("div",{className:"space-y-3",children:t.map((e,n)=>c.jsxs("div",{className:"text-sm",children:[c.jsx("div",{className:"text-center font-bold",children:e.name}),c.jsxs("div",{className:"flex justify-between text-gray-600",children:[c.jsxs("span",{children:[e.quantity," x ",_e(e.salePrice)]}),c.jsx("span",{children:_e(e.subtotal)})]}),e.discount&&e.discount>0&&c.jsxs("div",{className:"flex justify-between text-gray-500 text-xs",children:[c.jsx("span",{children:"Descuento"}),c.jsxs("span",{children:["-",_e(e.discount)]})]})]},`${n}-${e.code}`))})}function KM({sale:t,totalDiscount:e}){return c.jsxs("div",{className:"mt-4 space-y-1 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Subtotal:"}),c.jsx("span",{children:_e(t.total+e)})]}),e>0&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Descuento:"}),c.jsxs("span",{children:["-",_e(e)]})]}),c.jsxs("div",{className:"flex justify-between font-bold text-base pt-2",children:[c.jsx("span",{children:"TOTAL:"}),c.jsx("span",{children:_e(t.total)})]})]})}function YM(){return c.jsxs("div",{className:"text-center space-y-1 text-sm",children:[c.jsx("p",{children:"¡Gracias por su compra!"}),c.jsx("p",{children:"Este documento es un"}),c.jsx("p",{children:"comprobante válido de su compra"}),c.jsx("div",{className:"text-xs mt-2",children:c.jsx("p",{children:"* * * * * * * * * * * * * * *"})})]})}function QM({sale:t,businessName:e,invoiceNumber:n}){const r=t.products.reduce((i,s)=>i+(s.discount||0),0);return c.jsxs("div",{id:"printable-invoice",className:"p-2",children:[c.jsx($M,{businessName:e,invoiceNumber:n}),c.jsx("div",{className:"border-t border-dashed my-2"}),c.jsx(WM,{sale:t}),c.jsx("div",{className:"border-t border-dashed my-2"}),c.jsx(GM,{products:t.products}),c.jsx(KM,{sale:t,totalDiscount:r}),c.jsx("div",{className:"border-t border-dashed my-2"}),c.jsx(YM,{})]})}function XM(t){return`FACT-${t.id.split("-")[1]}`}function JM({sale:t,businessName:e,onClose:n}){const r=XM(t),i=()=>{window.print()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg w-[300px] max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex justify-between items-center no-print",children:[c.jsx("h2",{className:"text-lg font-medium",children:"Comprobante"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:i,className:"p-2 text-gray-600 hover:text-blue-600 rounded-lg transition-colors",title:"Imprimir",children:c.jsx(Yg,{className:"h-5 w-5"})}),c.jsx("button",{onClick:n,className:"p-2 text-gray-600 hover:text-red-600 rounded-lg transition-colors",title:"Cerrar",children:c.jsx(d3,{className:"h-5 w-5"})})]})]}),c.jsx(QM,{sale:t,businessName:e,invoiceNumber:r})]})})}function ZM({sale:t,onCancel:e,onDelete:n}){const[r,i]=we.useState(!1),{branding:s}=Tl();return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("p",{className:`text-lg font-medium ${t.status==="cancelled"?"text-red-600 line-through":"text-gray-900"}`,children:_e(t.total)}),c.jsx("button",{onClick:()=>i(!0),className:"p-2 text-gray-400 hover:text-blue-600 rounded-lg transition-colors",title:"Ver factura",children:c.jsx(Yg,{className:"h-5 w-5"})}),t.status!=="cancelled"&&c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Cancelar venta",children:c.jsx(I2,{className:"h-5 w-5"})}),c.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Eliminar venta",children:c.jsx(Kr,{className:"h-5 w-5"})})]}),r&&c.jsx(JM,{sale:t,businessName:s.name,onClose:()=>i(!1)})]})}function eO({sale:t,onCancel:e,onDelete:n}){return c.jsxs("div",{className:`${t.status==="cancelled"?"bg-red-50":"bg-white"} rounded-lg`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("div",{children:c.jsx(qM,{sale:t})}),c.jsx(ZM,{sale:t,onCancel:e,onDelete:n})]}),c.jsx(HM,{products:t.products}),t.notes&&c.jsxs("div",{className:"mt-4 text-sm",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Notas:"})," ",t.notes]}),t.status==="cancelled"&&t.cancellationReason&&c.jsxs("div",{className:"mt-4 text-sm text-red-600",children:[c.jsx("span",{className:"font-medium",children:"Motivo de cancelación:"})," ",t.cancellationReason]})]})}function Bc({onConfirm:t,onCancel:e,error:n}){const[r,i]=we.useState(""),s=o=>{o.preventDefault(),r.trim()&&t(r.trim())};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Verificación de Administrador"}),c.jsxs("form",{onSubmit:s,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña de Administrador"}),c.jsx("input",{type:"password",value:r,onChange:o=>i(o.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingrese la contraseña de administrador"}),n&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:n})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"Confirmar"})]})]})]})})}function tO({onConfirm:t,onCancel:e}){const[n,r]=we.useState(""),i=s=>{s.preventDefault(),n.trim()&&t(n.trim())};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cancelar Venta"}),c.jsxs("form",{onSubmit:i,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo de Cancelación"}),c.jsx("textarea",{value:n,onChange:s=>r(s.target.value),required:!0,rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingrese el motivo de la cancelación..."})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"Confirmar Cancelación"})]})]})]})})}function nO({sales:t,onDelete:e,onCancel:n}){const[r,i]=we.useState(null),[s,o]=we.useState(null),[a,l]=we.useState(""),[u,h]=we.useState(new Set),p=t.reduce((w,C)=>{const x=new Date(C.date).toLocaleDateString();return w[x]||(w[x]=[]),w[x].push(C),w},{}),m=Object.keys(p).sort((w,C)=>new Date(C).getTime()-new Date(w).getTime()),g=w=>{r&&(e(r,w)?(i(null),l("")):l("Contraseña incorrecta"))},v=w=>{const C=new Set(u);C.has(w)?C.delete(w):C.add(w),h(C)};return t.length===0?c.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:c.jsx("p",{className:"text-gray-500",children:"No hay ventas registradas"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-6",children:m.map(w=>{const C=u.has(w),x=p[w],_=x.reduce((S,I)=>I.status!=="cancelled"?S+I.total:S,0);return c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[c.jsxs("button",{onClick:()=>v(w),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[C?c.jsx(L2,{className:"h-5 w-5 text-gray-400"}):c.jsx(j2,{className:"h-5 w-5 text-gray-400"}),c.jsxs("div",{className:"text-left",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:new Date(w).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),c.jsxs("p",{className:"text-sm text-gray-500",children:[x.length," venta",x.length!==1?"s":""]})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("p",{className:"text-lg font-medium text-gray-900",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD"}).format(_)})})]}),C&&c.jsx("div",{className:"border-t divide-y",children:x.map(S=>c.jsx("div",{className:"p-4",children:c.jsx(eO,{sale:S,onCancel:()=>o(S.id),onDelete:()=>i(S.id)})},S.id))})]},w)})}),r&&c.jsx(Bc,{onConfirm:g,onCancel:()=>{i(null),l("")},error:a}),s&&c.jsx(tO,{onConfirm:w=>{n(s,w),o(null)},onCancel:()=>o(null)})]})}function rO(t,e){return t.quantity>=e}function Bx(t,e){return e.every(n=>{const r=t.find(i=>i.code===n.code);return r&&rO(r,n.quantity)})}function BC(){const t="VTA",e=Date.now().toString().slice(-6),n=Math.random().toString(36).substring(2,5).toUpperCase();return`${t}-${e}-${n}`}function iO(t,e){return t*e/100}function d_(t){return{...t,payment:t.payment||{method:"cash"},notes:t.notes||"",staff:t.staff&&{...t.staff,commission:t.staff.commission,commissionAmount:iO(t.total||0,t.staff.commission)},id:t.id||BC(),date:t.date||new Date().toISOString(),total:t.total||0,products:t.products||[],client:t.client,status:t.status||"active"}}function sO({initialName:t="",onSubmit:e,onCancel:n}){const[r,i]=we.useState({name:t,phone:"",notes:""}),s=o=>{o.preventDefault(),r.name.trim()&&e(r)};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),c.jsx("input",{type:"text",value:r.name,onChange:o=>i(a=>({...a,name:o.target.value})),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),c.jsx("input",{type:"tel",value:r.phone,onChange:o=>i(a=>({...a,phone:o.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),c.jsx("textarea",{value:r.notes,onChange:o=>i(a=>({...a,notes:o.target.value})),rows:2,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"Agregar Cliente"})]})]})}function UC({clients:t,onClientSelect:e,onAddClient:n}){const[r,i]=we.useState(""),[s,o]=we.useState(!1),a=t.filter(u=>{const h=r.toLowerCase();return u.code.toLowerCase().includes(h)||u.name.toLowerCase().includes(h)||u.phone.includes(h)}),l=u=>{n({...u,code:`CLI-${Date.now()}`}),o(!1),i("")};return c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(If,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),className:"block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Buscar por nombre, código o teléfono..."})]}),r&&!s&&c.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white rounded-lg shadow-lg border max-h-60 overflow-auto",children:a.length>0?c.jsxs(c.Fragment,{children:[a.map(u=>c.jsxs("button",{type:"button",onClick:()=>{e(u),i("")},className:"w-full px-4 py-2 text-left hover:bg-gray-50",children:[c.jsx("div",{className:"font-medium",children:u.name}),c.jsxs("div",{className:"text-sm text-gray-500",children:[u.code," ",u.phone&&`- ${u.phone}`]})]},u.code)),c.jsxs("button",{type:"button",onClick:()=>o(!0),className:"w-full px-4 py-2 text-left hover:bg-blue-50 text-blue-600 flex items-center space-x-2",children:[c.jsx(Hb,{className:"h-4 w-4"}),c.jsx("span",{children:"Agregar nuevo cliente"})]})]}):c.jsxs("button",{type:"button",onClick:()=>{o(!0)},className:"w-full px-4 py-2 text-left hover:bg-blue-50 text-blue-600 flex items-center space-x-2",children:[c.jsx(Hb,{className:"h-4 w-4"}),c.jsxs("span",{children:['Agregar "',r,'" como nuevo cliente']})]})}),s&&c.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white rounded-lg shadow-lg border p-4",children:c.jsx(sO,{initialName:r,onSubmit:l,onCancel:()=>{o(!1),i("")}})})]})}function oO({clients:t,selectedClient:e,onClientSelect:n,onAddClient:r}){return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),c.jsx(UC,{clients:t,onClientSelect:n,onAddClient:r}),e&&c.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded-lg",children:[c.jsx("p",{className:"font-medium",children:e.name}),c.jsxs("p",{className:"text-sm text-gray-600",children:[e.code," ",e.phone&&`- ${e.phone}`]})]})]})}function aO({staff:t,selectedStaff:e,commission:n,onStaffSelect:r,onCommissionChange:i}){return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendedor (opcional)"}),c.jsxs("select",{value:(e==null?void 0:e.code)||"",onChange:s=>{const o=t.find(a=>a.code===s.target.value);r(o||null)},className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"",children:"Seleccionar vendedor"}),t.map(s=>c.jsx("option",{value:s.code,children:s.name},s.code))]})]}),e&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comisión (%)"}),c.jsx("input",{type:"number",value:n,onChange:s=>i(Number(s.target.value)),min:"0",max:"100",step:"0.1",required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})}function lO({products:t,selectedProducts:e,onProductSelect:n}){const[r,i]=we.useState(""),s=t.filter(o=>{const a=r.toLowerCase();return o.code.toLowerCase().includes(a)||o.name.toLowerCase().includes(a)});return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar Producto"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(If,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{type:"text",value:r,onChange:o=>i(o.target.value),className:"block w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Buscar por nombre o código..."})]}),r&&s.length>0&&c.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white rounded-lg shadow-lg border max-h-60 overflow-auto",children:s.map(o=>c.jsxs("button",{type:"button",onClick:()=>{n(o),i("")},className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center space-x-3",children:[o.imageUrl&&c.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-10 h-10 object-cover rounded",onError:a=>{a.currentTarget.src="https://via.placeholder.com/40?text=No+Image"}}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:o.name}),c.jsxs("div",{className:"text-sm text-gray-500",children:[o.code," - ",_e(o.salePrice)]})]})]},o.code))})]})}function cO({products:t,onUpdateProduct:e,onRemoveProduct:n}){const r=(o,a)=>{if(a<=0){n(o.code);return}const l=o.originalPrice-(o.discount||0);e({...o,quantity:a,subtotal:a*l})},i=(o,a)=>{e({...o,originalPrice:a,salePrice:a,discount:0,subtotal:o.quantity*a})},s=(o,a)=>{const l=Math.max(0,o.originalPrice-a);e({...o,discount:a,subtotal:o.quantity*l})};return c.jsx("div",{className:"space-y-4",children:t.map(o=>c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[o.imageUrl&&c.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-12 h-12 object-cover rounded",onError:a=>{a.currentTarget.src="https://via.placeholder.com/48?text=No+Image"}}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium",children:o.name}),c.jsx("p",{className:"text-sm text-gray-500",children:o.code})]})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"w-24",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Cantidad"}),c.jsx("input",{type:"number",value:o.quantity,onChange:a=>r(o,parseInt(a.target.value)||0),min:"1",className:"w-full px-2 py-1 text-sm border rounded focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Precio"}),c.jsx("input",{type:"number",value:o.originalPrice,onChange:a=>i(o,parseFloat(a.target.value)||0),min:"0",step:"0.01",className:"w-full px-2 py-1 text-sm border rounded focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Descuento"}),c.jsx("input",{type:"number",value:o.discount||0,onChange:a=>s(o,parseFloat(a.target.value)||0),min:"0",max:o.originalPrice,step:"0.01",className:"w-full px-2 py-1 text-sm border rounded focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"w-32 text-right",children:[c.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:"Subtotal"}),c.jsx("div",{className:"text-sm font-medium",children:_e(o.subtotal)})]}),c.jsx("button",{type:"button",onClick:()=>n(o.code),className:"p-1 text-gray-400 hover:text-red-600 rounded transition-colors",children:c.jsx(Kr,{className:"h-5 w-5"})})]})]},o.code))})}function uO({products:t,selectedProducts:e,onProductsChange:n}){const r=o=>{const a=e.find(l=>l.code===o.code);n(a?e.map(l=>l.code===o.code?{...l,quantity:l.quantity+1,subtotal:(l.quantity+1)*l.salePrice}:l):[...e,{...o,quantity:1,subtotal:o.salePrice,originalPrice:o.salePrice,discount:0}])},i=o=>{n(e.map(a=>a.code===o.code?o:a))},s=o=>{n(e.filter(a=>a.code!==o))};return c.jsxs("div",{className:"space-y-4",children:[c.jsx(lO,{products:t,selectedProducts:e,onProductSelect:r}),c.jsx(cO,{products:e,onUpdateProduct:i,onRemoveProduct:s})]})}function hO({paymentMethod:t,reference:e,onPaymentMethodChange:n,onReferenceChange:r}){return c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Método de Pago"}),c.jsxs("select",{value:t,onChange:i=>n(i.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"cash",children:"Efectivo"}),c.jsx("option",{value:"card",children:"Tarjeta"}),c.jsx("option",{value:"transfer",children:"Transferencia"})]})]}),t!=="cash"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t==="card"?"Últimos 4 dígitos":"Número de referencia"}),c.jsx("input",{type:"text",value:e,onChange:i=>r(i.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:t==="card"?"1234":"Ref-123456"})]})]})}function dO({notes:t,onNotesChange:e}){return c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),c.jsx("textarea",{value:t,onChange:n=>e(n.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})}function fO({products:t,clients:e,staff:n,onAddClient:r,onSubmit:i,onCancel:s}){const[o,a]=we.useState(""),[l,u]=we.useState([]),[h,p]=we.useState(null),[m,g]=we.useState(null),[v,w]=we.useState(0),[C,x]=we.useState("cash"),[_,S]=we.useState(""),[I,F]=we.useState(""),V=P=>{if(P.preventDefault(),a(""),!h){a("Debe seleccionar un cliente");return}if(l.length===0){a("Debe agregar al menos un producto");return}try{if(!Bx(t,l)){a("No hay suficiente stock disponible para algunos productos");return}const N=l.reduce((k,T)=>k+T.subtotal,0),L=m?N*v/100:0,M={id:BC(),date:new Date().toISOString(),client:h,products:l,total:N,notes:I,payment:{method:C,...C!=="cash"&&{reference:_}},staff:m?{member:m,commission:v,commissionAmount:L}:void 0,status:"active"};i(M)}catch(N){a(N instanceof Error?N.message:"Error al procesar la venta")}};return c.jsxs("form",{onSubmit:V,className:"space-y-6",children:[o&&c.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx(oO,{clients:e,selectedClient:h,onClientSelect:p,onAddClient:r}),c.jsx(aO,{staff:n,selectedStaff:m,commission:v,onStaffSelect:g,onCommissionChange:w})]}),c.jsx(uO,{products:t,selectedProducts:l,onProductsChange:u}),l.length>0&&c.jsx(hO,{paymentMethod:C,reference:_,onPaymentMethodChange:x,onReferenceChange:S}),c.jsx(dO,{notes:I,onNotesChange:F}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:!l.length||!h||C!=="cash"&&!_,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50",children:"Completar Venta"})]})]})}const zC="masterFactu:sales";function pO(t){try{localStorage.setItem(zC,JSON.stringify(t))}catch(e){console.error("Error saving sales:",e)}}function mO(){try{const t=localStorage.getItem(zC);return t?JSON.parse(t):null}catch(t){return console.error("Error loading sales:",t),null}}const Hr=[{username:"admin",password:"admin",role:"admin"},{username:"masteradmin",password:"Masterproyec1",role:"admin"},{username:"user",password:"user",role:"user"}],qC="masterFactu:staff";function gO(t){try{localStorage.setItem(qC,JSON.stringify(t))}catch(e){console.error("Error saving staff:",e)}}function yO(){try{const t=localStorage.getItem(qC);return t?JSON.parse(t):null}catch(t){return console.error("Error loading staff:",t),null}}function v0(){const[t,e]=we.useState(()=>yO()||[]);return we.useEffect(()=>{gO(t)},[t]),{staff:t,addStaff:a=>{e(l=>[...l,a])},updateStaff:(a,l)=>{e(u=>u.map(h=>h.code===a?l:h))},deleteStaff:a=>{e(l=>l.filter(u=>u.code!==a))},addSaleToStaff:a=>{if(!a.staff)return;const{member:l,commission:u,commissionAmount:h}=a.staff;e(p=>p.map(m=>{if(m.code===l.code){const g={id:a.id,date:a.date,amount:a.total,commission:u,discount:0,totalCommission:h};return{...m,sales:[...m.sales,g]}}return m}))},removeSaleFromStaff:a=>{e(l=>l.map(u=>({...u,sales:u.sales.filter(h=>h.id!==a)})))}}}function x0(){const[t,e]=we.useState(()=>(mO()||[]).map(m=>d_(m))),{products:n,updateProduct:r}=Il(),{addSaleToStaff:i,removeSaleFromStaff:s}=v0();we.useEffect(()=>{pO(t)},[t]);const o=(p,m)=>{p.products.forEach(g=>{const v=n.find(w=>w.code===g.code);if(v){const w=m?v.quantity+g.quantity:v.quantity-g.quantity;r(v.code,{...v,quantity:Math.max(0,w)})}})};return{sales:t,addSale:p=>{if(!Bx(n,p.products))throw new Error("No hay suficiente stock disponible para algunos productos");o(p,!1),p.staff&&i(p),e(m=>[d_(p),...m])},cancelSale:(p,m)=>{e(g=>{const v=g.find(w=>w.id===p);return v&&v.status!=="cancelled"&&(o(v,!0),s(p)),g.map(w=>w.id===p?{...w,status:"cancelled",cancellationReason:m}:w)})},deleteSale:(p,m)=>Hr.find(v=>v.role==="admin"&&v.password===m)?(e(v=>{const w=v.find(C=>C.id===p);return w&&w.status!=="cancelled"&&(o(w,!0),s(p)),v.filter(C=>C.id!==p)}),!0):!1,clearHistory:p=>Hr.find(g=>g.role==="admin"&&g.password===p)?(t.forEach(g=>{g.status!=="cancelled"&&(o(g,!0),s(g.id))}),e([]),!0):!1}}const HC="masterFactu:clients";function vO(t){try{localStorage.setItem(HC,JSON.stringify(t))}catch(e){console.error("Error saving clients:",e)}}function xO(){try{const t=localStorage.getItem(HC);return t?JSON.parse(t):null}catch(t){return console.error("Error loading clients:",t),null}}function $C(){const[t,e]=we.useState(()=>xO()||[]);return we.useEffect(()=>{vO(t)},[t]),{clients:t,addClient:s=>{e(o=>[...o,s])},updateClient:(s,o)=>{e(a=>a.map(l=>l.code===s?o:l))},deleteClient:s=>{e(o=>o.filter(a=>a.code!==s))}}}function bO(){const[t,e]=we.useState(!1),[n,r]=we.useState(!1),[i,s]=we.useState(""),{sales:o,addSale:a,deleteSale:l,cancelSale:u,clearHistory:h}=x0(),{products:p}=Il(),{clients:m,addClient:g}=$C(),{staff:v}=v0(),w=x=>{a(x),e(!1)},C=x=>{h(x)?(r(!1),s("")):s("Contraseña incorrecta")};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Ventas"}),o.length>0&&c.jsxs("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[c.jsx(Kr,{className:"h-4 w-4"}),c.jsx("span",{children:"Borrar Historial"})]})]}),c.jsxs("button",{onClick:()=>e(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[c.jsx(oo,{className:"h-5 w-5"}),c.jsx("span",{children:"Nueva Venta"})]})]}),t&&c.jsx(fO,{products:p,clients:m,staff:v,onAddClient:g,onSubmit:w,onCancel:()=>e(!1)}),c.jsx(nO,{sales:o,onDelete:l,onCancel:u}),n&&c.jsx(Bc,{onConfirm:C,onCancel:()=>{r(!1),s("")},error:i})]})}function wO({clients:t,onEdit:e,onDelete:n}){const r=i=>{const s=pM(i.name),o=Fx(i.phone,s);window.open(o,"_blank")};return t.length===0?c.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:c.jsx("p",{className:"text-gray-500",children:"No hay clientes registrados"})}):c.jsx("div",{className:"grid gap-4",children:t.map(i=>c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:i.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Código: ",i.code]}),c.jsxs("div",{className:"flex items-center mt-2 text-sm text-gray-600",children:[c.jsx(zI,{className:"h-4 w-4 mr-1"}),i.phone]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>r(i),className:"p-2 text-gray-400 hover:text-green-600 rounded-lg transition-colors",title:"Enviar mensaje por WhatsApp",children:c.jsx(R2,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>e(i),className:"p-2 text-gray-400 hover:text-blue-600 rounded-lg transition-colors",title:"Editar cliente",children:c.jsx(Tf,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>n(i.code),className:"p-2 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Eliminar cliente",children:c.jsx(Kr,{className:"h-5 w-5"})})]})]}),i.notes&&c.jsxs("div",{className:"mt-3 text-sm",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Notas:"})," ",i.notes]})]},i.code))})}function _O(){const t="CLI",e=Date.now().toString().slice(-6),n=Math.random().toString(36).substring(2,5).toUpperCase();return`${t}-${e}-${n}`}function NO({client:t,onSubmit:e,onCancel:n}){const[r,i]=we.useState({code:(t==null?void 0:t.code)||_O(),name:(t==null?void 0:t.name)||"",phone:(t==null?void 0:t.phone)||"",notes:(t==null?void 0:t.notes)||""}),s=o=>{o.preventDefault(),e(r)};return c.jsxs("form",{onSubmit:s,className:"bg-white p-6 rounded-lg shadow-sm border space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código del Cliente"}),c.jsx("input",{type:"text",value:r.code,onChange:o=>i({...r,code:o.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Cliente"}),c.jsx("input",{type:"text",value:r.name,onChange:o=>i({...r,name:o.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),c.jsx("input",{type:"tel",value:r.phone,onChange:o=>i({...r,phone:o.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),c.jsx("textarea",{value:r.notes,onChange:o=>i({...r,notes:o.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:t?"Actualizar Cliente":"Crear Cliente"})]})]})}function SO(){const[t,e]=we.useState(!1),[n,r]=we.useState(null),{clients:i,addClient:s,updateClient:o,deleteClient:a}=$C(),l=h=>{s(h),e(!1)},u=h=>{o(h.code,h),r(null)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gestión de Clientes"}),c.jsxs("button",{onClick:()=>e(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[c.jsx(oo,{className:"h-5 w-5"}),c.jsx("span",{children:"Nuevo Cliente"})]})]}),c.jsx("div",{className:"md:w-96",children:c.jsx(UC,{clients:i,onClientSelect:r,onAddClient:s})}),(t||n)&&c.jsx(NO,{client:n,onSubmit:n?u:l,onCancel:()=>{e(!1),r(null)}}),c.jsx(wO,{clients:i,onEdit:r,onDelete:a})]})}function AO({onConfirm:t,onCancel:e}){const[n,r]=we.useState(""),i=s=>{s.preventDefault(),n.trim()&&t(n.trim())};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cancelar Gasto"}),c.jsxs("form",{onSubmit:i,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo de Cancelación"}),c.jsx("textarea",{value:n,onChange:s=>r(s.target.value),required:!0,rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingrese el motivo de la cancelación..."})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"Confirmar Cancelación"})]})]})]})})}function CO({onConfirm:t,onCancel:e,error:n}){const[r,i]=we.useState(""),s=o=>{o.preventDefault(),r.trim()&&t(r.trim())};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Verificación de Administrador"}),c.jsxs("form",{onSubmit:s,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña de Administrador"}),c.jsx("input",{type:"password",value:r,onChange:o=>i(o.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingrese la contraseña de administrador"}),n&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:n})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"Confirmar"})]})]})]})})}function EO({expenses:t,categories:e,onCancelExpense:n,onDeleteExpense:r}){const[i,s]=we.useState(null),[o,a]=we.useState(null),[l,u]=we.useState(""),h=m=>{var g;return((g=e.find(v=>v.id===m))==null?void 0:g.name)||"Sin categoría"},p=m=>{o&&(r(o,m)?(a(null),u("")):u("Contraseña incorrecta"))};return t.length===0?c.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:c.jsx("p",{className:"text-gray-500",children:"No hay gastos registrados"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-4",children:t.map(m=>c.jsxs("div",{className:`bg-white p-6 rounded-lg shadow-sm border ${m.status==="cancelled"?"border-red-200 bg-red-50":""}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:m.reason}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${m.status==="cancelled"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:m.status==="cancelled"?"Cancelado":"Activo"})]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Categoría: ",h(m.category)]}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Fecha: ",new Date(m.date).toLocaleDateString()]}),c.jsx("p",{className:"mt-2 text-lg font-medium text-gray-900",children:_e(m.amount)})]}),c.jsxs("div",{className:"flex space-x-2",children:[m.status==="active"&&c.jsx("button",{onClick:()=>s(m.id),className:"p-2 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Cancelar gasto",children:c.jsx(I2,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>a(m.id),className:"p-2 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Eliminar gasto",children:c.jsx(Kr,{className:"h-5 w-5"})})]})]}),m.notes&&c.jsxs("div",{className:"mt-3 text-sm",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Nota:"})," ",m.notes]}),m.status==="cancelled"&&m.cancellationReason&&c.jsxs("div",{className:"mt-3 text-sm text-red-600",children:[c.jsx("span",{className:"font-medium",children:"Motivo de cancelación:"})," ",m.cancellationReason]})]},m.id))}),i&&c.jsx(AO,{onConfirm:m=>{n(i,m),s(null)},onCancel:()=>s(null)}),o&&c.jsx(CO,{onConfirm:p,onCancel:()=>{a(null),u("")},error:l})]})}function kO({categories:t,onSubmit:e,onCancel:n}){var o;const[r,i]=we.useState({category:((o=t[0])==null?void 0:o.id)||"",reason:"",amount:"",notes:"",date:new Date().toISOString().split("T")[0]}),s=a=>{a.preventDefault(),e({...r,amount:Number(r.amount)})};return c.jsxs("form",{onSubmit:s,className:"bg-white p-6 rounded-lg shadow-sm border space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoría"}),c.jsx("select",{value:r.category,onChange:a=>i({...r,category:a.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",children:t.map(a=>c.jsx("option",{value:a.id,children:a.name},a.id))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),c.jsx("input",{type:"date",value:r.date,onChange:a=>i({...r,date:a.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo"}),c.jsx("input",{type:"text",value:r.reason,onChange:a=>i({...r,reason:a.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto"}),c.jsx("input",{type:"number",value:r.amount,onChange:a=>i({...r,amount:a.target.value}),required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nota (opcional)"}),c.jsx("textarea",{value:r.notes,onChange:a=>i({...r,notes:a.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"Registrar Gasto"})]})]})}function PO({onSubmit:t,onCancel:e}){const[n,r]=we.useState(""),i=s=>{s.preventDefault(),n.trim()&&t(n.trim())};return c.jsxs("form",{onSubmit:i,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Categoría"}),c.jsx("input",{type:"text",value:n,onChange:s=>r(s.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"Crear Categoría"})]})]})}function TO({categories:t,onDelete:e}){return t.length===0?c.jsx("div",{className:"text-center py-4 bg-gray-50 rounded-lg",children:c.jsx("p",{className:"text-gray-500",children:"No hay categorías creadas"})}):c.jsx("div",{className:"space-y-2",children:t.map(n=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-gray-700",children:n.name}),c.jsx("button",{onClick:()=>e(n.id),className:"p-1 text-gray-400 hover:text-red-600 rounded transition-colors",children:c.jsx(Kr,{className:"h-4 w-4"})})]},n.id))})}function IO({categories:t,onAddCategory:e,onDeleteCategory:n}){const[r,i]=we.useState(!1);return c.jsxs("section",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Categorías de Gastos"}),c.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[c.jsx(oo,{className:"h-4 w-4"}),c.jsx("span",{children:"Nueva Categoría"})]})]}),r&&c.jsx(PO,{onSubmit:s=>{e(s),i(!1)},onCancel:()=>i(!1)}),c.jsx(TO,{categories:t,onDelete:n})]})}const WC="masterFactu:expenses";function jO(t){try{localStorage.setItem(WC,JSON.stringify(t))}catch(e){console.error("Error saving expenses:",e)}}function LO(){try{const t=localStorage.getItem(WC);return t?JSON.parse(t):null}catch(t){return console.error("Error loading expenses:",t),null}}function RO(){const t="EXP",e=Date.now().toString().slice(-6),n=Math.random().toString(36).substring(2,5).toUpperCase();return`${t}-${e}-${n}`}function b0(){const[t,e]=we.useState(()=>LO()||[]);return we.useEffect(()=>{jO(t)},[t]),{expenses:t,addExpense:s=>{const o={...s,id:RO(),status:"active"};e(a=>[...a,o])},cancelExpense:(s,o)=>{e(a=>a.map(l=>l.id===s?{...l,status:"cancelled",cancellationReason:o}:l))},deleteExpense:(s,o)=>Hr.find(l=>l.role==="admin"&&l.password===o)?(e(l=>l.filter(u=>u.id!==s)),!0):!1}}const GC="masterFactu:expenseCategories";function DO(t){try{localStorage.setItem(GC,JSON.stringify(t))}catch(e){console.error("Error saving expense categories:",e)}}function MO(){try{const t=localStorage.getItem(GC);return t?JSON.parse(t):null}catch(t){return console.error("Error loading expense categories:",t),null}}function Ux(){const[t,e]=we.useState(()=>MO()||[]);return we.useEffect(()=>{DO(t)},[t]),{categories:t,addCategory:i=>{const s={id:FC(),name:i};e(o=>[...o,s])},deleteCategory:i=>{e(s=>s.filter(o=>o.id!==i))}}}function OO(){const[t,e]=we.useState(!1),{expenses:n,addExpense:r,cancelExpense:i,deleteExpense:s}=b0(),{categories:o,addCategory:a,deleteCategory:l}=Ux(),u=h=>{r(h),e(!1)};return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gestión de Gastos"}),c.jsxs("button",{onClick:()=>e(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[c.jsx(oo,{className:"h-5 w-5"}),c.jsx("span",{children:"Nuevo Gasto"})]})]}),c.jsx(IO,{categories:o,onAddCategory:a,onDeleteCategory:l}),t&&c.jsx(kO,{categories:o,onSubmit:u,onCancel:()=>e(!1)}),c.jsx(EO,{expenses:n,categories:o,onCancelExpense:i,onDeleteExpense:s})]})}function FO(){const t="PAY",e=Date.now().toString().slice(-6),n=Math.random().toString(36).substring(2,5).toUpperCase();return`${t}-${e}-${n}`}function Yu(t,e){if(!e||e.length===0)return t;const r=e.filter(i=>i.status==="active").reduce((i,s)=>i+s.amount,0);return Math.max(0,t-r)}function VO({maxAmount:t,onSubmit:e,onCancel:n}){const[r,i]=we.useState({date:new Date().toISOString().split("T")[0],amount:t,method:"cash",reference:""}),s=a=>{if(a.preventDefault(),r.amount<=0||r.amount>t)return;const l={...r,id:FO(),status:"active"};e(l)},o=a=>{const l=parseFloat(a.target.value);if(!isNaN(l)){const u=Math.min(l,t);i(h=>({...h,amount:u}))}};return c.jsxs("form",{onSubmit:s,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),c.jsx("input",{type:"date",value:r.date,onChange:a=>i(l=>({...l,date:a.target.value})),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto a Pagar"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",value:r.amount,onChange:o,required:!0,min:"0.01",max:t,step:"0.01",className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"}),c.jsx("div",{className:"mt-1 text-sm text-gray-500",children:c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{children:["Saldo pendiente: ",_e(t)]}),r.amount>t&&c.jsx("span",{className:"text-red-600",children:"El monto no puede exceder el saldo pendiente"})]})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Método de Pago"}),c.jsxs("select",{value:r.method,onChange:a=>i(l=>({...l,method:a.target.value})),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"cash",children:"Efectivo"}),c.jsx("option",{value:"card",children:"Tarjeta"}),c.jsx("option",{value:"transfer",children:"Transferencia"})]})]}),r.method!=="cash"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referencia"}),c.jsx("input",{type:"text",value:r.reference,onChange:a=>i(l=>({...l,reference:a.target.value})),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:r.method==="card"?"Últimos 4 dígitos":"Número de referencia"})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:r.amount<=0||r.amount>t,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50",children:"Registrar Pago"})]})]})}function BO({onConfirm:t,onCancel:e}){const[n,r]=we.useState(""),i=s=>{s.preventDefault(),n.trim()&&t(n.trim())};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cancelar Pago"}),c.jsxs("form",{onSubmit:i,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo de Cancelación"}),c.jsx("textarea",{value:n,onChange:s=>r(s.target.value),required:!0,rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingrese el motivo de la cancelación..."})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"Confirmar Cancelación"})]})]})]})})}function UO(t){return`FACT-${t.id.split("-")[1]}`}function zO({credit:t,payment:e,businessName:n,onClose:r}){const i=Yu(t.totalAmount,t.payments),s=UO(e),o=()=>{window.print()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg w-[300px] max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex justify-between items-center",children:[c.jsx("h2",{className:"text-lg font-medium",children:"Comprobante"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:o,className:"p-2 text-gray-600 hover:text-blue-600 rounded-lg transition-colors",title:"Imprimir",children:c.jsx(Yg,{className:"h-5 w-5"})}),c.jsx("button",{onClick:r,className:"p-2 text-gray-600 hover:text-red-600 rounded-lg transition-colors",title:"Cerrar",children:c.jsx(d3,{className:"h-5 w-5"})})]})]}),c.jsxs("div",{className:"p-4",id:"printable-invoice",children:[c.jsxs("div",{className:"text-center mb-4 pb-4 border-b",children:[c.jsx("h1",{className:"text-lg font-bold",children:n}),c.jsx("p",{className:"text-sm",children:"Comprobante de Pago"}),c.jsxs("p",{className:"text-sm",children:["N° ",s]})]}),c.jsxs("div",{className:"space-y-1 text-sm mb-4",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Cliente:"})," ",t.clientName]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Teléfono:"})," ",t.clientPhone]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(e.date).toLocaleDateString()]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Método:"})," ",e.method==="cash"?"Efectivo":e.method==="card"?"Tarjeta":"Transferencia"]}),e.reference&&c.jsxs("p",{children:[c.jsx("strong",{children:"Ref:"})," ",e.reference]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Crédito:"})," ",t.code]})]}),c.jsxs("div",{className:"border-t border-b py-2 mb-4",children:[c.jsx("div",{className:"text-sm font-bold mb-2",children:"Productos:"}),t.products.map((a,l)=>c.jsxs("div",{className:"text-sm mb-2",children:[c.jsx("div",{children:a.name}),c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{children:[a.quantity,"x ",_e(a.price)]}),c.jsx("span",{children:_e(a.subtotal)})]})]},l))]}),c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Total Crédito:"}),c.jsx("span",{children:_e(t.totalAmount)})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Monto Pagado:"}),c.jsx("span",{children:_e(e.amount)})]}),c.jsxs("div",{className:"flex justify-between font-bold",children:[c.jsx("span",{children:"Saldo Pendiente:"}),c.jsx("span",{children:_e(i)})]})]}),c.jsxs("div",{className:"mt-4 pt-4 border-t text-center text-xs space-y-1",children:[c.jsx("p",{children:"¡Gracias por su pago!"}),c.jsx("p",{children:"Comprobante válido de pago"})]})]})]})})}function qO({payments:t,credit:e,onCancelPayment:n,onDeletePayment:r}){const[i,s]=we.useState(null),[o,a]=we.useState(null),[l,u]=we.useState(""),[h,p]=we.useState(null),{branding:m}=Tl(),g=v=>{o&&(r(o,v)?(a(null),u("")):u("Contraseña incorrecta"))};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-2",children:t.map(v=>c.jsxs("div",{className:`p-4 rounded-lg border ${v.status==="cancelled"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center space-x-3",children:c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${v.status==="cancelled"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:v.status==="cancelled"?"Cancelado":"Activo"})}),c.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Fecha: ",new Date(v.date).toLocaleDateString()]}),c.jsx("p",{className:"text-lg font-medium text-gray-900",children:_e(v.amount)}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Método: ",v.method==="cash"?"Efectivo":v.method==="card"?"Tarjeta":"Transferencia"]}),v.reference&&c.jsxs("p",{className:"text-sm text-gray-600",children:["Referencia: ",v.reference]})]}),c.jsxs("div",{className:"flex space-x-2",children:[v.status==="active"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>p(v),className:"p-2 text-gray-400 hover:text-blue-600 rounded-lg transition-colors",title:"Ver comprobante",children:c.jsx(Yg,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>s(v.id),className:"p-2 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Cancelar pago",children:c.jsx(I2,{className:"h-5 w-5"})})]}),c.jsx("button",{onClick:()=>a(v.id),className:"p-2 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Eliminar pago",children:c.jsx(Kr,{className:"h-5 w-5"})})]})]}),v.status==="cancelled"&&v.cancellationReason&&c.jsxs("div",{className:"mt-3 text-sm text-red-600",children:[c.jsx("span",{className:"font-medium",children:"Motivo de cancelación:"})," ",v.cancellationReason]})]},v.id))}),i&&c.jsx(BO,{onConfirm:v=>{n(i,v),s(null)},onCancel:()=>s(null)}),o&&c.jsx(Bc,{onConfirm:g,onCancel:()=>{a(null),u("")},error:l}),h&&c.jsx(zO,{credit:e,payment:h,businessName:m.name,onClose:()=>p(null)})]})}function HO({credits:t,onUpdate:e,onDelete:n,onAddPayment:r,onCancelPayment:i,onDeletePayment:s}){const[o,a]=we.useState(null),[l,u]=we.useState(""),[h,p]=we.useState(null),[m,g]=we.useState(new Set),v=x=>{const _=IC({clientName:x.clientName,dueDate:x.dueDate,amount:x.totalAmount,products:x.products}),S=Fx(x.clientPhone,_);window.open(S,"_blank")},w=x=>{o&&(n(o,x)?(a(null),u("")):u("Contraseña incorrecta"))},C=x=>{const _=new Set(m);_.has(x)?_.delete(x):_.add(x),g(_)};return t.length===0?c.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:c.jsx("p",{className:"text-gray-500",children:"No hay créditos registrados"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-4",children:t.map(x=>{const _=Yu(x.totalAmount,x.payments),S=m.has(x.code);return c.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("button",{onClick:()=>C(x.code),className:"text-gray-500 hover:text-gray-700 transition-colors",children:S?c.jsx(L2,{className:"h-5 w-5"}):c.jsx(j2,{className:"h-5 w-5"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:x.clientName}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${x.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:x.status==="completed"?"Completado":"Pendiente"})]}),c.jsxs("p",{className:"text-sm text-gray-500 ml-8",children:["Código: ",x.code]}),c.jsxs("div",{className:"flex justify-between items-center mt-2 ml-8",children:[c.jsxs("p",{className:"text-sm text-gray-500",children:["Vencimiento: ",new Date(x.dueDate).toLocaleDateString()]}),c.jsxs("p",{className:"text-lg font-medium text-gray-900",children:["Restante: ",_e(_)]})]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>p(x),className:"p-2 text-gray-400 hover:text-blue-600 rounded-lg transition-colors",title:"Agregar pago",children:c.jsx(Kg,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>v(x),className:"p-2 text-gray-400 hover:text-green-600 rounded-lg transition-colors",title:"Enviar mensaje por WhatsApp",children:c.jsx(R2,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>a(x.code),className:"p-2 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Eliminar crédito",children:c.jsx(Kr,{className:"h-5 w-5"})})]})]})}),S&&c.jsxs("div",{className:"border-t px-6 py-4 space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-gray-700",children:"Productos:"}),x.products.map((I,F)=>c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{children:[I.name," (",I.quantity,"x)"]}),c.jsx("span",{children:_e(I.subtotal)})]},F)),c.jsxs("div",{className:"pt-2 border-t flex justify-between font-medium",children:[c.jsx("span",{children:"Total:"}),c.jsx("span",{children:_e(x.totalAmount)})]})]}),x.notes&&c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Notas:"})," ",x.notes]}),x.payments.length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Pagos:"}),c.jsx(qO,{payments:x.payments,credit:x,onCancelPayment:(I,F)=>i(x.code,I,F),onDeletePayment:(I,F)=>s(x.code,I,F)})]})]})]},x.code)})}),o&&c.jsx(Bc,{onConfirm:w,onCancel:()=>{a(null),u("")},error:l}),h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 space-y-4",children:[c.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Agregar Pago - ",h.clientName]}),c.jsx(VO,{maxAmount:Yu(h.totalAmount,h.payments),onSubmit:x=>{r(h.code,x),p(null)},onCancel:()=>p(null)})]})})]})}function $O(){const t="CRE",e=Date.now().toString().slice(-6),n=Math.random().toString(36).substring(2,5).toUpperCase();return`${t}-${e}-${n}`}function WO({products:t,onSubmit:e,onCancel:n}){const[r,i]=we.useState({code:$O(),clientName:"",clientPhone:"",products:[],dueDate:"",status:"pending",totalAmount:0,notes:""}),[s,o]=we.useState(""),[a,l]=we.useState(1),[u,h]=we.useState("");we.useEffect(()=>{if(s){const v=t.find(w=>w.code===s);v&&h(v.salePrice)}else h("")},[s,t]);const p=()=>{const v=t.find(_=>_.code===s);if(!v||!u)return;const w={code:v.code,name:v.name,quantity:a,price:Number(u),subtotal:Number(u)*a},C=[...r.products,w],x=C.reduce((_,S)=>_+S.subtotal,0);i({...r,products:C,totalAmount:x}),o(""),l(1),h("")},m=v=>{const w=r.products.filter(x=>x.code!==v),C=w.reduce((x,_)=>x+_.subtotal,0);i({...r,products:w,totalAmount:C})},g=v=>{v.preventDefault(),e(r)};return c.jsxs("form",{onSubmit:g,className:"bg-white p-6 rounded-lg shadow-sm border space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código del Crédito"}),c.jsx("input",{type:"text",value:r.code,readOnly:!0,className:"w-full px-3 py-2 border rounded-lg bg-gray-50"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Vencimiento"}),c.jsx("input",{type:"date",value:r.dueDate,onChange:v=>i({...r,dueDate:v.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Cliente"}),c.jsx("input",{type:"text",value:r.clientName,onChange:v=>i({...r,clientName:v.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono del Cliente"}),c.jsx("input",{type:"tel",value:r.clientPhone,onChange:v=>i({...r,clientPhone:v.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),c.jsxs("div",{className:"border-t pt-6",children:[c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Productos"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Producto"}),c.jsxs("select",{value:s,onChange:v=>o(v.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"",children:"Seleccionar producto"}),t.map(v=>c.jsx("option",{value:v.code,children:v.name},v.code))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cantidad"}),c.jsx("input",{type:"number",value:a,onChange:v=>l(Math.max(1,parseInt(v.target.value)||1)),min:"1",className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio Unitario"}),c.jsx("input",{type:"number",value:u,onChange:v=>h(v.target.value===""?"":Number(v.target.value)),min:"0",step:"0.01",className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),c.jsx("button",{type:"button",onClick:p,disabled:!s||!u,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50",children:"Agregar Producto"}),c.jsxs("div",{className:"mt-4 space-y-2",children:[r.products.map(v=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:v.name}),c.jsxs("p",{className:"text-sm text-gray-600",children:[v.quantity," x ",_e(v.price)," = ",_e(v.subtotal)]})]}),c.jsx("button",{type:"button",onClick:()=>m(v.code),className:"p-1 text-gray-400 hover:text-red-600 rounded transition-colors",children:c.jsx(Kr,{className:"h-4 w-4"})})]},`${v.code}-${v.price}`)),r.products.length>0&&c.jsx("div",{className:"flex justify-end pt-2 border-t",children:c.jsxs("p",{className:"text-lg font-medium",children:["Total: ",_e(r.totalAmount)]})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),c.jsx("textarea",{value:r.notes,onChange:v=>i({...r,notes:v.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:r.products.length===0,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50",children:"Crear Crédito"})]})]})}function GO({searchTerm:t,onSearchChange:e}){return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(If,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{type:"text",value:t,onChange:n=>e(n.target.value),placeholder:"Buscar por nombre o código...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-sm"})]})}const KC="masterFactu:credits";function KO(t){try{localStorage.setItem(KC,JSON.stringify(t))}catch(e){console.error("Error saving credits:",e)}}function YO(){try{const t=localStorage.getItem(KC);return t?JSON.parse(t):null}catch(t){return console.error("Error loading credits:",t),null}}function w0(){const[t,e]=we.useState(()=>(YO()||[]).map(g=>({...g,payments:g.payments||[]}))),{products:n,updateProduct:r}=Il();we.useEffect(()=>{KO(t)},[t]);const i=(m,g)=>{m.products.forEach(v=>{const w=n.find(C=>C.code===v.code);if(w){const C=g?w.quantity+v.quantity:w.quantity-v.quantity;r(w.code,{...w,quantity:Math.max(0,C)})}})};return{credits:t,addCredit:m=>{if(!Bx(n,m.products))throw new Error("No hay suficiente stock disponible para algunos productos");i(m,!1);const g={...m,payments:[]};e(v=>[...v,g])},updateCredit:(m,g)=>{e(v=>v.map(w=>w.code===m?g:w))},deleteCredit:(m,g)=>Hr.find(w=>w.role==="admin"&&w.password===g)?(e(w=>{const C=w.find(x=>x.code===m);return C&&C.status!=="completed"&&i(C,!0),w.filter(x=>x.code!==m)}),!0):!1,clearHistory:m=>Hr.find(v=>v.role==="admin"&&v.password===m)?(t.forEach(v=>{v.status!=="completed"&&i(v,!0)}),e([]),!0):!1,addPayment:(m,g)=>{e(v=>v.map(w=>{if(w.code!==m)return w;const C=[...w.payments,g],x=Yu(w.totalAmount,C);return{...w,payments:C,status:x<=0?"completed":"pending"}}))},cancelPayment:(m,g,v)=>{e(w=>w.map(C=>{if(C.code!==m)return C;const x=C.payments.map(S=>S.id===g?{...S,status:"cancelled",cancellationReason:v}:S),_=Yu(C.totalAmount,x);return{...C,payments:x,status:_<=0?"completed":"pending"}}))},deletePayment:(m,g,v)=>Hr.find(C=>C.role==="admin"&&C.password===v)?(e(C=>C.map(x=>{if(x.code!==m)return x;const _=x.payments.filter(I=>I.id!==g),S=Yu(x.totalAmount,_);return{...x,payments:_,status:S<=0?"completed":"pending"}})),!0):!1}}function QO(){const[t,e]=we.useState(!1),[n,r]=we.useState(!1),[i,s]=we.useState(""),[o,a]=we.useState(""),{credits:l,addCredit:u,updateCredit:h,deleteCredit:p,clearHistory:m,addPayment:g,cancelPayment:v,deletePayment:w}=w0(),{products:C}=Il(),x=I=>{u(I),e(!1)},_=I=>{m(I)?(r(!1),a("")):a("Contraseña incorrecta")},S=l.filter(I=>{const F=i.toLowerCase();return I.code.toLowerCase().includes(F)||I.clientName.toLowerCase().includes(F)});return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gestión de Créditos"}),l.length>0&&c.jsxs("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[c.jsx(Kr,{className:"h-4 w-4"}),c.jsx("span",{children:"Borrar Historial"})]})]}),c.jsxs("button",{onClick:()=>e(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[c.jsx(oo,{className:"h-5 w-5"}),c.jsx("span",{children:"Nuevo Crédito"})]})]}),c.jsx("div",{className:"md:w-64",children:c.jsx(GO,{searchTerm:i,onSearchChange:s})}),t&&c.jsx(WO,{products:C,onSubmit:x,onCancel:()=>e(!1)}),c.jsx(HO,{credits:S,onUpdate:h,onDelete:p,onAddPayment:g,onCancelPayment:v,onDeletePayment:w}),n&&c.jsx(Bc,{onConfirm:_,onCancel:()=>{r(!1),a("")},error:o})]})}function XO(){const t="COL",e=Date.now().toString().slice(-6),n=Math.random().toString(36).substring(2,5).toUpperCase();return`${t}-${e}-${n}`}function YC(){const t="VTA",e=Date.now().toString().slice(-6),n=Math.random().toString(36).substring(2,5).toUpperCase();return`${t}-${e}-${n}`}function JO({maxAmount:t,onSubmit:e,onCancel:n}){const[r,i]=we.useState({amount:t.toString()}),s=o=>{o.preventDefault();const a=Number(r.amount);if(a<=0||a>t)return;const l={id:YC(),date:new Date().toISOString(),amount:0,commission:0,discount:0,totalCommission:-a,reason:"Pago de comisión"};e(l)};return c.jsxs("form",{onSubmit:s,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto a Pagar"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",value:r.amount,onChange:o=>i({...r,amount:o.target.value}),required:!0,min:"0.01",max:t,step:"0.01",className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"}),c.jsx("div",{className:"mt-1 text-sm text-gray-500",children:c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{children:["Comisión disponible: ",_e(t)]}),Number(r.amount)>t&&c.jsx("span",{className:"text-red-600",children:"El monto no puede exceder la comisión disponible"})]})})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:Number(r.amount)<=0||Number(r.amount)>t,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:opacity-50",children:"Realizar Pago"})]})]})}function ZO({onSubmit:t,onCancel:e}){const[n,r]=we.useState({discount:"",reason:""}),i=s=>{if(s.preventDefault(),!n.reason.trim())return;const o=Number(n.discount),a={id:YC(),date:new Date().toISOString(),amount:0,commission:0,discount:o,totalCommission:-o,reason:n.reason.trim()};t(a)};return c.jsxs("form",{onSubmit:i,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descuento"}),c.jsx("input",{type:"number",value:n.discount,onChange:s=>r(o=>({...o,discount:s.target.value})),required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo del Descuento"}),c.jsx("textarea",{value:n.reason,onChange:s=>r(o=>({...o,reason:s.target.value})),required:!0,rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingrese el motivo del descuento..."})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"Agregar Descuento"})]})]})}function eF({sales:t}){const e=n=>{var r;return((r=n.reason)==null?void 0:r.toLowerCase().includes("pago de comisi"))||n.totalCommission<0};return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"Historial de Ventas"}),c.jsx("div",{className:"grid gap-3",children:t.map(n=>{const r=e(n);return c.jsxs("div",{className:`p-4 rounded-lg ${r?"bg-red-50":"bg-gray-50"}`,children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Fecha:"})," ",new Date(n.date).toLocaleDateString()]}),n.amount!==0&&c.jsxs("div",{className:`text-sm ${r?"text-red-600":""}`,children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Venta:"})," ",_e(Math.abs(n.amount))]}),n.commission>0&&c.jsxs("div",{className:`text-sm ${r?"text-red-600":""}`,children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Comisión:"})," ",n.commission,"%"]}),n.discount>0&&c.jsxs("div",{className:`text-sm ${r?"text-red-600":""}`,children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Descuento:"})," ",_e(n.discount)]})]}),n.reason&&c.jsxs("div",{className:`mt-2 text-sm ${r?"text-red-600":""}`,children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Motivo:"})," ",n.reason]}),c.jsxs("div",{className:`mt-2 text-sm font-medium text-right ${r?"text-red-600":""}`,children:[c.jsx("span",{className:"text-gray-700",children:"Total:"})," ",_e(Math.abs(n.totalCommission))]})]},n.id)})})]})}function tF({staff:t,onEdit:e,onDelete:n,onUpdateStaff:r}){var I,F;const[i,s]=we.useState(null),[o,a]=we.useState(null),[l,u]=we.useState(new Set),[h,p]=we.useState(null),[m,g]=we.useState(""),v=V=>V.reduce((P,N)=>P+N.amount,0),w=V=>V.reduce((P,N)=>P+N.totalCommission,0),C=(V,P)=>{const N=t.find(k=>k.code===V);if(!N)return;const L={id:P.id,date:P.date,amount:-v(N.sales),commission:0,discount:0,totalCommission:-w(N.sales),reason:"Pago de comisiones y reinicio de ventas"},M={...N,sales:[...N.sales,L]};r(V,M),s(null)},x=(V,P)=>{const N=t.find(M=>M.code===V);if(!N)return;const L={...N,sales:[...N.sales,P]};r(V,L),a(null)},_=(V,P)=>{const N=t.find(M=>M.code===V);if(!N)return;if(P!=="admin"){g("Contraseña incorrecta");return}const L={...N,sales:[]};r(V,L),p(null),g("")},S=V=>{const P=new Set(l);P.has(V)?P.delete(V):P.add(V),u(P)};return t.length===0?c.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:c.jsx("p",{className:"text-gray-500",children:"No hay colaboradores registrados"})}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"space-y-4",children:t.map(V=>{const P=v(V.sales),N=w(V.sales),L=l.has(V.code);return c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("button",{onClick:()=>S(V.code),className:"text-gray-500 hover:text-gray-700 transition-colors",children:L?c.jsx(L2,{className:"h-5 w-5"}):c.jsx(j2,{className:"h-5 w-5"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:V.name})]}),c.jsxs("p",{className:"text-sm text-gray-500 ml-8",children:["Código: ",V.code]}),c.jsxs("p",{className:"text-sm text-gray-500 ml-8",children:["Teléfono: ",V.phone]}),c.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 ml-8",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Total Ventas:"}),c.jsx("p",{className:"text-lg font-medium",children:_e(P)})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Total Comisiones:"}),N>0&&c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>a(V.code),className:"p-1 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Aplicar descuento",children:c.jsx(FI,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>s(V.code),className:"p-1 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Pagar comisiones",children:c.jsx(Kg,{className:"h-5 w-5"})})]})]}),c.jsx("p",{className:"text-lg font-medium",children:_e(N)})]})]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>e(V),className:"p-2 text-gray-400 hover:text-blue-600 rounded-lg transition-colors",title:"Editar colaborador",children:c.jsx(Tf,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>n(V.code),className:"p-2 text-gray-400 hover:text-red-600 rounded-lg transition-colors",title:"Eliminar colaborador",children:c.jsx(Kr,{className:"h-5 w-5"})})]})]}),V.notes&&c.jsxs("div",{className:"mt-3 text-sm ml-8",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Notas:"})," ",V.notes]}),L&&V.sales.length>0&&c.jsxs("div",{className:"mt-6 ml-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"Historial"}),c.jsx("button",{onClick:()=>p(V.code),className:"text-sm text-red-600 hover:text-red-700",children:"Borrar Historial"})]}),c.jsx(eF,{sales:V.sales})]})]},V.code)})}),i&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Pagar Comisiones"}),c.jsx(JO,{maxAmount:w(((I=t.find(V=>V.code===i))==null?void 0:I.sales)||[]),onSubmit:V=>C(i,V),onCancel:()=>s(null)})]})}),o&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Aplicar Descuento"}),c.jsx(ZO,{maxAmount:w(((F=t.find(V=>V.code===o))==null?void 0:F.sales)||[]),onSubmit:V=>x(o,V),onCancel:()=>a(null)})]})}),h&&c.jsx(Bc,{onConfirm:V=>_(h,V),onCancel:()=>{p(null),g("")},error:m})]})}function nF({staff:t,onSubmit:e,onCancel:n}){const[r,i]=we.useState({code:(t==null?void 0:t.code)||XO(),name:(t==null?void 0:t.name)||"",phone:(t==null?void 0:t.phone)||"",notes:(t==null?void 0:t.notes)||"",sales:(t==null?void 0:t.sales)||[]}),s=o=>{o.preventDefault(),e(r)};return c.jsxs("form",{onSubmit:s,className:"bg-white p-6 rounded-lg shadow-sm border space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código del Colaborador"}),c.jsx("input",{type:"text",value:r.code,onChange:o=>i({...r,code:o.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Colaborador"}),c.jsx("input",{type:"text",value:r.name,onChange:o=>i({...r,name:o.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),c.jsx("input",{type:"tel",value:r.phone,onChange:o=>i({...r,phone:o.target.value}),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),c.jsx("textarea",{value:r.notes,onChange:o=>i({...r,notes:o.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:t?"Actualizar Colaborador":"Crear Colaborador"})]})]})}function rF({searchTerm:t,onSearchChange:e}){return c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(If,{className:"h-5 w-5 text-gray-400"})}),c.jsx("input",{type:"text",value:t,onChange:n=>e(n.target.value),placeholder:"Buscar por nombre o código...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-sm"})]})}function iF(){const[t,e]=we.useState(!1),[n,r]=we.useState(null),[i,s]=we.useState(""),{staff:o,addStaff:a,updateStaff:l,deleteStaff:u}=v0(),h=g=>{a(g),e(!1)},p=g=>{l(g.code,g),r(null)},m=o.filter(g=>{const v=i.toLowerCase();return g.code.toLowerCase().includes(v)||g.name.toLowerCase().includes(v)});return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Colaboradores"}),c.jsxs("button",{onClick:()=>e(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[c.jsx(oo,{className:"h-5 w-5"}),c.jsx("span",{children:"Nuevo Colaborador"})]})]}),c.jsx("div",{className:"md:w-64",children:c.jsx(rF,{searchTerm:i,onSearchChange:s})}),(t||n)&&c.jsx(nF,{staff:n,onSubmit:n?p:h,onCancel:()=>{e(!1),r(null)}}),c.jsx(tF,{staff:m,onEdit:r,onDelete:u,onUpdateStaff:l})]})}const f_=[{id:"invoices",label:"Facturas",icon:c.jsx(D2,{className:"h-5 w-5"})},{id:"appearance",label:"Apariencia",icon:c.jsx(UI,{className:"h-5 w-5"})},{id:"users",label:"Usuarios",icon:c.jsx(O2,{className:"h-5 w-5"})}];class Fu{constructor(){this.currentUser=null}static getInstance(){return Fu.instance||(Fu.instance=new Fu),Fu.instance}setCurrentUser(e){this.currentUser=e}getCurrentUser(){return this.currentUser}}const pf=Fu.getInstance(),QC="masterFactu:users";function mf(t){try{localStorage.setItem(QC,JSON.stringify(t))}catch(e){console.error("Error saving users:",e)}}function zx(){try{const t=localStorage.getItem(QC);if(!t)return null;const e=JSON.parse(t);return Array.isArray(e)?e:(mf(Hr),Hr)}catch(t){return console.error("Error loading users:",t),mf(Hr),Hr}}async function sF(t,e){const r=(zx()||Hr).find(i=>i.username===t&&i.password===e);if(!r)throw new Error("Invalid credentials");return pf.setCurrentUser(r),r}async function oF(){pf.setCurrentUser(null)}async function aF(t,e,n){const r=pf.getCurrentUser();if(!r)throw new Error("No hay usuario conectado");if(t!==r.username&&r.role!=="admin")throw new Error("No tienes permisos para cambiar la contraseña de otro usuario");const i=zx()||Hr,s=i.findIndex(o=>o.username===t);if(s===-1)throw new Error("Usuario no encontrado");if(i[s].password!==e)throw new Error("La contraseña actual es incorrecta");if(n.length<6)throw new Error("La nueva contraseña debe tener al menos 6 caracteres");i[s]={...i[s],password:n},r.username===t&&pf.setCurrentUser({...r,password:n}),mf(i)}async function lF(){return pf.getCurrentUser()}function XC(){const[t,e]=we.useState(!1),[n,r]=we.useState(""),[i,s]=we.useState(null);return we.useEffect(()=>{(async()=>{const h=await lF();h&&(e(!0),s(h))})()},[]),{isLoggedIn:t,error:n,currentUser:i,login:async(u,h)=>{try{const p=await sF(u,h);e(!0),s(p),r("")}catch(p){e(!1),s(null),r(p instanceof Error?p.message:"Login failed")}},logout:async()=>{try{await oF(),e(!1),s(null),r("")}catch(u){r(u instanceof Error?u.message:"Logout failed")}},updatePassword:async(u,h,p)=>{try{await aF(u,h,p),r("")}catch(m){throw r(m instanceof Error?m.message:"Password change failed"),m}}}}function cF({user:t,onSubmit:e,onCancel:n}){const[r,i]=we.useState({username:t.username,currentPassword:"",newPassword:"",confirmPassword:""}),[s,o]=we.useState(""),[a,l]=we.useState(""),{updatePassword:u,currentUser:h}=XC(),p=async m=>{m.preventDefault(),o(""),l("");try{const g={};if(r.username!==t.username&&(g.username=r.username),r.newPassword){if(!r.currentPassword){o("Por favor ingrese su contraseña actual");return}if(r.newPassword!==r.confirmPassword){o("Las contraseñas nuevas no coinciden");return}if(r.newPassword.length<6){o("La contraseña debe tener al menos 6 caracteres");return}await u(t.username,r.currentPassword,r.newPassword),l("Contraseña actualizada correctamente"),i(v=>({...v,currentPassword:"",newPassword:"",confirmPassword:""}))}Object.keys(g).length>0&&(e(g),l("Cambios guardados correctamente"))}catch(g){o(g instanceof Error?g.message:"Ocurrió un error")}};return c.jsxs("form",{onSubmit:p,className:"space-y-4 mt-4 border-t pt-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de Usuario"}),c.jsx("input",{type:"text",value:r.username,onChange:m=>i(g=>({...g,username:m.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",disabled:(h==null?void 0:h.role)!=="admin"})]}),c.jsxs("div",{className:"space-y-4 border-t pt-4",children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"Cambiar Contraseña"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña Actual"}),c.jsx("input",{type:"password",value:r.currentPassword,onChange:m=>i(g=>({...g,currentPassword:m.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingrese la contraseña actual"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nueva Contraseña"}),c.jsx("input",{type:"password",value:r.newPassword,onChange:m=>i(g=>({...g,newPassword:m.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingrese la nueva contraseña"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Nueva Contraseña"}),c.jsx("input",{type:"password",value:r.confirmPassword,onChange:m=>i(g=>({...g,confirmPassword:m.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Confirme la nueva contraseña"})]})]}),s&&c.jsx("p",{className:"text-sm text-red-600",children:s}),a&&c.jsx("p",{className:"text-sm text-green-600",children:a}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"Guardar Cambios"})]})]})}function uF({users:t,onUpdateUser:e}){const[n,r]=we.useState(null),i=t.filter(s=>s.username==="admin"||s.username==="user");return c.jsx("div",{className:"space-y-6",children:c.jsx("div",{className:"grid gap-6",children:i.map(s=>c.jsxs("div",{className:"bg-white rounded-lg border p-6 space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[s.role==="admin"?c.jsx(HI,{className:"h-6 w-6 text-blue-600"}):c.jsx(M2,{className:"h-6 w-6 text-gray-600"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.username}),c.jsx("p",{className:"text-sm text-gray-500 capitalize",children:s.role})]})]}),c.jsx("button",{onClick:()=>r(s.username),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Editar"})]}),n===s.username&&c.jsx(cF,{user:s,onSubmit:o=>{e(s.username,o),r(null)},onCancel:()=>r(null)})]},s.username))})})}function I1({label:t,value:e="#000000",onChange:n}){const[r,i]=we.useState(e);we.useEffect(()=>{i(e)},[e]);const s=a=>{const l=a.target.value;i(l),/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(l)&&n(l)},o=a=>{const l=a.target.value;i(l),n(l)};return c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:t}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("input",{type:"color",value:r,onChange:o,className:"h-10 w-20 rounded border border-gray-300"}),c.jsx("input",{type:"text",value:r,onChange:s,className:"flex-1 px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"#000000",pattern:"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"})]})]})}function hF({colors:t,onColorChange:e}){return c.jsxs("section",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Colores del Tema"}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[c.jsx(I1,{label:"Color Primario",value:t.primary,onChange:n=>e({primary:n})}),c.jsx(I1,{label:"Color Secundario",value:t.secondary,onChange:n=>e({secondary:n})}),c.jsx(I1,{label:"Color del Botón de Login",value:t.loginButton,onChange:n=>e({loginButton:n})})]})]})}function Em({label:t,value:e,onChange:n,preview:r}){return c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:t}),c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsx("div",{className:"flex-1",children:c.jsx("input",{type:"url",value:e,onChange:i=>n(i.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"https://ejemplo.com/imagen.jpg"})}),r&&e&&c.jsx("div",{className:"w-16 h-16 border rounded-lg overflow-hidden flex items-center justify-center bg-gray-50",children:e?c.jsx("img",{src:e,alt:t,className:"w-full h-full object-cover",onError:i=>{i.currentTarget.src="",i.currentTarget.classList.add("hidden")}}):c.jsx(DI,{className:"w-6 h-6 text-gray-400"})})]})]})}function dF({images:t,onImageChange:e}){return c.jsxs("section",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Imágenes"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Em,{label:"Logo de Inicio de Sesión",value:t.loginLogo,onChange:n=>e({loginLogo:n}),preview:!0}),c.jsx(Em,{label:"Favicon",value:t.favicon,onChange:n=>e({favicon:n}),preview:!0}),c.jsx(Em,{label:"Fondo de Inicio de Sesión",value:t.loginBackground,onChange:n=>e({loginBackground:n}),preview:!0})]})]})}function fF({branding:t,onSubmit:e}){const[n,r]=we.useState(t),i=s=>{s.preventDefault(),e(n)};return c.jsxs("form",{onSubmit:i,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Negocio"}),c.jsx("input",{type:"text",value:n.name,onChange:s=>r({...n,name:s.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Eslogan"}),c.jsx("input",{type:"text",value:n.slogan,onChange:s=>r({...n,slogan:s.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título de la Pestaña del Navegador"}),c.jsx("input",{type:"text",value:n.browserTitle,onChange:s=>r({...n,browserTitle:s.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: MASTER FACTU - Sistema de Gestión"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Este texto aparecerá en la pestaña del navegador"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"Guardar Cambios"})})]})}function pF({branding:t,onBrandingChange:e}){return c.jsxs("section",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Marca"}),c.jsx(fF,{branding:t,onSubmit:e})]})}function mF({show:t}){return t?c.jsxs("div",{className:"fixed top-4 right-4 flex items-center bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg",children:[c.jsx(II,{className:"h-5 w-5 mr-2"}),c.jsx("p",{children:"Cambios guardados correctamente"})]}):null}function gF(){const{colors:t,images:e,branding:n,updateColors:r,updateImages:i,updateBranding:s}=Tl(),[o,a]=we.useState(!1),l=()=>{a(!0),setTimeout(()=>a(!1),3e3)},u=m=>{r(m),l()},h=m=>{i(m),l()},p=m=>{s(m),l()};return c.jsxs("div",{className:"space-y-8",children:[c.jsx(mF,{show:o}),c.jsx(hF,{colors:t,onColorChange:u}),c.jsx(dF,{images:e,onImageChange:h}),c.jsx(pF,{branding:n,onBrandingChange:p})]})}function yF({value:t,onChange:e}){return c.jsxs("div",{className:"flex space-x-2",children:[c.jsxs("button",{onClick:()=>e("sales"),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${t==="sales"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:[c.jsx(D2,{className:"h-5 w-5"}),c.jsx("span",{children:"Ventas"})]}),c.jsxs("button",{onClick:()=>e("credits"),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${t==="credits"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:[c.jsx(Gg,{className:"h-5 w-5"}),c.jsx("span",{children:"Créditos"})]})]})}function vF({settings:t,onChange:e}){const n=(s,o)=>{e({...t,[s]:o})},r=(s,o)=>{e({...t,logo:{...t.logo,[s]:o}})},i=(s,o)=>{e({...t,header:{...t.header,[s]:o}})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Logo"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Em,{label:"URL del Logo",value:t.logo.url,onChange:s=>r("url",s),preview:!0}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ancho del Logo (px)"}),c.jsx("input",{type:"number",value:t.logo.width,onChange:s=>r("width",Number(s.target.value)),min:50,max:300,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alto del Logo (px)"}),c.jsx("input",{type:"number",value:t.logo.height,onChange:s=>r("height",Number(s.target.value)),min:50,max:300,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dimensiones"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ancho del Ticket (mm)"}),c.jsx("input",{type:"number",value:t.width,onChange:s=>n("width",Number(s.target.value)),min:50,max:120,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tamaño de Fuente (pt)"}),c.jsx("input",{type:"number",value:t.fontSize,onChange:s=>n("fontSize",Number(s.target.value)),min:8,max:14,step:.5,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Encabezado"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:t.showHeader,onChange:s=>n("showHeader",s.target.checked),className:"h-4 w-4 text-blue-600 rounded border-gray-300"}),c.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Mostrar encabezado"})]}),t.showHeader&&c.jsxs("div",{className:"space-y-4 pl-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título"}),c.jsx("input",{type:"text",value:t.header.title,onChange:s=>i("title",s.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subtítulo"}),c.jsx("input",{type:"text",value:t.header.subtitle,onChange:s=>i("subtitle",s.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dirección"}),c.jsx("input",{type:"text",value:t.header.address,onChange:s=>i("address",s.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),c.jsx("input",{type:"text",value:t.header.phone,onChange:s=>i("phone",s.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),c.jsx("input",{type:"email",value:t.header.email,onChange:s=>i("email",s.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pie de Página"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:t.showFooter,onChange:s=>n("showFooter",s.target.checked),className:"h-4 w-4 text-blue-600 rounded border-gray-300"}),c.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Mostrar pie de página"})]}),t.showFooter&&c.jsxs("div",{className:"space-y-4 pl-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Texto del Pie"}),c.jsx("input",{type:"text",value:t.footerText,onChange:s=>n("footerText",s.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas Adicionales"}),c.jsx("textarea",{value:t.additionalNotes,onChange:s=>n("additionalNotes",s.target.value),rows:2,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})]})]})]})}function xF({type:t,settings:e}){const{branding:n}=Tl();return c.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Vista Previa"}),c.jsx("div",{className:"border rounded-lg overflow-hidden bg-white",style:{width:`${e.width}mm`,margin:"0 auto",fontSize:`${e.fontSize}pt`},children:c.jsxs("div",{className:"p-4 space-y-4",children:[e.showLogo&&e.logo.url&&c.jsx("div",{className:"flex justify-center",children:c.jsx("img",{src:e.logo.url,alt:e.header.title||n.name,style:{width:`${e.logo.width}px`,height:`${e.logo.height}px`,objectFit:"contain"}})}),e.showHeader&&c.jsxs("div",{className:"text-center space-y-1",children:[c.jsx("h2",{className:"font-bold",children:e.header.title||n.name}),e.header.subtitle&&c.jsx("p",{className:"text-sm",children:e.header.subtitle}),e.header.address&&c.jsx("p",{className:"text-xs",children:e.header.address}),e.header.phone&&c.jsxs("p",{className:"text-xs",children:["Tel: ",e.header.phone]}),e.header.email&&c.jsx("p",{className:"text-xs",children:e.header.email})]}),c.jsx("div",{className:"border-t border-dashed my-2"}),c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Cliente:"})," Juan Pérez"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Fecha:"})," ",new Date().toLocaleDateString()]}),c.jsxs("p",{children:[c.jsxs("strong",{children:[t==="sales"?"Venta":"Crédito",":"]})," #12345"]})]}),c.jsx("div",{className:"border-t border-dashed my-2"}),c.jsx("div",{className:"space-y-2",children:c.jsxs("div",{className:"text-sm",children:[c.jsx("div",{className:"font-bold",children:"Producto de Ejemplo"}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"2 x $50.00"}),c.jsx("span",{children:"$100.00"})]})]})}),c.jsx("div",{className:"border-t border-dashed my-2"}),c.jsx("div",{className:"text-right space-y-1",children:c.jsxs("p",{children:[c.jsx("strong",{children:"Total:"})," $100.00"]})}),e.showFooter&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-t border-dashed my-2"}),c.jsxs("div",{className:"text-center text-sm",children:[e.footerText&&c.jsx("p",{children:e.footerText}),e.additionalNotes&&c.jsx("p",{className:"text-xs mt-2",children:e.additionalNotes})]})]})]})})]})}function bF(){const[t,e]=Ig.useState("sales"),{invoiceSettings:n,updateInvoiceSettings:r}=Tl(),i=s=>{r({...n,[t]:s})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Configuración de Facturas"}),c.jsx(yF,{value:t,onChange:e})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsx("div",{children:c.jsx(vF,{settings:n[t],onChange:i})}),c.jsx("div",{children:c.jsx(xF,{type:t,settings:n[t]})})]})]})}function wF(){const[t,e]=we.useState(()=>{const r=zx();return r||(mf(Hr),Hr)});return we.useEffect(()=>{mf(t)},[t]),{users:t,updateUser:(r,i)=>{e(s=>s.map(o=>o.username===r?{...o,...i}:o))}}}function _F(){var s;const[t,e]=we.useState("users"),{users:n,updateUser:r}=wF(),i=()=>{switch(t){case"users":return c.jsx(uF,{users:n,onUpdateUser:r});case"appearance":return c.jsx(gF,{});case"invoices":return c.jsx(bF,{});default:return c.jsx("div",{className:"text-gray-500",children:"Este submódulo está en construcción"})}};return c.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[c.jsx("div",{className:"col-span-1 bg-white rounded-lg shadow p-4",children:c.jsx("nav",{className:"space-y-2",children:f_.map(o=>c.jsxs("button",{onClick:()=>e(o.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${t===o.id?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:[o.icon,c.jsx("span",{className:"text-sm font-medium",children:o.label})]},o.id))})}),c.jsxs("div",{className:"col-span-3 bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:(s=f_.find(o=>o.id===t))==null?void 0:s.label}),i()]})]})}function NF({type:t,maxAmount:e,onSubmit:n,onCancel:r}){const[i,s]=we.useState({amount:"",reason:""}),o=a=>{a.preventDefault();const l=Number(i.amount);l<=0||e!==void 0&&l>e||n(l,i.reason.trim())};return c.jsxs("form",{onSubmit:o,className:"bg-white p-6 rounded-lg shadow-sm border space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t==="deposit"?"Agregar Fondos":"Retirar Fondos"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",value:i.amount,onChange:a=>s({...i,amount:a.target.value}),required:!0,min:"0.01",step:"0.01",max:e,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"}),e!==void 0&&c.jsxs("div",{className:"mt-1 text-sm text-gray-500",children:["Máximo disponible: ",_e(e)]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo"}),c.jsx("textarea",{value:i.reason,onChange:a=>s({...i,reason:a.target.value}),required:!0,rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{type:"submit",className:`px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors ${t==="deposit"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:t==="deposit"?"Agregar":"Retirar"})]})]})}function SF({transactions:t,onClearHistory:e}){return t.length===0?c.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:c.jsx("p",{className:"text-gray-500",children:"No hay transacciones registradas"})}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Historial de Movimientos"}),c.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[c.jsx(Kr,{className:"h-4 w-4"}),c.jsx("span",{children:"Borrar Historial"})]})]}),c.jsx("div",{className:"grid gap-4",children:t.map(n=>c.jsx("div",{className:`bg-white p-6 rounded-lg shadow-sm border ${n.type==="deposit"?"border-green-200":"border-red-200"}`,children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[n.type==="deposit"?c.jsx(EI,{className:"h-6 w-6 text-green-600 mt-1"}):c.jsx(CI,{className:"h-6 w-6 text-red-600 mt-1"}),c.jsxs("div",{children:[c.jsxs("p",{className:`text-lg font-medium ${n.type==="deposit"?"text-green-600":"text-red-600"}`,children:[n.type==="deposit"?"+":"-"," ",_e(n.amount)]}),c.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(n.date).toLocaleDateString()," ",new Date(n.date).toLocaleTimeString()]}),c.jsx("p",{className:"text-sm text-gray-700 mt-2",children:n.reason})]})]})})},n.id))})]})}const JC="masterFactu:pettyCash";function AF(t){try{localStorage.setItem(JC,JSON.stringify(t))}catch(e){console.error("Error saving petty cash:",e)}}function CF(){try{const t=localStorage.getItem(JC);return t?JSON.parse(t):null}catch(t){return console.error("Error loading petty cash:",t),null}}function p_(){const t="TRX",e=Date.now().toString().slice(-6),n=Math.random().toString(36).substring(2,5).toUpperCase();return`${t}-${e}-${n}`}function _0(){const[t,e]=we.useState(()=>CF()||{balance:0,transactions:[]});we.useEffect(()=>{AF(t)},[t]);const n=(s,o)=>{const a={id:p_(),type:"deposit",amount:s,reason:o,date:new Date().toISOString()};e(l=>({balance:l.balance+s,transactions:[a,...l.transactions]}))},r=(s,o)=>{if(s>t.balance)throw new Error("Fondos insuficientes");const a={id:p_(),type:"withdrawal",amount:s,reason:o,date:new Date().toISOString()};e(l=>({balance:l.balance-s,transactions:[a,...l.transactions]}))},i=s=>Hr.find(a=>a.role==="admin"&&a.password===s)?(e(a=>({...a,transactions:[]})),!0):!1;return{balance:t.balance,transactions:t.transactions,addFunds:n,withdrawFunds:r,clearHistory:i}}function EF(){const[t,e]=we.useState(!1),[n,r]=we.useState(!1),[i,s]=we.useState(!1),[o,a]=we.useState(""),{balance:l,transactions:u,addFunds:h,withdrawFunds:p,clearHistory:m}=_0(),g=v=>{m(v)?(s(!1),a("")):a("Contraseña incorrecta")};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Caja Chica"}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsxs("button",{onClick:()=>e(!0),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[c.jsx(oo,{className:"h-5 w-5"}),c.jsx("span",{children:"Agregar Fondos"})]}),c.jsxs("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[c.jsx(VI,{className:"h-5 w-5"}),c.jsx("span",{children:"Retirar Fondos"})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Balance Actual"}),c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:_e(l)})]}),(t||n)&&c.jsx(NF,{type:t?"deposit":"withdrawal",maxAmount:n?l:void 0,onSubmit:(v,w)=>{t?h(v,w):p(v,w),e(!1),r(!1)},onCancel:()=>{e(!1),r(!1)}}),c.jsx(SF,{transactions:u,onClearHistory:()=>s(!0)}),i&&c.jsx(Bc,{onConfirm:g,onCancel:()=>{s(!1),a("")},error:o})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Wf(t){return t+.5|0}const Ja=(t,e,n)=>Math.max(Math.min(t,n),e);function md(t){return Ja(Wf(t*2.55),0,255)}function dl(t){return Ja(Wf(t*255),0,255)}function Mo(t){return Ja(Wf(t/2.55)/100,0,1)}function m_(t){return Ja(Wf(t*100),0,100)}const Ui={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},gv=[..."0123456789ABCDEF"],kF=t=>gv[t&15],PF=t=>gv[(t&240)>>4]+gv[t&15],Up=t=>(t&240)>>4===(t&15),TF=t=>Up(t.r)&&Up(t.g)&&Up(t.b)&&Up(t.a);function IF(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Ui[t[1]]*17,g:255&Ui[t[2]]*17,b:255&Ui[t[3]]*17,a:e===5?Ui[t[4]]*17:255}:(e===7||e===9)&&(n={r:Ui[t[1]]<<4|Ui[t[2]],g:Ui[t[3]]<<4|Ui[t[4]],b:Ui[t[5]]<<4|Ui[t[6]],a:e===9?Ui[t[7]]<<4|Ui[t[8]]:255})),n}const jF=(t,e)=>t<255?e(t):"";function LF(t){var e=TF(t)?kF:PF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+jF(t.a,e):void 0}const RF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ZC(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function DF(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function MF(t,e,n){const r=ZC(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function OF(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function qx(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),l=OF(n,r,i,h,s),l=l*60+.5),[l|0,u||0,a]}function Hx(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(dl)}function $x(t,e,n){return Hx(ZC,t,e,n)}function FF(t,e,n){return Hx(MF,t,e,n)}function VF(t,e,n){return Hx(DF,t,e,n)}function eE(t){return(t%360+360)%360}function BF(t){const e=RF.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?md(+e[5]):dl(+e[5]));const i=eE(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=FF(i,s,o):e[1]==="hsv"?r=VF(i,s,o):r=$x(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function UF(t,e){var n=qx(t);n[0]=eE(n[0]+e),n=$x(n),t.r=n[0],t.g=n[1],t.b=n[2]}function zF(t){if(!t)return;const e=qx(t),n=e[0],r=m_(e[1]),i=m_(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Mo(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const g_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},y_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function qF(){const t={},e=Object.keys(y_),n=Object.keys(g_);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,g_[s]);s=parseInt(y_[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let zp;function HF(t){zp||(zp=qF(),zp.transparent=[0,0,0,0]);const e=zp[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const $F=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function WF(t){const e=$F.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?md(o):Ja(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?md(r):Ja(r,0,255)),i=255&(e[4]?md(i):Ja(i,0,255)),s=255&(e[6]?md(s):Ja(s,0,255)),{r,g:i,b:s,a:n}}}function GF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Mo(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const j1=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,yu=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function KF(t,e,n){const r=yu(Mo(t.r)),i=yu(Mo(t.g)),s=yu(Mo(t.b));return{r:dl(j1(r+n*(yu(Mo(e.r))-r))),g:dl(j1(i+n*(yu(Mo(e.g))-i))),b:dl(j1(s+n*(yu(Mo(e.b))-s))),a:t.a+n*(e.a-t.a)}}function qp(t,e,n){if(t){let r=qx(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=$x(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function tE(t,e){return t&&Object.assign(e||{},t)}function v_(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=dl(t[3]))):(e=tE(t,{r:0,g:0,b:0,a:1}),e.a=dl(e.a)),e}function YF(t){return t.charAt(0)==="r"?WF(t):BF(t)}class gf{constructor(e){if(e instanceof gf)return e;const n=typeof e;let r;n==="object"?r=v_(e):n==="string"&&(r=IF(e)||HF(e)||YF(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=tE(this._rgb);return e&&(e.a=Mo(e.a)),e}set rgb(e){this._rgb=v_(e)}rgbString(){return this._valid?GF(this._rgb):void 0}hexString(){return this._valid?LF(this._rgb):void 0}hslString(){return this._valid?zF(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,r.r=255&u*r.r+s*i.r+.5,r.g=255&u*r.g+s*i.g+.5,r.b=255&u*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=KF(this._rgb,e._rgb,n)),this}clone(){return new gf(this.rgb)}alpha(e){return this._rgb.a=dl(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Wf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return qp(this._rgb,2,e),this}darken(e){return qp(this._rgb,2,-e),this}saturate(e){return qp(this._rgb,1,e),this}desaturate(e){return qp(this._rgb,1,-e),this}rotate(e){return UF(this._rgb,e),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function To(){}const QF=(()=>{let t=0;return()=>t++})();function an(t){return t==null}function Qn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Vt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Yi(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Vs(t,e){return Yi(t)?t:e}function It(t,e){return typeof t>"u"?e:t}const XF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function dn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Gt(t,e,n,r){let i,s,o;if(Qn(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Vt(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function _g(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Ng(t){if(Qn(t))return t.map(Ng);if(Vt(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Ng(t[n[i]]);return e}return t}function nE(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function JF(t,e,n,r){if(!nE(t))return;const i=e[t],s=n[t];Vt(i)&&Vt(s)?yf(i,s,r):e[t]=Ng(s)}function yf(t,e,n){const r=Qn(e)?e:[e],i=r.length;if(!Vt(t))return t;n=n||{};const s=n.merger||JF;let o;for(let a=0;a<i;++a){if(o=r[a],!Vt(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)s(l[u],t,o,n)}return t}function jd(t,e){return yf(t,e,{merger:ZF})}function ZF(t,e,n){if(!nE(t))return;const r=e[t],i=n[t];Vt(r)&&Vt(i)?jd(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ng(i))}const x_={"":t=>t,x:t=>t.x,y:t=>t.y};function e9(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function t9(t){const e=e9(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function ph(t,e){return(x_[e]||(x_[e]=t9(e)))(t)}function Wx(t){return t.charAt(0).toUpperCase()+t.slice(1)}const vf=t=>typeof t<"u",wl=t=>typeof t=="function",b_=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function n9(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const rr=Math.PI,eo=2*rr,r9=eo+rr,Sg=Number.POSITIVE_INFINITY,i9=rr/180,gs=rr/2,Jl=rr/4,w_=rr*2/3,yv=Math.log10,to=Math.sign;function Ld(t,e,n){return Math.abs(t-e)<n}function __(t){const e=Math.round(t);t=Ld(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(yv(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function s9(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function xf(t){return!isNaN(parseFloat(t))&&isFinite(t)}function o9(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function a9(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function hc(t){return t*(rr/180)}function l9(t){return t*(180/rr)}function N_(t){if(!Yi(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function c9(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*rr&&(s+=eo),{angle:s,distance:i}}function vv(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function u9(t,e){return(t-e+r9)%eo-rr}function Oa(t){return(t%eo+eo)%eo}function rE(t,e,n,r){const i=Oa(t),s=Oa(e),o=Oa(n),a=Oa(s-i),l=Oa(o-i),u=Oa(i-s),h=Oa(i-o);return i===s||i===o||r&&s===o||a>l&&u<h}function Si(t,e,n){return Math.max(e,Math.min(n,t))}function h9(t){return Si(t,-32768,32767)}function dc(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Gx(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const fc=(t,e,n,r)=>Gx(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),d9=(t,e,n)=>Gx(t,n,r=>t[r][e]>=n);function f9(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const iE=["push","pop","shift","splice","unshift"];function p9(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),iE.forEach(n=>{const r="_onData"+Wx(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function S_(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(iE.forEach(s=>{delete t[s]}),delete t._chartjs)}function sE(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const oE=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function aE(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,oE.call(window,()=>{r=!1,t.apply(e,n)}))}}function m9(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Kx=t=>t==="start"?"left":t==="end"?"right":"center",kr=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,g9=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function y9(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:u,max:h,minDefined:p,maxDefined:m}=o.getUserBounds();p&&(i=Si(Math.min(fc(a,l,u).lo,n?r:fc(e,l,o.getPixelForValue(u)).lo),0,r-1)),m?s=Si(Math.max(fc(a,o.axis,h,!0).hi+1,n?0:fc(e,l,o.getPixelForValue(h),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function v9(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Hp=t=>t===0||t===1,A_=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*eo/n)),C_=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*eo/n)+1,Rd={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*gs)+1,easeOutSine:t=>Math.sin(t*gs),easeInOutSine:t=>-.5*(Math.cos(rr*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Hp(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Hp(t)?t:A_(t,.075,.3),easeOutElastic:t=>Hp(t)?t:C_(t,.075,.3),easeInOutElastic(t){return Hp(t)?t:t<.5?.5*A_(t*2,.1125,.45):.5+.5*C_(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Rd.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Rd.easeInBounce(t*2)*.5:Rd.easeOutBounce(t*2-1)*.5+.5};function Yx(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function E_(t){return Yx(t)?t:new gf(t)}function L1(t){return Yx(t)?t:new gf(t).saturate(.5).darken(.1).hexString()}const x9=["x","y","borderWidth","radius","tension"],b9=["color","borderColor","backgroundColor"];function w9(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:b9},numbers:{type:"number",properties:x9}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function _9(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const k_=new Map;function N9(t,e){e=e||{};const n=t+JSON.stringify(e);let r=k_.get(n);return r||(r=new Intl.NumberFormat(t,e),k_.set(n,r)),r}function lE(t,e,n){return N9(e,n).format(t)}const cE={values(t){return Qn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),s=S9(t,n)}const o=yv(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),lE(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(yv(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?cE.numeric.call(this,t,e,n):""}};function S9(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var uE={formatters:cE};function A9(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uE.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Rc=Object.create(null),xv=Object.create(null);function Dd(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function R1(t,e,n){return typeof e=="string"?yf(Dd(t,e),n):yf(Dd(t,""),e)}class C9{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>L1(i.backgroundColor),this.hoverBorderColor=(r,i)=>L1(i.borderColor),this.hoverColor=(r,i)=>L1(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return R1(this,e,n)}get(e){return Dd(this,e)}describe(e,n){return R1(xv,e,n)}override(e,n){return R1(Rc,e,n)}route(e,n,r,i){const s=Dd(this,e),o=Dd(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[i];return Vt(l)?Object.assign({},u,l):It(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var On=new C9({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[w9,_9,A9]);function E9(t){return!t||an(t.size)||an(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function P_(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Zl(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function T_(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function bv(t,e,n,r){hE(t,e,n,r,null)}function hE(t,e,n,r,i){let s,o,a,l,u,h,p,m;const g=e.pointStyle,v=e.rotation,w=e.radius;let C=(v||0)*i9;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(C),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),g){default:i?t.ellipse(n,r,i/2,w,0,0,eo):t.arc(n,r,w,0,eo),t.closePath();break;case"triangle":h=i?i/2:w,t.moveTo(n+Math.sin(C)*h,r-Math.cos(C)*w),C+=w_,t.lineTo(n+Math.sin(C)*h,r-Math.cos(C)*w),C+=w_,t.lineTo(n+Math.sin(C)*h,r-Math.cos(C)*w),t.closePath();break;case"rectRounded":u=w*.516,l=w-u,o=Math.cos(C+Jl)*l,p=Math.cos(C+Jl)*(i?i/2-u:l),a=Math.sin(C+Jl)*l,m=Math.sin(C+Jl)*(i?i/2-u:l),t.arc(n-p,r-a,u,C-rr,C-gs),t.arc(n+m,r-o,u,C-gs,C),t.arc(n+p,r+a,u,C,C+gs),t.arc(n-m,r+o,u,C+gs,C+rr),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*w,h=i?i/2:l,t.rect(n-h,r-l,2*h,2*l);break}C+=Jl;case"rectRot":p=Math.cos(C)*(i?i/2:w),o=Math.cos(C)*w,a=Math.sin(C)*w,m=Math.sin(C)*(i?i/2:w),t.moveTo(n-p,r-a),t.lineTo(n+m,r-o),t.lineTo(n+p,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":C+=Jl;case"cross":p=Math.cos(C)*(i?i/2:w),o=Math.cos(C)*w,a=Math.sin(C)*w,m=Math.sin(C)*(i?i/2:w),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":p=Math.cos(C)*(i?i/2:w),o=Math.cos(C)*w,a=Math.sin(C)*w,m=Math.sin(C)*(i?i/2:w),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),C+=Jl,p=Math.cos(C)*(i?i/2:w),o=Math.cos(C)*w,a=Math.sin(C)*w,m=Math.sin(C)*(i?i/2:w),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=i?i/2:Math.cos(C)*w,a=Math.sin(C)*w,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(C)*(i?i/2:w),r+Math.sin(C)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function bf(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Qx(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Xx(t){t.restore()}function k9(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function P9(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function T9(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),an(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function I9(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,h=i.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function j9(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function wf(t,e,n,r,i,s={}){const o=Qn(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(t.save(),t.font=i.string,T9(t,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&j9(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),an(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,n,r,s.maxWidth)),t.fillText(u,n,r,s.maxWidth),I9(t,n,r,u,s),r+=Number(i.lineHeight);t.restore()}function Ag(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*rr,rr,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,rr,gs,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,gs,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-gs,!0),t.lineTo(n+o.topLeft,r)}const L9=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,R9=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function D9(t,e){const n=(""+t).match(L9);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const M9=t=>+t||0;function dE(t,e){const n={},r=Vt(e),i=r?Object.keys(e):e,s=Vt(t)?r?o=>It(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=M9(s(o));return n}function fE(t){return dE(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Qu(t){return dE(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Qi(t){const e=fE(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Lr(t,e){t=t||{},e=e||On.font;let n=It(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=It(t.style,e.style);r&&!(""+r).match(R9)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:It(t.family,e.family),lineHeight:D9(It(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:It(t.weight,e.weight),string:""};return i.string=E9(i),i}function $p(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function O9(t,e,n){const{min:r,max:i}=t,s=XF(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Uc(t,e){return Object.assign(Object.create(t),e)}function Jx(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=yE("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>Jx([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return mE(a,l,()=>$9(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return j_(a).includes(l)},ownKeys(a){return j_(a)},set(a,l,u){const h=a._storage||(a._storage=i());return a[l]=h[l]=u,delete a._keys,!0}})}function mh(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:pE(t,r),setContext:s=>mh(t,s,n,r),override:s=>mh(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return mE(s,o,()=>V9(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function pE(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:wl(n)?n:()=>n,isIndexable:wl(r)?r:()=>r}}const F9=(t,e)=>t?t+Wx(e):e,Zx=(t,e)=>Vt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function mE(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function V9(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return wl(a)&&o.isScriptable(e)&&(a=B9(e,a,t,n)),Qn(a)&&a.length&&(a=U9(e,a,t,o.isIndexable)),Zx(e,a)&&(a=mh(a,i,s&&s[e],o)),a}function B9(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),Zx(t,l)&&(l=e5(i._scopes,i,t,l)),l}function U9(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Vt(e[0])){const l=e,u=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const p=e5(u,i,t,h);e.push(mh(p,s,o&&o[t],a))}}return e}function gE(t,e,n){return wl(t)?t(e,n):t}const z9=(t,e)=>t===!0?e:typeof t=="string"?ph(e,t):void 0;function q9(t,e,n,r,i){for(const s of e){const o=z9(n,s);if(o){t.add(o);const a=gE(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function e5(t,e,n,r){const i=e._rootScopes,s=gE(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=I_(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=I_(a,o,s,l,r),l===null)?!1:Jx(Array.from(a),[""],i,s,()=>H9(e,n,r))}function I_(t,e,n,r,i){for(;n;)n=q9(t,e,n,r,i);return n}function H9(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Qn(i)&&Vt(n)?n:i||{}}function $9(t,e,n,r){let i;for(const s of e)if(i=yE(F9(s,t),n),typeof i<"u")return Zx(t,i)?e5(n,r,t,i):i}function yE(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function j_(t){let e=t._keys;return e||(e=t._keys=W9(t._scopes)),e}function W9(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const G9=Number.EPSILON||1e-14,gh=(t,e)=>e<t.length&&!t[e].skip&&t[e],vE=t=>t==="x"?"y":"x";function K9(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=vv(s,i),l=vv(o,s);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const p=r*u,m=r*h;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+m*(o.x-i.x),y:s.y+m*(o.y-i.y)}}}function Y9(t,e,n){const r=t.length;let i,s,o,a,l,u=gh(t,0);for(let h=0;h<r-1;++h)if(l=u,u=gh(t,h+1),!(!l||!u)){if(Ld(e[h],0,G9)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*e[h],n[h+1]=s*o*e[h])}}function Q9(t,e,n="x"){const r=vE(n),i=t.length;let s,o,a,l=gh(t,0);for(let u=0;u<i;++u){if(o=a,a=l,l=gh(t,u+1),!a)continue;const h=a[n],p=a[r];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${r}`]=p-s*e[u]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${r}`]=p+s*e[u])}}function X9(t,e="x"){const n=vE(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,u=gh(t,0);for(o=0;o<r;++o)if(a=l,l=u,u=gh(t,o+1),!!l){if(u){const h=u[e]-l[e];i[o]=h!==0?(u[n]-l[n])/h:0}s[o]=a?u?to(i[o-1])!==to(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}Y9(t,i,s),Q9(t,s,e)}function Wp(t,e,n){return Math.max(Math.min(t,n),e)}function J9(t,e){let n,r,i,s,o,a=bf(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&bf(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Wp(i.cp1x,e.left,e.right),i.cp1y=Wp(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Wp(i.cp2x,e.left,e.right),i.cp2y=Wp(i.cp2y,e.top,e.bottom)))}function Z9(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")X9(t,i);else{let u=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=K9(u,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&J9(t,n)}function t5(){return typeof window<"u"&&typeof document<"u"}function n5(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Cg(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const N0=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function eV(t,e){return N0(t).getPropertyValue(e)}const tV=["top","right","bottom","left"];function xc(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=tV[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const nV=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function rV(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(nV(i,s,t.target))a=i,l=s;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,l=r.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function ic(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=N0(n),s=i.boxSizing==="border-box",o=xc(i,"padding"),a=xc(i,"border","width"),{x:l,y:u,box:h}=rV(t,n),p=o.left+(h&&a.left),m=o.top+(h&&a.top);let{width:g,height:v}=e;return s&&(g-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-p)/g*n.width/r),y:Math.round((u-m)/v*n.height/r)}}function iV(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&n5(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=N0(s),l=xc(a,"border","width"),u=xc(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,r=Cg(a.maxWidth,s,"clientWidth"),i=Cg(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Sg,maxHeight:i||Sg}}const Gp=t=>Math.round(t*10)/10;function sV(t,e,n,r){const i=N0(t),s=xc(i,"margin"),o=Cg(i.maxWidth,t,"clientWidth")||Sg,a=Cg(i.maxHeight,t,"clientHeight")||Sg,l=iV(t,e,n);let{width:u,height:h}=l;if(i.boxSizing==="content-box"){const m=xc(i,"border","width"),g=xc(i,"padding");u-=g.width+m.width,h-=g.height+m.height}return u=Math.max(0,u-s.width),h=Math.max(0,r?u/r:h-s.height),u=Gp(Math.min(u,o,l.maxWidth)),h=Gp(Math.min(h,a,l.maxHeight)),u&&!h&&(h=Gp(u/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,u=Gp(Math.floor(h*r))),{width:u,height:h}}function L_(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const oV=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};t5()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function R_(t,e){const n=eV(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function sc(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function aV(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function lV(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=sc(t,i,n),a=sc(i,s,n),l=sc(s,e,n),u=sc(o,a,n),h=sc(a,l,n);return sc(u,h,n)}const cV=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},uV=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Xu(t,e,n){return t?cV(e,n):uV()}function xE(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function bE(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function wE(t){return t==="angle"?{between:rE,compare:u9,normalize:Oa}:{between:dc,compare:(e,n)=>e-n,normalize:e=>e}}function D_({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function hV(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=wE(r),l=e.length;let{start:u,end:h,loop:p}=t,m,g;if(p){for(u+=l,h+=l,m=0,g=l;m<g&&o(a(e[u%l][r]),i,s);++m)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:p,style:t.style}}function dV(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:u}=wE(r),{start:h,end:p,loop:m,style:g}=hV(t,e,n),v=[];let w=!1,C=null,x,_,S;const I=()=>l(i,S,x)&&a(i,S)!==0,F=()=>a(s,x)===0||l(s,S,x),V=()=>w||I(),P=()=>!w||F();for(let N=h,L=h;N<=p;++N)_=e[N%o],!_.skip&&(x=u(_[r]),x!==S&&(w=l(x,i,s),C===null&&V()&&(C=a(x,i)===0?N:L),C!==null&&P()&&(v.push(D_({start:C,end:N,loop:m,count:o,style:g})),C=null),L=N,S=x));return C!==null&&v.push(D_({start:C,end:p,loop:m,count:o,style:g})),v}function fV(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=dV(r[i],t.points,e);s.length&&n.push(...s)}return n}function pV(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function mV(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%i];u.skip||u.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function gV(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=pV(n,i,s,r);if(r===!0)return M_(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,u=!!t._fullLoop&&o===0&&a===i-1;return M_(t,mV(n,o,l,u),n,e)}function M_(t,e,n,r){return!r||!r.setContext||!n?e:yV(t,e,n,r)}function yV(t,e,n,r){const i=t._chart.getContext(),s=O_(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let h=s,p=e[0].start,m=p;function g(v,w,C,x){const _=a?-1:1;if(v!==w){for(v+=l;n[v%l].skip;)v-=_;for(;n[w%l].skip;)w+=_;v%l!==w%l&&(u.push({start:v%l,end:w%l,loop:C,style:x}),h=x,p=w%l)}}for(const v of e){p=a?p:v.start;let w=n[p%l],C;for(m=p+1;m<=v.end;m++){const x=n[m%l];C=O_(r.setContext(Uc(i,{type:"segment",p0:w,p1:x,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),vV(C,h)&&g(p,m-1,v.loop,h),w=x,h=C}p<m-1&&g(p,m-1,v.loop,h)}return u}function O_(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function vV(t,e){if(!e)return!1;const n=[],r=function(i,s){return Yx(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class xV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=oE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var jo=new xV;const F_="transparent",bV={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=E_(t||F_),i=r.valid&&E_(e||F_);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class wV{constructor(e,n,r,i){const s=n[r];i=$p([e.to,i,s,e.from]);const o=$p([e.from,s,i]);this._active=!0,this._fn=e.fn||bV[e.type||typeof o],this._easing=Rd[e.easing]||Rd.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=$p([e.to,n,i,e.from]),this._from=$p([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class _E{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Vt(e))return;const n=Object.keys(On.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Vt(s))return;const o={};for(const a of n)o[a]=s[a];(Qn(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=NV(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&_V(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[u];let p=s[u];const m=r.get(u);if(p)if(m&&p.active()){p.update(m,h,a);continue}else p.cancel();if(!m||!m.duration){e[u]=h;continue}s[u]=p=new wV(m,e,u,h),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return jo.add(this._chart,r),!0}}function _V(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function NV(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function V_(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function SV(t,e,n){if(n===!1)return!1;const r=V_(t,n),i=V_(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function AV(t){let e,n,r,i;return Vt(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function NE(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function B_(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,u;if(e===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,r.all)continue;break}u=t.values[l],Yi(u)&&(s||e===0||to(e)===to(u))&&(e+=u)}return!h&&!r.all?0:e}function CV(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[i]:h,[s]:t[h]};return a}function D1(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function EV(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function kV(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function PV(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function U_(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function z_(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,u=o.axis,h=EV(s,o,r),p=e.length;let m;for(let g=0;g<p;++g){const v=e[g],{[l]:w,[u]:C}=v,x=v._stacks||(v._stacks={});m=x[u]=PV(i,h,w),m[a]=C,m._top=U_(m,o,!0,r.type),m._bottom=U_(m,o,!1,r.type);const _=m._visualValues||(m._visualValues={});_[a]=C}}function M1(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function TV(t,e){return Uc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function IV(t,e,n){return Uc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ed(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const O1=t=>t==="reset"||t==="none",q_=(t,e)=>e?t:Object.assign({},t),jV=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:NE(n,!0),values:null};class Ju{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=D1(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ed(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,m,g,v)=>p==="x"?m:p==="r"?v:g,s=n.xAxisID=It(r.xAxisID,M1(e,"x")),o=n.yAxisID=It(r.yAxisID,M1(e,"y")),a=n.rAxisID=It(r.rAxisID,M1(e,"r")),l=n.indexAxis,u=n.iAxisID=i(l,s,o,a),h=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&S_(this._data,this),e._stacked&&ed(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Vt(n)){const i=this._cachedMeta;this._data=CV(n,i)}else if(r!==n){if(r){S_(r,this);const i=this._cachedMeta;ed(i),i._parsed=[]}n&&Object.isExtensible(n)&&p9(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=D1(n.vScale,n),n.stack!==r.stack&&(i=!0,ed(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(z_(this,n._parsed),n._stacked=D1(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,u=e>0&&r._parsed[e-1],h,p,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{Qn(i[e])?m=this.parseArrayData(r,i,e,n):Vt(i[e])?m=this.parseObjectData(r,i,e,n):m=this.parsePrimitiveData(r,i,e,n);const g=()=>p[a]===null||u&&p[a]<u[a];for(h=0;h<n;++h)r._parsed[h+e]=p=m[h],l&&(g()&&(l=!1),u=p);r._sorted=l}o&&z_(this,m)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),h=s===o,p=new Array(i);let m,g,v;for(m=0,g=i;m<g;++m)v=m+r,p[m]={[a]:h||s.parse(u[v],v),[l]:o.parse(n[v],v)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,u,h,p;for(l=0,u=i;l<u;++l)h=l+r,p=n[h],a[l]={x:s.parse(p[0],h),y:o.parse(p[1],h)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(i);let h,p,m,g;for(h=0,p=i;h<p;++h)m=h+r,g=n[m],u[h]={x:s.parse(ph(g,a),m),y:o.parse(ph(g,l),m)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:NE(i,!0),values:n._stacks[e.axis]._visualValues};return B_(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=B_(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=jV(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=kV(a);let m,g;function v(){g=i[m];const w=g[a.axis];return!Yi(g[e.axis])||h>w||p<w}for(m=0;m<o&&!(!v()&&(this.updateRangeFromParsed(u,e,g,l),s));++m);if(s){for(m=o-1;m>=0;--m)if(!v()){this.updateRangeFromParsed(u,e,g,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Yi(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=AV(It(this.options.clip,SV(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,u=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const p=i[h];p.hidden||(p.active&&u?o.push(p):p.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=IV(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=TV(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&vf(r);if(a)return q_(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],m=u.getOptionScopes(this.getDataset(),h),g=Object.keys(On.elements[e]),v=()=>this.getContext(r,i,n),w=u.resolveNamedOptions(m,g,v,p);return w.$shared&&(w.$shared=l,s[o]=Object.freeze(q_(w,l))),w}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,n),m=h.getOptionScopes(this.getDataset(),p);l=h.createResolver(m,this.getContext(e,r,n))}const u=new _E(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||O1(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){O1(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!O1(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&ed(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}dt(Ju,"defaults",{}),dt(Ju,"datasetElementType",null),dt(Ju,"dataElementType",null);function LV(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=sE(r.sort((i,s)=>i-s))}return t._cache.$bar}function RV(t){const e=t.iScale,n=LV(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(vf(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function DV(t,e,n,r){const i=n.barThickness;let s,o;return an(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function MV(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const u=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:u}}function OV(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),e[n.axis]=u,e._custom={barStart:l,barEnd:u,start:i,end:s,min:o,max:a}}function SE(t,e,n,r){return Qn(t)?OV(t,e,n,r):e[n.axis]=n.parse(t,r),e}function H_(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let u,h,p,m;for(u=n,h=n+r;u<h;++u)m=e[u],p={},p[i.axis]=a||i.parse(o[u],u),l.push(SE(m,p,s,u));return l}function F1(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function FV(t,e,n){return t!==0?to(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function VV(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function BV(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:h}=VV(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=u:(n._bottom||0)===r?i=h:(s[$_(h,o,a,l)]=!0,i=u)),s[$_(i,o,a,l)]=!0,t.borderSkipped=s}function $_(t,e,n,r){return r?(t=UV(t,e,n),t=W_(t,n,e)):t=W_(t,e,n),t}function UV(t,e,n){return t===e?n:t===n?e:t}function W_(t,e,n){return t==="start"?e:t==="end"?n:t}function zV(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class km extends Ju{parsePrimitiveData(e,n,r,i){return H_(e,n,r,i)}parseArrayData(e,n,r,i){return H_(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=s.axis==="x"?a:l,h=o.axis==="x"?a:l,p=[];let m,g,v,w;for(m=r,g=r+i;m<g;++m)w=n[m],v={},v[s.axis]=s.parse(ph(w,u),m),p.push(SE(ph(w,h),v,o,m));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=F1(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:m}=this._getSharedOptions(n,i);for(let g=n;g<n+r;g++){const v=this.getParsed(g),w=s||an(v[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),C=this._calculateBarIndexPixels(g,h),x=(v._stacks||{})[a.axis],_={horizontal:u,base:w.base,enableBorderRadius:!x||F1(v._custom)||o===x._top||o===x._bottom,x:u?w.head:C.center,y:u?C.center:w.head,height:u?C.size:Math.abs(w.size),width:u?Math.abs(w.size):C.size};m&&(_.options=p||this.resolveDataElementOptions(g,e[g].active?"active":i));const S=_.options||e[g].options;BV(_,S,x,o),zV(_,S,h.ratio),this.updateElement(e[g],g,_,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],u=h=>{const p=h._parsed.find(g=>g[r.axis]===l),m=p&&p[h.vScale.axis];if(an(m)||isNaN(m))return!0};for(const h of i)if(!(n!==void 0&&u(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||RV(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),u=l._custom,h=F1(u);let p=l[n.axis],m=0,g=r?this.applyStack(n,l,r):p,v,w;g!==p&&(m=g-p,g=p),h&&(p=u.barStart,g=u.barEnd-u.barStart,p!==0&&to(p)!==to(u.barEnd)&&(m=0),m+=p);const C=!an(s)&&!h?s:m;let x=n.getPixelForValue(C);if(this.chart.getDataVisibility(e)?v=n.getPixelForValue(m+g):v=x,w=v-x,Math.abs(w)<o){w=FV(w,n,a)*o,p===a&&(x-=w/2);const _=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),I=Math.min(_,S),F=Math.max(_,S);x=Math.max(Math.min(x,F),I),v=x+w,r&&!h&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(v)-n.getValueForPixel(x))}if(x===n.getPixelForValue(a)){const _=to(w)*n.getLineWidthForValue(a)/2;x+=_,w-=_}return{size:w,base:x,head:v,center:v+w/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=It(i.maxBarThickness,1/0);let a,l;if(n.grouped){const u=s?this._getStackCount(e):n.stackCount,h=i.barThickness==="flex"?MV(e,n,i,u):DV(e,n,i,u),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*p+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}dt(km,"id","bar"),dt(km,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),dt(km,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Pm extends Ju{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=y9(n,i,o);this._drawStart=a,this._drawCount=l,v9(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,i),m=o.axis,g=a.axis,{spanGaps:v,segment:w}=this.options,C=xf(v)?v:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||i==="none",_=n+r,S=e.length;let I=n>0&&this.getParsed(n-1);for(let F=0;F<S;++F){const V=e[F],P=x?V:{};if(F<n||F>=_){P.skip=!0;continue}const N=this.getParsed(F),L=an(N[g]),M=P[m]=o.getPixelForValue(N[m],F),k=P[g]=s||L?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[g],F);P.skip=isNaN(M)||isNaN(k)||L,P.stop=F>0&&Math.abs(N[m]-I[m])>C,w&&(P.parsed=N,P.raw=u.data[F]),p&&(P.options=h||this.resolveDataElementOptions(F,V.active?"active":i)),x||this.updateElement(V,F,P,i),I=N}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}dt(Pm,"id","line"),dt(Pm,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),dt(Pm,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function ec(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class r5{constructor(e){dt(this,"options");this.options=e||{}}static override(e){Object.assign(r5.prototype,e)}init(){}formats(){return ec()}parse(){return ec()}format(){return ec()}add(){return ec()}diff(){return ec()}startOf(){return ec()}endOf(){return ec()}}var qV={_date:r5};function HV(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?d9:fc;if(r){if(i._sharedOptions){const u=s[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const p=l(s,e,n-h),m=l(s,e,n+h);return{lo:p.lo,hi:m.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Gf(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:h}=s[a],{lo:p,hi:m}=HV(s[a],e,o,i);for(let g=p;g<=m;++g){const v=h[g];v.skip||r(v,u,g)}}}function $V(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function V1(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Gf(t,n,e,function(a,l,u){!i&&!bf(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function WV(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:p}=c9(o,{x:e.x,y:e.y});rE(p,u,h)&&i.push({element:o,datasetIndex:a,index:l})}return Gf(t,n,e,s),i}function GV(t,e,n,r,i,s){let o=[];const a=$V(n);let l=Number.POSITIVE_INFINITY;function u(h,p,m){const g=h.inRange(e.x,e.y,i);if(r&&!g)return;const v=h.getCenterPoint(i);if(!(!!s||t.isPointInArea(v))&&!g)return;const C=a(e,v);C<l?(o=[{element:h,datasetIndex:p,index:m}],l=C):C===l&&o.push({element:h,datasetIndex:p,index:m})}return Gf(t,n,e,u),o}function B1(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?WV(t,e,n,i):GV(t,e,n,r,i,s)}function G_(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Gf(t,n,e,(l,u,h)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var KV={evaluateInteractionItems:Gf,modes:{index(t,e,n,r){const i=ic(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?V1(t,i,s,r,o):B1(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,p=u.data[h];p&&!p.skip&&l.push({element:p,datasetIndex:u.index,index:h})}),l):[]},dataset(t,e,n,r){const i=ic(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?V1(t,i,s,r,o):B1(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const i=ic(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return V1(t,i,s,r,o)},nearest(t,e,n,r){const i=ic(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return B1(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=ic(e,t);return G_(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=ic(e,t);return G_(t,i,"y",n.intersect,r)}}};const AE=["left","top","right","bottom"];function td(t,e){return t.filter(n=>n.pos===e)}function K_(t,e){return t.filter(n=>AE.indexOf(n.pos)===-1&&n.box.axis===e)}function nd(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function YV(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function QV(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!AE.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function XV(t,e){const n=QV(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return n}function JV(t){const e=YV(t),n=nd(e.filter(u=>u.box.fullSize),!0),r=nd(td(e,"left"),!0),i=nd(td(e,"right")),s=nd(td(e,"top"),!0),o=nd(td(e,"bottom")),a=K_(e,"x"),l=K_(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:td(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function Y_(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function CE(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function ZV(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Vt(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&CE(o,s.getPadding());const a=Math.max(0,e.outerWidth-Y_(o,t,"left","right")),l=Math.max(0,e.outerHeight-Y_(o,t,"top","bottom")),u=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function eB(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function tB(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function gd(t,e,n,r){const i=[];let s,o,a,l,u,h;for(s=0,o=t.length,u=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,tB(a.horizontal,e));const{same:p,other:m}=ZV(e,n,a,r);u|=p&&i.length,h=h||m,l.fullSize||i.push(a)}return u&&gd(i,e,n,r)||h}function Kp(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Q_(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,u=r[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const p=e.w*h,m=u.size||l.height;vf(u.start)&&(o=u.start),l.fullSize?Kp(l,i.left,o,n.outerWidth-i.right-i.left,m):Kp(l,e.left+u.placed,o,p,m),u.start=o,u.placed+=p,o=l.bottom}else{const p=e.h*h,m=u.size||l.width;vf(u.start)&&(s=u.start),l.fullSize?Kp(l,s,i.top,m,n.outerHeight-i.bottom-i.top):Kp(l,s,e.top+u.placed,m,p),u.start=s,u.placed+=p,s=l.right}}e.x=s,e.y=o}var $i={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Qi(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=JV(t.boxes),l=a.vertical,u=a.horizontal;Gt(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,C)=>C.box.options&&C.box.options.display===!1?w:w+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),m=Object.assign({},i);CE(m,Qi(r));const g=Object.assign({maxPadding:m,w:s,h:o,x:i.left,y:i.top},i),v=XV(l.concat(u),p);gd(a.fullSize,g,p,v),gd(l,g,p,v),gd(u,g,p,v)&&gd(l,g,p,v),eB(g),Q_(a.leftAndTop,g,p,v),g.x+=g.w,g.y+=g.h,Q_(a.rightAndBottom,g,p,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Gt(a.chartArea,w=>{const C=w.box;Object.assign(C,t.chartArea),C.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class EE{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class nB extends EE{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Tm="$chartjs",rB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},X_=t=>t===null||t==="";function iB(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Tm]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",X_(i)){const s=R_(t,"width");s!==void 0&&(t.width=s)}if(X_(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=R_(t,"height");s!==void 0&&(t.height=s)}return t}const kE=oV?{passive:!0}:!1;function sB(t,e,n){t&&t.addEventListener(e,n,kE)}function oB(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,kE)}function aB(t,e){const n=rB[t.type]||t.type,{x:r,y:i}=ic(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Eg(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function lB(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Eg(a.addedNodes,r),o=o&&!Eg(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function cB(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Eg(a.removedNodes,r),o=o&&!Eg(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const _f=new Map;let J_=0;function PE(){const t=window.devicePixelRatio;t!==J_&&(J_=t,_f.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function uB(t,e){_f.size||window.addEventListener("resize",PE),_f.set(t,e)}function hB(t){_f.delete(t),_f.size||window.removeEventListener("resize",PE)}function dB(t,e,n){const r=t.canvas,i=r&&n5(r);if(!i)return;const s=aE((a,l)=>{const u=i.clientWidth;n(a,l),u<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(i),uB(t,s),o}function U1(t,e,n){n&&n.disconnect(),e==="resize"&&hB(t)}function fB(t,e,n){const r=t.canvas,i=aE(s=>{t.ctx!==null&&n(aB(s,t))},t);return sB(r,e,i),i}class pB extends EE{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(iB(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Tm])return!1;const r=n[Tm].initial;["height","width"].forEach(s=>{const o=r[s];an(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Tm],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:lB,detach:cB,resize:dB}[n]||fB;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:U1,detach:U1,resize:U1}[n]||oB)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return sV(e,n,r,i)}isAttached(e){const n=e&&n5(e);return!!(n&&n.isConnected)}}function mB(t){return!t5()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?nB:pB}class so{constructor(){dt(this,"x");dt(this,"y");dt(this,"active",!1);dt(this,"options");dt(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return xf(this.x)&&xf(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}dt(so,"defaults",{}),dt(so,"defaultRoutes");function gB(t,e){const n=t.options.ticks,r=yB(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?xB(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>i)return bB(e,u,s,o/i),u;const h=vB(s,e,i);if(o>0){let p,m;const g=o>1?Math.round((l-a)/(o-1)):null;for(Yp(e,u,h,an(g)?0:a-g,a),p=0,m=o-1;p<m;p++)Yp(e,u,h,s[p],s[p+1]);return Yp(e,u,h,l,an(g)?e.length:l+g),u}return Yp(e,u,h),u}function yB(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function vB(t,e,n){const r=wB(t),i=e.length/n;if(!r)return Math.max(i,1);const s=s9(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function xB(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function bB(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Yp(t,e,n,r,i){const s=It(r,0),o=Math.min(It(i,t.length),t.length);let a=0,l,u,h;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(u=Math.max(s,0);u<o;u++)u===h&&(e.push(t[u]),a++,h=Math.round(s+a*n))}function wB(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const _B=t=>t==="left"?"right":t==="right"?"left":t,Z_=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,eN=(t,e)=>Math.min(e||t,t);function tN(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function NB(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),u;if(!(n&&(r===1?u=Math.max(l-s,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(i-1))/2,l+=i<e?u:-u,l<s-a||l>o+a)))return l}function SB(t,e){Gt(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function rd(t){return t.drawTicks?t.tickLength:0}function nN(t,e){if(!t.display)return 0;const n=Lr(t.font,e),r=Qi(t.padding);return(Qn(t.text)?t.text.length:1)*n.lineHeight+r.height}function AB(t,e){return Uc(t,{scale:e,type:"scale"})}function CB(t,e,n){return Uc(t,{tick:n,index:e,type:"tick"})}function EB(t,e,n){let r=Kx(t);return(n&&e!=="right"||!n&&e==="right")&&(r=_B(r)),r}function kB(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:h}=l;let p=0,m,g,v;const w=o-i,C=a-s;if(t.isHorizontal()){if(g=kr(r,s,a),Vt(n)){const x=Object.keys(n)[0],_=n[x];v=h[x].getPixelForValue(_)+w-e}else n==="center"?v=(u.bottom+u.top)/2+w-e:v=Z_(t,n,e);m=a-s}else{if(Vt(n)){const x=Object.keys(n)[0],_=n[x];g=h[x].getPixelForValue(_)-C+e}else n==="center"?g=(u.left+u.right)/2-C+e:g=Z_(t,n,e);v=kr(r,o,i),p=n==="left"?-gs:gs}return{titleX:g,titleY:v,maxWidth:m,rotation:p}}class Ah extends so{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Vs(e,Number.POSITIVE_INFINITY),n=Vs(n,Number.NEGATIVE_INFINITY),r=Vs(r,Number.POSITIVE_INFINITY),i=Vs(i,Number.NEGATIVE_INFINITY),{min:Vs(e,r),max:Vs(n,i),minDefined:Yi(e),maxDefined:Yi(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Vs(n,Vs(r,n)),max:Vs(r,Vs(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){dn(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=O9(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?tN(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=gB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){dn(this.options.afterUpdate,[this])}beforeSetDimensions(){dn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){dn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),dn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){dn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=dn(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){dn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){dn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=eN(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,u;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),p=h.widest.width,m=h.highest.height,g=Si(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),p+6>a&&(a=g/(r-(e.offset?.5:1)),l=this.maxHeight-rd(e.grid)-n.padding-nN(e.title,this.chart.options.font),u=Math.sqrt(p*p+m*m),o=l9(Math.min(Math.asin(Si((h.highest.height+6)/a,-1,1)),Math.asin(Si(l/u,-1,1))-Math.asin(Si(m/u,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){dn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){dn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=nN(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=rd(s)+l):(e.height=this.maxHeight,e.width=rd(s)+l),r.display&&this.ticks.length){const{first:u,last:h,widest:p,highest:m}=this._getLabelSizes(),g=r.padding*2,v=hc(this.labelRotation),w=Math.cos(v),C=Math.sin(v);if(a){const x=r.mirror?0:C*p.width+w*m.height;e.height=Math.min(this.maxHeight,e.height+x+g)}else{const x=r.mirror?0:w*p.width+C*m.height;e.width=Math.min(this.maxWidth,e.width+x+g)}this._calculatePadding(u,h,C,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,g=0;l?u?(m=i*e.width,g=r*n.height):(m=r*e.height,g=i*n.width):s==="start"?g=n.width:s==="end"?m=e.width:s!=="inner"&&(m=e.width/2,g=n.width/2),this.paddingLeft=Math.max((m-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-p+o)*this.width/(this.width-p),0)}else{let h=n.height/2,p=e.height/2;s==="start"?(h=0,p=e.height):s==="end"&&(h=n.height,p=0),this.paddingTop=h+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){dn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)an(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=tN(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/eN(n,r));let u=0,h=0,p,m,g,v,w,C,x,_,S,I,F;for(p=0;p<n;p+=l){if(v=e[p].label,w=this._resolveTickFontOptions(p),i.font=C=w.string,x=s[C]=s[C]||{data:{},gc:[]},_=w.lineHeight,S=I=0,!an(v)&&!Qn(v))S=P_(i,x.data,x.gc,S,v),I=_;else if(Qn(v))for(m=0,g=v.length;m<g;++m)F=v[m],!an(F)&&!Qn(F)&&(S=P_(i,x.data,x.gc,S,F),I+=_);o.push(S),a.push(I),u=Math.max(S,u),h=Math.max(I,h)}SB(s,n);const V=o.indexOf(u),P=a.indexOf(h),N=L=>({width:o[L]||0,height:a[L]||0});return{first:N(0),last:N(n-1),widest:N(V),highest:N(P),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return h9(this._alignToPixels?Zl(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=CB(this.getContext(),e,r))}return this.$context||(this.$context=AB(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=hc(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,u=this.isHorizontal(),p=this.ticks.length+(l?1:0),m=rd(s),g=[],v=a.setContext(this.getContext()),w=v.display?v.width:0,C=w/2,x=function(Z){return Zl(r,Z,w)};let _,S,I,F,V,P,N,L,M,k,T,D;if(o==="top")_=x(this.bottom),P=this.bottom-m,L=_-C,k=x(e.top)+C,D=e.bottom;else if(o==="bottom")_=x(this.top),k=e.top,D=x(e.bottom)-C,P=_+C,L=this.top+m;else if(o==="left")_=x(this.right),V=this.right-m,N=_-C,M=x(e.left)+C,T=e.right;else if(o==="right")_=x(this.left),M=e.left,T=x(e.right)-C,V=_+C,N=this.left+m;else if(n==="x"){if(o==="center")_=x((e.top+e.bottom)/2+.5);else if(Vt(o)){const Z=Object.keys(o)[0],J=o[Z];_=x(this.chart.scales[Z].getPixelForValue(J))}k=e.top,D=e.bottom,P=_+C,L=P+m}else if(n==="y"){if(o==="center")_=x((e.left+e.right)/2);else if(Vt(o)){const Z=Object.keys(o)[0],J=o[Z];_=x(this.chart.scales[Z].getPixelForValue(J))}V=_-C,N=V-m,M=e.left,T=e.right}const Y=It(i.ticks.maxTicksLimit,p),ae=Math.max(1,Math.ceil(p/Y));for(S=0;S<p;S+=ae){const Z=this.getContext(S),J=s.setContext(Z),K=a.setContext(Z),X=J.lineWidth,se=J.color,me=K.dash||[],O=K.dashOffset,$=J.tickWidth,Q=J.tickColor,te=J.tickBorderDash||[],re=J.tickBorderDashOffset;I=NB(this,S,l),I!==void 0&&(F=Zl(r,I,X),u?V=N=M=T=F:P=L=k=D=F,g.push({tx1:V,ty1:P,tx2:N,ty2:L,x1:M,y1:k,x2:T,y2:D,width:X,color:se,borderDash:me,borderDashOffset:O,tickWidth:$,tickColor:Q,tickBorderDash:te,tickBorderDashOffset:re}))}return this._ticksLength=p,this._borderValue=_,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:p}=s,m=rd(r.grid),g=m+h,v=p?-h:g,w=-hc(this.labelRotation),C=[];let x,_,S,I,F,V,P,N,L,M,k,T,D="middle";if(i==="top")V=this.bottom-v,P=this._getXAxisLabelAlignment();else if(i==="bottom")V=this.top+v,P=this._getXAxisLabelAlignment();else if(i==="left"){const ae=this._getYAxisLabelAlignment(m);P=ae.textAlign,F=ae.x}else if(i==="right"){const ae=this._getYAxisLabelAlignment(m);P=ae.textAlign,F=ae.x}else if(n==="x"){if(i==="center")V=(e.top+e.bottom)/2+g;else if(Vt(i)){const ae=Object.keys(i)[0],Z=i[ae];V=this.chart.scales[ae].getPixelForValue(Z)+g}P=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")F=(e.left+e.right)/2-g;else if(Vt(i)){const ae=Object.keys(i)[0],Z=i[ae];F=this.chart.scales[ae].getPixelForValue(Z)}P=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?D="top":l==="end"&&(D="bottom"));const Y=this._getLabelSizes();for(x=0,_=a.length;x<_;++x){S=a[x],I=S.label;const ae=s.setContext(this.getContext(x));N=this.getPixelForTick(x)+s.labelOffset,L=this._resolveTickFontOptions(x),M=L.lineHeight,k=Qn(I)?I.length:1;const Z=k/2,J=ae.color,K=ae.textStrokeColor,X=ae.textStrokeWidth;let se=P;o?(F=N,P==="inner"&&(x===_-1?se=this.options.reverse?"left":"right":x===0?se=this.options.reverse?"right":"left":se="center"),i==="top"?u==="near"||w!==0?T=-k*M+M/2:u==="center"?T=-Y.highest.height/2-Z*M+M:T=-Y.highest.height+M/2:u==="near"||w!==0?T=M/2:u==="center"?T=Y.highest.height/2-Z*M:T=Y.highest.height-k*M,p&&(T*=-1),w!==0&&!ae.showLabelBackdrop&&(F+=M/2*Math.sin(w))):(V=N,T=(1-k)*M/2);let me;if(ae.showLabelBackdrop){const O=Qi(ae.backdropPadding),$=Y.heights[x],Q=Y.widths[x];let te=T-O.top,re=0-O.left;switch(D){case"middle":te-=$/2;break;case"bottom":te-=$;break}switch(P){case"center":re-=Q/2;break;case"right":re-=Q;break;case"inner":x===_-1?re-=Q:x>0&&(re-=Q/2);break}me={left:re,top:te,width:Q+O.width,height:$+O.height,color:ae.backdropColor}}C.push({label:I,font:L,textOffset:T,options:{rotation:w,color:J,strokeColor:K,strokeWidth:X,textAlign:se,textBaseline:D,translation:[F,V],backdrop:me}})}return C}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-hc(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,h;return n==="left"?i?(h=this.right+s,r==="near"?u="left":r==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,r==="near"?u="right":r==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?i?(h=this.left+s,r==="near"?u="right":r==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,r==="near"?u="left":r==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,p,m;this.isHorizontal()?(u=Zl(e,this.left,o)-o/2,h=Zl(e,this.right,a)+a/2,p=m=l):(p=Zl(e,this.top,o)-o/2,m=Zl(e,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,p),n.lineTo(h,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Qx(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,h=o.textOffset;wf(r,u,0,h,l,a)}i&&Xx(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Lr(r.font),o=Qi(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Vt(n)?(l+=o.bottom,Qn(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:p,rotation:m}=kB(this,l,n,a);wf(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:m,textAlign:EB(a,n,i),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=It(e.grid&&e.grid.z,-1),i=It(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ah.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Lr(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Qp{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;IB(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,PB(e,o,r),this.override&&On.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in On[i]&&(delete On[i][r],this.override&&delete Rc[r])}}function PB(t,e,n){const r=yf(Object.create(null),[n?On.get(n):{},On.get(e),t.defaults]);On.set(e,r),t.defaultRoutes&&TB(e,t.defaultRoutes),t.descriptors&&On.describe(e,t.descriptors)}function TB(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");On.route(s,i,l,a)})}function IB(t){return"id"in t&&"defaults"in t}class jB{constructor(){this.controllers=new Qp(Ju,"datasets",!0),this.elements=new Qp(so,"elements"),this.plugins=new Qp(Object,"plugins"),this.scales=new Qp(Ah,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Gt(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=Wx(e);dn(r["before"+i],[],r),n[e](r),dn(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var qs=new jB;class LB{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(dn(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){an(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=It(r.options&&r.options.plugins,{}),s=RB(r);return i===!1&&!n?[]:MB(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function RB(t){const e={},n=[],r=Object.keys(qs.plugins.items);for(let s=0;s<r.length;s++)n.push(qs.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function DB(t,e){return!e&&t===!1?null:t===!0?{}:t}function MB(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,u=DB(r[l],i);u!==null&&s.push({plugin:a,options:OB(t.config,{plugin:a,local:n[l]},u,o)})}return s}function OB(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function wv(t,e){const n=On.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function FB(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function VB(t,e){return t===e?"_index_":"_value_"}function rN(t){if(t==="x"||t==="y"||t==="r")return t}function BB(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function _v(t,...e){if(rN(t))return t;for(const n of e){const r=n.axis||BB(n.position)||t.length>1&&rN(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function iN(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function UB(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return iN(t,"x",n[0])||iN(t,"y",n[0])}return{}}function zB(t,e){const n=Rc[t.type]||{scales:{}},r=e.scales||{},i=wv(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Vt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=_v(o,a,UB(o,t),On.scales[a.type]),u=VB(l,i),h=n.scales||{};s[o]=jd(Object.create(null),[{axis:l},a,h[l],h[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||wv(a,e),h=(Rc[a]||{}).scales||{};Object.keys(h).forEach(p=>{const m=FB(p,l),g=o[m+"AxisID"]||m;s[g]=s[g]||Object.create(null),jd(s[g],[{axis:m},r[g],h[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];jd(a,[On.scales[a.type],On.scale])}),s}function TE(t){const e=t.options||(t.options={});e.plugins=It(e.plugins,{}),e.scales=zB(t,e)}function IE(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function qB(t){return t=t||{},t.data=IE(t.data),TE(t),t}const sN=new Map,jE=new Set;function Xp(t,e){let n=sN.get(t);return n||(n=e(),sN.set(t,n),jE.add(n)),n}const id=(t,e,n)=>{const r=ph(e,n);r!==void 0&&t.add(r)};class HB{constructor(e){this._config=qB(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=IE(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),TE(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xp(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Xp(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Xp(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Xp(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(p=>id(l,e,p))),h.forEach(p=>id(l,i,p)),h.forEach(p=>id(l,Rc[s]||{},p)),h.forEach(p=>id(l,On,p)),h.forEach(p=>id(l,xv,p))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),jE.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,Rc[n]||{},On.datasets[n]||{},{type:n},On,xv]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=oN(this._resolverCache,e,i);let l=o;if(WB(o,n)){s.$shared=!1,r=wl(r)?r():r;const u=this.createResolver(e,r,a);l=mh(o,r,u)}for(const u of n)s[u]=l[u];return s}createResolver(e,n,r=[""],i){const{resolver:s}=oN(this._resolverCache,e,r);return Vt(n)?mh(s,n,void 0,i):s}}function oN(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:Jx(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const $B=t=>Vt(t)&&Object.getOwnPropertyNames(t).some(e=>wl(t[e]));function WB(t,e){const{isScriptable:n,isIndexable:r}=pE(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(wl(a)||$B(a))||o&&Qn(a))return!0}return!1}var GB="4.4.7";const KB=["top","bottom","left","right","chartArea"];function aN(t,e){return t==="top"||t==="bottom"||KB.indexOf(t)===-1&&e==="x"}function lN(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function cN(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),dn(n&&n.onComplete,[t],e)}function YB(t){const e=t.chart,n=e.options.animation;dn(n&&n.onProgress,[t],e)}function LE(t){return t5()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Im={},uN=t=>{const e=LE(t);return Object.values(Im).filter(n=>n.canvas===e).pop()};function QB(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function XB(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function Jp(t,e,n){return t.options.clip?t[n]:e[n]}function JB(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Jp(n,e,"left"),right:Jp(n,e,"right"),top:Jp(r,e,"top"),bottom:Jp(r,e,"bottom")}:e}var Ma;let co=(Ma=class{static register(...e){qs.add(...e),hN()}static unregister(...e){qs.remove(...e),hN()}constructor(e,n){const r=this.config=new HB(n),i=LE(e),s=uN(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||mB(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=QF(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new LB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=m9(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],Im[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}jo.listen(this,"complete",cN),jo.listen(this,"progress",YB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return an(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return qs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():L_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return T_(this.canvas,this.ctx),this}stop(){return jo.stop(this),this}resize(e,n){jo.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,L_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),dn(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Gt(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=_v(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),Gt(s,o=>{const a=o.options,l=a.id,u=_v(l,a),h=It(a.type,o.dtype);(a.position===void 0||aN(a.position,u)!==aN(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===h)p=r[l];else{const m=qs.getScale(h);p=new m({id:l,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),Gt(i,(o,a)=>{o||delete r[a]}),Gt(r,o=>{$i.configure(this,o,o.options),$i.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(lN("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||wv(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=qs.getController(a),{datasetElementType:u,dataElementType:h}=On.datasets[a];Object.assign(l,{dataElementType:qs.getElement(h),datasetElementType:u&&qs.getElement(u)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Gt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:p}=this.getDatasetMeta(u),m=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(m),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Gt(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(lN("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Gt(this.scales,e=>{$i.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!b_(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;QB(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!b_(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;$i.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Gt(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,wl(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(jo.has(this)?this.attached&&!jo.running(this)&&jo.start(this):(this.draw(),cN({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=JB(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Qx(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Xx(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return bf(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=KV.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Uc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);vf(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),jo.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),T_(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Im[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Gt(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},i=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Gt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Gt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!_g(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=n9(e),u=XB(e,this._lastEvent,r,l);r&&(this._lastEvent=null,dn(s.onHover,[e,a,this],this),l&&dn(s.onClick,[e,a,this],this));const h=!_g(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=u,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},dt(Ma,"defaults",On),dt(Ma,"instances",Im),dt(Ma,"overrides",Rc),dt(Ma,"registry",qs),dt(Ma,"version",GB),dt(Ma,"getChart",uN),Ma);function hN(){return Gt(co.instances,t=>t._plugins.invalidate())}function RE(t,e,n=e){t.lineCap=It(n.borderCapStyle,e.borderCapStyle),t.setLineDash(It(n.borderDash,e.borderDash)),t.lineDashOffset=It(n.borderDashOffset,e.borderDashOffset),t.lineJoin=It(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=It(n.borderWidth,e.borderWidth),t.strokeStyle=It(n.borderColor,e.borderColor)}function ZB(t,e,n){t.lineTo(n.x,n.y)}function eU(t){return t.stepped?k9:t.tension||t.cubicInterpolationMode==="monotone"?P9:ZB}function DE(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),u=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:u<l&&!h?r+u-l:u-l}}function tU(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:u}=DE(i,n,r),h=eU(s);let{move:p=!0,reverse:m}=r||{},g,v,w;for(g=0;g<=u;++g)v=i[(a+(m?u-g:g))%o],!v.skip&&(p?(t.moveTo(v.x,v.y),p=!1):h(t,w,v,m,s.stepped),w=v);return l&&(v=i[(a+(m?u:0))%o],h(t,w,v,m,s.stepped)),!!l}function nU(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=DE(i,n,r),{move:l=!0,reverse:u}=r||{};let h=0,p=0,m,g,v,w,C,x;const _=I=>(o+(u?a-I:I))%s,S=()=>{w!==C&&(t.lineTo(h,C),t.lineTo(h,w),t.lineTo(h,x))};for(l&&(g=i[_(0)],t.moveTo(g.x,g.y)),m=0;m<=a;++m){if(g=i[_(m)],g.skip)continue;const I=g.x,F=g.y,V=I|0;V===v?(F<w?w=F:F>C&&(C=F),h=(p*h+I)/++p):(S(),t.lineTo(I,F),v=V,p=0,w=C=F),x=F}S()}function Nv(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?nU:tU}function rU(t){return t.stepped?aV:t.tension||t.cubicInterpolationMode==="monotone"?lV:sc}function iU(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),RE(t,e.options),t.stroke(i)}function sU(t,e,n,r){const{segments:i,options:s}=e,o=Nv(e);for(const a of i)RE(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const oU=typeof Path2D=="function";function aU(t,e,n,r){oU&&!e.options.segment?iU(t,e,n,r):sU(t,e,n,r)}class $s extends so{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;Z9(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=gV(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=fV(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=rU(r);let u,h;for(u=0,h=o.length;u<h;++u){const{start:p,end:m}=o[u],g=s[p],v=s[m];if(g===v){a.push(g);continue}const w=Math.abs((i-g[n])/(v[n]-g[n])),C=l(g,v,w,r.stepped);C[n]=e[n],a.push(C)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Nv(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Nv(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),aU(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}dt($s,"id","line"),dt($s,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),dt($s,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),dt($s,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function dN(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Ho extends so{constructor(n){super();dt(this,"parsed");dt(this,"skip");dt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return dN(this,n,"x",r)}inYRange(n,r){return dN(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!bf(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,bv(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}dt(Ho,"id","point"),dt(Ho,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),dt(Ho,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ME(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,u,h,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),u=r-p,h=r+p):(p=s/2,a=n-p,l=n+p,u=Math.min(r,i),h=Math.max(r,i)),{left:a,top:u,right:l,bottom:h}}function Za(t,e,n,r){return t?0:Si(e,n,r)}function lU(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=fE(r);return{t:Za(i.top,s.top,0,n),r:Za(i.right,s.right,0,e),b:Za(i.bottom,s.bottom,0,n),l:Za(i.left,s.left,0,e)}}function cU(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Qu(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Vt(i);return{topLeft:Za(!l||a.top||a.left,s.topLeft,0,o),topRight:Za(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Za(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Za(!l||a.bottom||a.right,s.bottomRight,0,o)}}function uU(t){const e=ME(t),n=e.right-e.left,r=e.bottom-e.top,i=lU(t,n/2,r/2),s=cU(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function z1(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&ME(t,r);return a&&(i||dc(e,a.left,a.right))&&(s||dc(n,a.top,a.bottom))}function hU(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function dU(t,e){t.rect(e.x,e.y,e.w,e.h)}function q1(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class jm extends so{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=uU(this),a=hU(o.radius)?Ag:dU;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,q1(o,n,s)),e.clip(),a(e,q1(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,q1(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return z1(this,e,n,r)}inXRange(e,n){return z1(this,e,null,n)}inYRange(e,n){return z1(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}dt(jm,"id","bar"),dt(jm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),dt(jm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const fN=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},fU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class pN extends so{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=dn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Lr(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=fN(r,s);let u,h;n.font=i.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,i,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let m=-1,g=-h;return this.legendItems.forEach((v,w)=>{const C=r+n/2+s.measureText(v.text).width;(w===0||u[u.length-1]+C+2*a>o)&&(p+=h,u[u.length-(w>0?0:1)]=0,g+=h,m++),l[w]={left:0,top:g,row:m,width:C,height:i},u[u.length-1]+=C+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let p=a,m=0,g=0,v=0,w=0;return this.legendItems.forEach((C,x)=>{const{itemWidth:_,itemHeight:S}=pU(r,n,s,C,i);x>0&&g+S+2*a>h&&(p+=m+a,u.push({width:m,height:g}),v+=m+a,w++,m=g=0),l[x]={left:v,top:g,col:w,width:_,height:S},m=Math.max(m,_),g+=S+a}),p+=m,u.push({width:m,height:g}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Xu(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=kr(r,this.left+i,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=kr(r,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+e+i,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+i}else{let a=0,l=kr(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=kr(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+i,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Qx(e,this),this._draw(),Xx(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=On.color,l=Xu(e.rtl,this.left,this.width),u=Lr(o.font),{padding:h}=o,p=u.size,m=p/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:v,boxHeight:w,itemHeight:C}=fN(o,p),x=function(V,P,N){if(isNaN(v)||v<=0||isNaN(w)||w<0)return;i.save();const L=It(N.lineWidth,1);if(i.fillStyle=It(N.fillStyle,a),i.lineCap=It(N.lineCap,"butt"),i.lineDashOffset=It(N.lineDashOffset,0),i.lineJoin=It(N.lineJoin,"miter"),i.lineWidth=L,i.strokeStyle=It(N.strokeStyle,a),i.setLineDash(It(N.lineDash,[])),o.usePointStyle){const M={radius:w*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:L},k=l.xPlus(V,v/2),T=P+m;hE(i,M,k,T,o.pointStyleWidth&&v)}else{const M=P+Math.max((p-w)/2,0),k=l.leftForLtr(V,v),T=Qu(N.borderRadius);i.beginPath(),Object.values(T).some(D=>D!==0)?Ag(i,{x:k,y:M,w:v,h:w,radius:T}):i.rect(k,M,v,w),i.fill(),L!==0&&i.stroke()}i.restore()},_=function(V,P,N){wf(i,N.text,V,P+C/2,u,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},S=this.isHorizontal(),I=this._computeTitleHeight();S?g={x:kr(s,this.left+h,this.right-r[0]),y:this.top+h+I,line:0}:g={x:this.left+h,y:kr(s,this.top+I+h,this.bottom-n[0].height),line:0},xE(this.ctx,e.textDirection);const F=C+h;this.legendItems.forEach((V,P)=>{i.strokeStyle=V.fontColor,i.fillStyle=V.fontColor;const N=i.measureText(V.text).width,L=l.textAlign(V.textAlign||(V.textAlign=o.textAlign)),M=v+m+N;let k=g.x,T=g.y;l.setWidth(this.width),S?P>0&&k+M+h>this.right&&(T=g.y+=F,g.line++,k=g.x=kr(s,this.left+h,this.right-r[g.line])):P>0&&T+F>this.bottom&&(k=g.x=k+n[g.line].width+h,g.line++,T=g.y=kr(s,this.top+I+h,this.bottom-n[g.line].height));const D=l.x(k);if(x(D,T,V),k=g9(L,k+v+m,S?k+M:this.right,e.rtl),_(l.x(k),T,V),S)g.x+=M+h;else if(typeof V.text!="string"){const Y=u.lineHeight;g.y+=OE(V,Y)+h}else g.y+=F}),bE(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Lr(n.font),i=Qi(n.padding);if(!n.display)return;const s=Xu(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,u=i.top+l;let h,p=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+u,p=kr(e.align,p,this.right-m);else{const v=this.columnSizes.reduce((w,C)=>Math.max(w,C.height),0);h=u+kr(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const g=kr(a,p,p+m);o.textAlign=s.textAlign(Kx(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,wf(o,n.text,g,h,r)}_computeTitleHeight(){const e=this.options.title,n=Lr(e.font),r=Qi(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(dc(e,this.left,this.right)&&dc(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],dc(e,i.left,i.left+i.width)&&dc(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!yU(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=fU(i,r);i&&!s&&dn(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&dn(n.onHover,[e,r,this],this)}else r&&dn(n.onClick,[e,r,this],this)}}function pU(t,e,n,r,i){const s=mU(r,t,e,n),o=gU(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function mU(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function gU(t,e,n){let r=t;return typeof e.text!="string"&&(r=OE(e,n)),r}function OE(t,e){const n=t.text?t.text.length:0;return e*n}function yU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var zc={id:"legend",_element:pN,start(t,e,n){const r=t.legend=new pN({ctx:t.ctx,options:n,chart:t});$i.configure(t,r,n),$i.addBox(t,r)},stop(t){$i.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;$i.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=Qi(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class FE extends so{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Qn(r.text)?r.text.length:1;this._padding=Qi(r.padding);const s=i*Lr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,u,h,p;return this.isHorizontal()?(h=kr(a,r,s),p=n+e,u=s-r):(o.position==="left"?(h=r+e,p=kr(a,i,n),l=rr*-.5):(h=s-e,p=kr(a,n,i),l=rr*.5),u=i-n),{titleX:h,titleY:p,maxWidth:u,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Lr(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(s);wf(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:u,textAlign:Kx(n.align),textBaseline:"middle",translation:[o,a]})}}function vU(t,e){const n=new FE({ctx:t.ctx,options:e,chart:t});$i.configure(t,n,e),$i.addBox(t,n),t.titleBlock=n}var qc={id:"title",_element:FE,start(t,e,n){vU(t,n)},stop(t){const e=t.titleBlock;$i.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;$i.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const yd={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=vv(e,u);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Bs(t,e){return e&&(Qn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Lo(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function xU(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function mN(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Lr(e.bodyFont),u=Lr(e.titleFont),h=Lr(e.footerFont),p=s.length,m=i.length,g=r.length,v=Qi(e.padding);let w=v.height,C=0,x=r.reduce((I,F)=>I+F.before.length+F.lines.length+F.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,p&&(w+=p*u.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),x){const I=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=g*I+(x-g)*l.lineHeight+(x-1)*e.bodySpacing}m&&(w+=e.footerMarginTop+m*h.lineHeight+(m-1)*e.footerSpacing);let _=0;const S=function(I){C=Math.max(C,n.measureText(I).width+_)};return n.save(),n.font=u.string,Gt(t.title,S),n.font=l.string,Gt(t.beforeBody.concat(t.afterBody),S),_=e.displayColors?o+2+e.boxPadding:0,Gt(r,I=>{Gt(I.before,S),Gt(I.lines,S),Gt(I.after,S)}),_=0,n.font=h.string,Gt(t.footer,S),n.restore(),C+=v.width,{width:C,height:w}}function bU(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function wU(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function _U(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return r==="center"?u=i<=(a+l)/2?"left":"right":i<=s/2?u="left":i>=o-s/2&&(u="right"),wU(u,t,e,n)&&(u="center"),u}function gN(t,e,n){const r=n.yAlign||e.yAlign||bU(t,n);return{xAlign:n.xAlign||e.xAlign||_U(t,e,n,r),yAlign:r}}function NU(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function SU(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function yN(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=i+s,{topLeft:h,topRight:p,bottomLeft:m,bottomRight:g}=Qu(o);let v=NU(e,a);const w=SU(e,l,u);return l==="center"?a==="left"?v+=u:a==="right"&&(v-=u):a==="left"?v-=Math.max(h,m)+i:a==="right"&&(v+=Math.max(p,g)+i),{x:Si(v,0,r.width-e.width),y:Si(w,0,r.height-e.height)}}function Zp(t,e,n){const r=Qi(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function vN(t){return Bs([],Lo(t))}function AU(t,e,n){return Uc(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function xN(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const VE={beforeTitle:To,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:To,beforeBody:To,beforeLabel:To,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return an(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:To,afterBody:To,beforeFooter:To,footer:To,afterFooter:To};function ri(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?VE[e].call(n,r):i}class Sv extends so{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new _E(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=AU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=ri(r,"beforeTitle",this,e),s=ri(r,"title",this,e),o=ri(r,"afterTitle",this,e);let a=[];return a=Bs(a,Lo(i)),a=Bs(a,Lo(s)),a=Bs(a,Lo(o)),a}getBeforeBody(e,n){return vN(ri(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Gt(e,s=>{const o={before:[],lines:[],after:[]},a=xN(r,s);Bs(o.before,Lo(ri(a,"beforeLabel",this,s))),Bs(o.lines,ri(a,"label",this,s)),Bs(o.after,Lo(ri(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return vN(ri(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=ri(r,"beforeFooter",this,e),s=ri(r,"footer",this,e),o=ri(r,"afterFooter",this,e);let a=[];return a=Bs(a,Lo(i)),a=Bs(a,Lo(s)),a=Bs(a,Lo(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(xU(this.chart,n[l]));return e.filter&&(a=a.filter((h,p,m)=>e.filter(h,p,m,r))),e.itemSort&&(a=a.sort((h,p)=>e.itemSort(h,p,r))),Gt(a,h=>{const p=xN(e.callbacks,h);i.push(ri(p,"labelColor",this,h)),s.push(ri(p,"labelPointStyle",this,h)),o.push(ri(p,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=yd[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=mN(this,r),u=Object.assign({},a,l),h=gN(this.chart,r,u),p=yN(r,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:p}=Qu(a),{x:m,y:g}=e,{width:v,height:w}=n;let C,x,_,S,I,F;return s==="center"?(I=g+w/2,i==="left"?(C=m,x=C-o,S=I+o,F=I-o):(C=m+v,x=C+o,S=I-o,F=I+o),_=C):(i==="left"?x=m+Math.max(l,h)+o:i==="right"?x=m+v-Math.max(u,p)-o:x=this.caretX,s==="top"?(S=g,I=S-o,C=x-o,_=x+o):(S=g+w,I=S+o,C=x+o,_=x-o),F=S),{x1:C,x2:x,x3:_,y1:S,y2:I,y3:F}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const u=Xu(r.rtl,this.x,this.width);for(e.x=Zp(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=Lr(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=s,h=Lr(s.bodyFont),p=Zp(this,"left",s),m=i.x(p),g=l<h.lineHeight?(h.lineHeight-l)/2:0,v=n.y+g;if(s.usePointStyle){const w={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},C=i.leftForLtr(m,u)+u/2,x=v+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,bv(e,w,C,x),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,bv(e,w,C,x)}else{e.lineWidth=Vt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=i.leftForLtr(m,u),C=i.leftForLtr(i.xPlus(m,1),u-2),x=Qu(o.borderRadius);Object.values(x).some(_=>_!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Ag(e,{x:w,y:v,w:u,h:l,radius:x}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Ag(e,{x:C,y:v+1,w:u-2,h:l-2,radius:x}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(w,v,u,l),e.strokeRect(w,v,u,l),e.fillStyle=o.backgroundColor,e.fillRect(C,v+1,u-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=r,p=Lr(r.bodyFont);let m=p.lineHeight,g=0;const v=Xu(r.rtl,this.x,this.width),w=function(N){n.fillText(N,v.x(e.x+g),e.y+m/2),e.y+=m+s},C=v.textAlign(o);let x,_,S,I,F,V,P;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=Zp(this,C,r),n.fillStyle=r.bodyColor,Gt(this.beforeBody,w),g=a&&C!=="right"?o==="center"?u/2+h:u+2+h:0,I=0,V=i.length;I<V;++I){for(x=i[I],_=this.labelTextColors[I],n.fillStyle=_,Gt(x.before,w),S=x.lines,a&&S.length&&(this._drawColorBox(n,e,I,v,r),m=Math.max(p.lineHeight,l)),F=0,P=S.length;F<P;++F)w(S[F]),m=p.lineHeight;Gt(x.after,w)}g=0,m=p.lineHeight,Gt(this.afterBody,w),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Xu(r.rtl,this.x,this.width);for(e.x=Zp(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Lr(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=r,{topLeft:p,topRight:m,bottomLeft:g,bottomRight:v}=Qu(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+u-m,l),n.quadraticCurveTo(a+u,l,a+u,l+m),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+u,l+h-v),n.quadraticCurveTo(a+u,l+h,a+u-v,l+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=yd[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=mN(this,e),l=Object.assign({},o,this._size),u=gN(n,e,l),h=yN(e,l,u,n);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Qi(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),xE(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),bE(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!_g(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!_g(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=yd[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}dt(Sv,"positioners",yd);var Hc={id:"tooltip",_element:Sv,positioners:yd,afterInit(t,e,n){n&&(t.tooltip=new Sv({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:VE},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const CU=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function EU(t,e,n,r){const i=t.indexOf(e);if(i===-1)return CU(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const kU=(t,e)=>t===null?null:Si(Math.round(t),0,e);function bN(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class ea extends Ah{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(an(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:EU(r,e,It(n,e),this._addedLabels),kU(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return bN.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}dt(ea,"id","category"),dt(ea,"defaults",{ticks:{callback:bN}});function PU(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:p,includeBounds:m}=t,g=s||1,v=h-1,{min:w,max:C}=e,x=!an(o),_=!an(a),S=!an(u),I=(C-w)/(p+1);let F=__((C-w)/v/g)*g,V,P,N,L;if(F<1e-14&&!x&&!_)return[{value:w},{value:C}];L=Math.ceil(C/F)-Math.floor(w/F),L>v&&(F=__(L*F/v/g)*g),an(l)||(V=Math.pow(10,l),F=Math.ceil(F*V)/V),i==="ticks"?(P=Math.floor(w/F)*F,N=Math.ceil(C/F)*F):(P=w,N=C),x&&_&&s&&o9((a-o)/s,F/1e3)?(L=Math.round(Math.min((a-o)/F,h)),F=(a-o)/L,P=o,N=a):S?(P=x?o:P,N=_?a:N,L=u-1,F=(N-P)/L):(L=(N-P)/F,Ld(L,Math.round(L),F/1e3)?L=Math.round(L):L=Math.ceil(L));const M=Math.max(N_(F),N_(P));V=Math.pow(10,an(l)?M:l),P=Math.round(P*V)/V,N=Math.round(N*V)/V;let k=0;for(x&&(m&&P!==o?(n.push({value:o}),P<o&&k++,Ld(Math.round((P+k*F)*V)/V,o,wN(o,I,t))&&k++):P<o&&k++);k<L;++k){const T=Math.round((P+k*F)*V)/V;if(_&&T>a)break;n.push({value:T})}return _&&m&&N!==a?n.length&&Ld(n[n.length-1].value,a,wN(a,I,t))?n[n.length-1].value=a:n.push({value:a}):(!_||N===a)&&n.push({value:N}),n}function wN(t,e,{horizontal:n,minRotation:r}){const i=hc(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class TU extends Ah{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return an(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=to(i),u=to(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=PU(i,s);return e.bounds==="ticks"&&a9(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return lE(e,this.chart.options.locale,this.options.ticks.format)}}class ta extends TU{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Yi(e)?e:0,this.max=Yi(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=hc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}dt(ta,"id","linear"),dt(ta,"defaults",{ticks:{callback:uE.formatters.numeric}});const S0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},oi=Object.keys(S0);function _N(t,e){return t-e}function NN(t,e){if(an(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Yi(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(xf(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function SN(t,e,n,r){const i=oi.length;for(let s=oi.indexOf(t);s<i-1;++s){const o=S0[oi[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return oi[s]}return oi[i-1]}function IU(t,e,n,r,i){for(let s=oi.length-1;s>=oi.indexOf(n);s--){const o=oi[s];if(S0[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return oi[n?oi.indexOf(n):0]}function jU(t){for(let e=oi.indexOf(t)+1,n=oi.length;e<n;++e)if(S0[oi[e]].common)return oi[e]}function AN(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=Gx(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function LU(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function CN(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:LU(t,r,i,n)}class kg extends Ah{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new qV._date(e.adapters.date);i.init(n),jd(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:NN(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Yi(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Yi(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=f9(i,s,o);return this._unit=n.unit||(r.autoSkip?SN(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):IU(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:jU(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),CN(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Si(n,0,o),r=Si(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||SN(s.minUnit,n,r,this._getLabelCapacity(n)),a=It(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=xf(l)||l===!0,h={};let p=n,m,g;if(u&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,u?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const v=i.ticks.source==="data"&&this.getDataTimestamps();for(m=p,g=0;m<r;m=+e.add(m,a,o),g++)AN(h,m,v);return(m===r||i.bounds==="ticks"||g===1)&&AN(h,m,v),Object.keys(h).sort(_N).map(w=>+w)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return dn(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],p=u&&a[u],m=r[n],g=u&&p&&m&&m.major;return this._adapter.format(e,i||(g?p:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=hc(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,CN(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(NN(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return sE(e.sort(_N))}}dt(kg,"id","time"),dt(kg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function em(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=fc(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=fc(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class EN extends kg{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=em(n,this.min),this._tableRange=em(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=r&&i.push(u);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],u=i[o],Math.round((h+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(em(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return em(this._table,r*this._tableRange+this._minPos,!0)}}dt(EN,"id","timeseries"),dt(EN,"defaults",kg.defaults);const BE="label";function kN(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function RU(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function UE(t,e){t.labels=e}function zE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:BE;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function DU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:BE;const n={labels:[],datasets:[]};return UE(n,t.labels),zE(n,t.datasets,e),n}function MU(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:u=[],fallbackContent:h,updateMode:p,...m}=t,g=we.useRef(null),v=we.useRef(),w=()=>{g.current&&(v.current=new co(g.current,{type:o,data:DU(a,s),options:l&&{...l},plugins:u}),kN(e,v.current))},C=()=>{kN(e,null),v.current&&(v.current.destroy(),v.current=null)};return we.useEffect(()=>{!i&&v.current&&l&&RU(v.current,l)},[i,l]),we.useEffect(()=>{!i&&v.current&&UE(v.current.config.data,a.labels)},[i,a.labels]),we.useEffect(()=>{!i&&v.current&&a.datasets&&zE(v.current.config.data,a.datasets,s)},[i,a.datasets]),we.useEffect(()=>{v.current&&(i?(C(),setTimeout(w)):v.current.update(p))},[i,l,a.labels,a.datasets,p]),we.useEffect(()=>{v.current&&(C(),setTimeout(w))},[o]),we.useEffect(()=>(w(),()=>C()),[]),Ig.createElement("canvas",Object.assign({ref:g,role:"img",height:n,width:r},m),h)}const OU=we.forwardRef(MU);function qE(t,e){return co.register(e),we.forwardRef((n,r)=>Ig.createElement(OU,Object.assign({},n,{ref:r,type:t})))}const Ch=qE("line",Pm),FU=qE("bar",km);co.register(ea,ta,Ho,$s,qc,Hc,zc);function VU({sales:t}){const e=t.reduce((i,s)=>{const o=new Date(s.date).toLocaleDateString();return i[o]=(i[o]||0)+s.total,i},{}),n={labels:Object.keys(e),datasets:[{label:"Ventas",data:Object.values(e),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)",tension:.4}]},r={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:i=>`Total: ${_e(i.raw)}`}}},scales:{y:{ticks:{callback:i=>_e(i)}}}};return c.jsx(Ch,{data:n,options:r})}function BU({sales:t}){const e=t.reduce((r,i)=>{const s=i.payment.method;return r[s]=(r[s]||0)+i.total,r},{}),n={cash:"Efectivo",card:"Tarjeta",transfer:"Transferencia"};return c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Por Método de Pago"}),c.jsx("div",{className:"space-y-2",children:Object.entries(n).map(([r,i])=>c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:i}),c.jsx("span",{className:"font-medium",children:_e(e[r]||0)})]},r))})]})})}function UU({sales:t}){return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(e=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:new Date(e.date).toLocaleDateString()}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.client.name}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:_e(e.total)})]},e.id))})]})})}function zU({dateRange:t}){const{sales:e}=x0(),n=e.filter(s=>{const o=new Date(s.date),a=new Date(t.startDate),l=new Date(t.endDate);return l.setHours(23,59,59),o>=a&&o<=l&&s.status!=="cancelled"}),r=n.reduce((s,o)=>s+o.total,0),i=r/(n.length||1);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Ventas"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_e(r)})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Ventas Realizadas"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Promedio por Venta"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_e(i)})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gráfico de Ventas"}),c.jsx(VU,{sales:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumen"}),c.jsx(BU,{sales:n})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Últimas Ventas"}),c.jsx(UU,{sales:n.slice(0,5)})]})]})]})}co.register(ea,ta,Ho,$s,qc,Hc,zc);function qU({expenses:t}){const e=t.reduce((i,s)=>{const o=new Date(s.date).toLocaleDateString();return i[o]=(i[o]||0)+s.amount,i},{}),n={labels:Object.keys(e),datasets:[{label:"Gastos",data:Object.values(e),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.5)",tension:.4}]},r={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:i=>`Total: ${_e(i.raw)}`}}},scales:{y:{ticks:{callback:i=>_e(i)}}}};return c.jsx(Ch,{data:n,options:r})}function HU({expenses:t}){const{categories:e}=Ux(),n=t.reduce((r,i)=>(r[i.category]=(r[i.category]||0)+i.amount,r),{});return c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Por Categoría"}),c.jsx("div",{className:"space-y-2",children:e.map(r=>c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:r.name}),c.jsx("span",{className:"font-medium",children:_e(n[r.id]||0)})]},r.id))})]})})}function $U({expenses:t}){const{categories:e}=Ux(),n=r=>{var i;return((i=e.find(s=>s.id===r))==null?void 0:i.name)||"Sin categoría"};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoría"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Monto"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(r=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:new Date(r.date).toLocaleDateString()}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:n(r.category)}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:_e(r.amount)})]},r.id))})]})})}function WU({dateRange:t}){const{expenses:e}=b0(),n=e.filter(s=>{const o=new Date(s.date),a=new Date(t.startDate),l=new Date(t.endDate);return l.setHours(23,59,59),o>=a&&o<=l&&s.status!=="cancelled"}),r=n.reduce((s,o)=>s+o.amount,0),i=r/(n.length||1);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Gastos"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_e(r)})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Gastos Registrados"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Promedio por Gasto"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_e(i)})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gráfico de Gastos"}),c.jsx(qU,{expenses:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumen por Categoría"}),c.jsx(HU,{expenses:n})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Últimos Gastos"}),c.jsx($U,{expenses:n.slice(0,5)})]})]})]})}co.register(ea,ta,Ho,$s,qc,Hc,zc);function GU({credits:t}){const e=t.reduce((s,o)=>{const a=new Date(o.dueDate).toLocaleDateString();return s[a]||(s[a]={total:0,paid:0}),s[a].total+=o.totalAmount,s[a].paid+=o.payments.reduce((l,u)=>u.status==="active"?l+u.amount:l,0),s},{}),n=Object.keys(e).sort(),r={labels:n,datasets:[{label:"Total Créditos",data:n.map(s=>e[s].total),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)",tension:.4},{label:"Total Pagado",data:n.map(s=>e[s].paid),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.5)",tension:.4}]},i={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:s=>`${s.dataset.label}: ${_e(s.raw)}`}}},scales:{y:{ticks:{callback:s=>_e(s)}}}};return c.jsx(Ch,{data:r,options:i})}function KU({credits:t}){const e=t.reduce((r,i)=>{const s=i.status;return r[s]||(r[s]={count:0,total:0,paid:0}),r[s].count++,r[s].total+=i.totalAmount,r[s].paid+=i.payments.reduce((o,a)=>a.status==="active"?o+a.amount:o,0),r},{}),n={pending:"Pendientes",completed:"Completados"};return c.jsx("div",{className:"space-y-6",children:Object.entries(n).map(([r,i])=>{const s=e[r]||{count:0,total:0,paid:0},o=s.total-s.paid,a=s.paid/s.total*100||0;return c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700",children:i}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Cantidad:"}),c.jsx("p",{className:"font-medium",children:s.count})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Total:"}),c.jsx("p",{className:"font-medium",children:_e(s.total)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Pagado:"}),c.jsx("p",{className:"font-medium text-green-600",children:_e(s.paid)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Pendiente:"}),c.jsx("p",{className:"font-medium text-red-600",children:_e(o)})]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${a}%`}})})]},r)})})}function YU({credits:t,showProfit:e=!1,products:n=[]}){const r=i=>i.products.reduce((s,o)=>{const a=n.find(l=>l.code===o.code);if(a){const l=a.costPrice*o.quantity,u=o.price*o.quantity;return s+(u-l)}return s},0);return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Pagado"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Pendiente"}),e&&c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Ganancia"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(i=>{const s=i.payments.reduce((l,u)=>u.status==="active"?l+u.amount:l,0),o=i.totalAmount-s,a=e?r(i):0;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:i.clientName}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:_e(i.totalAmount)}),c.jsx("td",{className:"px-4 py-2 text-sm text-green-600 text-right",children:_e(s)}),c.jsx("td",{className:"px-4 py-2 text-sm text-red-600 text-right",children:_e(o)}),e&&c.jsx("td",{className:"px-4 py-2 text-sm text-blue-600 text-right",children:_e(a)})]},i.code)})})]})})}function QU({dateRange:t}){const{credits:e}=w0(),{products:n}=Il(),r=e.filter(a=>{const l=new Date(a.dueDate),u=new Date(t.startDate),h=new Date(t.endDate);return h.setHours(23,59,59),l>=u&&l<=h}),i=r.reduce((a,l)=>(a.totalAmount+=l.totalAmount,a.totalPaid+=l.payments.reduce((u,h)=>h.status==="active"?u+h.amount:u,0),l.products.forEach(u=>{const h=n.find(p=>p.code===u.code);if(h){const m=h.costPrice*u.quantity,g=u.price*u.quantity;a.totalCost+=m,a.totalProfit+=g-m}}),a),{totalAmount:0,totalPaid:0,totalCost:0,totalProfit:0}),s=i.totalAmount-i.totalPaid,o=i.totalProfit/i.totalAmount*100||0;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Créditos"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_e(i.totalAmount)})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Pagado"}),c.jsx("p",{className:"text-2xl font-bold text-green-600",children:_e(i.totalPaid)})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Pendiente"}),c.jsx("p",{className:"text-2xl font-bold text-red-600",children:_e(s)})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Ganancia Total"}),c.jsx("p",{className:"text-2xl font-bold text-blue-600",children:_e(i.totalProfit)}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Margen: ",o.toFixed(1),"%"]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Desglose de Costos"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Costo Total:"}),c.jsx("p",{className:"text-lg font-medium text-red-600",children:_e(i.totalCost)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Ingresos:"}),c.jsx("p",{className:"text-lg font-medium text-green-600",children:_e(i.totalAmount)})]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Ganancia:"}),c.jsx("p",{className:"text-lg font-medium text-blue-600",children:_e(i.totalProfit)}),c.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${o}%`}})}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Margen de ganancia: ",o.toFixed(1),"%"]})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gráfico de Créditos"}),c.jsx(GU,{credits:r})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumen de Créditos"}),c.jsx(KU,{credits:r})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Últimos Créditos"}),c.jsx(YU,{credits:r.slice(0,5),showProfit:!0,products:n})]})]})]})}function XU(t){return t.reduce((e,n)=>{var r;return n.status==="cancelled"?e:{totalSales:e.totalSales+n.total,cashSales:e.cashSales+(n.payment.method==="cash"?n.total:0),cardSales:e.cardSales+(n.payment.method==="card"?n.total:0),transferSales:e.transferSales+(n.payment.method==="transfer"?n.total:0),totalCommissions:e.totalCommissions+(((r=n.staff)==null?void 0:r.commissionAmount)||0)}},{totalSales:0,cashSales:0,cardSales:0,transferSales:0,totalCommissions:0})}function JU(t){return t.reduce((e,n)=>n.status==="cancelled"?e:e+n.amount,0)}function ZU(t){return t.reduce((e,n)=>{const r=n.payments.reduce((i,s)=>s.status==="active"?i+s.amount:i,0);return{totalAmount:e.totalAmount+n.totalAmount,totalPaid:e.totalPaid+r,pendingAmount:e.pendingAmount+(n.totalAmount-r)}},{totalAmount:0,totalPaid:0,pendingAmount:0})}function ez(t,e){return t.reduce((n,r)=>r.status==="cancelled"?n:n+r.products.reduce((i,s)=>{const o=e.find(a=>a.code===s.code);return o?i+o.costPrice*s.quantity:i},0),0)}function tz(t,e,n,r){const i=t-e,s=i-n-r,o=i/t*100||0,a=s/t*100||0;return{grossProfit:i,netProfit:s,grossProfitMargin:o,netProfitMargin:a}}function nz(t,e,n,r){return t-e-n+r}function rz({sales:t,expenses:e,credits:n,products:r,pettyCashBalance:i}){return we.useMemo(()=>{const s=XU(t),o=JU(e),a=ZU(n),l=ez(t,r),u=tz(s.totalSales,l,o,s.totalCommissions),h=nz(s.cashSales,o,s.totalCommissions,i);return{...s,totalExpenses:o,...a,costOfGoodsSold:l,...u,cashInRegister:h}},[t,e,n,r,i])}co.register(ea,ta,Ho,$s,qc,Hc,zc);function iz({sales:t,expenses:e}){const n={};t.forEach(a=>{const l=new Date(a.date).toLocaleDateString();n[l]||(n[l]={sales:0,expenses:0}),n[l].sales+=a.total}),e.forEach(a=>{const l=new Date(a.date).toLocaleDateString();n[l]||(n[l]={sales:0,expenses:0}),n[l].expenses+=a.amount});const r=Object.keys(n).sort(),i=r.map(a=>n[a].sales-n[a].expenses),s={labels:r,datasets:[{label:"Ganancia",data:i,borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.5)",tension:.4}]},o={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:a=>`Ganancia: ${_e(a.raw)}`}}},scales:{y:{ticks:{callback:a=>_e(a)}}}};return c.jsx(Ch,{data:s,options:o})}function sz(t,e,n){const r={};return t.forEach(i=>{if(i.status==="cancelled")return;const s=new Date(i.date),o=`${s.getFullYear()}-${s.getMonth()+1}`;r[o]||(r[o]={sales:0,expenses:0,cogs:0,grossProfit:0,netProfit:0}),r[o].sales+=i.total}),e.forEach(i=>{if(i.status==="cancelled")return;const s=new Date(i.date),o=`${s.getFullYear()}-${s.getMonth()+1}`;r[o]||(r[o]={sales:0,expenses:0,cogs:0,grossProfit:0,netProfit:0}),r[o].expenses+=i.amount}),Object.keys(r).forEach(i=>{const s=r[i],o=s.sales/t.reduce((a,l)=>l.status!=="cancelled"?a+l.total:a,0);s.cogs=n*o,s.grossProfit=s.sales-s.cogs,s.netProfit=s.grossProfit-s.expenses}),r}function oz({monthlyData:t}){const e=Object.entries(t).sort(([n],[r])=>r.localeCompare(n)).slice(0,3);return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Mes"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Ingresos"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Costo de Ventas"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Ganancia Bruta"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Gastos"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Ganancia Neta"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(([n,r])=>{const[i,s]=n.split("-"),o=new Date(Number(i),Number(s)-1),a=r.grossProfit/r.sales*100||0,l=r.netProfit/r.sales*100||0;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:o.toLocaleDateString("es-ES",{month:"long",year:"numeric"})}),c.jsx("td",{className:"px-4 py-2 text-sm text-green-600 text-right",children:_e(r.sales)}),c.jsx("td",{className:"px-4 py-2 text-sm text-red-600 text-right",children:_e(r.cogs)}),c.jsx("td",{className:"px-4 py-2 text-sm text-right",children:c.jsxs("div",{className:r.grossProfit>=0?"text-green-600":"text-red-600",children:[_e(r.grossProfit),c.jsxs("span",{className:"text-xs ml-1",children:["(",a.toFixed(1),"%)"]})]})}),c.jsx("td",{className:"px-4 py-2 text-sm text-red-600 text-right",children:_e(r.expenses)}),c.jsx("td",{className:"px-4 py-2 text-sm text-right",children:c.jsxs("div",{className:r.netProfit>=0?"text-green-600":"text-red-600",children:[_e(r.netProfit),c.jsxs("span",{className:"text-xs ml-1",children:["(",l.toFixed(1),"%)"]})]})})]},n)})})]})})}function az({totalExpenses:t,totalCommissions:e,grossProfit:n,netProfit:r,cashInRegister:i}){return c.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Resumen General"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Gastos Totales:"}),c.jsx("p",{className:"text-lg font-medium text-red-600",children:_e(t)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Comisiones:"}),c.jsx("p",{className:"text-lg font-medium text-red-600",children:_e(e)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Ganancia Bruta:"}),c.jsx("p",{className:`text-lg font-medium ${n>=0?"text-green-600":"text-red-600"}`,children:_e(n)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Ganancia Neta:"}),c.jsx("p",{className:`text-lg font-medium ${r>=0?"text-green-600":"text-red-600"}`,children:_e(r)})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Dinero en Caja:"}),c.jsx("p",{className:`text-lg font-medium ${i>=0?"text-green-600":"text-red-600"}`,children:_e(i)})]})]})]})}function lz({sales:t,expenses:e,costOfGoodsSold:n,totalExpenses:r,totalCommissions:i,grossProfit:s,netProfit:o,cashInRegister:a}){const l=sz(t,e,n);return c.jsxs("div",{className:"space-y-6",children:[c.jsx(oz,{monthlyData:l}),c.jsx(az,{totalExpenses:r,totalCommissions:i,grossProfit:s,netProfit:o,cashInRegister:a})]})}function cz({products:t}){const{categories:e}=VC(),n=t.reduce((s,o)=>{const a=o.category;return s[a]||(s[a]={value:0,items:0}),s[a].value+=o.quantity*o.costPrice,s[a].items+=o.quantity,s},{}),r=Object.values(n).reduce((s,o)=>s+o.value,0),i=Object.values(n).reduce((s,o)=>s+o.items,0);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Valor Total"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_e(r)})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Total Artículos"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Por Categoría"}),c.jsx("div",{className:"space-y-2",children:e.map(s=>{const o=n[s.id]||{value:0,items:0},a=o.value/r*100||0;return c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{className:"text-sm text-gray-600",children:s.name}),c.jsx("span",{className:"text-sm font-medium",children:_e(o.value)})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:c.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:`${a}%`}})})]})},s.id)})})]})]})}function uz({dateRange:t}){const{sales:e}=x0(),{expenses:n}=b0(),{products:r}=Il(),{balance:i}=_0(),{credits:s}=w0(),o=e.filter(_=>{const S=new Date(_.date),I=new Date(t.startDate),F=new Date(t.endDate);return F.setHours(23,59,59),S>=I&&S<=F&&_.status!=="cancelled"}),a=n.filter(_=>{const S=new Date(_.date),I=new Date(t.startDate),F=new Date(t.endDate);return F.setHours(23,59,59),S>=I&&S<=F&&_.status!=="cancelled"}),l=s.filter(_=>{const S=new Date(_.dueDate),I=new Date(t.startDate),F=new Date(t.endDate);return F.setHours(23,59,59),S>=I&&S<=F}),{totalSales:u,costOfGoodsSold:h,totalExpenses:p,totalCommissions:m,grossProfit:g,netProfit:v,grossProfitMargin:w,netProfitMargin:C,cashInRegister:x}=rz({sales:o,expenses:a,credits:l,products:r,pettyCashBalance:i});return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Ingresos Totales"}),c.jsx("p",{className:"text-2xl font-bold text-green-600",children:_e(u)})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Costo de Ventas"}),c.jsx("p",{className:"text-2xl font-bold text-red-600",children:_e(h)})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Ganancia Bruta"}),c.jsx("p",{className:`text-2xl font-bold ${g>=0?"text-green-600":"text-red-600"}`,children:_e(g)}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Margen: ",w.toFixed(2),"%"]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Ganancia Neta"}),c.jsx("p",{className:`text-2xl font-bold ${v>=0?"text-green-600":"text-red-600"}`,children:_e(v)}),c.jsxs("p",{className:"text-sm text-gray-500",children:["Margen: ",C.toFixed(2),"%"]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Valor del Inventario"}),c.jsx(cz,{products:r})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gráfico de Ganancias"}),c.jsx(iz,{sales:o,expenses:a})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumen Detallado"}),c.jsx(lz,{sales:o,expenses:a,costOfGoodsSold:h,totalExpenses:p,totalCommissions:m,grossProfit:g,netProfit:v,cashInRegister:x})]})]})}co.register(ea,ta,jm,qc,Hc,zc);function hz({staff:t}){const e=t.filter(i=>i.sales.length>0),n={labels:e.map(i=>i.name),datasets:[{label:"Ventas",data:e.map(i=>i.sales.reduce((s,o)=>s+o.amount,0)),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgb(59, 130, 246)",borderWidth:1},{label:"Comisiones",data:e.map(i=>i.sales.reduce((s,o)=>s+o.totalCommission,0)),backgroundColor:"rgba(34, 197, 94, 0.5)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]},r={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:i=>`${i.dataset.label}: ${_e(i.raw)}`}}},scales:{y:{ticks:{callback:i=>_e(i)}}}};return c.jsx(FU,{data:n,options:r})}function dz({staff:t}){return c.jsx("div",{className:"space-y-4",children:t.filter(e=>e.sales.length>0).map(e=>{const n=e.sales.reduce((s,o)=>s+o.amount,0),r=e.sales.reduce((s,o)=>s+o.totalCommission,0),i=r/n*100||0;return c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e.name}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Total Ventas:"}),c.jsx("p",{className:"font-medium",children:_e(n)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Total Comisiones:"}),c.jsx("p",{className:"font-medium",children:_e(r)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Comisión Promedio:"}),c.jsxs("p",{className:"font-medium",children:[i.toFixed(2),"%"]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Ventas Realizadas:"}),c.jsx("p",{className:"font-medium",children:e.sales.length})]})]})]},e.code)})})}function fz({staff:t}){const e=t.flatMap(n=>n.sales.map(r=>({...r,staffName:n.name}))).sort((n,r)=>new Date(r.date).getTime()-new Date(n.date).getTime()).slice(0,10);return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Colaborador"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Venta"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Comisión"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(n=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:new Date(n.date).toLocaleDateString()}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:n.staffName}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:_e(n.amount)}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:_e(n.totalCommission)})]},n.id))})]})})}function pz({dateRange:t}){const{staff:e}=v0(),n=e.map(s=>({...s,sales:s.sales.filter(o=>{const a=new Date(o.date),l=new Date(t.startDate),u=new Date(t.endDate);return u.setHours(23,59,59),a>=l&&a<=u})})),r=n.reduce((s,o)=>s+o.sales.reduce((a,l)=>a+l.totalCommission,0),0),i=n.reduce((s,o)=>s+o.sales.reduce((a,l)=>a+l.amount,0),0);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Comisiones"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_e(r)})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Ventas"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_e(i)})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Colaboradores Activos"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.filter(s=>s.sales.length>0).length})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gráfico de Comisiones"}),c.jsx(hz,{staff:n})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumen por Colaborador"}),c.jsx(dz,{staff:n})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Últimas Comisiones"}),c.jsx(fz,{staff:n})]})]})]})}co.register(ea,ta,Ho,$s,qc,Hc,zc);function mz({transactions:t}){const e=t.reduce((s,o)=>{const a=new Date(o.date).toLocaleDateString();return s[a]||(s[a]={deposits:0,withdrawals:0}),o.type==="deposit"?s[a].deposits+=o.amount:s[a].withdrawals+=o.amount,s},{}),n=Object.keys(e).sort(),r={labels:n,datasets:[{label:"Ingresos",data:n.map(s=>e[s].deposits),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.5)",tension:.4},{label:"Retiros",data:n.map(s=>e[s].withdrawals),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.5)",tension:.4}]},i={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:s=>`${s.dataset.label}: ${_e(s.raw)}`}}},scales:{y:{ticks:{callback:s=>_e(s)}}}};return c.jsx(Ch,{data:r,options:i})}function gz({transactions:t}){const e=t.reduce((n,r)=>{const i=new Date(r.date).toLocaleDateString("es-ES",{month:"long",year:"numeric"});return n[i]||(n[i]={deposits:0,withdrawals:0}),r.type==="deposit"?n[i].deposits+=r.amount:n[i].withdrawals+=r.amount,n},{});return c.jsx("div",{className:"space-y-4",children:Object.entries(e).map(([n,r])=>{const i=r.deposits-r.withdrawals,s=i/(r.deposits||1)*100;return c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700",children:n}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Ingresos:"}),c.jsx("p",{className:"font-medium text-green-600",children:_e(r.deposits)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Retiros:"}),c.jsx("p",{className:"font-medium text-red-600",children:_e(r.withdrawals)})]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Flujo Neto:"}),c.jsx("p",{className:`font-medium ${i>=0?"text-green-600":"text-red-600"}`,children:_e(i)}),c.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:`h-2 rounded-full ${i>=0?"bg-green-600":"bg-red-600"}`,style:{width:`${Math.abs(s)}%`}})})]})]},n)})})}function yz({transactions:t}){const e=[...t].sort((n,r)=>new Date(r.date).getTime()-new Date(n.date).getTime());return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Motivo"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Monto"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(n=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:new Date(n.date).toLocaleDateString()}),c.jsx("td",{className:"px-4 py-2 text-sm",children:c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.type==="deposit"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.type==="deposit"?"Ingreso":"Retiro"})}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:n.reason}),c.jsx("td",{className:`px-4 py-2 text-sm font-medium text-right ${n.type==="deposit"?"text-green-600":"text-red-600"}`,children:_e(n.amount)})]},n.id))})]})})}function vz({dateRange:t}){const{balance:e,transactions:n}=_0(),r=n.filter(o=>{const a=new Date(o.date),l=new Date(t.startDate),u=new Date(t.endDate);return u.setHours(23,59,59),a>=l&&a<=u}),i=r.reduce((o,a)=>(a.type==="deposit"?(o.totalDeposits+=a.amount,o.depositCount++):(o.totalWithdrawals+=a.amount,o.withdrawalCount++),o),{totalDeposits:0,totalWithdrawals:0,depositCount:0,withdrawalCount:0}),s=i.totalDeposits-i.totalWithdrawals;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Balance Actual"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_e(e)})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Ingresos"}),c.jsx("p",{className:"text-2xl font-bold text-green-600",children:_e(i.totalDeposits)}),c.jsxs("p",{className:"text-sm text-gray-500",children:[i.depositCount," movimientos"]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Retiros"}),c.jsx("p",{className:"text-2xl font-bold text-red-600",children:_e(i.totalWithdrawals)}),c.jsxs("p",{className:"text-sm text-gray-500",children:[i.withdrawalCount," movimientos"]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Flujo Neto"}),c.jsx("p",{className:`text-2xl font-bold ${s>=0?"text-green-600":"text-red-600"}`,children:_e(s)})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumen de Movimientos"}),c.jsx(gz,{transactions:r})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Gráfico de Movimientos"}),c.jsx(mz,{transactions:r})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Últimos Movimientos"}),c.jsx(yz,{transactions:r})]})]})}co.register(ea,ta,Ho,$s,qc,Hc,zc);function xz({sales:t,expenses:e}){const n={};t.forEach(o=>{if(o.payment.method==="cash"){const a=new Date(o.date).toLocaleDateString();n[a]||(n[a]={income:0,expenses:0}),n[a].income+=o.total}}),e.forEach(o=>{const a=new Date(o.date).toLocaleDateString();n[a]||(n[a]={income:0,expenses:0}),n[a].expenses+=o.amount});const r=Object.keys(n).sort(),i={labels:r,datasets:[{label:"Ingresos en Efectivo",data:r.map(o=>n[o].income),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.5)",tension:.4},{label:"Gastos",data:r.map(o=>n[o].expenses),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.5)",tension:.4}]},s={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:o=>`${o.dataset.label}: ${_e(o.raw)}`}}},scales:{y:{ticks:{callback:o=>_e(o)}}}};return c.jsx(Ch,{data:i,options:s})}function bz({cashSales:t,cardSales:e,transferSales:n,expenses:r,commissions:i,pettyCashBalance:s,costOfGoodsSold:o,grossProfit:a,netProfit:l}){const u=t+e+n,h=t/u*100||0,p=e/u*100||0,m=n/u*100||0;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Ventas por Método de Pago"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Efectivo"}),c.jsx("span",{className:"text-sm font-medium",children:_e(t)})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${h}%`}})}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[h.toFixed(1),"% del total"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Tarjeta"}),c.jsx("span",{className:"text-sm font-medium",children:_e(e)})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${p}%`}})}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p.toFixed(1),"% del total"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Transferencia"}),c.jsx("span",{className:"text-sm font-medium",children:_e(n)})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${m}%`}})}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[m.toFixed(1),"% del total"]})]})]})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Resumen de Ganancias"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Ventas Totales:"}),c.jsx("span",{className:"text-sm font-medium text-green-600",children:_e(u)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Costo de Productos:"}),c.jsx("span",{className:"text-sm font-medium text-red-600",children:_e(o)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Ganancia Bruta:"}),c.jsx("span",{className:`text-sm font-medium ${a>=0?"text-green-600":"text-red-600"}`,children:_e(a)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Gastos:"}),c.jsx("span",{className:"text-sm font-medium text-red-600",children:_e(r)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Comisiones:"}),c.jsx("span",{className:"text-sm font-medium text-red-600",children:_e(i)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ganancia Neta:"}),c.jsx("span",{className:`text-sm font-medium ${l>=0?"text-green-600":"text-red-600"}`,children:_e(l)})]})]})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Balance de Efectivo"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Ingresos en Efectivo:"}),c.jsx("p",{className:"text-lg font-medium text-green-600",children:_e(t)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Gastos + Comisiones:"}),c.jsx("p",{className:"text-lg font-medium text-red-600",children:_e(r+i)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Caja Chica:"}),c.jsx("p",{className:"text-lg font-medium text-blue-600",children:_e(s)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Balance Final:"}),c.jsx("p",{className:"text-lg font-medium",children:_e(t-r-i+s)})]})]})]})]})}function wz({sales:t,expenses:e}){const n=[...t.filter(r=>r.payment.method==="cash").map(r=>({date:r.date,type:"sale",description:`Venta a ${r.client.name}`,amount:r.total})),...e.map(r=>({date:r.date,type:"expense",description:r.reason,amount:r.amount}))].sort((r,i)=>new Date(i.date).getTime()-new Date(r.date).getTime());return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Descripción"}),c.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Monto"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map((r,i)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:new Date(r.date).toLocaleDateString()}),c.jsx("td",{className:"px-4 py-2 text-sm",children:c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.type==="sale"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r.type==="sale"?"Venta":"Gasto"})}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:r.description}),c.jsx("td",{className:`px-4 py-2 text-sm font-medium text-right ${r.type==="sale"?"text-green-600":"text-red-600"}`,children:_e(r.amount)})]},i))})]})})}const _z="modulepreload",Nz=function(t){return"/"+t},PN={},Av=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Nz(l),l in PN)return;PN[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":_z,u||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Kt(t){"@babel/helpers - typeof";return Kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(t)}var jr=Uint8Array,Ai=Uint16Array,i5=Int32Array,A0=new jr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),C0=new jr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cv=new jr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),HE=function(t,e){for(var n=new Ai(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new i5(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},$E=HE(A0,2),WE=$E.b,Ev=$E.r;WE[28]=258,Ev[258]=28;var GE=HE(C0,0),Sz=GE.b,TN=GE.r,kv=new Ai(32768);for(var pn=0;pn<32768;++pn){var Ra=(pn&43690)>>1|(pn&21845)<<1;Ra=(Ra&52428)>>2|(Ra&13107)<<2,Ra=(Ra&61680)>>4|(Ra&3855)<<4,kv[pn]=((Ra&65280)>>8|(Ra&255)<<8)>>1}var no=function(t,e,n){for(var r=t.length,i=0,s=new Ai(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Ai(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Ai(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],h=e-t[i],p=o[t[i]-1]++<<h,m=p|(1<<h)-1;p<=m;++p)a[kv[p]>>l]=u}else for(a=new Ai(r),i=0;i<r;++i)t[i]&&(a[i]=kv[o[t[i]-1]++]>>15-t[i]);return a},_l=new jr(288);for(var pn=0;pn<144;++pn)_l[pn]=8;for(var pn=144;pn<256;++pn)_l[pn]=9;for(var pn=256;pn<280;++pn)_l[pn]=7;for(var pn=280;pn<288;++pn)_l[pn]=8;var Nf=new jr(32);for(var pn=0;pn<32;++pn)Nf[pn]=5;var Az=no(_l,9,0),Cz=no(_l,9,1),Ez=no(Nf,5,0),kz=no(Nf,5,1),H1=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},cs=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},$1=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},s5=function(t){return(t+7)/8|0},KE=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new jr(t.subarray(e,n))},Pz=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ds=function(t,e,n){var r=new Error(e||Pz[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,ds),!n)throw r;return r},Tz=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new jr(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new jr(i*3));var u=function(Le){var Ve=n.length;if(Le>Ve){var Be=new jr(Math.max(Ve*2,Le));Be.set(n),n=Be}},h=e.f||0,p=e.p||0,m=e.b||0,g=e.l,v=e.d,w=e.m,C=e.n,x=i*8;do{if(!g){h=cs(t,p,1);var _=cs(t,p+1,3);if(p+=3,_)if(_==1)g=Cz,v=kz,w=9,C=5;else if(_==2){var V=cs(t,p,31)+257,P=cs(t,p+10,15)+4,N=V+cs(t,p+5,31)+1;p+=14;for(var L=new jr(N),M=new jr(19),k=0;k<P;++k)M[Cv[k]]=cs(t,p+k*3,7);p+=P*3;for(var T=H1(M),D=(1<<T)-1,Y=no(M,T,1),k=0;k<N;){var ae=Y[cs(t,p,D)];p+=ae&15;var S=ae>>4;if(S<16)L[k++]=S;else{var Z=0,J=0;for(S==16?(J=3+cs(t,p,3),p+=2,Z=L[k-1]):S==17?(J=3+cs(t,p,7),p+=3):S==18&&(J=11+cs(t,p,127),p+=7);J--;)L[k++]=Z}}var K=L.subarray(0,V),X=L.subarray(V);w=H1(K),C=H1(X),g=no(K,w,1),v=no(X,C,1)}else ds(1);else{var S=s5(p)+4,I=t[S-4]|t[S-3]<<8,F=S+I;if(F>i){l&&ds(0);break}a&&u(m+I),n.set(t.subarray(S,F),m),e.b=m+=I,e.p=p=F*8,e.f=h;continue}if(p>x){l&&ds(0);break}}a&&u(m+131072);for(var se=(1<<w)-1,me=(1<<C)-1,O=p;;O=p){var Z=g[$1(t,p)&se],$=Z>>4;if(p+=Z&15,p>x){l&&ds(0);break}if(Z||ds(2),$<256)n[m++]=$;else if($==256){O=p,g=null;break}else{var Q=$-254;if($>264){var k=$-257,te=A0[k];Q=cs(t,p,(1<<te)-1)+WE[k],p+=te}var re=v[$1(t,p)&me],pe=re>>4;re||ds(3),p+=re&15;var X=Sz[pe];if(pe>3){var te=C0[pe];X+=$1(t,p)&(1<<te)-1,p+=te}if(p>x){l&&ds(0);break}a&&u(m+131072);var ge=m+Q;if(m<X){var be=s-X,Re=Math.min(X,ge);for(be+m<0&&ds(3);m<Re;++m)n[m]=r[be+m]}for(;m<ge;++m)n[m]=n[m-X]}}e.l=g,e.p=O,e.b=m,e.f=h,g&&(h=1,e.m=w,e.d=v,e.n=C)}while(!h);return m!=n.length&&o?KE(n,0,m):n.subarray(0,m)},Io=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},sd=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},W1=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:QE,l:0};if(i==1){var o=new jr(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(F,V){return F.f-V.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,h=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=i-1;)a=n[n[u].f<n[p].f?u++:p++],l=n[u!=h&&n[u].f<n[p].f?u++:p++],n[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var m=s[0].s,r=1;r<i;++r)s[r].s>m&&(m=s[r].s);var g=new Ai(m+1),v=Pv(n[h-1],g,0);if(v>e){var r=0,w=0,C=v-e,x=1<<C;for(s.sort(function(V,P){return g[P.s]-g[V.s]||V.f-P.f});r<i;++r){var _=s[r].s;if(g[_]>e)w+=x-(1<<v-g[_]),g[_]=e;else break}for(w>>=C;w>0;){var S=s[r].s;g[S]<e?w-=1<<e-g[S]++-1:++r}for(;r>=0&&w;--r){var I=s[r].s;g[I]==e&&(--g[I],++w)}v=e}return{t:new jr(g),l:v}},Pv=function(t,e,n){return t.s==-1?Math.max(Pv(t.l,e,n+1),Pv(t.r,e,n+1)):e[t.s]=n},IN=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ai(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},od=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},YE=function(t,e,n){var r=n.length,i=s5(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},jN=function(t,e,n,r,i,s,o,a,l,u,h){Io(e,h++,n),++i[256];for(var p=W1(i,15),m=p.t,g=p.l,v=W1(s,15),w=v.t,C=v.l,x=IN(m),_=x.c,S=x.n,I=IN(w),F=I.c,V=I.n,P=new Ai(19),N=0;N<_.length;++N)++P[_[N]&31];for(var N=0;N<F.length;++N)++P[F[N]&31];for(var L=W1(P,7),M=L.t,k=L.l,T=19;T>4&&!M[Cv[T-1]];--T);var D=u+5<<3,Y=od(i,_l)+od(s,Nf)+o,ae=od(i,m)+od(s,w)+o+14+3*T+od(P,M)+2*P[16]+3*P[17]+7*P[18];if(l>=0&&D<=Y&&D<=ae)return YE(e,h,t.subarray(l,l+u));var Z,J,K,X;if(Io(e,h,1+(ae<Y)),h+=2,ae<Y){Z=no(m,g,0),J=m,K=no(w,C,0),X=w;var se=no(M,k,0);Io(e,h,S-257),Io(e,h+5,V-1),Io(e,h+10,T-4),h+=14;for(var N=0;N<T;++N)Io(e,h+3*N,M[Cv[N]]);h+=3*T;for(var me=[_,F],O=0;O<2;++O)for(var $=me[O],N=0;N<$.length;++N){var Q=$[N]&31;Io(e,h,se[Q]),h+=M[Q],Q>15&&(Io(e,h,$[N]>>5&127),h+=$[N]>>12)}}else Z=Az,J=_l,K=Ez,X=Nf;for(var N=0;N<a;++N){var te=r[N];if(te>255){var Q=te>>18&31;sd(e,h,Z[Q+257]),h+=J[Q+257],Q>7&&(Io(e,h,te>>23&31),h+=A0[Q]);var re=te&31;sd(e,h,K[re]),h+=X[re],re>3&&(sd(e,h,te>>5&8191),h+=C0[re])}else sd(e,h,Z[te]),h+=J[te]}return sd(e,h,Z[256]),h+J[256]},Iz=new i5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),QE=new jr(0),jz=function(t,e,n,r,i,s){var o=s.z||t.length,a=new jr(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var p=Iz[e-1],m=p>>13,g=p&8191,v=(1<<n)-1,w=s.p||new Ai(32768),C=s.h||new Ai(v+1),x=Math.ceil(n/3),_=2*x,S=function(rt){return(t[rt]^t[rt+1]<<x^t[rt+2]<<_)&v},I=new i5(25e3),F=new Ai(288),V=new Ai(32),P=0,N=0,L=s.i||0,M=0,k=s.w||0,T=0;L+2<o;++L){var D=S(L),Y=L&32767,ae=C[D];if(w[Y]=ae,C[D]=Y,k<=L){var Z=o-L;if((P>7e3||M>24576)&&(Z>423||!u)){h=jN(t,l,0,I,F,V,N,M,T,L-T,h),M=P=N=0,T=L;for(var J=0;J<286;++J)F[J]=0;for(var J=0;J<30;++J)V[J]=0}var K=2,X=0,se=g,me=Y-ae&32767;if(Z>2&&D==S(L-me))for(var O=Math.min(m,Z)-1,$=Math.min(32767,L),Q=Math.min(258,Z);me<=$&&--se&&Y!=ae;){if(t[L+K]==t[L+K-me]){for(var te=0;te<Q&&t[L+te]==t[L+te-me];++te);if(te>K){if(K=te,X=me,te>O)break;for(var re=Math.min(me,te-2),pe=0,J=0;J<re;++J){var ge=L-me+J&32767,be=w[ge],Re=ge-be&32767;Re>pe&&(pe=Re,ae=ge)}}}Y=ae,ae=w[Y],me+=Y-ae&32767}if(X){I[M++]=268435456|Ev[K]<<18|TN[X];var Le=Ev[K]&31,Ve=TN[X]&31;N+=A0[Le]+C0[Ve],++F[257+Le],++V[Ve],k=L+K,++P}else I[M++]=t[L],++F[t[L]]}}for(L=Math.max(L,k);L<o;++L)I[M++]=t[L],++F[t[L]];h=jN(t,l,u,I,F,V,N,M,T,L-T,h),u||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=C,s.p=w,s.i=L,s.w=k)}else{for(var L=s.w||0;L<o+u;L+=65535){var Be=L+65535;Be>=o&&(l[h/8|0]=u,Be=o),h=YE(l,h+1,t.subarray(L,Be))}s.i=o}return KE(a,0,r+s5(h)+i)},XE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Lz=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new jr(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return jz(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},JE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Rz=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=XE();i.p(e.dictionary),JE(t,2,i.d())}},Dz=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ds(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&ds(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Tv(t,e){e||(e={});var n=XE();n.p(t);var r=Lz(t,e,e.dictionary?6:2,4);return Rz(r,e),JE(r,r.length-4,n.d()),r}function Mz(t,e){return Tz(t.subarray(Dz(t,e),-4),{i:2},e,e)}var Oz=typeof TextDecoder<"u"&&new TextDecoder,Fz=0;try{Oz.decode(QE,{stream:!0}),Fz=1}catch{}var ct=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function G1(){ct.console&&typeof ct.console.log=="function"&&ct.console.log.apply(ct.console,arguments)}var en={log:G1,warn:function(t){ct.console&&(typeof ct.console.warn=="function"?ct.console.warn.apply(ct.console,arguments):G1.call(null,arguments))},error:function(t){ct.console&&(typeof ct.console.error=="function"?ct.console.error.apply(ct.console,arguments):G1(t))}};function K1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){oc(r.response,e,n)},r.onerror=function(){en.error("could not download file")},r.send()}function LN(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function tm(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Md,Iv,oc=ct.saveAs||((typeof window>"u"?"undefined":Kt(window))!=="object"||window!==ct?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=ct.URL||ct.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?LN(i.href)?K1(t,e,n):tm(i,i.target="_blank"):tm(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){tm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(LN(t))K1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){tm(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Kt(s)!=="object"&&(en.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return K1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(ct.HTMLElement)||ct.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Kt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},a.readAsDataURL(t)}else{var l=ct.URL||ct.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ZE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Y1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Sr(n,r,i,s,e[0],7,-680876936),s=Sr(s,n,r,i,e[1],12,-389564586),i=Sr(i,s,n,r,e[2],17,606105819),r=Sr(r,i,s,n,e[3],22,-1044525330),n=Sr(n,r,i,s,e[4],7,-176418897),s=Sr(s,n,r,i,e[5],12,1200080426),i=Sr(i,s,n,r,e[6],17,-1473231341),r=Sr(r,i,s,n,e[7],22,-45705983),n=Sr(n,r,i,s,e[8],7,1770035416),s=Sr(s,n,r,i,e[9],12,-1958414417),i=Sr(i,s,n,r,e[10],17,-42063),r=Sr(r,i,s,n,e[11],22,-1990404162),n=Sr(n,r,i,s,e[12],7,1804603682),s=Sr(s,n,r,i,e[13],12,-40341101),i=Sr(i,s,n,r,e[14],17,-1502002290),n=Ar(n,r=Sr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ar(s,n,r,i,e[6],9,-1069501632),i=Ar(i,s,n,r,e[11],14,643717713),r=Ar(r,i,s,n,e[0],20,-373897302),n=Ar(n,r,i,s,e[5],5,-701558691),s=Ar(s,n,r,i,e[10],9,38016083),i=Ar(i,s,n,r,e[15],14,-660478335),r=Ar(r,i,s,n,e[4],20,-405537848),n=Ar(n,r,i,s,e[9],5,568446438),s=Ar(s,n,r,i,e[14],9,-1019803690),i=Ar(i,s,n,r,e[3],14,-187363961),r=Ar(r,i,s,n,e[8],20,1163531501),n=Ar(n,r,i,s,e[13],5,-1444681467),s=Ar(s,n,r,i,e[2],9,-51403784),i=Ar(i,s,n,r,e[7],14,1735328473),n=Cr(n,r=Ar(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Cr(s,n,r,i,e[8],11,-2022574463),i=Cr(i,s,n,r,e[11],16,1839030562),r=Cr(r,i,s,n,e[14],23,-35309556),n=Cr(n,r,i,s,e[1],4,-1530992060),s=Cr(s,n,r,i,e[4],11,1272893353),i=Cr(i,s,n,r,e[7],16,-155497632),r=Cr(r,i,s,n,e[10],23,-1094730640),n=Cr(n,r,i,s,e[13],4,681279174),s=Cr(s,n,r,i,e[0],11,-358537222),i=Cr(i,s,n,r,e[3],16,-722521979),r=Cr(r,i,s,n,e[6],23,76029189),n=Cr(n,r,i,s,e[9],4,-640364487),s=Cr(s,n,r,i,e[12],11,-421815835),i=Cr(i,s,n,r,e[15],16,530742520),n=Er(n,r=Cr(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Er(s,n,r,i,e[7],10,1126891415),i=Er(i,s,n,r,e[14],15,-1416354905),r=Er(r,i,s,n,e[5],21,-57434055),n=Er(n,r,i,s,e[12],6,1700485571),s=Er(s,n,r,i,e[3],10,-1894986606),i=Er(i,s,n,r,e[10],15,-1051523),r=Er(r,i,s,n,e[1],21,-2054922799),n=Er(n,r,i,s,e[8],6,1873313359),s=Er(s,n,r,i,e[15],10,-30611744),i=Er(i,s,n,r,e[6],15,-1560198380),r=Er(r,i,s,n,e[13],21,1309151649),n=Er(n,r,i,s,e[4],6,-145523070),s=Er(s,n,r,i,e[11],10,-1120210379),i=Er(i,s,n,r,e[2],15,718787259),r=Er(r,i,s,n,e[9],21,-343485551),t[0]=el(n,t[0]),t[1]=el(r,t[1]),t[2]=el(i,t[2]),t[3]=el(s,t[3])}function E0(t,e,n,r,i,s){return e=el(el(e,t),el(r,s)),el(e<<i|e>>>32-i,n)}function Sr(t,e,n,r,i,s,o){return E0(e&n|~e&r,t,e,i,s,o)}function Ar(t,e,n,r,i,s,o){return E0(e&r|n&~r,t,e,i,s,o)}function Cr(t,e,n,r,i,s,o){return E0(e^n^r,t,e,i,s,o)}function Er(t,e,n,r,i,s,o){return E0(n^(e|~r),t,e,i,s,o)}function ek(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Y1(r,Vz(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Y1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,Y1(r,i),r}function Vz(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Md=ct.atob.bind(ct),Iv=ct.btoa.bind(ct);var RN="0123456789abcdef".split("");function Bz(t){for(var e="",n=0;n<4;n++)e+=RN[t>>8*n+4&15]+RN[t>>8*n&15];return e}function Uz(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function jv(t){return ek(t).map(Uz).join("")}var zz=function(t){for(var e=0;e<t.length;e++)t[e]=Bz(t[e]);return t.join("")}(ek("hello"))!="5d41402abc4b2a76b9719d911017c592";function el(t,e){if(zz){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Lv(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var h=a[l];u=(u+h+o.charCodeAt(l))%256,a[l]=a[u],a[u]=h}n=t,r=a}else a=r;var p=e.length,m=0,g=0,v="";for(l=0;l<p;l++)g=(g+(h=a[m=(m+1)%256]))%256,a[m]=a[g],a[g]=h,o=a[(a[m]+a[g])%256],v+=String.fromCharCode(e.charCodeAt(l)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var DN={print:4,modify:8,copy:16,"annot-forms":32};function Nu(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(DN.perm!==void 0)throw new Error("Invalid permission: "+a);i+=DN[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=jv(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Lv(this.encryptionKey,this.padding)}function Su(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function MN(t){if(Kt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){ct.console&&en.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Sf(t){if(!(this instanceof Sf))return new Sf(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function tk(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ga(t,e,n,r,i){if(!(this instanceof Ga))return new Ga(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,tk.call(this,r,i)}function pc(t,e,n,r,i){if(!(this instanceof pc))return new pc(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,tk.call(this,r,i)}function ot(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",h=null;Kt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=MN;var v="1.3",w=g.__private__.getPdfVersion=function(){return v};g.__private__.setPdfVersion=function(b){v=b};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return C};var x=g.__private__.getPageFormat=function(b){return C[b]};i=i||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},S=_.COMPAT;function I(){this.saveGraphicsState(),ie(new Ye(We,0,0,-We,0,br()*We).toString()+" cm"),this.setFontSize(this.getFontSize()/We),u="n",S=_.ADVANCED}function F(){this.restoreGraphicsState(),u="S",S=_.COMPAT}var V=g.__private__.combineFontStyleAndFontWeight=function(b,B){if(b=="bold"&&B=="normal"||b=="bold"&&B==400||b=="normal"&&B=="italic"||b=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(b=B==400||B==="normal"?b==="italic"?"italic":"normal":B!=700&&B!=="bold"||b!=="normal"?(B==700?"bold":B)+""+b:"bold"),b};g.advancedAPI=function(b){var B=S===_.COMPAT;return B&&I.call(this),typeof b!="function"||(b(this),B&&F.call(this)),this},g.compatAPI=function(b){var B=S===_.ADVANCED;return B&&F.call(this),typeof b!="function"||(b(this),B&&I.call(this)),this},g.isAdvancedAPI=function(){return S===_.ADVANCED};var P,N=function(b){if(S!==_.ADVANCED)throw new Error(b+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=g.roundToPrecision=g.__private__.roundToPrecision=function(b,B){var ne=e||B;if(isNaN(b)||isNaN(ne))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return b.toFixed(ne).replace(/0+$/,"")};P=g.hpf=g.__private__.hpf=typeof l=="number"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return L(b,l)}:l==="smart"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return L(b,b>-1&&b<1?16:5)}:function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return L(b,16)};var M=g.f2=g.__private__.f2=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f2");return L(b,2)},k=g.__private__.f3=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f3");return L(b,3)},T=g.scale=g.__private__.scale=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.scale");return S===_.COMPAT?b*We:S===_.ADVANCED?b:void 0},D=function(b){return S===_.COMPAT?br()-b:S===_.ADVANCED?b:void 0},Y=function(b){return T(D(b))};g.__private__.setPrecision=g.setPrecision=function(b){typeof parseInt(b,10)=="number"&&(e=parseInt(b,10))};var ae,Z="00000000000000000000000000000000",J=g.__private__.getFileId=function(){return Z},K=g.__private__.setFileId=function(b){return Z=b!==void 0&&/^[a-fA-F0-9]{32}$/.test(b)?b.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(un=new Nu(h.userPermissions,h.userPassword,h.ownerPassword,Z)),Z};g.setFileId=function(b){return K(b),this},g.getFileId=function(){return J()};var X=g.__private__.convertDateToPDFDate=function(b){var B=b.getTimezoneOffset(),ne=B<0?"+":"-",oe=Math.floor(Math.abs(B/60)),de=Math.abs(B%60),Se=[ne,Q(oe),"'",Q(de),"'"].join("");return["D:",b.getFullYear(),Q(b.getMonth()+1),Q(b.getDate()),Q(b.getHours()),Q(b.getMinutes()),Q(b.getSeconds()),Se].join("")},se=g.__private__.convertPDFDateToDate=function(b){var B=parseInt(b.substr(2,4),10),ne=parseInt(b.substr(6,2),10)-1,oe=parseInt(b.substr(8,2),10),de=parseInt(b.substr(10,2),10),Se=parseInt(b.substr(12,2),10),Ie=parseInt(b.substr(14,2),10);return new Date(B,ne,oe,de,Se,Ie,0)},me=g.__private__.setCreationDate=function(b){var B;if(b===void 0&&(b=new Date),b instanceof Date)B=X(b);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(b))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=b}return ae=B},O=g.__private__.getCreationDate=function(b){var B=ae;return b==="jsDate"&&(B=se(ae)),B};g.setCreationDate=function(b){return me(b),this},g.getCreationDate=function(b){return O(b)};var $,Q=g.__private__.padd2=function(b){return("0"+parseInt(b)).slice(-2)},te=g.__private__.padd2Hex=function(b){return("00"+(b=b.toString())).substr(b.length)},re=0,pe=[],ge=[],be=0,Re=[],Le=[],Ve=!1,Be=ge,rt=function(){re=0,be=0,ge=[],pe=[],Re=[],Xi=Nn(),xr=Nn()};g.__private__.setCustomOutputDestination=function(b){Ve=!0,Be=b};var Ae=function(b){Ve||(Be=b)};g.__private__.resetCustomOutputDestination=function(){Ve=!1,Be=ge};var ie=g.__private__.out=function(b){return b=b.toString(),be+=b.length+1,Be.push(b),Be},mt=g.__private__.write=function(b){return ie(arguments.length===1?b.toString():Array.prototype.join.call(arguments," "))},Je=g.__private__.getArrayBuffer=function(b){for(var B=b.length,ne=new ArrayBuffer(B),oe=new Uint8Array(ne);B--;)oe[B]=b.charCodeAt(B);return ne},Me=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Me};var Fe=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(b){return Fe=S===_.ADVANCED?b/We:b,this};var $e,qe=g.__private__.getFontSize=g.getFontSize=function(){return S===_.COMPAT?Fe:Fe*We},et=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(b){return et=b,this},g.__private__.getR2L=g.getR2L=function(){return et};var ut,gt=g.__private__.setZoomMode=function(b){var B=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(b))$e=b;else if(isNaN(b)){if(B.indexOf(b)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+b+'" is not recognized.');$e=b}else $e=parseInt(b,10)};g.__private__.getZoomMode=function(){return $e};var tt,lt=g.__private__.setPageMode=function(b){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(b)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+b+'" is not recognized.');ut=b};g.__private__.getPageMode=function(){return ut};var Rt=g.__private__.setLayoutMode=function(b){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(b)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+b+'" is not recognized.');tt=b};g.__private__.getLayoutMode=function(){return tt},g.__private__.setDisplayMode=g.setDisplayMode=function(b,B,ne){return gt(b),Rt(B),lt(ne),this};var at={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(b){if(Object.keys(at).indexOf(b)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return at[b]},g.__private__.getDocumentProperties=function(){return at},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(b){for(var B in at)at.hasOwnProperty(B)&&b[B]&&(at[B]=b[B]);return this},g.__private__.setDocumentProperty=function(b,B){if(Object.keys(at).indexOf(b)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return at[b]=B};var Nt,We,_n,Pt,Yr,Bt={},tn={},Ii=[],jt={},Ss={},ln={},ir={},di=null,nn=0,it=[],Dt=new MN(g),ji=t.hotfixes||[],Fn={},yr={},fi=[],Ye=function b(B,ne,oe,de,Se,Ie){if(!(this instanceof b))return new b(B,ne,oe,de,Se,Ie);isNaN(B)&&(B=1),isNaN(ne)&&(ne=0),isNaN(oe)&&(oe=0),isNaN(de)&&(de=1),isNaN(Se)&&(Se=0),isNaN(Ie)&&(Ie=0),this._matrix=[B,ne,oe,de,Se,Ie]};Object.defineProperty(Ye.prototype,"sx",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Ye.prototype,"shy",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Ye.prototype,"shx",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Ye.prototype,"sy",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Ye.prototype,"tx",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Ye.prototype,"ty",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Ye.prototype,"a",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Ye.prototype,"b",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Ye.prototype,"c",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Ye.prototype,"d",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Ye.prototype,"e",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Ye.prototype,"f",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Ye.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ye.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ye.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ye.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ye.prototype.join=function(b){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(b)},Ye.prototype.multiply=function(b){var B=b.sx*this.sx+b.shy*this.shx,ne=b.sx*this.shy+b.shy*this.sy,oe=b.shx*this.sx+b.sy*this.shx,de=b.shx*this.shy+b.sy*this.sy,Se=b.tx*this.sx+b.ty*this.shx+this.tx,Ie=b.tx*this.shy+b.ty*this.sy+this.ty;return new Ye(B,ne,oe,de,Se,Ie)},Ye.prototype.decompose=function(){var b=this.sx,B=this.shy,ne=this.shx,oe=this.sy,de=this.tx,Se=this.ty,Ie=Math.sqrt(b*b+B*B),ze=(b/=Ie)*ne+(B/=Ie)*oe;ne-=b*ze,oe-=B*ze;var f=Math.sqrt(ne*ne+oe*oe);return ze/=f,b*(oe/=f)<B*(ne/=f)&&(b=-b,B=-B,ze=-ze,Ie=-Ie),{scale:new Ye(Ie,0,0,f,0,0),translate:new Ye(1,0,0,1,de,Se),rotate:new Ye(b,B,-B,b,0,0),skew:new Ye(1,0,ze,1,0,0)}},Ye.prototype.toString=function(b){return this.join(" ")},Ye.prototype.inversed=function(){var b=this.sx,B=this.shy,ne=this.shx,oe=this.sy,de=this.tx,Se=this.ty,Ie=1/(b*oe-B*ne),ze=oe*Ie,f=-B*Ie,E=-ne*Ie,R=b*Ie;return new Ye(ze,f,E,R,-ze*de-E*Se,-f*de-R*Se)},Ye.prototype.applyToPoint=function(b){var B=b.x*this.sx+b.y*this.shx+this.tx,ne=b.x*this.shy+b.y*this.sy+this.ty;return new wo(B,ne)},Ye.prototype.applyToRectangle=function(b){var B=this.applyToPoint(b),ne=this.applyToPoint(new wo(b.x+b.w,b.y+b.h));return new ya(B.x,B.y,ne.x-B.x,ne.y-B.y)},Ye.prototype.clone=function(){var b=this.sx,B=this.shy,ne=this.shx,oe=this.sy,de=this.tx,Se=this.ty;return new Ye(b,B,ne,oe,de,Se)},g.Matrix=Ye;var Qr=g.matrixMult=function(b,B){return B.multiply(b)},vr=new Ye(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=vr;var Vn=function(b,B){if(!Ss[b]){var ne=(B instanceof Ga?"Sh":"P")+(Object.keys(jt).length+1).toString(10);B.id=ne,Ss[b]=ne,jt[ne]=B,Dt.publish("addPattern",B)}};g.ShadingPattern=Ga,g.TilingPattern=pc,g.addShadingPattern=function(b,B){return N("addShadingPattern()"),Vn(b,B),this},g.beginTilingPattern=function(b){N("beginTilingPattern()"),va(b.boundingBox[0],b.boundingBox[1],b.boundingBox[2]-b.boundingBox[0],b.boundingBox[3]-b.boundingBox[1],b.matrix)},g.endTilingPattern=function(b,B){N("endTilingPattern()"),B.stream=Le[$].join(`
`),Vn(b,B),Dt.publish("endTilingPattern",B),fi.pop().restore()};var kn=g.__private__.newObject=function(){var b=Nn();return Bn(b,!0),b},Nn=g.__private__.newObjectDeferred=function(){return re++,pe[re]=function(){return be},re},Bn=function(b,B){return B=typeof B=="boolean"&&B,pe[b]=be,B&&ie(b+" 0 obj"),b},ra=g.__private__.newAdditionalObject=function(){var b={objId:Nn(),content:""};return Re.push(b),b},Xi=Nn(),xr=Nn(),Xr=g.__private__.decodeColorString=function(b){var B=b.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length===5&&(B[4]==="k"||B[4]==="K")&&(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var ne=parseFloat(B[0]);B=[ne,ne,ne,"r"]}for(var oe="#",de=0;de<3;de++)oe+=("0"+Math.floor(255*parseFloat(B[de])).toString(16)).slice(-2);return oe},Or=g.__private__.encodeColorString=function(b){var B;typeof b=="string"&&(b={ch1:b});var ne=b.ch1,oe=b.ch2,de=b.ch3,Se=b.ch4,Ie=b.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ne=="string"&&ne.charAt(0)!=="#"){var ze=new ZE(ne);if(ze.ok)ne=ze.toHex();else if(!/^\d*\.?\d*$/.test(ne))throw new Error('Invalid color "'+ne+'" passed to jsPDF.encodeColorString.')}if(typeof ne=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ne)&&(ne="#"+ne[1]+ne[1]+ne[2]+ne[2]+ne[3]+ne[3]),typeof ne=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ne)){var f=parseInt(ne.substr(1),16);ne=f>>16&255,oe=f>>8&255,de=255&f}if(oe===void 0||Se===void 0&&ne===oe&&oe===de)if(typeof ne=="string")B=ne+" "+Ie[0];else switch(b.precision){case 2:B=M(ne/255)+" "+Ie[0];break;case 3:default:B=k(ne/255)+" "+Ie[0]}else if(Se===void 0||Kt(Se)==="object"){if(Se&&!isNaN(Se.a)&&Se.a===0)return B=["1.","1.","1.",Ie[1]].join(" ");if(typeof ne=="string")B=[ne,oe,de,Ie[1]].join(" ");else switch(b.precision){case 2:B=[M(ne/255),M(oe/255),M(de/255),Ie[1]].join(" ");break;default:case 3:B=[k(ne/255),k(oe/255),k(de/255),Ie[1]].join(" ")}}else if(typeof ne=="string")B=[ne,oe,de,Se,Ie[2]].join(" ");else switch(b.precision){case 2:B=[M(ne),M(oe),M(de),M(Se),Ie[2]].join(" ");break;case 3:default:B=[k(ne),k(oe),k(de),k(Se),Ie[2]].join(" ")}return B},Fr=g.__private__.getFilters=function(){return o},Pn=g.__private__.putStream=function(b){var B=(b=b||{}).data||"",ne=b.filters||Fr(),oe=b.alreadyAppliedFilters||[],de=b.addLength1||!1,Se=B.length,Ie=b.objectId,ze=function(yt){return yt};if(h!==null&&Ie===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(ze=un.encryptor(Ie,0));var f={};ne===!0&&(ne=["FlateEncode"]);var E=b.additionalKeyValues||[],R=(f=ot.API.processDataByFilters!==void 0?ot.API.processDataByFilters(B,ne):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(oe)?oe.join(" "):oe.toString());if(f.data.length!==0&&(E.push({key:"Length",value:f.data.length}),de===!0&&E.push({key:"Length1",value:Se})),R.length!=0)if(R.split("/").length-1==1)E.push({key:"Filter",value:R});else{E.push({key:"Filter",value:"["+R+"]"});for(var H=0;H<E.length;H+=1)if(E[H].key==="DecodeParms"){for(var he=[],xe=0;xe<f.reverseChain.split("/").length-1;xe+=1)he.push("null");he.push(E[H].value),E[H].value="["+he.join(" ")+"]"}}ie("<<");for(var je=0;je<E.length;je++)ie("/"+E[je].key+" "+E[je].value);ie(">>"),f.data.length!==0&&(ie("stream"),ie(ze(f.data)),ie("endstream"))},pi=g.__private__.putPage=function(b){var B=b.number,ne=b.data,oe=b.objId,de=b.contentsObjId;Bn(oe,!0),ie("<</Type /Page"),ie("/Parent "+b.rootDictionaryObjId+" 0 R"),ie("/Resources "+b.resourceDictionaryObjId+" 0 R"),ie("/MediaBox ["+parseFloat(P(b.mediaBox.bottomLeftX))+" "+parseFloat(P(b.mediaBox.bottomLeftY))+" "+P(b.mediaBox.topRightX)+" "+P(b.mediaBox.topRightY)+"]"),b.cropBox!==null&&ie("/CropBox ["+P(b.cropBox.bottomLeftX)+" "+P(b.cropBox.bottomLeftY)+" "+P(b.cropBox.topRightX)+" "+P(b.cropBox.topRightY)+"]"),b.bleedBox!==null&&ie("/BleedBox ["+P(b.bleedBox.bottomLeftX)+" "+P(b.bleedBox.bottomLeftY)+" "+P(b.bleedBox.topRightX)+" "+P(b.bleedBox.topRightY)+"]"),b.trimBox!==null&&ie("/TrimBox ["+P(b.trimBox.bottomLeftX)+" "+P(b.trimBox.bottomLeftY)+" "+P(b.trimBox.topRightX)+" "+P(b.trimBox.topRightY)+"]"),b.artBox!==null&&ie("/ArtBox ["+P(b.artBox.bottomLeftX)+" "+P(b.artBox.bottomLeftY)+" "+P(b.artBox.topRightX)+" "+P(b.artBox.topRightY)+"]"),typeof b.userUnit=="number"&&b.userUnit!==1&&ie("/UserUnit "+b.userUnit),Dt.publish("putPage",{objId:oe,pageContext:it[B],pageNumber:B,page:ne}),ie("/Contents "+de+" 0 R"),ie(">>"),ie("endobj");var Se=ne.join(`
`);return S===_.ADVANCED&&(Se+=`
Q`),Bn(de,!0),Pn({data:Se,filters:Fr(),objectId:de}),ie("endobj"),oe},As=g.__private__.putPages=function(){var b,B,ne=[];for(b=1;b<=nn;b++)it[b].objId=Nn(),it[b].contentsObjId=Nn();for(b=1;b<=nn;b++)ne.push(pi({number:b,data:Le[b],objId:it[b].objId,contentsObjId:it[b].contentsObjId,mediaBox:it[b].mediaBox,cropBox:it[b].cropBox,bleedBox:it[b].bleedBox,trimBox:it[b].trimBox,artBox:it[b].artBox,userUnit:it[b].userUnit,rootDictionaryObjId:Xi,resourceDictionaryObjId:xr}));Bn(Xi,!0),ie("<</Type /Pages");var oe="/Kids [";for(B=0;B<nn;B++)oe+=ne[B]+" 0 R ";ie(oe+"]"),ie("/Count "+nn),ie(">>"),ie("endobj"),Dt.publish("postPutPages")},Cs=function(b){Dt.publish("putFont",{font:b,out:ie,newObject:kn,putStream:Pn}),b.isAlreadyPutted!==!0&&(b.objectNumber=kn(),ie("<<"),ie("/Type /Font"),ie("/BaseFont /"+Su(b.postScriptName)),ie("/Subtype /Type1"),typeof b.encoding=="string"&&ie("/Encoding /"+b.encoding),ie("/FirstChar 32"),ie("/LastChar 255"),ie(">>"),ie("endobj"))},Es=function(){for(var b in Bt)Bt.hasOwnProperty(b)&&(p===!1||p===!0&&m.hasOwnProperty(b))&&Cs(Bt[b])},ho=function(b){b.objectNumber=kn();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[P(b.x),P(b.y),P(b.x+b.width),P(b.y+b.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+b.matrix.toString()+"]"});var ne=b.pages[1].join(`
`);Pn({data:ne,additionalKeyValues:B,objectId:b.objectNumber}),ie("endobj")},fo=function(){for(var b in Fn)Fn.hasOwnProperty(b)&&ho(Fn[b])},Wc=function(b,B){var ne,oe=[],de=1/(B-1);for(ne=0;ne<1;ne+=de)oe.push(ne);if(oe.push(1),b[0].offset!=0){var Se={offset:0,color:b[0].color};b.unshift(Se)}if(b[b.length-1].offset!=1){var Ie={offset:1,color:b[b.length-1].color};b.push(Ie)}for(var ze="",f=0,E=0;E<oe.length;E++){for(ne=oe[E];ne>b[f+1].offset;)f++;var R=b[f].offset,H=(ne-R)/(b[f+1].offset-R),he=b[f].color,xe=b[f+1].color;ze+=te(Math.round((1-H)*he[0]+H*xe[0]).toString(16))+te(Math.round((1-H)*he[1]+H*xe[1]).toString(16))+te(Math.round((1-H)*he[2]+H*xe[2]).toString(16))}return ze.trim()},ia=function(b,B){B||(B=21);var ne=kn(),oe=Wc(b.colors,B),de=[];de.push({key:"FunctionType",value:"0"}),de.push({key:"Domain",value:"[0.0 1.0]"}),de.push({key:"Size",value:"["+B+"]"}),de.push({key:"BitsPerSample",value:"8"}),de.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),de.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pn({data:oe,additionalKeyValues:de,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ne}),ie("endobj"),b.objectNumber=kn(),ie("<< /ShadingType "+b.type),ie("/ColorSpace /DeviceRGB");var Se="/Coords ["+P(parseFloat(b.coords[0]))+" "+P(parseFloat(b.coords[1]))+" ";b.type===2?Se+=P(parseFloat(b.coords[2]))+" "+P(parseFloat(b.coords[3])):Se+=P(parseFloat(b.coords[2]))+" "+P(parseFloat(b.coords[3]))+" "+P(parseFloat(b.coords[4]))+" "+P(parseFloat(b.coords[5])),ie(Se+="]"),b.matrix&&ie("/Matrix ["+b.matrix.toString()+"]"),ie("/Function "+ne+" 0 R"),ie("/Extend [true true]"),ie(">>"),ie("endobj")},Gc=function(b,B){var ne=Nn(),oe=kn();B.push({resourcesOid:ne,objectOid:oe}),b.objectNumber=oe;var de=[];de.push({key:"Type",value:"/Pattern"}),de.push({key:"PatternType",value:"1"}),de.push({key:"PaintType",value:"1"}),de.push({key:"TilingType",value:"1"}),de.push({key:"BBox",value:"["+b.boundingBox.map(P).join(" ")+"]"}),de.push({key:"XStep",value:P(b.xStep)}),de.push({key:"YStep",value:P(b.yStep)}),de.push({key:"Resources",value:ne+" 0 R"}),b.matrix&&de.push({key:"Matrix",value:"["+b.matrix.toString()+"]"}),Pn({data:b.stream,additionalKeyValues:de,objectId:b.objectNumber}),ie("endobj")},ks=function(b){var B;for(B in jt)jt.hasOwnProperty(B)&&(jt[B]instanceof Ga?ia(jt[B]):jt[B]instanceof pc&&Gc(jt[B],b))},Ps=function(b){for(var B in b.objectNumber=kn(),ie("<<"),b)switch(B){case"opacity":ie("/ca "+M(b[B]));break;case"stroke-opacity":ie("/CA "+M(b[B]))}ie(">>"),ie("endobj")},Ji=function(){var b;for(b in ln)ln.hasOwnProperty(b)&&Ps(ln[b])},po=function(){for(var b in ie("/XObject <<"),Fn)Fn.hasOwnProperty(b)&&Fn[b].objectNumber>=0&&ie("/"+b+" "+Fn[b].objectNumber+" 0 R");Dt.publish("putXobjectDict"),ie(">>")},Eh=function(){un.oid=kn(),ie("<<"),ie("/Filter /Standard"),ie("/V "+un.v),ie("/R "+un.r),ie("/U <"+un.toHexString(un.U)+">"),ie("/O <"+un.toHexString(un.O)+">"),ie("/P "+un.P),ie(">>"),ie("endobj")},jl=function(){for(var b in ie("/Font <<"),Bt)Bt.hasOwnProperty(b)&&(p===!1||p===!0&&m.hasOwnProperty(b))&&ie("/"+b+" "+Bt[b].objectNumber+" 0 R");ie(">>")},Kc=function(){if(Object.keys(jt).length>0){for(var b in ie("/Shading <<"),jt)jt.hasOwnProperty(b)&&jt[b]instanceof Ga&&jt[b].objectNumber>=0&&ie("/"+b+" "+jt[b].objectNumber+" 0 R");Dt.publish("putShadingPatternDict"),ie(">>")}},mo=function(b){if(Object.keys(jt).length>0){for(var B in ie("/Pattern <<"),jt)jt.hasOwnProperty(B)&&jt[B]instanceof g.TilingPattern&&jt[B].objectNumber>=0&&jt[B].objectNumber<b&&ie("/"+B+" "+jt[B].objectNumber+" 0 R");Dt.publish("putTilingPatternDict"),ie(">>")}},Ll=function(){if(Object.keys(ln).length>0){var b;for(b in ie("/ExtGState <<"),ln)ln.hasOwnProperty(b)&&ln[b].objectNumber>=0&&ie("/"+b+" "+ln[b].objectNumber+" 0 R");Dt.publish("putGStateDict"),ie(">>")}},cn=function(b){Bn(b.resourcesOid,!0),ie("<<"),ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),jl(),Kc(),mo(b.objectOid),Ll(),po(),ie(">>"),ie("endobj")},Rl=function(){var b=[];Es(),Ji(),fo(),ks(b),Dt.publish("putResources"),b.forEach(cn),cn({resourcesOid:xr,objectOid:Number.MAX_SAFE_INTEGER}),Dt.publish("postPutResources")},Dl=function(){Dt.publish("putAdditionalObjects");for(var b=0;b<Re.length;b++){var B=Re[b];Bn(B.objId,!0),ie(B.content),ie("endobj")}Dt.publish("postPutAdditionalObjects")},Yc=function(b){tn[b.fontName]=tn[b.fontName]||{},tn[b.fontName][b.fontStyle]=b.id},Ml=function(b,B,ne,oe,de){var Se={id:"F"+(Object.keys(Bt).length+1).toString(10),postScriptName:b,fontName:B,fontStyle:ne,encoding:oe,isStandardFont:de||!1,metadata:{}};return Dt.publish("addFont",{font:Se,instance:this}),Bt[Se.id]=Se,Yc(Se),Se.id},Qc=function(b){for(var B=0,ne=Me.length;B<ne;B++){var oe=Ml.call(this,b[B][0],b[B][1],b[B][2],Me[B][3],!0);p===!1&&(m[oe]=!0);var de=b[B][0].split("-");Yc({id:oe,fontName:de[0],fontStyle:de[1]||""})}Dt.publish("addFonts",{fonts:Bt,dictionary:tn})},Jr=function(b){return b.foo=function(){try{return b.apply(this,arguments)}catch(oe){var B=oe.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var ne="Error in function "+B.split(`
`)[0].split("<")[0]+": "+oe.message;if(!ct.console)throw new Error(ne);ct.console.error(ne,oe),ct.alert&&alert(ne)}},b.foo.bar=b,b.foo},sa=function(b,B){var ne,oe,de,Se,Ie,ze,f,E,R;if(de=(B=B||{}).sourceEncoding||"Unicode",Ie=B.outputEncoding,(B.autoencode||Ie)&&Bt[Nt].metadata&&Bt[Nt].metadata[de]&&Bt[Nt].metadata[de].encoding&&(Se=Bt[Nt].metadata[de].encoding,!Ie&&Bt[Nt].encoding&&(Ie=Bt[Nt].encoding),!Ie&&Se.codePages&&(Ie=Se.codePages[0]),typeof Ie=="string"&&(Ie=Se[Ie]),Ie)){for(f=!1,ze=[],ne=0,oe=b.length;ne<oe;ne++)(E=Ie[b.charCodeAt(ne)])?ze.push(String.fromCharCode(E)):ze.push(b[ne]),ze[ne].charCodeAt(0)>>8&&(f=!0);b=ze.join("")}for(ne=b.length;f===void 0&&ne!==0;)b.charCodeAt(ne-1)>>8&&(f=!0),ne--;if(!f)return b;for(ze=B.noBOM?[]:[254,255],ne=0,oe=b.length;ne<oe;ne++){if((R=(E=b.charCodeAt(ne))>>8)>>8)throw new Error("Character at position "+ne+" of string '"+b+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ze.push(R),ze.push(E-(R<<8))}return String.fromCharCode.apply(void 0,ze)},Sn=g.__private__.pdfEscape=g.pdfEscape=function(b,B){return sa(b,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vr=g.__private__.beginPage=function(b){Le[++nn]=[],it[nn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(b[0]),topRightY:Number(b[1])}},Ol(nn),Ae(Le[$])},go=function(b,B){var ne,oe,de;switch(n=B||n,typeof b=="string"&&(ne=x(b.toLowerCase()),Array.isArray(ne)&&(oe=ne[0],de=ne[1])),Array.isArray(b)&&(oe=b[0]*We,de=b[1]*We),isNaN(oe)&&(oe=i[0],de=i[1]),(oe>14400||de>14400)&&(en.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),oe=Math.min(14400,oe),de=Math.min(14400,de)),i=[oe,de],n.substr(0,1)){case"l":de>oe&&(i=[de,oe]);break;case"p":oe>de&&(i=[de,oe])}Vr(i),zl(Ul),ie(sr),$l!==0&&ie($l+" J"),ga!==0&&ie(ga+" j"),Dt.publish("addPage",{pageNumber:nn})},oa=function(b){b>0&&b<=nn&&(Le.splice(b,1),it.splice(b,1),nn--,$>nn&&($=nn),this.setPage($))},Ol=function(b){b>0&&b<=nn&&($=b)},Ht=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Le.length-1},yo=function(b,B,ne){var oe,de=void 0;return ne=ne||{},b=b!==void 0?b:Bt[Nt].fontName,B=B!==void 0?B:Bt[Nt].fontStyle,oe=b.toLowerCase(),tn[oe]!==void 0&&tn[oe][B]!==void 0?de=tn[oe][B]:tn[b]!==void 0&&tn[b][B]!==void 0?de=tn[b][B]:ne.disableWarning===!1&&en.warn("Unable to look up font label for font '"+b+"', '"+B+"'. Refer to getFontList() for available fonts."),de||ne.noFallback||(de=tn.times[B])==null&&(de=tn.times.normal),de},vo=g.__private__.putInfo=function(){var b=kn(),B=function(oe){return oe};for(var ne in h!==null&&(B=un.encryptor(b,0)),ie("<<"),ie("/Producer ("+Sn(B("jsPDF "+ot.version))+")"),at)at.hasOwnProperty(ne)&&at[ne]&&ie("/"+ne.substr(0,1).toUpperCase()+ne.substr(1)+" ("+Sn(B(at[ne]))+")");ie("/CreationDate ("+Sn(B(ae))+")"),ie(">>"),ie("endobj")},Zi=g.__private__.putCatalog=function(b){var B=(b=b||{}).rootDictionaryObjId||Xi;switch(kn(),ie("<<"),ie("/Type /Catalog"),ie("/Pages "+B+" 0 R"),$e||($e="fullwidth"),$e){case"fullwidth":ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ie("/OpenAction [3 0 R /Fit]");break;case"original":ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ne=""+$e;ne.substr(ne.length-1)==="%"&&($e=parseInt($e)/100),typeof $e=="number"&&ie("/OpenAction [3 0 R /XYZ null null "+M($e)+"]")}switch(tt||(tt="continuous"),tt){case"continuous":ie("/PageLayout /OneColumn");break;case"single":ie("/PageLayout /SinglePage");break;case"two":case"twoleft":ie("/PageLayout /TwoColumnLeft");break;case"tworight":ie("/PageLayout /TwoColumnRight")}ut&&ie("/PageMode /"+ut),Dt.publish("putCatalog"),ie(">>"),ie("endobj")},kh=g.__private__.putTrailer=function(){ie("trailer"),ie("<<"),ie("/Size "+(re+1)),ie("/Root "+re+" 0 R"),ie("/Info "+(re-1)+" 0 R"),h!==null&&ie("/Encrypt "+un.oid+" 0 R"),ie("/ID [ <"+Z+"> <"+Z+"> ]"),ie(">>")},Xc=g.__private__.putHeader=function(){ie("%PDF-"+v),ie("%ºß¬à")},Ph=g.__private__.putXRef=function(){var b="0000000000";ie("xref"),ie("0 "+(re+1)),ie("0000000000 65535 f ");for(var B=1;B<=re;B++)typeof pe[B]=="function"?ie((b+pe[B]()).slice(-10)+" 00000 n "):pe[B]!==void 0?ie((b+pe[B]).slice(-10)+" 00000 n "):ie("0000000000 00000 n ")},es=g.__private__.buildDocument=function(){rt(),Ae(ge),Dt.publish("buildDocument"),Xc(),As(),Dl(),Rl(),h!==null&&Eh(),vo(),Zi();var b=be;return Ph(),kh(),ie("startxref"),ie(""+b),ie("%%EOF"),Ae(Le[$]),ge.join(`
`)},aa=g.__private__.getBlob=function(b){return new Blob([Je(b)],{type:"application/pdf"})},la=g.output=g.__private__.output=Jr(function(b,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",b){case void 0:return es();case"save":g.save(B.filename);break;case"arraybuffer":return Je(es());case"blob":return aa(es());case"bloburi":case"bloburl":if(ct.URL!==void 0&&typeof ct.URL.createObjectURL=="function")return ct.URL&&ct.URL.createObjectURL(aa(es()))||void 0;en.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ne="",oe=es();try{ne=Iv(oe)}catch{ne=Iv(unescape(encodeURIComponent(oe)))}return"data:application/pdf;filename="+B.filename+";base64,"+ne;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ct)==="[object Window]"){var de="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Se=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(de=B.pdfObjectUrl,Se="");var Ie='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+de+'"'+Se+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",ze=ct.open();return ze!==null&&ze.document.write(Ie),ze}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ct)==="[object Window]"){var f='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',E=ct.open();if(E!==null){E.document.write(f);var R=this;E.document.documentElement.querySelector("#pdfViewer").onload=function(){E.document.title=B.filename,E.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(R.output("bloburl"))}}return E}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ct)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var H='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',he=ct.open();if(he!==null&&(he.document.write(H),he.document.title=B.filename),he||typeof safari>"u")return he;break;case"datauri":case"dataurl":return ct.document.location.href=this.output("datauristring",B);default:return null}}),Ts=function(b){return Array.isArray(ji)===!0&&ji.indexOf(b)>-1};switch(r){case"pt":We=1;break;case"mm":We=72/25.4;break;case"cm":We=72/2.54;break;case"in":We=72;break;case"px":We=Ts("px_scaling")==1?.75:96/72;break;case"pc":case"em":We=12;break;case"ex":We=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);We=r}var un=null;me(),K();var Jc=function(b){return h!==null?un.encryptor(b,0):function(B){return B}},Fl=g.__private__.getPageInfo=g.getPageInfo=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:it[b].objId,pageNumber:b,pageContext:it[b]}},ht=g.__private__.getPageInfoByObjId=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in it)if(it[B].objId===b)break;return Fl(B)},Is=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:it[$].objId,pageNumber:$,pageContext:it[$]}};g.addPage=function(){return go.apply(this,arguments),this},g.setPage=function(){return Ol.apply(this,arguments),Ae.call(this,Le[$]),this},g.insertPage=function(b){return this.addPage(),this.movePage($,b),this},g.movePage=function(b,B){var ne,oe;if(b>B){ne=Le[b],oe=it[b];for(var de=b;de>B;de--)Le[de]=Le[de-1],it[de]=it[de-1];Le[B]=ne,it[B]=oe,this.setPage(B)}else if(b<B){ne=Le[b],oe=it[b];for(var Se=b;Se<B;Se++)Le[Se]=Le[Se+1],it[Se]=it[Se+1];Le[B]=ne,it[B]=oe,this.setPage(B)}return this},g.deletePage=function(){return oa.apply(this,arguments),this},g.__private__.text=g.text=function(b,B,ne,oe,de){var Se,Ie,ze,f,E,R,H,he,xe,je=(oe=oe||{}).scope||this;if(typeof b=="number"&&typeof B=="number"&&(typeof ne=="string"||Array.isArray(ne))){var yt=ne;ne=B,B=b,b=yt}if(arguments[3]instanceof Ye?(N("The transform parameter of text() with a Matrix value"),xe=de):(ze=arguments[4],f=arguments[5],Kt(H=arguments[3])==="object"&&H!==null||(typeof ze=="string"&&(f=ze,ze=null),typeof H=="string"&&(f=H,H=null),typeof H=="number"&&(ze=H,H=null),oe={flags:H,angle:ze,align:f})),isNaN(B)||isNaN(ne)||b==null)throw new Error("Invalid arguments passed to jsPDF.text");if(b.length===0)return je;var Ct="",vt=!1,qt=typeof oe.lineHeightFactor=="number"?oe.lineHeightFactor:zt,Jt=je.internal.scaleFactor;function ss(rn){return rn=rn.split("	").join(Array(oe.TabLen||9).join(" ")),Sn(rn,H)}function or(rn){for(var sn,In=rn.concat(),Gn=[],Co=In.length;Co--;)typeof(sn=In.shift())=="string"?Gn.push(sn):Array.isArray(rn)&&(sn.length===1||sn[1]===void 0&&sn[2]===void 0)?Gn.push(sn[0]):Gn.push([sn[0],sn[1],sn[2]]);return Gn}function Ds(rn,sn){var In;if(typeof rn=="string")In=sn(rn)[0];else if(Array.isArray(rn)){for(var Gn,Co,Fh=rn.concat(),hu=[],Jf=Fh.length;Jf--;)typeof(Gn=Fh.shift())=="string"?hu.push(sn(Gn)[0]):Array.isArray(Gn)&&typeof Gn[0]=="string"&&(Co=sn(Gn[0],Gn[1],Gn[2]),hu.push([Co[0],Co[1],Co[2]]));In=hu}return In}var Ms=!1,Ih=!0;if(typeof b=="string")Ms=!0;else if(Array.isArray(b)){var jh=b.concat();Ie=[];for(var ru,ar=jh.length;ar--;)(typeof(ru=jh.shift())!="string"||Array.isArray(ru)&&typeof ru[0]!="string")&&(Ih=!1);Ms=Ih}if(Ms===!1)throw new Error('Type of text must be string or Array. "'+b+'" is not recognized.');typeof b=="string"&&(b=b.match(/[\r?\n]/)?b.split(/\r\n|\r|\n/g):[b]);var iu=Fe/je.internal.scaleFactor,su=iu*(qt-1);switch(oe.baseline){case"bottom":ne-=su;break;case"top":ne+=iu-su;break;case"hanging":ne+=iu-2*su;break;case"middle":ne+=iu/2-su}if((R=oe.maxWidth||0)>0&&(typeof b=="string"?b=je.splitTextToSize(b,R):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(rn,sn){return rn.concat(je.splitTextToSize(sn,R))},[]))),Se={text:b,x:B,y:ne,options:oe,mutex:{pdfEscape:Sn,activeFontKey:Nt,fonts:Bt,activeFontSize:Fe}},Dt.publish("preProcessText",Se),b=Se.text,ze=(oe=Se.options).angle,!(xe instanceof Ye)&&ze&&typeof ze=="number"){ze*=Math.PI/180,oe.rotationDirection===0&&(ze=-ze),S===_.ADVANCED&&(ze=-ze);var ou=Math.cos(ze),Lh=Math.sin(ze);xe=new Ye(ou,Lh,-Lh,ou,0,0)}else ze&&ze instanceof Ye&&(xe=ze);S!==_.ADVANCED||xe||(xe=vr),(E=oe.charSpace||bo)!==void 0&&(Ct+=P(T(E))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(he=oe.horizontalScale)!==void 0&&(Ct+=P(100*he)+` Tz
`),oe.lang;var Zr=-1,k0=oe.renderingMode!==void 0?oe.renderingMode:oe.stroke,Rh=je.internal.getCurrentPageInfo().pageContext;switch(k0){case 0:case!1:case"fill":Zr=0;break;case 1:case!0:case"stroke":Zr=1;break;case 2:case"fillThenStroke":Zr=2;break;case 3:case"invisible":Zr=3;break;case 4:case"fillAndAddForClipping":Zr=4;break;case 5:case"strokeAndAddPathForClipping":Zr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Zr=6;break;case 7:case"addToPathForClipping":Zr=7}var Kf=Rh.usedRenderingMode!==void 0?Rh.usedRenderingMode:-1;Zr!==-1?Ct+=Zr+` Tr
`:Kf!==-1&&(Ct+=`0 Tr
`),Zr!==-1&&(Rh.usedRenderingMode=Zr),f=oe.align||"left";var Ri,au=Fe*qt,Yf=je.internal.pageSize.getWidth(),Qf=Bt[Nt];E=oe.charSpace||bo,R=oe.maxWidth||0,H=Object.assign({autoencode:!0,noBOM:!0},oe.flags);var wa=[],Wl=function(rn){return je.getStringUnitWidth(rn,{font:Qf,charSpace:E,fontSize:Fe,doKerning:!1})*Fe/Jt};if(Object.prototype.toString.call(b)==="[object Array]"){var ei;Ie=or(b),f!=="left"&&(Ri=Ie.map(Wl));var Br,_a=0;if(f==="right"){B-=Ri[0],b=[],ar=Ie.length;for(var No=0;No<ar;No++)No===0?(Br=yi(B),ei=Wn(ne)):(Br=T(_a-Ri[No]),ei=-au),b.push([Ie[No],Br,ei]),_a=Ri[No]}else if(f==="center"){B-=Ri[0]/2,b=[],ar=Ie.length;for(var So=0;So<ar;So++)So===0?(Br=yi(B),ei=Wn(ne)):(Br=T((_a-Ri[So])/2),ei=-au),b.push([Ie[So],Br,ei]),_a=Ri[So]}else if(f==="left"){b=[],ar=Ie.length;for(var lu=0;lu<ar;lu++)b.push(Ie[lu])}else if(f==="justify"&&Qf.encoding==="Identity-H"){b=[],ar=Ie.length,R=R!==0?R:Yf;for(var Ao=0,Tn=0;Tn<ar;Tn++)if(ei=Tn===0?Wn(ne):-au,Br=Tn===0?yi(B):Ao,Tn<ar-1){var Dh=T((R-Ri[Tn])/(Ie[Tn].split(" ").length-1)),Ur=Ie[Tn].split(" ");b.push([Ur[0]+" ",Br,ei]),Ao=0;for(var Di=1;Di<Ur.length;Di++){var cu=(Wl(Ur[Di-1]+" "+Ur[Di])-Wl(Ur[Di]))*Jt+Dh;Di==Ur.length-1?b.push([Ur[Di],cu,0]):b.push([Ur[Di]+" ",cu,0]),Ao-=cu}}else b.push([Ie[Tn],Br,ei]);b.push(["",Ao,0])}else{if(f!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(b=[],ar=Ie.length,R=R!==0?R:Yf,Tn=0;Tn<ar;Tn++)ei=Tn===0?Wn(ne):-au,Br=Tn===0?yi(B):0,Tn<ar-1?wa.push(P(T((R-Ri[Tn])/(Ie[Tn].split(" ").length-1)))):wa.push(0),b.push([Ie[Tn],Br,ei])}}var Xf=typeof oe.R2L=="boolean"?oe.R2L:et;Xf===!0&&(b=Ds(b,function(rn,sn,In){return[rn.split("").reverse().join(""),sn,In]})),Se={text:b,x:B,y:ne,options:oe,mutex:{pdfEscape:Sn,activeFontKey:Nt,fonts:Bt,activeFontSize:Fe}},Dt.publish("postProcessText",Se),b=Se.text,vt=Se.mutex.isHex||!1;var Mh=Bt[Nt].encoding;Mh!=="WinAnsiEncoding"&&Mh!=="StandardEncoding"||(b=Ds(b,function(rn,sn,In){return[ss(rn),sn,In]})),Ie=or(b),b=[];for(var Gl,Kl,Na,Yl=0,uu=1,Ql=Array.isArray(Ie[0])?uu:Yl,Sa="",Oh=function(rn,sn,In){var Gn="";return In instanceof Ye?(In=typeof oe.angle=="number"?Qr(In,new Ye(1,0,0,1,rn,sn)):Qr(new Ye(1,0,0,1,rn,sn),In),S===_.ADVANCED&&(In=Qr(new Ye(1,0,0,-1,0,0),In)),Gn=In.join(" ")+` Tm
`):Gn=P(rn)+" "+P(sn)+` Td
`,Gn},Mi=0;Mi<Ie.length;Mi++){switch(Sa="",Ql){case uu:Na=(vt?"<":"(")+Ie[Mi][0]+(vt?">":")"),Gl=parseFloat(Ie[Mi][1]),Kl=parseFloat(Ie[Mi][2]);break;case Yl:Na=(vt?"<":"(")+Ie[Mi]+(vt?">":")"),Gl=yi(B),Kl=Wn(ne)}wa!==void 0&&wa[Mi]!==void 0&&(Sa=wa[Mi]+` Tw
`),Mi===0?b.push(Sa+Oh(Gl,Kl,xe)+Na):Ql===Yl?b.push(Sa+Na):Ql===uu&&b.push(Sa+Oh(Gl,Kl,xe)+Na)}b=Ql===Yl?b.join(` Tj
T* `):b.join(` Tj
`),b+=` Tj
`;var Oi=`BT
/`;return Oi+=Nt+" "+Fe+` Tf
`,Oi+=P(Fe*qt)+` TL
`,Oi+=rs+`
`,Oi+=Ct,Oi+=b,ie(Oi+="ET"),m[Nt]=!0,je};var Th=g.__private__.clip=g.clip=function(b){return ie(b==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Th("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ie("n"),this};var Li=g.__private__.isValidStyle=function(b){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(b)!==-1&&(B=!0),B};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(b){return Li(b)&&(u=b),this};var Zc=g.__private__.getStyle=g.getStyle=function(b){var B=u;switch(b){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=b}return B},mi=g.close=function(){return ie("h"),this};g.stroke=function(){return ie("S"),this},g.fill=function(b){return ca("f",b),this},g.fillEvenOdd=function(b){return ca("f*",b),this},g.fillStroke=function(b){return ca("B",b),this},g.fillStrokeEvenOdd=function(b){return ca("B*",b),this};var ca=function(b,B){Kt(B)==="object"?ha(B,b):ie(b)},Vl=function(b){b===null||S===_.ADVANCED&&b===void 0||(b=Zc(b),ie(b))};function ua(b,B,ne,oe,de){var Se=new pc(B||this.boundingBox,ne||this.xStep,oe||this.yStep,this.gState,de||this.matrix);Se.stream=this.stream;var Ie=b+"$$"+this.cloneIndex+++"$$";return Vn(Ie,Se),Se}var ha=function(b,B){var ne=Ss[b.key],oe=jt[ne];if(oe instanceof Ga)ie("q"),ie(eu(B)),oe.gState&&g.setGState(oe.gState),ie(b.matrix.toString()+" cm"),ie("/"+ne+" sh"),ie("Q");else if(oe instanceof pc){var de=new Ye(1,0,0,-1,0,br());b.matrix&&(de=de.multiply(b.matrix||vr),ne=ua.call(oe,b.key,b.boundingBox,b.xStep,b.yStep,de).id),ie("q"),ie("/Pattern cs"),ie("/"+ne+" scn"),oe.gState&&g.setGState(oe.gState),ie(B),ie("Q")}},eu=function(b){switch(b){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ts=g.moveTo=function(b,B){return ie(P(T(b))+" "+P(Y(B))+" m"),this},gi=g.lineTo=function(b,B){return ie(P(T(b))+" "+P(Y(B))+" l"),this},ns=g.curveTo=function(b,B,ne,oe,de,Se){return ie([P(T(b)),P(Y(B)),P(T(ne)),P(Y(oe)),P(T(de)),P(Y(Se)),"c"].join(" ")),this};g.__private__.line=g.line=function(b,B,ne,oe,de){if(isNaN(b)||isNaN(B)||isNaN(ne)||isNaN(oe)||!Li(de))throw new Error("Invalid arguments passed to jsPDF.line");return S===_.COMPAT?this.lines([[ne-b,oe-B]],b,B,[1,1],de||"S"):this.lines([[ne-b,oe-B]],b,B,[1,1]).stroke()},g.__private__.lines=g.lines=function(b,B,ne,oe,de,Se){var Ie,ze,f,E,R,H,he,xe,je,yt,Ct,vt;if(typeof b=="number"&&(vt=ne,ne=B,B=b,b=vt),oe=oe||[1,1],Se=Se||!1,isNaN(B)||isNaN(ne)||!Array.isArray(b)||!Array.isArray(oe)||!Li(de)||typeof Se!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ts(B,ne),Ie=oe[0],ze=oe[1],E=b.length,yt=B,Ct=ne,f=0;f<E;f++)(R=b[f]).length===2?(yt=R[0]*Ie+yt,Ct=R[1]*ze+Ct,gi(yt,Ct)):(H=R[0]*Ie+yt,he=R[1]*ze+Ct,xe=R[2]*Ie+yt,je=R[3]*ze+Ct,yt=R[4]*Ie+yt,Ct=R[5]*ze+Ct,ns(H,he,xe,je,yt,Ct));return Se&&mi(),Vl(de),this},g.path=function(b){for(var B=0;B<b.length;B++){var ne=b[B],oe=ne.c;switch(ne.op){case"m":ts(oe[0],oe[1]);break;case"l":gi(oe[0],oe[1]);break;case"c":ns.apply(this,oe);break;case"h":mi()}}return this},g.__private__.rect=g.rect=function(b,B,ne,oe,de){if(isNaN(b)||isNaN(B)||isNaN(ne)||isNaN(oe)||!Li(de))throw new Error("Invalid arguments passed to jsPDF.rect");return S===_.COMPAT&&(oe=-oe),ie([P(T(b)),P(Y(B)),P(T(ne)),P(T(oe)),"re"].join(" ")),Vl(de),this},g.__private__.triangle=g.triangle=function(b,B,ne,oe,de,Se,Ie){if(isNaN(b)||isNaN(B)||isNaN(ne)||isNaN(oe)||isNaN(de)||isNaN(Se)||!Li(Ie))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ne-b,oe-B],[de-ne,Se-oe],[b-de,B-Se]],b,B,[1,1],Ie,!0),this},g.__private__.roundedRect=g.roundedRect=function(b,B,ne,oe,de,Se,Ie){if(isNaN(b)||isNaN(B)||isNaN(ne)||isNaN(oe)||isNaN(de)||isNaN(Se)||!Li(Ie))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ze=4/3*(Math.SQRT2-1);return de=Math.min(de,.5*ne),Se=Math.min(Se,.5*oe),this.lines([[ne-2*de,0],[de*ze,0,de,Se-Se*ze,de,Se],[0,oe-2*Se],[0,Se*ze,-de*ze,Se,-de,Se],[2*de-ne,0],[-de*ze,0,-de,-Se*ze,-de,-Se],[0,2*Se-oe],[0,-Se*ze,de*ze,-Se,de,-Se]],b+de,B,[1,1],Ie,!0),this},g.__private__.ellipse=g.ellipse=function(b,B,ne,oe,de){if(isNaN(b)||isNaN(B)||isNaN(ne)||isNaN(oe)||!Li(de))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Se=4/3*(Math.SQRT2-1)*ne,Ie=4/3*(Math.SQRT2-1)*oe;return ts(b+ne,B),ns(b+ne,B-Ie,b+Se,B-oe,b,B-oe),ns(b-Se,B-oe,b-ne,B-Ie,b-ne,B),ns(b-ne,B+Ie,b-Se,B+oe,b,B+oe),ns(b+Se,B+oe,b+ne,B+Ie,b+ne,B),Vl(de),this},g.__private__.circle=g.circle=function(b,B,ne,oe){if(isNaN(b)||isNaN(B)||isNaN(ne)||!Li(oe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(b,B,ne,ne,oe)},g.setFont=function(b,B,ne){return ne&&(B=V(B,ne)),Nt=yo(b,B,{disableWarning:!1}),this};var Bl=g.__private__.getFont=g.getFont=function(){return Bt[yo.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var b,B,ne={};for(b in tn)if(tn.hasOwnProperty(b))for(B in ne[b]=[],tn[b])tn[b].hasOwnProperty(B)&&ne[b].push(B);return ne},g.addFont=function(b,B,ne,oe,de){var Se=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Se.indexOf(arguments[3])!==-1?de=arguments[3]:arguments[3]&&Se.indexOf(arguments[3])==-1&&(ne=V(ne,oe)),de=de||"Identity-H",Ml.call(this,b,B,ne,de)};var zt,Ul=t.lineWidth||.200025,da=g.__private__.getLineWidth=g.getLineWidth=function(){return Ul},zl=g.__private__.setLineWidth=g.setLineWidth=function(b){return Ul=b,ie(P(T(b))+" w"),this};g.__private__.setLineDash=ot.API.setLineDash=ot.API.setLineDashPattern=function(b,B){if(b=b||[],B=B||0,isNaN(B)||!Array.isArray(b))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return b=b.map(function(ne){return P(T(ne))}).join(" "),B=P(T(B)),ie("["+b+"] "+B+" d"),this};var ql=g.__private__.getLineHeight=g.getLineHeight=function(){return Fe*zt};g.__private__.getLineHeight=g.getLineHeight=function(){return Fe*zt};var Hl=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(b){return typeof(b=b||1.15)=="number"&&(zt=b),this},xo=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return zt};Hl(t.lineHeight);var yi=g.__private__.getHorizontalCoordinate=function(b){return T(b)},Wn=g.__private__.getVerticalCoordinate=function(b){return S===_.ADVANCED?b:it[$].mediaBox.topRightY-it[$].mediaBox.bottomLeftY-T(b)},tu=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(b){return P(yi(b))},js=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(b){return P(Wn(b))},sr=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Xr(sr)},g.__private__.setStrokeColor=g.setDrawColor=function(b,B,ne,oe){return sr=Or({ch1:b,ch2:B,ch3:ne,ch4:oe,pdfColorType:"draw",precision:2}),ie(sr),this};var fa=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Xr(fa)},g.__private__.setFillColor=g.setFillColor=function(b,B,ne,oe){return fa=Or({ch1:b,ch2:B,ch3:ne,ch4:oe,pdfColorType:"fill",precision:2}),ie(fa),this};var rs=t.textColor||"0 g",pa=g.__private__.getTextColor=g.getTextColor=function(){return Xr(rs)};g.__private__.setTextColor=g.setTextColor=function(b,B,ne,oe){return rs=Or({ch1:b,ch2:B,ch3:ne,ch4:oe,pdfColorType:"text",precision:3}),this};var bo=t.charSpace,ma=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(bo||0)};g.__private__.setCharSpace=g.setCharSpace=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return bo=b,this};var $l=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(b){var B=g.CapJoinStyles[b];if(B===void 0)throw new Error("Line cap style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $l=B,ie(B+" J"),this};var ga=0;g.__private__.setLineJoin=g.setLineJoin=function(b){var B=g.CapJoinStyles[b];if(B===void 0)throw new Error("Line join style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ga=B,ie(B+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(b){if(b=b||0,isNaN(b))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ie(P(T(b))+" M"),this},g.GState=Sf,g.setGState=function(b){(b=typeof b=="string"?ln[ir[b]]:Ls(null,b)).equals(di)||(ie("/"+b.id+" gs"),di=b)};var Ls=function(b,B){if(!b||!ir[b]){var ne=!1;for(var oe in ln)if(ln.hasOwnProperty(oe)&&ln[oe].equals(B)){ne=!0;break}if(ne)B=ln[oe];else{var de="GS"+(Object.keys(ln).length+1).toString(10);ln[de]=B,B.id=de}return b&&(ir[b]=B.id),Dt.publish("addGState",B),B}};g.addGState=function(b,B){return Ls(b,B),this},g.saveGraphicsState=function(){return ie("q"),Ii.push({key:Nt,size:Fe,color:rs}),this},g.restoreGraphicsState=function(){ie("Q");var b=Ii.pop();return Nt=b.key,Fe=b.size,rs=b.color,di=null,this},g.setCurrentTransformationMatrix=function(b){return ie(b.toString()+" cm"),this},g.comment=function(b){return ie("#"+b),this};var wo=function(b,B){var ne=b||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ne},set:function(Se){isNaN(Se)||(ne=parseFloat(Se))}});var oe=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return oe},set:function(Se){isNaN(Se)||(oe=parseFloat(Se))}});var de="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return de},set:function(Se){de=Se.toString()}}),this},ya=function(b,B,ne,oe){wo.call(this,b,B),this.type="rect";var de=ne||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return de},set:function(Ie){isNaN(Ie)||(de=parseFloat(Ie))}});var Se=oe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Se},set:function(Ie){isNaN(Ie)||(Se=parseFloat(Ie))}}),this},_o=function(){this.page=nn,this.currentPage=$,this.pages=Le.slice(0),this.pagesContext=it.slice(0),this.x=_n,this.y=Pt,this.matrix=Yr,this.width=Rs($),this.height=br($),this.outputDestination=Be,this.id="",this.objectNumber=-1};_o.prototype.restore=function(){nn=this.page,$=this.currentPage,it=this.pagesContext,Le=this.pages,_n=this.x,Pt=this.y,Yr=this.matrix,xa($,this.width),ba($,this.height),Be=this.outputDestination};var va=function(b,B,ne,oe,de){fi.push(new _o),nn=$=0,Le=[],_n=b,Pt=B,Yr=de,Vr([ne,oe])},nu=function(b){if(yr[b])fi.pop().restore();else{var B=new _o,ne="Xo"+(Object.keys(Fn).length+1).toString(10);B.id=ne,yr[b]=ne,Fn[ne]=B,Dt.publish("addFormObject",B),fi.pop().restore()}};for(var is in g.beginFormObject=function(b,B,ne,oe,de){return va(b,B,ne,oe,de),this},g.endFormObject=function(b){return nu(b),this},g.doFormObject=function(b,B){var ne=Fn[yr[b]];return ie("q"),ie(B.toString()+" cm"),ie("/"+ne.id+" Do"),ie("Q"),this},g.getFormObject=function(b){var B=Fn[yr[b]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},g.save=function(b,B){return b=b||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(oc(aa(es()),b),typeof oc.unload=="function"&&ct.setTimeout&&setTimeout(oc.unload,911),this):new Promise(function(ne,oe){try{var de=oc(aa(es()),b);typeof oc.unload=="function"&&ct.setTimeout&&setTimeout(oc.unload,911),ne(de)}catch(Se){oe(Se.message)}})},ot.API)ot.API.hasOwnProperty(is)&&(is==="events"&&ot.API.events.length?function(b,B){var ne,oe,de;for(de=B.length-1;de!==-1;de--)ne=B[de][0],oe=B[de][1],b.subscribe.apply(b,[ne].concat(typeof oe=="function"?[oe]:oe))}(Dt,ot.API.events):g[is]=ot.API[is]);var Rs=g.getPageWidth=function(b){return(it[b=b||$].mediaBox.topRightX-it[b].mediaBox.bottomLeftX)/We},xa=g.setPageWidth=function(b,B){it[b].mediaBox.topRightX=B*We+it[b].mediaBox.bottomLeftX},br=g.getPageHeight=function(b){return(it[b=b||$].mediaBox.topRightY-it[b].mediaBox.bottomLeftY)/We},ba=g.setPageHeight=function(b,B){it[b].mediaBox.topRightY=B*We+it[b].mediaBox.bottomLeftY};return g.internal={pdfEscape:Sn,getStyle:Zc,getFont:Bl,getFontSize:qe,getCharSpace:ma,getTextColor:pa,getLineHeight:ql,getLineHeightFactor:xo,getLineWidth:da,write:mt,getHorizontalCoordinate:yi,getVerticalCoordinate:Wn,getCoordinateString:tu,getVerticalCoordinateString:js,collections:{},newObject:kn,newAdditionalObject:ra,newObjectDeferred:Nn,newObjectDeferredBegin:Bn,getFilters:Fr,putStream:Pn,events:Dt,scaleFactor:We,pageSize:{getWidth:function(){return Rs($)},setWidth:function(b){xa($,b)},getHeight:function(){return br($)},setHeight:function(b){ba($,b)}},encryptionOptions:h,encryption:un,getEncryptor:Jc,output:la,getNumberOfPages:Ht,pages:Le,out:ie,f2:M,f3:k,getPageInfo:Fl,getPageInfoByObjId:ht,getCurrentPageInfo:Is,getPDFVersion:w,Point:wo,Rectangle:ya,Matrix:Ye,hasHotfix:Ts},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Rs($)},set:function(b){xa($,b)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return br($)},set:function(b){ba($,b)},enumerable:!0,configurable:!0}),Qc.call(g,Me),Nt="F1",go(i,n),Dt.publish("initialized"),g}Nu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Nu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Nu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Nu.prototype.processOwnerPassword=function(t,e){return Lv(jv(e).substr(0,5),t)},Nu.prototype.encryptor=function(t,e){var n=jv(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Lv(n,r)}},Sf.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Kt(t)!==Kt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},ot.API={events:[]},ot.version="2.5.2";var Cn=ot.API,o5=1,$c=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},xt=function(t){return t.toFixed(2)},Da=function(t){return t.toFixed(5)};Cn.__acroform__={};var hi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},ON=function(t){return t*o5},Us=function(t){var e=new rk,n=Xe.internal.getHeight(t)||0,r=Xe.internal.getWidth(t)||0;return e.BBox=[0,0,Number(xt(r)),Number(xt(n))],e},qz=Cn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Hz=Cn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},$z=Cn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Rn=Cn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return $z(t,e-1)},Dn=Cn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return qz(t,e-1)},Mn=Cn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Hz(t,e-1)},Wz=Cn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(xt(l.lowerLeft_X)),Number(xt(l.lowerLeft_Y)),Number(xt(l.upperRight_X)),Number(xt(l.upperRight_Y))]},Gz=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Rv(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+xt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Us(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Rv=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(k){return k.split(`
`)}):i.map(function(k){return[k]});var s=n,o=Xe.internal.getHeight(t)||0;o=o<0?-o:o;var a=Xe.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(k,T,D){if(k+1<i.length){var Y=T+" "+i[k+1][0];return nm(Y,t,D).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,h,p=nm("3",t,s).height,m=t.multiline?o-s:(o-p)/2,g=m+=2,v=0,w=0,C=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+nm(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var x="",_=0,S=0;S<i.length;S++)if(i.hasOwnProperty(S)){var I=!1;if(i[S].length!==1&&C!==i[S].length-1){if((p+2)*(_+2)+2>o)continue e;x+=i[S][C],I=!0,w=S,S--}else{x=(x+=i[S][C]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var F=parseInt(S),V=l(F,x,s),P=S>=i.length-1;if(V&&!P){x+=" ",C=0;continue}if(V||P){if(P)w=F;else if(t.multiline&&(p+2)*(_+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(_+2)+2>o)continue e;w=F}}for(var N="",L=v;L<=w;L++){var M=i[L];if(t.multiline){if(L===w){N+=M[C]+" ",C=(C+1)%M.length;continue}if(L===v){N+=M[M.length-1]+" ";continue}}N+=M[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,h=nm(N,t,s).width,t.textAlign){case"right":u=a-h-2;break;case"center":u=(a-h)/2;break;case"left":default:u=2}e+=xt(u)+" "+xt(g)+` Td
`,e+="("+$c(N)+`) Tj
`,e+=-xt(u)+` 0 Td
`,g=-(s+2),h=0,v=I?w:w+1,_++,x=""}break}return r.text=e,r.fontSize=s,r},nm=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Kz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Yz=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Qz=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Kt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},Xz=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(_s.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Kz)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");o5=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new ik,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&Yz(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=Wz(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Xe.createDefaultAppearanceStream(a),Kt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=Gz(a);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var p="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var g=a.appearanceStreamContent[m];if(p+="/"+m+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var v=g[o];typeof v=="function"&&(v=v.call(i,a)),p+="/"+o+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=g)=="function"&&(v=v.call(i,a)),p+="/"+o+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&Qz(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},nk=Cn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Kt(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+$c(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Q1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+$c(r(t))+")"},Ws=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ws.prototype.toString=function(){return this.objId+" 0 R"},Ws.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ws.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:nk(i,this.objId,this.scope)}):i instanceof Ws?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var rk=function(){Ws.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};hi(rk,Ws);var ik=function(){Ws.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+$c(n(t))+")"}},set:function(n){t=n}})};hi(ik,Ws);var _s=function t(){Ws.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Rn(e,3)},set:function(x){x?this.F=Dn(e,3):this.F=Mn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');n=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Pg)return;s="FieldObject"+t.FieldNum++}var x=function(_){return _};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+$c(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/o5:u},set:function(x){u=x}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(x){h=x}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Pg||this instanceof fl))return Q1(p,this.objId,this.scope)},set:function(x){x=x.toString(),p=x}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Yn?m:Q1(m,this.objId,this.scope)},set:function(x){x=x.toString(),m=this instanceof Yn?x:x.substr(0,1)==="("?vu(x.substr(1,x.length-2)):vu(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yn?vu(m.substr(1,m.length-1)):m},set:function(x){x=x.toString(),m=this instanceof Yn?"/"+x:x}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Yn?g:Q1(g,this.objId,this.scope)},set:function(x){x=x.toString(),g=this instanceof Yn?x:x.substr(0,1)==="("?vu(x.substr(1,x.length-2)):vu(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yn?vu(g.substr(1,g.length-1)):g},set:function(x){x=x.toString(),g=this instanceof Yn?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(x){x=!!x,w=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(x){v=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,1)},set:function(x){x?this.Ff=Dn(this.Ff,1):this.Ff=Mn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,2)},set:function(x){x?this.Ff=Dn(this.Ff,2):this.Ff=Mn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,3)},set:function(x){x?this.Ff=Dn(this.Ff,3):this.Ff=Mn(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');C=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(C){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};hi(_s,Ws);var bc=function(){_s.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nk(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,18)},set:function(n){n?this.Ff=Dn(this.Ff,18):this.Ff=Mn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Dn(this.Ff,19):this.Ff=Mn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,20)},set:function(n){n?(this.Ff=Dn(this.Ff,20),e.sort()):this.Ff=Mn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,22)},set:function(n){n?this.Ff=Dn(this.Ff,22):this.Ff=Mn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,23)},set:function(n){n?this.Ff=Dn(this.Ff,23):this.Ff=Mn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,27)},set:function(n){n?this.Ff=Dn(this.Ff,27):this.Ff=Mn(this.Ff,27)}}),this.hasAppearanceStream=!1};hi(bc,_s);var wc=function(){bc.call(this),this.fontName="helvetica",this.combo=!1};hi(wc,bc);var _c=function(){wc.call(this),this.combo=!0};hi(_c,wc);var Od=function(){_c.call(this),this.edit=!0};hi(Od,_c);var Yn=function(){_s.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,15)},set:function(n){n?this.Ff=Dn(this.Ff,15):this.Ff=Mn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,16)},set:function(n){n?this.Ff=Dn(this.Ff,16):this.Ff=Mn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,17)},set:function(n){n?this.Ff=Dn(this.Ff,17):this.Ff=Mn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,26)},set:function(n){n?this.Ff=Dn(this.Ff,26):this.Ff=Mn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+$c(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Kt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};hi(Yn,_s);var Fd=function(){Yn.call(this),this.pushButton=!0};hi(Fd,Yn);var Nc=function(){Yn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};hi(Nc,Yn);var Pg=function(){var t,e;_s.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+$c(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Kt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Xe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};hi(Pg,_s),Nc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Nc.prototype.createOption=function(t){var e=new Pg;return e.Parent=this,e.optionName=t,this.Kids.push(e),Jz.call(this.scope,e),e};var Vd=function(){Yn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Xe.CheckBox.createAppearanceStream()};hi(Vd,Yn);var fl=function(){_s.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,13)},set:function(e){e?this.Ff=Dn(this.Ff,13):this.Ff=Mn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,21)},set:function(e){e?this.Ff=Dn(this.Ff,21):this.Ff=Mn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,23)},set:function(e){e?this.Ff=Dn(this.Ff,23):this.Ff=Mn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,24)},set:function(e){e?this.Ff=Dn(this.Ff,24):this.Ff=Mn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,25)},set:function(e){e?this.Ff=Dn(this.Ff,25):this.Ff=Mn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,26)},set:function(e){e?this.Ff=Dn(this.Ff,26):this.Ff=Mn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};hi(fl,_s);var Bd=function(){fl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Rn(this.Ff,14)},set:function(t){t?this.Ff=Dn(this.Ff,14):this.Ff=Mn(this.Ff,14)}}),this.password=!0};hi(Bd,fl);var Xe={CheckBox:{createAppearanceStream:function(){return{N:{On:Xe.CheckBox.YesNormal},D:{On:Xe.CheckBox.YesPushDown,Off:Xe.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Us(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=Rv(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+xt(Xe.internal.getWidth(t))+" "+xt(Xe.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+xt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Us(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Xe.internal.getHeight(t),o=Xe.internal.getWidth(t),a=Rv(t,t.caption);return i.push("1 g"),i.push("0 0 "+xt(o)+" "+xt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+xt(o-1)+" "+xt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+xt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Us(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+xt(Xe.internal.getWidth(t))+" "+xt(Xe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Xe.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Xe.RadioButton.Circle.YesNormal,e.D[t]=Xe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Us(t);e.scope=t.scope;var n=[],r=Xe.internal.getWidth(t)<=Xe.internal.getHeight(t)?Xe.internal.getWidth(t)/4:Xe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Xe.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Da(Xe.internal.getWidth(t)/2)+" "+Da(Xe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Us(t);e.scope=t.scope;var n=[],r=Xe.internal.getWidth(t)<=Xe.internal.getHeight(t)?Xe.internal.getWidth(t)/4:Xe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Xe.internal.Bezier_C).toFixed(5)),o=Number((r*Xe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Da(Xe.internal.getWidth(t)/2)+" "+Da(Xe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Da(Xe.internal.getWidth(t)/2)+" "+Da(Xe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Us(t);e.scope=t.scope;var n=[],r=Xe.internal.getWidth(t)<=Xe.internal.getHeight(t)?Xe.internal.getWidth(t)/4:Xe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Xe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Da(Xe.internal.getWidth(t)/2)+" "+Da(Xe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Xe.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Xe.RadioButton.Cross.YesNormal,e.D[t]=Xe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Us(t);e.scope=t.scope;var n=[],r=Xe.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+xt(Xe.internal.getWidth(t)-2)+" "+xt(Xe.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(xt(r.x1.x)+" "+xt(r.x1.y)+" m"),n.push(xt(r.x2.x)+" "+xt(r.x2.y)+" l"),n.push(xt(r.x4.x)+" "+xt(r.x4.y)+" m"),n.push(xt(r.x3.x)+" "+xt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Us(t);e.scope=t.scope;var n=Xe.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+xt(Xe.internal.getWidth(t))+" "+xt(Xe.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+xt(Xe.internal.getWidth(t)-2)+" "+xt(Xe.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(xt(n.x1.x)+" "+xt(n.x1.y)+" m"),r.push(xt(n.x2.x)+" "+xt(n.x2.y)+" l"),r.push(xt(n.x4.x)+" "+xt(n.x4.y)+" m"),r.push(xt(n.x3.x)+" "+xt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Us(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+xt(Xe.internal.getWidth(t))+" "+xt(Xe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Xe.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Xe.internal.getWidth(t),n=Xe.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Xe.internal.getWidth=function(t){var e=0;return Kt(t)==="object"&&(e=ON(t.Rect[2])),e},Xe.internal.getHeight=function(t){var e=0;return Kt(t)==="object"&&(e=ON(t.Rect[3])),e};var Jz=Cn.addField=function(t){if(Xz(this,t),!(t instanceof _s))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Cn.AcroFormChoiceField=bc,Cn.AcroFormListBox=wc,Cn.AcroFormComboBox=_c,Cn.AcroFormEditBox=Od,Cn.AcroFormButton=Yn,Cn.AcroFormPushButton=Fd,Cn.AcroFormRadioButton=Nc,Cn.AcroFormCheckBox=Vd,Cn.AcroFormTextField=fl,Cn.AcroFormPasswordField=Bd,Cn.AcroFormAppearance=Xe,Cn.AcroForm={ChoiceField:bc,ListBox:wc,ComboBox:_c,EditBox:Od,Button:Yn,PushButton:Fd,RadioButton:Nc,CheckBox:Vd,TextField:fl,PasswordField:Bd,Appearance:Xe},ot.AcroForm={ChoiceField:bc,ListBox:wc,ComboBox:_c,EditBox:Od,Button:Yn,PushButton:Fd,RadioButton:Nc,CheckBox:Vd,TextField:fl,PasswordField:Bd,Appearance:Xe};var Zz=ot.AcroForm;function sk(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(k,T){var D,Y,ae,Z,J,K=e;if((T=T||e)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(V(k))for(J in n)for(ae=n[J],D=0;D<ae.length;D+=1){for(Z=!0,Y=0;Y<ae[D].length;Y+=1)if(ae[D][Y]!==void 0&&ae[D][Y]!==k[Y]){Z=!1;break}if(Z===!0){K=J;break}}else for(J in n)for(ae=n[J],D=0;D<ae.length;D+=1){for(Z=!0,Y=0;Y<ae[D].length;Y+=1)if(ae[D][Y]!==void 0&&ae[D][Y]!==k.charCodeAt(Y)){Z=!1;break}if(Z===!0){K=J;break}}return K===e&&T!==e&&(K=T),K},i=function k(T){for(var D=this.internal.write,Y=this.internal.putStream,ae=(0,this.internal.getFilters)();ae.indexOf("FlateEncode")!==-1;)ae.splice(ae.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:T.width}),Z.push({key:"Height",value:T.height}),T.colorSpace===C.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===C.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var J="",K=0,X=T.transparency.length;K<X;K++)J+=T.transparency[K]+" "+T.transparency[K]+" ";Z.push({key:"Mask",value:"["+J+"]"})}T.sMask!==void 0&&Z.push({key:"SMask",value:T.objectId+1+" 0 R"});var se=T.filter!==void 0?["/"+T.filter]:void 0;if(Y({data:T.data,additionalKeyValues:Z,alreadyAppliedFilters:se,objectId:T.objectId}),D("endobj"),"sMask"in T&&T.sMask!==void 0){var me="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,O={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:me,data:T.sMask};"filter"in T&&(O.filter=T.filter),k.call(this,O)}if(T.colorSpace===C.INDEXED){var $=this.internal.newObject();Y({data:N(new Uint8Array(T.palette)),objectId:$}),D("endobj")}},s=function(){var k=this.internal.collections.addImage_images;for(var T in k)i.call(this,k[T])},o=function(){var k,T=this.internal.collections.addImage_images,D=this.internal.write;for(var Y in T)D("/I"+(k=T[Y]).index,k.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var k=this.internal.collections.addImage_images;return a.call(this),k},u=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(k){return typeof t["process"+k.toUpperCase()]=="function"},p=function(k){return Kt(k)==="object"&&k.nodeType===1},m=function(k,T){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var D=""+k.getAttribute("src");if(D.indexOf("data:image/")===0)return Md(unescape(D).split("base64,").pop());var Y=t.loadFile(D,!0);if(Y!==void 0)return Y}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var ae;switch(T){case"PNG":ae="image/png";break;case"WEBP":ae="image/webp";break;case"JPEG":case"JPG":default:ae="image/jpeg"}return Md(k.toDataURL(ae,1).split("base64,").pop())}},g=function(k){var T=this.internal.collections.addImage_images;if(T){for(var D in T)if(k===T[D].alias)return T[D]}},v=function(k,T,D){return k||T||(k=-96,T=-96),k<0&&(k=-1*D.width*72/k/this.internal.scaleFactor),T<0&&(T=-1*D.height*72/T/this.internal.scaleFactor),k===0&&(k=T*D.width/D.height),T===0&&(T=k*D.height/D.width),[k,T]},w=function(k,T,D,Y,ae,Z){var J=v.call(this,D,Y,ae),K=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,se=l.call(this);if(D=J[0],Y=J[1],se[ae.index]=ae,Z){Z*=Math.PI/180;var me=Math.cos(Z),O=Math.sin(Z),$=function(te){return te.toFixed(4)},Q=[$(me),$(O),$(-1*O),$(me),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,K(k),X(T+Y),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([K(D),"0","0",K(Y),"0","0","cm"].join(" "))):this.internal.write([K(D),"0","0",K(Y),K(k),X(T+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ae.index+" Do"),this.internal.write("Q")},C=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=t.__addimage__.sHashCode=function(k){var T,D,Y=0;if(typeof k=="string")for(D=k.length,T=0;T<D;T++)Y=(Y<<5)-Y+k.charCodeAt(T),Y|=0;else if(V(k))for(D=k.byteLength/2,T=0;T<D;T++)Y=(Y<<5)-Y+k[T],Y|=0;return Y},S=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var T=!0;return k.length===0&&(T=!1),k.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(T=!1),T},I=t.__addimage__.extractImageFromDataUrl=function(k){var T=(k=k||"").split("base64,"),D=null;if(T.length===2){var Y=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(T[0]);Array.isArray(Y)&&(D={mimeType:Y[1],charset:Y[2],data:T[1]})}return D},F=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(k){return F()&&k instanceof ArrayBuffer};var V=t.__addimage__.isArrayBufferView=function(k){return F()&&typeof Uint32Array<"u"&&(k instanceof Int8Array||k instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)},P=t.__addimage__.binaryStringToUint8Array=function(k){for(var T=k.length,D=new Uint8Array(T),Y=0;Y<T;Y++)D[Y]=k.charCodeAt(Y);return D},N=t.__addimage__.arrayBufferToBinaryString=function(k){for(var T="",D=V(k)?k:new Uint8Array(k),Y=0;Y<D.length;Y+=8192)T+=String.fromCharCode.apply(null,D.subarray(Y,Y+8192));return T};t.addImage=function(){var k,T,D,Y,ae,Z,J,K,X;if(typeof arguments[1]=="number"?(T=e,D=arguments[1],Y=arguments[2],ae=arguments[3],Z=arguments[4],J=arguments[5],K=arguments[6],X=arguments[7]):(T=arguments[1],D=arguments[2],Y=arguments[3],ae=arguments[4],Z=arguments[5],J=arguments[6],K=arguments[7],X=arguments[8]),Kt(k=arguments[0])==="object"&&!p(k)&&"imageData"in k){var se=k;k=se.imageData,T=se.format||T||e,D=se.x||D||0,Y=se.y||Y||0,ae=se.w||se.width||ae,Z=se.h||se.height||Z,J=se.alias||J,K=se.compression||K,X=se.rotation||se.angle||X}var me=this.internal.getFilters();if(K===void 0&&me.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(D)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var O=L.call(this,k,T,J,K);return w.call(this,D,Y,ae,Z,O,X),this};var L=function(k,T,D,Y){var ae,Z,J;if(typeof k=="string"&&r(k)===e){k=unescape(k);var K=M(k,!1);(K!==""||(K=t.loadFile(k,!0))!==void 0)&&(k=K)}if(p(k)&&(k=m(k,T)),T=r(k,T),!h(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((J=D)==null||J.length===0)&&(D=function(X){return typeof X=="string"||V(X)?_(X):V(X.data)?_(X.data):null}(k)),(ae=g.call(this,D))||(F()&&(k instanceof Uint8Array||T==="RGBA"||(Z=k,k=P(k))),ae=this["process"+T.toUpperCase()](k,u.call(this),D,function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in t.image_compression?X:x.NONE}(Y),Z)),!ae)throw new Error("An unknown error occurred whilst processing the image.");return ae},M=t.__addimage__.convertBase64ToBinaryString=function(k,T){var D;T=typeof T!="boolean"||T;var Y,ae="";if(typeof k=="string"){Y=(D=I(k))!==null?D.data:k;try{ae=Md(Y)}catch(Z){if(T)throw S(Y)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ae};t.getImageProperties=function(k){var T,D,Y="";if(p(k)&&(k=m(k)),typeof k=="string"&&r(k)===e&&((Y=M(k,!1))===""&&(Y=t.loadFile(k)||""),k=Y),D=r(k),!h(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(!F()||k instanceof Uint8Array||(k=P(k)),!(T=this["process"+D.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=D,T}})(ot.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};ot.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,h=!1,p=0;p<u.length&&!h;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var g=this.internal.pdfEscape,v=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(w.objId),_=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(x(r.contents))+")",s+=" /Popup "+C.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(x(_))+") >>",w.content=s;var S=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+S,r.open&&(s+=" /Open true"),s+=" >>",C.content=s,this.internal.write(w.objId,"0 R",C.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var I=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(v(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+I+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var F=this.annotations._nameMap[r.options.name];r.options.pageNumber=F.page,r.options.top=F.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var V=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+V+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var h=this.splitTextToSize(n,a).length;o=Math.ceil(u*h)}else a=l,o=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(ot.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},a=t.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&i.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(w){var C=0,x=n,_="",S=0;for(C=0;C<w.length;C+=1)x[w.charCodeAt(C)]!==void 0?(S++,typeof(x=x[w.charCodeAt(C)])=="number"&&(_+=String.fromCharCode(x),x=n,S=0),C===w.length-1&&(x=n,_+=w.charAt(C-(S-1)),C-=S-1,S=0)):(x=n,_+=w.charAt(C-S),C-=S,S=0);return _};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(w,C,x){return o(w)?s(w)===!1?-1:!u(w)||!o(C)&&!o(x)||!o(x)&&a(C)||a(w)&&!o(C)||a(w)&&l(C)||a(w)&&a(C)?0:h(w)&&o(C)&&!a(C)&&o(x)&&u(x)?3:a(w)||!o(x)?1:2:-1},g=function(w){var C=0,x=0,_=0,S="",I="",F="",V=(w=w||"").split("\\s+"),P=[];for(C=0;C<V.length;C+=1){for(P.push(""),x=0;x<V[C].length;x+=1)S=V[C][x],I=V[C][x-1],F=V[C][x+1],o(S)?(_=m(S,I,F),P[C]+=_!==-1?String.fromCharCode(e[S.charCodeAt(0)][_]):S):P[C]+=S;P[C]=p(P[C])}return P.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var w,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(C)){var _=0;for(x=[],_=0;_<C.length;_+=1)Array.isArray(C[_])?x.push([g(C[_][0]),C[_][1],C[_][2]]):x.push([g(C[_])]);w=x}else w=g(C);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",v])}(ot.API),ot.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ot.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(w){v=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,g=0,v=0,w=0,C=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=u.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,I){return S.concat(C.splitTextToSize(I,x))},[])):l=Array.isArray(l)?l:[l];for(var _=0;_<l.length;_++)g<(w=this.getStringUnitWidth(l[_],{font:p})*h)&&(g=w);return g!==0&&(v=l.length),{w:g/=m,h:Math.max((v*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,g&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,h,p,m){if(r.call(this),!h)throw new Error("No data for PDF table.");var g,v,w,C,x=[],_=[],S=[],I={},F={},V=[],P=[],N=(m=m||{}).autoSize||!1,L=m.printHeaders!==!1,M=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,k=m.margins||Object.assign({width:this.getPageWidth()},e),T=typeof m.padding=="number"?m.padding:3,D=m.headerBackgroundColor||"#c8c8c8",Y=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=Y,this.setFontSize(M),p==null)_=x=Object.keys(h[0]),S=x.map(function(){return"left"});else if(Array.isArray(p)&&Kt(p[0])==="object")for(x=p.map(function(se){return se.name}),_=p.map(function(se){return se.prompt||se.name||""}),S=p.map(function(se){return se.align||"left"}),g=0;g<p.length;g+=1)F[p[g].name]=p[g].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(_=x=p,S=x.map(function(){return"left"}));if(N||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<x.length;g+=1){for(I[C=x[g]]=h.map(function(se){return se[C]}),this.setFont(void 0,"bold"),V.push(this.getTextDimensions(_[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=I[C],this.setFont(void 0,"normal"),w=0;w<v.length;w+=1)V.push(this.getTextDimensions(v[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);F[C]=Math.max.apply(null,V)+T+T,V=[]}if(L){var ae={};for(g=0;g<x.length;g+=1)ae[x[g]]={},ae[x[g]].text=_[g],ae[x[g]].align=S[g];var Z=a.call(this,ae,F);P=x.map(function(se){return new s(l,u,F[se],Z,ae[se].text,void 0,ae[se].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var J=p.reduce(function(se,me){return se[me.name]=me.align,se},{});for(g=0;g<h.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:h[g]},this);var K=a.call(this,h[g],F);for(w=0;w<x.length;w+=1){var X=h[g][x[w]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:w,data:X},this),o.call(this,new s(l,u,F[x[w]],K,X,g+2,J[x[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(g){var v=l[g];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[g]-h-h)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/m+h+h},this).reduce(function(g,v){return Math.max(g,v)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){h=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,m.push(h)),h.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(v)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),n=!1}}(ot.API);var ok={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},ak=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Dv=sk(ak),lk=[100,200,300,400,500,600,700,800,900],eq=sk(lk);function Mv(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return ok[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof Dv[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function FN(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var tq={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},VN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function BN(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function nq(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},tq,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=Mv(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+BN(s)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var h=Dv[l],p=h<=Dv.normal?-1:1,m=FN(u,ak,h,p);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var h=ok[l],p=0;p<h.length;++p)if(u[h[p]])return u[h[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var h=eq[l],p=FN(u,lk,h,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+BN(s)+"'.");return o}function UN(t){return t.trimLeft()}function rq(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function iq(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var rm,zN,qN,X1=["times"];(function(t){var e,n,r,i,s,o,a,l,u,h=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new l,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new h}]);var p=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=O;Object.defineProperty(this,"pdf",{get:function(){return $}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(Ae){Q=!!Ae}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Ae){te=!!Ae}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(Ae){isNaN(Ae)||(re=Ae)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(Ae){isNaN(Ae)||(pe=Ae)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ae){var ie;typeof Ae=="number"?ie=[Ae,Ae,Ae,Ae]:((ie=new Array(4))[0]=Ae[0],ie[1]=Ae.length>=2?Ae[1]:ie[0],ie[2]=Ae.length>=3?Ae[2]:ie[0],ie[3]=Ae.length>=4?Ae[3]:ie[1]),u.margin=ie}});var ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ge},set:function(Ae){ge=Ae}});var be=0;Object.defineProperty(this,"lastBreak",{get:function(){return be},set:function(Ae){be=Ae}});var Re=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Re},set:function(Ae){Re=Ae}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ae){Ae instanceof h&&(u=Ae)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ae){u.path=Ae}});var Le=[];Object.defineProperty(this,"ctxStack",{get:function(){return Le},set:function(Ae){Le=Ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ae){var ie;ie=m(Ae),this.ctx.fillStyle=ie.style,this.ctx.isFillTransparent=ie.a===0,this.ctx.fillOpacity=ie.a,this.pdf.setFillColor(ie.r,ie.g,ie.b,{a:ie.a}),this.pdf.setTextColor(ie.r,ie.g,ie.b,{a:ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ae){var ie=m(Ae);this.ctx.strokeStyle=ie.style,this.ctx.isStrokeTransparent=ie.a===0,this.ctx.strokeOpacity=ie.a,ie.a===0?this.pdf.setDrawColor(255,255,255):(ie.a,this.pdf.setDrawColor(ie.r,ie.g,ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ae){["butt","round","square"].indexOf(Ae)!==-1&&(this.ctx.lineCap=Ae,this.pdf.setLineCap(Ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ae){isNaN(Ae)||(this.ctx.lineWidth=Ae,this.pdf.setLineWidth(Ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ae){["bevel","round","miter"].indexOf(Ae)!==-1&&(this.ctx.lineJoin=Ae,this.pdf.setLineJoin(Ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ae){isNaN(Ae)||(this.ctx.miterLimit=Ae,this.pdf.setMiterLimit(Ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ae){this.ctx.textBaseline=Ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ae){["right","end","center","left","start"].indexOf(Ae)!==-1&&(this.ctx.textAlign=Ae)}});var Ve=null;function Be(Ae,ie){if(Ve===null){var mt=function(Je){var Me=[];return Object.keys(Je).forEach(function(Fe){Je[Fe].forEach(function($e){var qe=null;switch($e){case"bold":qe={family:Fe,weight:"bold"};break;case"italic":qe={family:Fe,style:"italic"};break;case"bolditalic":qe={family:Fe,weight:"bold",style:"italic"};break;case"":case"normal":qe={family:Fe}}qe!==null&&(qe.ref={name:Fe,style:$e},Me.push(qe))})}),Me}(Ae.getFontList());Ve=function(Je){for(var Me={},Fe=0;Fe<Je.length;++Fe){var $e=Mv(Je[Fe]),qe=$e.family,et=$e.stretch,ut=$e.style,gt=$e.weight;Me[qe]=Me[qe]||{},Me[qe][et]=Me[qe][et]||{},Me[qe][et][ut]=Me[qe][et][ut]||{},Me[qe][et][ut][gt]=$e}return Me}(mt.concat(ie))}return Ve}var rt=null;Object.defineProperty(this,"fontFaces",{get:function(){return rt},set:function(Ae){Ve=null,rt=Ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ae){var ie;if(this.ctx.font=Ae,(ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ae))!==null){var mt=ie[1],Je=(ie[2],ie[3]),Me=ie[4],Fe=(ie[5],ie[6]),$e=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Me)[2];Me=Math.floor($e==="px"?parseFloat(Me)*this.pdf.internal.scaleFactor:$e==="em"?parseFloat(Me)*this.pdf.getFontSize():parseFloat(Me)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Me);var qe=function(at){var Nt,We,_n=[],Pt=at.trim();if(Pt==="")return X1;if(Pt in VN)return[VN[Pt]];for(;Pt!=="";){switch(We=null,Nt=(Pt=UN(Pt)).charAt(0)){case'"':case"'":We=rq(Pt.substring(1),Nt);break;default:We=iq(Pt)}if(We===null||(_n.push(We[0]),(Pt=UN(We[1]))!==""&&Pt.charAt(0)!==","))return X1;Pt=Pt.replace(/^,/,"")}return _n}(Fe);if(this.fontFaces){var et=nq(Be(this.pdf,this.fontFaces),qe.map(function(at){return{family:at,stretch:"normal",weight:Je,style:mt}}));this.pdf.setFont(et.ref.name,et.ref.style)}else{var ut="";(Je==="bold"||parseInt(Je,10)>=700||mt==="bold")&&(ut="bold"),mt==="italic"&&(ut+="italic"),ut.length===0&&(ut="normal");for(var gt="",tt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<qe.length;lt++){if(this.pdf.internal.getFont(qe[lt],ut,{noFallback:!0,disableWarning:!0})!==void 0){gt=qe[lt];break}if(ut==="bolditalic"&&this.pdf.internal.getFont(qe[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)gt=qe[lt],ut="bold";else if(this.pdf.internal.getFont(qe[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){gt=qe[lt],ut="normal";break}}if(gt===""){for(var Rt=0;Rt<qe.length;Rt++)if(tt[qe[Rt]]){gt=tt[qe[Rt]];break}}gt=gt===""?"Times":gt,this.pdf.setFont(gt,ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ae){this.ctx.globalCompositeOperation=Ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ae){this.ctx.globalAlpha=Ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ae){this.ctx.lineDashOffset=Ae,me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ae){this.ctx.lineDash=Ae,me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ae){this.ctx.ignoreClearRect=!!Ae}})};p.prototype.setLineDash=function(O){this.lineDash=O},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){I.call(this,"fill",!1)},p.prototype.stroke=function(){I.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(O,$){if(isNaN(O)||isNaN($))throw en.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new o(O,$));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(O,$)},p.prototype.closePath=function(){var O=new o(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&Kt(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){O=new o(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},p.prototype.lineTo=function(O,$){if(isNaN(O)||isNaN($))throw en.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new o(O,$));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(Q.x,Q.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),I.call(this,null,!0)},p.prototype.quadraticCurveTo=function(O,$,Q,te){if(isNaN(Q)||isNaN(te)||isNaN(O)||isNaN($))throw en.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(Q,te)),pe=this.ctx.transform.applyToPoint(new o(O,$));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},p.prototype.bezierCurveTo=function(O,$,Q,te,re,pe){if(isNaN(re)||isNaN(pe)||isNaN(O)||isNaN($)||isNaN(Q)||isNaN(te))throw en.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ge=this.ctx.transform.applyToPoint(new o(re,pe)),be=this.ctx.transform.applyToPoint(new o(O,$)),Re=this.ctx.transform.applyToPoint(new o(Q,te));this.path.push({type:"bct",x1:be.x,y1:be.y,x2:Re.x,y2:Re.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new o(ge.x,ge.y)},p.prototype.arc=function(O,$,Q,te,re,pe){if(isNaN(O)||isNaN($)||isNaN(Q)||isNaN(te)||isNaN(re))throw en.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var ge=this.ctx.transform.applyToPoint(new o(O,$));O=ge.x,$=ge.y;var be=this.ctx.transform.applyToPoint(new o(0,Q)),Re=this.ctx.transform.applyToPoint(new o(0,0));Q=Math.sqrt(Math.pow(be.x-Re.x,2)+Math.pow(be.y-Re.y,2))}Math.abs(re-te)>=2*Math.PI&&(te=0,re=2*Math.PI),this.path.push({type:"arc",x:O,y:$,radius:Q,startAngle:te,endAngle:re,counterclockwise:pe})},p.prototype.arcTo=function(O,$,Q,te,re){throw new Error("arcTo not implemented.")},p.prototype.rect=function(O,$,Q,te){if(isNaN(O)||isNaN($)||isNaN(Q)||isNaN(te))throw en.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,$),this.lineTo(O+Q,$),this.lineTo(O+Q,$+te),this.lineTo(O,$+te),this.lineTo(O,$),this.lineTo(O+Q,$),this.lineTo(O,$)},p.prototype.fillRect=function(O,$,Q,te){if(isNaN(O)||isNaN($)||isNaN(Q)||isNaN(te))throw en.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,$,Q,te),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},p.prototype.strokeRect=function(O,$,Q,te){if(isNaN(O)||isNaN($)||isNaN(Q)||isNaN(te))throw en.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(O,$,Q,te),this.stroke())},p.prototype.clearRect=function(O,$,Q,te){if(isNaN(O)||isNaN($)||isNaN(Q)||isNaN(te))throw en.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,$,Q,te))},p.prototype.save=function(O){O=typeof O!="boolean"||O;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage($),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},p.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage($),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(O){var $,Q,te,re;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))$=0,Q=0,te=0,re=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(pe!==null)$=parseInt(pe[1]),Q=parseInt(pe[2]),te=parseInt(pe[3]),re=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)$=parseInt(pe[1]),Q=parseInt(pe[2]),te=parseInt(pe[3]),re=parseFloat(pe[4]);else{if(re=1,typeof O=="string"&&O.charAt(0)!=="#"){var ge=new ZE(O);O=ge.ok?ge.toHex():"#000000"}O.length===4?($=O.substring(1,2),$+=$,Q=O.substring(2,3),Q+=Q,te=O.substring(3,4),te+=te):($=O.substring(1,3),Q=O.substring(3,5),te=O.substring(5,7)),$=parseInt($,16),Q=parseInt(Q,16),te=parseInt(te,16)}}return{r:$,g:Q,b:te,a:re,style:O}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(O,$,Q,te){if(isNaN($)||isNaN(Q)||typeof O!="string")throw en.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!g.call(this)){var re=K(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;T.call(this,{text:O,x:$,y:Q,scale:pe,angle:re,align:this.textAlign,maxWidth:te})}},p.prototype.strokeText=function(O,$,Q,te){if(isNaN($)||isNaN(Q)||typeof O!="string")throw en.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){te=isNaN(te)?void 0:te;var re=K(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;T.call(this,{text:O,x:$,y:Q,scale:pe,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:te})}},p.prototype.measureText=function(O){if(typeof O!="string")throw en.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,Q=this.pdf.internal.scaleFactor,te=$.internal.getFontSize(),re=$.getStringUnitWidth(O)*te/$.internal.scaleFactor,pe=function(ge){var be=(ge=ge||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return be}}),this};return new pe({width:re*=Math.round(96*Q/72*1e4)/1e4})},p.prototype.scale=function(O,$){if(isNaN(O)||isNaN($))throw en.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new l(O,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.rotate=function(O){if(isNaN(O))throw en.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new l(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply($)},p.prototype.translate=function(O,$){if(isNaN(O)||isNaN($))throw en.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new l(1,0,0,1,O,$);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.transform=function(O,$,Q,te,re,pe){if(isNaN(O)||isNaN($)||isNaN(Q)||isNaN(te)||isNaN(re)||isNaN(pe))throw en.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ge=new l(O,$,Q,te,re,pe);this.ctx.transform=this.ctx.transform.multiply(ge)},p.prototype.setTransform=function(O,$,Q,te,re,pe){O=isNaN(O)?1:O,$=isNaN($)?0:$,Q=isNaN(Q)?0:Q,te=isNaN(te)?1:te,re=isNaN(re)?0:re,pe=isNaN(pe)?0:pe,this.ctx.transform=new l(O,$,Q,te,re,pe)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(O,$,Q,te,re,pe,ge,be,Re){var Le=this.pdf.getImageProperties(O),Ve=1,Be=1,rt=1,Ae=1;te!==void 0&&be!==void 0&&(rt=be/te,Ae=Re/re,Ve=Le.width/te*be/te,Be=Le.height/re*Re/re),pe===void 0&&(pe=$,ge=Q,$=0,Q=0),te!==void 0&&be===void 0&&(be=te,Re=re),te===void 0&&be===void 0&&(be=Le.width,Re=Le.height);for(var ie,mt=this.ctx.transform.decompose(),Je=K(mt.rotate.shx),Me=new l,Fe=(Me=(Me=(Me=Me.multiply(mt.translate)).multiply(mt.skew)).multiply(mt.scale)).applyToRectangle(new a(pe-$*rt,ge-Q*Ae,te*Ve,re*Be)),$e=C.call(this,Fe),qe=[],et=0;et<$e.length;et+=1)qe.indexOf($e[et])===-1&&qe.push($e[et]);if(S(qe),this.autoPaging)for(var ut=qe[0],gt=qe[qe.length-1],tt=ut;tt<gt+1;tt++){this.pdf.setPage(tt);var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rt=tt===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=tt===1?0:at+(tt-2)*Nt;if(this.ctx.clip_path.length!==0){var _n=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(ie,this.posX+this.margin[3],-We+Rt+this.ctx.prevPageLastElemOffset),F.call(this,"fill",!0),this.path=_n}var Pt=JSON.parse(JSON.stringify(Fe));Pt=_([Pt],this.posX+this.margin[3],-We+Rt+this.ctx.prevPageLastElemOffset)[0];var Yr=(tt>ut||tt<gt)&&w.call(this);Yr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,Nt,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",Pt.x,Pt.y,Pt.w,Pt.h,null,null,Je),Yr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",Fe.x,Fe.y,Fe.w,Fe.h,null,null,Je)};var C=function(O,$,Q){var te=[];$=$||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":te.push(Math.floor((O.y+re)/Q)+1);break;case"arc":te.push(Math.floor((O.y+re-O.radius)/Q)+1),te.push(Math.floor((O.y+re+O.radius)/Q)+1);break;case"qct":var pe=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);te.push(Math.floor((pe.y+re)/Q)+1),te.push(Math.floor((pe.y+pe.h+re)/Q)+1);break;case"bct":var ge=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);te.push(Math.floor((ge.y+re)/Q)+1),te.push(Math.floor((ge.y+ge.h+re)/Q)+1);break;case"rect":te.push(Math.floor((O.y+re)/Q)+1),te.push(Math.floor((O.y+O.h+re)/Q)+1)}for(var be=0;be<te.length;be+=1)for(;this.pdf.internal.getNumberOfPages()<te[be];)x.call(this);return te},x=function(){var O=this.fillStyle,$=this.strokeStyle,Q=this.font,te=this.lineCap,re=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=$,this.font=Q,this.lineCap=te,this.lineWidth=re,this.lineJoin=pe},_=function(O,$,Q){for(var te=0;te<O.length;te++)switch(O[te].type){case"bct":O[te].x2+=$,O[te].y2+=Q;case"qct":O[te].x1+=$,O[te].y1+=Q;case"mt":case"lt":case"arc":default:O[te].x+=$,O[te].y+=Q}return O},S=function(O){return O.sort(function($,Q){return $-Q})},I=function(O,$){for(var Q,te,re=this.fillStyle,pe=this.strokeStyle,ge=this.lineCap,be=this.lineWidth,Re=Math.abs(be*this.ctx.transform.scaleX),Le=this.lineJoin,Ve=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),rt=[],Ae=0;Ae<Be.length;Ae++)if(Be[Ae].x!==void 0)for(var ie=C.call(this,Be[Ae]),mt=0;mt<ie.length;mt+=1)rt.indexOf(ie[mt])===-1&&rt.push(ie[mt]);for(var Je=0;Je<rt.length;Je++)for(;this.pdf.internal.getNumberOfPages()<rt[Je];)x.call(this);if(S(rt),this.autoPaging)for(var Me=rt[0],Fe=rt[rt.length-1],$e=Me;$e<Fe+1;$e++){this.pdf.setPage($e),this.fillStyle=re,this.strokeStyle=pe,this.lineCap=ge,this.lineWidth=Re,this.lineJoin=Le;var qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],et=$e===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=$e===1?0:ut+($e-2)*gt;if(this.ctx.clip_path.length!==0){var lt=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(Q,this.posX+this.margin[3],-tt+et+this.ctx.prevPageLastElemOffset),F.call(this,O,!0),this.path=lt}if(te=JSON.parse(JSON.stringify(Ve)),this.path=_(te,this.posX+this.margin[3],-tt+et+this.ctx.prevPageLastElemOffset),$===!1||$e===0){var Rt=($e>Me||$e<Fe)&&w.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,gt,null).clip().discardPath()),F.call(this,O,$),Rt&&this.pdf.restoreGraphicsState()}this.lineWidth=be}else this.lineWidth=Re,F.call(this,O,$),this.lineWidth=be;this.path=Ve},F=function(O,$){if((O!=="stroke"||$||!v.call(this))&&(O==="stroke"||$||!g.call(this))){for(var Q,te,re=[],pe=this.path,ge=0;ge<pe.length;ge++){var be=pe[ge];switch(be.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:be,deltas:[],abs:[]});break;case"lt":var Re=re.length;if(pe[ge-1]&&!isNaN(pe[ge-1].x)&&(Q=[be.x-pe[ge-1].x,be.y-pe[ge-1].y],Re>0)){for(;Re>=0;Re--)if(re[Re-1].close!==!0&&re[Re-1].begin!==!0){re[Re-1].deltas.push(Q),re[Re-1].abs.push(be);break}}break;case"bct":Q=[be.x1-pe[ge-1].x,be.y1-pe[ge-1].y,be.x2-pe[ge-1].x,be.y2-pe[ge-1].y,be.x-pe[ge-1].x,be.y-pe[ge-1].y],re[re.length-1].deltas.push(Q);break;case"qct":var Le=pe[ge-1].x+2/3*(be.x1-pe[ge-1].x),Ve=pe[ge-1].y+2/3*(be.y1-pe[ge-1].y),Be=be.x+2/3*(be.x1-be.x),rt=be.y+2/3*(be.y1-be.y),Ae=be.x,ie=be.y;Q=[Le-pe[ge-1].x,Ve-pe[ge-1].y,Be-pe[ge-1].x,rt-pe[ge-1].y,Ae-pe[ge-1].x,ie-pe[ge-1].y],re[re.length-1].deltas.push(Q);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(be)}}te=$?null:O==="stroke"?"stroke":"fill";for(var mt=!1,Je=0;Je<re.length;Je++)if(re[Je].arc)for(var Me=re[Je].abs,Fe=0;Fe<Me.length;Fe++){var $e=Me[Fe];$e.type==="arc"?N.call(this,$e.x,$e.y,$e.radius,$e.startAngle,$e.endAngle,$e.counterclockwise,void 0,$,!mt):D.call(this,$e.x,$e.y),mt=!0}else if(re[Je].close===!0)this.pdf.internal.out("h"),mt=!1;else if(re[Je].begin!==!0){var qe=re[Je].start.x,et=re[Je].start.y;Y.call(this,re[Je].deltas,qe,et),mt=!0}te&&L.call(this,te),$&&M.call(this)}},V=function(O){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-Q;case"top":return O+$-Q;case"hanging":return O+$-2*Q;case"middle":return O+$/2-Q;case"ideographic":return O;case"alphabetic":default:return O}},P=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function($,Q){this.colorStops.push([$,Q])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(O,$,Q,te,re,pe,ge,be,Re){for(var Le=Z.call(this,Q,te,re,pe),Ve=0;Ve<Le.length;Ve++){var Be=Le[Ve];Ve===0&&(Re?k.call(this,Be.x1+O,Be.y1+$):D.call(this,Be.x1+O,Be.y1+$)),ae.call(this,O,$,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}be?M.call(this):L.call(this,ge)},L=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(O,$){this.pdf.internal.out(n(O)+" "+r($)+" m")},T=function(O){var $;switch(O.align){case"right":case"end":$="right";break;case"center":$="center";break;case"left":case"start":default:$="left"}var Q=this.pdf.getTextDimensions(O.text),te=V.call(this,O.y),re=P.call(this,te)-Q.h,pe=this.ctx.transform.applyToPoint(new o(O.x,te)),ge=this.ctx.transform.decompose(),be=new l;be=(be=(be=be.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var Re,Le,Ve,Be=this.ctx.transform.applyToRectangle(new a(O.x,te,Q.w,Q.h)),rt=be.applyToRectangle(new a(O.x,re,Q.w,Q.h)),Ae=C.call(this,rt),ie=[],mt=0;mt<Ae.length;mt+=1)ie.indexOf(Ae[mt])===-1&&ie.push(Ae[mt]);if(S(ie),this.autoPaging)for(var Je=ie[0],Me=ie[ie.length-1],Fe=Je;Fe<Me+1;Fe++){this.pdf.setPage(Fe);var $e=Fe===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[2],ut=et-this.margin[0],gt=this.pdf.internal.pageSize.width-this.margin[1],tt=gt-this.margin[3],lt=Fe===1?0:qe+(Fe-2)*ut;if(this.ctx.clip_path.length!==0){var Rt=this.path;Re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(Re,this.posX+this.margin[3],-1*lt+$e),F.call(this,"fill",!0),this.path=Rt}var at=_([JSON.parse(JSON.stringify(rt))],this.posX+this.margin[3],-lt+$e+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*O.scale),Ve=this.lineWidth,this.lineWidth=Ve*O.scale);var Nt=this.autoPaging!=="text";if(Nt||at.y+at.h<=et){if(Nt||at.y>=$e&&at.x<=gt){var We=Nt?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||gt-at.x)[0],_n=_([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-lt+$e+this.ctx.prevPageLastElemOffset)[0],Pt=Nt&&(Fe>Je||Fe<Me)&&w.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,ut,null).clip().discardPath()),this.pdf.text(We,_n.x,_n.y,{angle:O.angle,align:$,renderingMode:O.renderingMode}),Pt&&this.pdf.restoreGraphicsState()}}else at.y<et&&(this.ctx.prevPageLastElemOffset+=et-at.y);O.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=Ve)}else O.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*O.scale),Ve=this.lineWidth,this.lineWidth=Ve*O.scale),this.pdf.text(O.text,pe.x+this.posX,pe.y+this.posY,{angle:O.angle,align:$,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=Ve)},D=function(O,$,Q,te){Q=Q||0,te=te||0,this.pdf.internal.out(n(O+Q)+" "+r($+te)+" l")},Y=function(O,$,Q){return this.pdf.lines(O,$,Q,null,null)},ae=function(O,$,Q,te,re,pe,ge,be){this.pdf.internal.out([e(i(Q+O)),e(s(te+$)),e(i(re+O)),e(s(pe+$)),e(i(ge+O)),e(s(be+$)),"c"].join(" "))},Z=function(O,$,Q,te){for(var re=2*Math.PI,pe=Math.PI/2;$>Q;)$-=re;var ge=Math.abs(Q-$);ge<re&&te&&(ge=re-ge);for(var be=[],Re=te?-1:1,Le=$;ge>1e-5;){var Ve=Le+Re*Math.min(ge,pe);be.push(J.call(this,O,Le,Ve)),ge-=Math.abs(Ve-Le),Le=Ve}return be},J=function(O,$,Q){var te=(Q-$)/2,re=O*Math.cos(te),pe=O*Math.sin(te),ge=re,be=-pe,Re=ge*ge+be*be,Le=Re+ge*re+be*pe,Ve=4/3*(Math.sqrt(2*Re*Le)-Le)/(ge*pe-be*re),Be=ge-Ve*be,rt=be+Ve*ge,Ae=Be,ie=-rt,mt=te+$,Je=Math.cos(mt),Me=Math.sin(mt);return{x1:O*Math.cos($),y1:O*Math.sin($),x2:Be*Je-rt*Me,y2:Be*Me+rt*Je,x3:Ae*Je-ie*Me,y3:Ae*Me+ie*Je,x4:O*Math.cos(Q),y4:O*Math.sin(Q)}},K=function(O){return 180*O/Math.PI},X=function(O,$,Q,te,re,pe){var ge=O+.5*(Q-O),be=$+.5*(te-$),Re=re+.5*(Q-re),Le=pe+.5*(te-pe),Ve=Math.min(O,re,ge,Re),Be=Math.max(O,re,ge,Re),rt=Math.min($,pe,be,Le),Ae=Math.max($,pe,be,Le);return new a(Ve,rt,Be-Ve,Ae-rt)},se=function(O,$,Q,te,re,pe,ge,be){var Re,Le,Ve,Be,rt,Ae,ie,mt,Je,Me,Fe,$e,qe,et,ut=Q-O,gt=te-$,tt=re-Q,lt=pe-te,Rt=ge-re,at=be-pe;for(Le=0;Le<41;Le++)Je=(ie=(Ve=O+(Re=Le/40)*ut)+Re*((rt=Q+Re*tt)-Ve))+Re*(rt+Re*(re+Re*Rt-rt)-ie),Me=(mt=(Be=$+Re*gt)+Re*((Ae=te+Re*lt)-Be))+Re*(Ae+Re*(pe+Re*at-Ae)-mt),Le==0?(Fe=Je,$e=Me,qe=Je,et=Me):(Fe=Math.min(Fe,Je),$e=Math.min($e,Me),qe=Math.max(qe,Je),et=Math.max(et,Me));return new a(Math.round(Fe),Math.round($e),Math.round(qe-Fe),Math.round(et-$e))},me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,$,Q=(O=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:$}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(ot.API),function(t){var e=function(s){var o,a,l,u,h,p,m,g,v,w;for(a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(h=((h=((h=((h=(h-(w=h%85))/85)-(v=h%85))/85)-(g=h%85))/85)-(m=h%85))/85)%85,a.push(p+33,m+33,g+33,v+33,w+33)):a.push(122);return function(C,x){for(var _=x;_>0;_--)C.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,u,h,p=String,m="length",g=255,v="charCodeAt",w="slice",C="replace";for(s[w](-2),s=s[w](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),l=[],u=0,h=(s+=o="uuuuu"[w](s[m]%5||5))[m];h>u;u+=5)a=52200625*(s[v](u)-33)+614125*(s[v](u+1)-33)+7225*(s[v](u+2)-33)+85*(s[v](u+3)-33)+(s[v](u+4)-33),l.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(x,_){for(var S=_;S>0;S--)x.pop()}(l,o[m]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Tv(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(ot.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,h){var p=new XMLHttpRequest,m=0,g=function(v){var w=v.length,C=[],x=String.fromCharCode;for(m=0;m<w;m+=1)C.push(x(255&v.charCodeAt(m)));return C.join("")};if(p.open("GET",l,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?h(g(this.responseText)):h(void 0)}),p.send(null),u&&p.status===200)return g(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(ot.API),function(t){function e(){return(ct.html2canvas?Promise.resolve(ct.html2canvas):Av(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(ct.DOMPurify?Promise.resolve(ct.DOMPurify):Av(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Kt(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,h){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)h!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||p.appendChild(l(m,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var g=u[m],v=g.src.find(function(w){return w.format==="truetype"});v&&l.addFont(v.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||ot.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,h){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,u),p}).then(u,h).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),h=l.call(u,o,a);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,ot.getPageSize=function(o,a,l){if(Kt(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,p=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var g,v=0,w=0;if(m.hasOwnProperty(p))v=m[p][1]/h,w=m[p][0]/h;else try{v=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",w>v&&(g=w,w=v,v=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>w&&(g=w,w=v,v=g)}return{width:w,height:v,unit:a,k:h,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Mv):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(ot.API),ot.API.addJS=function(t){return qN=t,this.internal.events.subscribe("postPutResources",function(){rm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(rm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+qN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){rm!==void 0&&zN!==void 0&&this.internal.out("/Names <</JavaScript "+rm+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(s=0;s<u;s++){var p=n.internal.newObject();h.push(p);var m=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<h.length;s++)n.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(ot.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,h=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var m,g=256*p.charCodeAt(4)+p.charCodeAt(5),v=p.length,w={width:0,height:0,numcomponents:1},C=4;C<v;C+=2){if(C+=g,e.indexOf(p.charCodeAt(C+1))!==-1){m=256*p.charCodeAt(C+5)+p.charCodeAt(C+6),w={width:256*p.charCodeAt(C+7)+p.charCodeAt(C+8),height:m,numcomponents:p.charCodeAt(C+9)};break}g=256*p.charCodeAt(C+2)+p.charCodeAt(C+3)}return w}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return h}}(ot.API);var xu,im,HN,$N,WN,sq=function(){var t,e,n;function r(s){var o,a,l,u,h,p,m,g,v,w,C,x,_,S;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),v=(function(){var I,F;for(F=[],I=0;I<4;++I)F.push(String.fromCharCode(this.data[this.pos++]));return F}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*h/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,x=0;0<=o?x<o:x>o;0<=o?++x:--x)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(_=0;0<=w?_<w:_>w;0<=w?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(C=this.read(o)).indexOf(0),g=String.fromCharCode.apply(String,C.slice(0,m)),this.text[g]=String.fromCharCode.apply(String,C.slice(m+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function h(p,m,g,v){var w,C,x,_,S,I,F,V,P,N,L,M,k,T,D,Y,ae,Z,J,K,X,se=Math.ceil((u.width-p)/g),me=Math.ceil((u.height-m)/v),O=u.width==se&&u.height==me;for(T=o*se,M=O?a:new Uint8Array(T*me),I=s.length,k=0,C=0;k<me&&l<I;){switch(s[l++]){case 0:for(_=ae=0;ae<T;_=ae+=1)M[C++]=s[l++];break;case 1:for(_=Z=0;Z<T;_=Z+=1)w=s[l++],S=_<o?0:M[C-o],M[C++]=(w+S)%256;break;case 2:for(_=J=0;J<T;_=J+=1)w=s[l++],x=(_-_%o)/o,D=k&&M[(k-1)*T+x*o+_%o],M[C++]=(D+w)%256;break;case 3:for(_=K=0;K<T;_=K+=1)w=s[l++],x=(_-_%o)/o,S=_<o?0:M[C-o],D=k&&M[(k-1)*T+x*o+_%o],M[C++]=(w+Math.floor((S+D)/2))%256;break;case 4:for(_=X=0;X<T;_=X+=1)w=s[l++],x=(_-_%o)/o,S=_<o?0:M[C-o],k===0?D=Y=0:(D=M[(k-1)*T+x*o+_%o],Y=x&&M[(k-1)*T+(x-1)*o+_%o]),F=S+D-Y,V=Math.abs(F-S),N=Math.abs(F-D),L=Math.abs(F-Y),P=V<=N&&V<=L?S:N<=L?D:Y,M[C++]=(w+P)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!O){var $=((m+k*v)*u.width+p)*o,Q=k*T;for(_=0;_<se;_+=1){for(var te=0;te<o;te+=1)a[$++]=M[Q++];$+=(g-1)*o}}k++}}return s=Mz(s),u.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,u,h,p,m,g;for(a=this.palette,h=this.transparency.indexed||[],u=new Uint8Array((h.length||0)+a.length),l=0,s=0,o=p=0,m=a.length;p<m;o=p+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(g=h[s++])!=null?g:255;return u},r.prototype.copyToImageData=function(s,o){var a,l,u,h,p,m,g,v,w,C,x;if(l=this.colors,w=null,a=this.hasAlphaChannel,this.palette.length&&(w=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),l=4,a=!0),v=(u=s.data||s).length,p=w||o,h=m=0,l===1)for(;h<v;)g=w?4*o[h/4]:m,C=p[g++],u[h++]=C,u[h++]=C,u[h++]=C,u[h++]=a?p[g++]:255,m=g;else for(;h<v;)g=w?4*o[h/4]:m,u[h++]=p[g++],u[h++]=p[g++],u[h++]=p[g++],u[h++]=a?p[g++]:255,m=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(ct)==="[object Window]"){try{e=ct.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,u,h,p,m,g;if(this.animation){for(g=[],a=h=0,p=(m=this.animation.frames).length;h<p;a=++h)o=m[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,g.push(o.image=t(l));return g}},r.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,u,h,p,m=this;return a=0,p=this.animation,u=p.numFrames,l=p.frames,h=p.numPlays,(o=function(){var g,v;if(g=a++%u,v=l[g],m.renderFrame(s,g),u>1&&a/u<h)return m.animation._timeout=setTimeout(o,v.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function oq(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,h=[],p=0,m=null,g=0,v=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];p=t[e++]|t[e++]<<8,m=t[e++],!(1&w)&&(m=null),g=w>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var C=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,I=t[e++],F=I>>6&1,V=1<<(7&I)+1,P=a,N=l,L=!1;I>>7&&(L=!0,P=e,N=V,e+=3*V);var M=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}h.push({x:C,y:x,width:_,height:S,has_local_palette:L,palette_offset:P,palette_size:N,data_offset:M,data_length:e-M,transparent_index:m,interlaced:!!F,delay:p,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return v},this.frameInfo=function(T){if(T<0||T>=h.length)throw new Error("Frame index out of range.");return h[T]},this.decodeAndBlitFrameBGRA=function(T,D){var Y=this.frameInfo(T),ae=Y.width*Y.height,Z=new Uint8Array(ae);GN(t,Y.data_offset,Z,ae);var J=Y.palette_offset,K=Y.transparent_index;K===null&&(K=256);var X=Y.width,se=n-X,me=X,O=4*(Y.y*n+Y.x),$=4*((Y.y+Y.height)*n+Y.x),Q=O,te=4*se;Y.interlaced===!0&&(te+=4*n*7);for(var re=8,pe=0,ge=Z.length;pe<ge;++pe){var be=Z[pe];if(me===0&&(me=X,(Q+=te)>=$&&(te=4*se+4*n*(re-1),Q=O+(X+se)*(re<<1),re>>=1)),be===K)Q+=4;else{var Re=t[J+3*be],Le=t[J+3*be+1],Ve=t[J+3*be+2];D[Q++]=Ve,D[Q++]=Le,D[Q++]=Re,D[Q++]=255}--me}},this.decodeAndBlitFrameRGBA=function(T,D){var Y=this.frameInfo(T),ae=Y.width*Y.height,Z=new Uint8Array(ae);GN(t,Y.data_offset,Z,ae);var J=Y.palette_offset,K=Y.transparent_index;K===null&&(K=256);var X=Y.width,se=n-X,me=X,O=4*(Y.y*n+Y.x),$=4*((Y.y+Y.height)*n+Y.x),Q=O,te=4*se;Y.interlaced===!0&&(te+=4*n*7);for(var re=8,pe=0,ge=Z.length;pe<ge;++pe){var be=Z[pe];if(me===0&&(me=X,(Q+=te)>=$&&(te=4*se+4*n*(re-1),Q=O+(X+se)*(re<<1),re>>=1)),be===K)Q+=4;else{var Re=t[J+3*be],Le=t[J+3*be+1],Ve=t[J+3*be+2];D[Q++]=Re,D[Q++]=Le,D[Q++]=Ve,D[Q++]=255}--me}}}function GN(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,h=0,p=0,m=0,g=t[e++],v=new Int32Array(4096),w=null;;){for(;h<16&&g!==0;)p|=t[e++]<<h,h+=8,g===1?g=t[e++]:--g;if(h<l)break;var C=p&u;if(p>>=l,h-=l,C!==s){if(C===o)break;for(var x=C<a?C:w,_=0,S=x;S>s;)S=v[S]>>8,++_;var I=S;if(m+_+(x!==C?1:0)>r)return void en.log("Warning, gif stream longer than expected.");n[m++]=I;var F=m+=_;for(x!==C&&(n[m++]=I),S=x;_--;)S=v[S],n[--F]=255&S,S>>=8;w!==null&&a<4096&&(v[a++]=w<<8|I,a>=u+1&&l<12&&(++l,u=u<<1|1)),w=C}else a=o+1,u=(1<<(l=i+1))-1,w=null}return m!==r&&en.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function J1(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),h=new Array(64),p=new Array(65535),m=new Array(65535),g=new Array(64),v=new Array(64),w=[],C=0,x=7,_=new Array(64),S=new Array(64),I=new Array(64),F=new Array(256),V=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(O,$){for(var Q=0,te=0,re=new Array,pe=1;pe<=16;pe++){for(var ge=1;ge<=O[pe];ge++)re[$[te]]=[],re[$[te]][0]=Q,re[$[te]][1]=pe,te++,Q++;Q*=2}return re}function J(O){for(var $=O[0],Q=O[1]-1;Q>=0;)$&1<<Q&&(C|=1<<x),Q--,--x<0&&(C==255?(K(255),K(0)):K(C),x=7,C=0)}function K(O){w.push(O)}function X(O){K(O>>8&255),K(255&O)}function se(O,$,Q,te,re){for(var pe,ge=re[0],be=re[240],Re=function(Me,Fe){var $e,qe,et,ut,gt,tt,lt,Rt,at,Nt,We=0;for(at=0;at<8;++at){$e=Me[We],qe=Me[We+1],et=Me[We+2],ut=Me[We+3],gt=Me[We+4],tt=Me[We+5],lt=Me[We+6];var _n=$e+(Rt=Me[We+7]),Pt=$e-Rt,Yr=qe+lt,Bt=qe-lt,tn=et+tt,Ii=et-tt,jt=ut+gt,Ss=ut-gt,ln=_n+jt,ir=_n-jt,di=Yr+tn,nn=Yr-tn;Me[We]=ln+di,Me[We+4]=ln-di;var it=.707106781*(nn+ir);Me[We+2]=ir+it,Me[We+6]=ir-it;var Dt=.382683433*((ln=Ss+Ii)-(nn=Bt+Pt)),ji=.5411961*ln+Dt,Fn=1.306562965*nn+Dt,yr=.707106781*(di=Ii+Bt),fi=Pt+yr,Ye=Pt-yr;Me[We+5]=Ye+ji,Me[We+3]=Ye-ji,Me[We+1]=fi+Fn,Me[We+7]=fi-Fn,We+=8}for(We=0,at=0;at<8;++at){$e=Me[We],qe=Me[We+8],et=Me[We+16],ut=Me[We+24],gt=Me[We+32],tt=Me[We+40],lt=Me[We+48];var Qr=$e+(Rt=Me[We+56]),vr=$e-Rt,Vn=qe+lt,kn=qe-lt,Nn=et+tt,Bn=et-tt,ra=ut+gt,Xi=ut-gt,xr=Qr+ra,Xr=Qr-ra,Or=Vn+Nn,Fr=Vn-Nn;Me[We]=xr+Or,Me[We+32]=xr-Or;var Pn=.707106781*(Fr+Xr);Me[We+16]=Xr+Pn,Me[We+48]=Xr-Pn;var pi=.382683433*((xr=Xi+Bn)-(Fr=kn+vr)),As=.5411961*xr+pi,Cs=1.306562965*Fr+pi,Es=.707106781*(Or=Bn+kn),ho=vr+Es,fo=vr-Es;Me[We+40]=fo+As,Me[We+24]=fo-As,Me[We+8]=ho+Cs,Me[We+56]=ho-Cs,We++}for(at=0;at<64;++at)Nt=Me[at]*Fe[at],g[at]=Nt>0?Nt+.5|0:Nt-.5|0;return g}(O,$),Le=0;Le<64;++Le)v[P[Le]]=Re[Le];var Ve=v[0]-Q;Q=v[0],Ve==0?J(te[0]):(J(te[m[pe=32767+Ve]]),J(p[pe]));for(var Be=63;Be>0&&v[Be]==0;)Be--;if(Be==0)return J(ge),Q;for(var rt,Ae=1;Ae<=Be;){for(var ie=Ae;v[Ae]==0&&Ae<=Be;)++Ae;var mt=Ae-ie;if(mt>=16){rt=mt>>4;for(var Je=1;Je<=rt;++Je)J(be);mt&=15}pe=32767+v[Ae],J(re[(mt<<4)+m[pe]]),J(p[pe]),Ae++}return Be!=63&&J(ge),Q}function me(O){O=Math.min(Math.max(O,1),100),s!=O&&(function($){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var re=o((Q[te]*$+50)/100);re=Math.min(Math.max(re,1),255),a[P[te]]=re}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var be=o((pe[ge]*$+50)/100);be=Math.min(Math.max(be,1),255),l[P[ge]]=be}for(var Re=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Le=0,Ve=0;Ve<8;Ve++)for(var Be=0;Be<8;Be++)u[Le]=1/(a[P[Le]]*Re[Ve]*Re[Be]*8),h[Le]=1/(l[P[Le]]*Re[Ve]*Re[Be]*8),Le++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,$){$&&me($),w=new Array,C=0,x=7,X(65496),X(65504),X(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),X(1),X(1),K(0),K(0),function(){X(65499),X(132),K(0);for(var qe=0;qe<64;qe++)K(a[qe]);K(1);for(var et=0;et<64;et++)K(l[et])}(),function(qe,et){X(65472),X(17),K(8),X(et),X(qe),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(O.width,O.height),function(){X(65476),X(418),K(0);for(var qe=0;qe<16;qe++)K(N[qe+1]);for(var et=0;et<=11;et++)K(L[et]);K(16);for(var ut=0;ut<16;ut++)K(M[ut+1]);for(var gt=0;gt<=161;gt++)K(k[gt]);K(1);for(var tt=0;tt<16;tt++)K(T[tt+1]);for(var lt=0;lt<=11;lt++)K(D[lt]);K(17);for(var Rt=0;Rt<16;Rt++)K(Y[Rt+1]);for(var at=0;at<=161;at++)K(ae[at])}(),X(65498),X(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var Q=0,te=0,re=0;C=0,x=7,this.encode.displayName="_encode_";for(var pe,ge,be,Re,Le,Ve,Be,rt,Ae,ie=O.data,mt=O.width,Je=O.height,Me=4*mt,Fe=0;Fe<Je;){for(pe=0;pe<Me;){for(Le=Me*Fe+pe,Be=-1,rt=0,Ae=0;Ae<64;Ae++)Ve=Le+(rt=Ae>>3)*Me+(Be=4*(7&Ae)),Fe+rt>=Je&&(Ve-=Me*(Fe+1+rt-Je)),pe+Be>=Me&&(Ve-=pe+Be-Me+4),ge=ie[Ve++],be=ie[Ve++],Re=ie[Ve++],_[Ae]=(V[ge]+V[be+256>>0]+V[Re+512>>0]>>16)-128,S[Ae]=(V[ge+768>>0]+V[be+1024>>0]+V[Re+1280>>0]>>16)-128,I[Ae]=(V[ge+1280>>0]+V[be+1536>>0]+V[Re+1792>>0]>>16)-128;Q=se(_,u,Q,e,r),te=se(S,h,te,n,i),re=se(I,h,re,n,i),pe+=32}Fe+=8}if(x>=0){var $e=[];$e[1]=x+1,$e[0]=(1<<x+1)-1,J($e)}return X(65497),new Uint8Array(w)},t=t||50,function(){for(var O=String.fromCharCode,$=0;$<256;$++)F[$]=O($)}(),e=Z(N,L),n=Z(T,D),r=Z(M,k),i=Z(Y,ae),function(){for(var O=1,$=2,Q=1;Q<=15;Q++){for(var te=O;te<$;te++)m[32767+te]=Q,p[32767+te]=[],p[32767+te][1]=Q,p[32767+te][0]=te;for(var re=-($-1);re<=-O;re++)m[32767+re]=Q,p[32767+re]=[],p[32767+re][1]=Q,p[32767+re][0]=$-1+re;O<<=1,$<<=1}}(),function(){for(var O=0;O<256;O++)V[O]=19595*O,V[O+256>>0]=38470*O,V[O+512>>0]=7471*O+32768,V[O+768>>0]=-11059*O,V[O+1024>>0]=-21709*O,V[O+1280>>0]=32768*O+8421375,V[O+1536>>0]=-27439*O,V[O+1792>>0]=-5329*O}(),me(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function us(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function KN(t){function e(N){if(!N)throw Error("assert :P")}function n(N,L,M){for(var k=0;4>k;k++)if(N[L+k]!=M.charCodeAt(k))return!0;return!1}function r(N,L,M,k,T){for(var D=0;D<T;D++)N[L+D]=M[k+D]}function i(N,L,M,k){for(var T=0;T<k;T++)N[L+T]=M}function s(N){return new Int32Array(N)}function o(N,L){for(var M=[],k=0;k<N;k++)M.push(new L);return M}function a(N,L){var M=[];return function k(T,D,Y){for(var ae=Y[D],Z=0;Z<ae&&(T.push(Y.length>D+1?[]:new L),!(Y.length<D+1));Z++)k(T[Z],D+1,Y)}(M,0,N),M}var l=function(){var N=this;function L(d,y){for(var A=1<<y-1>>>0;d&A;)A>>>=1;return A?(d&A-1)+A:d}function M(d,y,A,j,U){e(!(j%A));do d[y+(j-=A)]=U;while(0<j)}function k(d,y,A,j,U){if(e(2328>=U),512>=U)var z=s(512);else if((z=s(U))==null)return 0;return function(q,W,G,ee,le,ye){var ve,fe,ke=W,Ne=1<<G,ce=s(16),ue=s(16);for(e(le!=0),e(ee!=null),e(q!=null),e(0<G),fe=0;fe<le;++fe){if(15<ee[fe])return 0;++ce[ee[fe]]}if(ce[0]==le)return 0;for(ue[1]=0,ve=1;15>ve;++ve){if(ce[ve]>1<<ve)return 0;ue[ve+1]=ue[ve]+ce[ve]}for(fe=0;fe<le;++fe)ve=ee[fe],0<ee[fe]&&(ye[ue[ve]++]=fe);if(ue[15]==1)return(ee=new T).g=0,ee.value=ye[0],M(q,ke,1,Ne,ee),Ne;var Ce,Te=-1,Ee=Ne-1,Ge=0,Ue=1,st=1,He=1<<G;for(fe=0,ve=1,le=2;ve<=G;++ve,le<<=1){if(Ue+=st<<=1,0>(st-=ce[ve]))return 0;for(;0<ce[ve];--ce[ve])(ee=new T).g=ve,ee.value=ye[fe++],M(q,ke+Ge,le,He,ee),Ge=L(Ge,ve)}for(ve=G+1,le=2;15>=ve;++ve,le<<=1){if(Ue+=st<<=1,0>(st-=ce[ve]))return 0;for(;0<ce[ve];--ce[ve]){if(ee=new T,(Ge&Ee)!=Te){for(ke+=He,Ce=1<<(Te=ve)-G;15>Te&&!(0>=(Ce-=ce[Te]));)++Te,Ce<<=1;Ne+=He=1<<(Ce=Te-G),q[W+(Te=Ge&Ee)].g=Ce+G,q[W+Te].value=ke-W-Te}ee.g=ve-G,ee.value=ye[fe++],M(q,ke+(Ge>>G),le,He,ee),Ge=L(Ge,ve)}}return Ue!=2*ue[15]-1?0:Ne}(d,y,A,j,U,z)}function T(){this.value=this.g=0}function D(){this.value=this.g=0}function Y(){this.G=o(5,T),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ar,D)}function ae(d,y,A,j){e(d!=null),e(y!=null),e(2147483648>j),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=y,d.pa=A,d.Jd=y,d.Yc=A+j,d.Zc=4<=j?A+j-4+1:A,pe(d)}function Z(d,y){for(var A=0;0<y--;)A|=be(d,128)<<y;return A}function J(d,y){var A=Z(d,y);return ge(d)?-A:A}function K(d,y,A,j){var U,z=0;for(e(d!=null),e(y!=null),e(4294967288>j),d.Sb=j,d.Ra=0,d.u=0,d.h=0,4<j&&(j=4),U=0;U<j;++U)z+=y[A+U]<<8*U;d.Ra=z,d.bb=j,d.oa=y,d.pa=A}function X(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<ou-8>>>0,++d.bb,d.u-=8;Q(d)&&(d.h=1,d.u=0)}function se(d,y){if(e(0<=y),!d.h&&y<=su){var A=$(d)&iu[y];return d.u+=y,X(d),A}return d.h=1,d.u=0}function me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function $(d){return d.Ra>>>(d.u&ou-1)>>>0}function Q(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>ou}function te(d,y){d.u=y,d.h=Q(d)}function re(d){d.u>=Lh&&(e(d.u>=Lh),X(d))}function pe(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function ge(d){return Z(d,1)}function be(d,y){var A=d.Ca;0>d.b&&pe(d);var j=d.b,U=A*y>>>8,z=(d.I>>>j>U)+0;for(z?(A-=U,d.I-=U+1<<j>>>0):A=U+1,j=A,U=0;256<=j;)U+=8,j>>=8;return j=7^U+Zr[j],d.b-=j,d.Ca=(A<<j)-1,z}function Re(d,y,A){d[y+0]=A>>24&255,d[y+1]=A>>16&255,d[y+2]=A>>8&255,d[y+3]=A>>0&255}function Le(d,y){return d[y+0]<<0|d[y+1]<<8}function Ve(d,y){return Le(d,y)|d[y+2]<<16}function Be(d,y){return Le(d,y)|Le(d,y+2)<<16}function rt(d,y){var A=1<<y;return e(d!=null),e(0<y),d.X=s(A),d.X==null?0:(d.Mb=32-y,d.Xa=y,1)}function Ae(d,y){e(d!=null),e(y!=null),e(d.Xa==y.Xa),r(y.X,0,d.X,0,1<<y.Xa)}function ie(){this.X=[],this.Xa=this.Mb=0}function mt(d,y,A,j){e(A!=null),e(j!=null);var U=A[0],z=j[0];return U==0&&(U=(d*z+y/2)/y),z==0&&(z=(y*U+d/2)/d),0>=U||0>=z?0:(A[0]=U,j[0]=z,1)}function Je(d,y){return d+(1<<y)-1>>>y}function Me(d,y){return((4278255360&d)+(4278255360&y)>>>0&4278255360)+((16711935&d)+(16711935&y)>>>0&16711935)>>>0}function Fe(d,y){N[y]=function(A,j,U,z,q,W,G){var ee;for(ee=0;ee<q;++ee){var le=N[d](W[G+ee-1],U,z+ee);W[G+ee]=Me(A[j+ee],le)}}}function $e(){this.ud=this.hd=this.jd=0}function qe(d,y){return((4278124286&(d^y))>>>1)+(d&y)>>>0}function et(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function ut(d,y){return et(d+(d-y+.5>>1))}function gt(d,y,A){return Math.abs(y-A)-Math.abs(d-A)}function tt(d,y,A,j,U,z,q){for(j=z[q-1],A=0;A<U;++A)z[q+A]=j=Me(d[y+A],j)}function lt(d,y,A,j,U){var z;for(z=0;z<A;++z){var q=d[y+z],W=q>>8&255,G=16711935&(G=(G=16711935&q)+((W<<16)+W));j[U+z]=(4278255360&q)+G>>>0}}function Rt(d,y){y.jd=d>>0&255,y.hd=d>>8&255,y.ud=d>>16&255}function at(d,y,A,j,U,z){var q;for(q=0;q<j;++q){var W=y[A+q],G=W>>>8,ee=W,le=255&(le=(le=W>>>16)+((d.jd<<24>>24)*(G<<24>>24)>>>5));ee=255&(ee=(ee=ee+((d.hd<<24>>24)*(G<<24>>24)>>>5))+((d.ud<<24>>24)*(le<<24>>24)>>>5)),U[z+q]=(4278255360&W)+(le<<16)+ee}}function Nt(d,y,A,j,U){N[y]=function(z,q,W,G,ee,le,ye,ve,fe){for(G=ye;G<ve;++G)for(ye=0;ye<fe;++ye)ee[le++]=U(W[j(z[q++])])},N[d]=function(z,q,W,G,ee,le,ye){var ve=8>>z.b,fe=z.Ea,ke=z.K[0],Ne=z.w;if(8>ve)for(z=(1<<z.b)-1,Ne=(1<<ve)-1;q<W;++q){var ce,ue=0;for(ce=0;ce<fe;++ce)ce&z||(ue=j(G[ee++])),le[ye++]=U(ke[ue&Ne]),ue>>=ve}else N["VP8LMapColor"+A](G,ee,ke,Ne,le,ye,q,W,fe)}}function We(d,y,A,j,U){for(A=y+A;y<A;){var z=d[y++];j[U++]=z>>16&255,j[U++]=z>>8&255,j[U++]=z>>0&255}}function _n(d,y,A,j,U){for(A=y+A;y<A;){var z=d[y++];j[U++]=z>>16&255,j[U++]=z>>8&255,j[U++]=z>>0&255,j[U++]=z>>24&255}}function Pt(d,y,A,j,U){for(A=y+A;y<A;){var z=(q=d[y++])>>16&240|q>>12&15,q=q>>0&240|q>>28&15;j[U++]=z,j[U++]=q}}function Yr(d,y,A,j,U){for(A=y+A;y<A;){var z=(q=d[y++])>>16&248|q>>13&7,q=q>>5&224|q>>3&31;j[U++]=z,j[U++]=q}}function Bt(d,y,A,j,U){for(A=y+A;y<A;){var z=d[y++];j[U++]=z>>0&255,j[U++]=z>>8&255,j[U++]=z>>16&255}}function tn(d,y,A,j,U,z){if(z==0)for(A=y+A;y<A;)Re(j,((z=d[y++])[0]>>24|z[1]>>8&65280|z[2]<<8&16711680|z[3]<<24)>>>0),U+=32;else r(j,U,d,y,A)}function Ii(d,y){N[y][0]=N[d+"0"],N[y][1]=N[d+"1"],N[y][2]=N[d+"2"],N[y][3]=N[d+"3"],N[y][4]=N[d+"4"],N[y][5]=N[d+"5"],N[y][6]=N[d+"6"],N[y][7]=N[d+"7"],N[y][8]=N[d+"8"],N[y][9]=N[d+"9"],N[y][10]=N[d+"10"],N[y][11]=N[d+"11"],N[y][12]=N[d+"12"],N[y][13]=N[d+"13"],N[y][14]=N[d+"0"],N[y][15]=N[d+"0"]}function jt(d){return d==I0||d==j0||d==ip||d==L0}function Ss(){this.eb=[],this.size=this.A=this.fb=0}function ln(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ir(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ss,this.f.kb=new ln,this.sd=null}function di(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function nn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function it(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Dt(d,y){var A=d.T,j=y.ba.f.RGBA,U=j.eb,z=j.fb+d.ka*j.A,q=Vi[y.ba.S],W=d.y,G=d.O,ee=d.f,le=d.N,ye=d.ea,ve=d.W,fe=y.cc,ke=y.dc,Ne=y.Mc,ce=y.Nc,ue=d.ka,Ce=d.ka+d.T,Te=d.U,Ee=Te+1>>1;for(ue==0?q(W,G,null,null,ee,le,ye,ve,ee,le,ye,ve,U,z,null,null,Te):(q(y.ec,y.fc,W,G,fe,ke,Ne,ce,ee,le,ye,ve,U,z-j.A,U,z,Te),++A);ue+2<Ce;ue+=2)fe=ee,ke=le,Ne=ye,ce=ve,le+=d.Rc,ve+=d.Rc,z+=2*j.A,q(W,(G+=2*d.fa)-d.fa,W,G,fe,ke,Ne,ce,ee,le,ye,ve,U,z-j.A,U,z,Te);return G+=d.fa,d.j+Ce<d.o?(r(y.ec,y.fc,W,G,Te),r(y.cc,y.dc,ee,le,Ee),r(y.Mc,y.Nc,ye,ve,Ee),A--):1&Ce||q(W,G,null,null,ee,le,ye,ve,ee,le,ye,ve,U,z+j.A,null,null,Te),A}function ji(d,y,A){var j=d.F,U=[d.J];if(j!=null){var z=d.U,q=y.ba.S,W=q==rp||q==ip;y=y.ba.f.RGBA;var G=[0],ee=d.ka;G[0]=d.T,d.Kb&&(ee==0?--G[0]:(--ee,U[0]-=d.width),d.j+d.ka+d.T==d.o&&(G[0]=d.o-d.j-ee));var le=y.eb;ee=y.fb+ee*y.A,d=sn(j,U[0],d.width,z,G,le,ee+(W?0:3),y.A),e(A==G),d&&jt(q)&&Oi(le,ee,W,z,G,y.A)}return 0}function Fn(d){var y=d.ma,A=y.ba.S,j=11>A,U=A==tp||A==np||A==rp||A==T0||A==12||jt(A);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!Ih(y.Oa,d,U?11:12))return 0;if(U&&jt(A)&&Ie(),d.da)alert("todo:use_scaling");else{if(j){if(y.Ib=it,d.Kb){if(A=d.U+1>>1,y.memory=s(d.U+2*A),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+d.U,y.Mc=y.cc,y.Nc=y.dc+A,y.Ib=Dt,Ie()}}else alert("todo:EmitYUV");U&&(y.Jb=ji,j&&de())}if(j&&!y5){for(d=0;256>d;++d)Tk[d]=89858*(d-128)+op>>sp,Lk[d]=-22014*(d-128)+op,jk[d]=-45773*(d-128),Ik[d]=113618*(d-128)+op>>sp;for(d=Bh;d<M0;++d)y=76283*(d-16)+op>>sp,Rk[d-Bh]=qt(y,255),Dk[d-Bh]=qt(y+8>>4,15);y5=1}return 1}function yr(d){var y=d.ma,A=d.U,j=d.T;return e(!(1&d.ka)),0>=A||0>=j?0:(A=y.Ib(d,y),y.Jb!=null&&y.Jb(d,y,A),y.Dc+=A,1)}function fi(d){d.ma.memory=null}function Ye(d,y,A,j){return se(d,8)!=47?0:(y[0]=se(d,14)+1,A[0]=se(d,14)+1,j[0]=se(d,1),se(d,3)!=0?0:!d.h)}function Qr(d,y){if(4>d)return d+1;var A=d-2>>1;return(2+(1&d)<<A)+se(y,A)+1}function vr(d,y){return 120<y?y-120:1<=(A=((A=gk[y-1])>>4)*d+(8-(15&A)))?A:1;var A}function Vn(d,y,A){var j=$(A),U=d[y+=255&j].g-8;return 0<U&&(te(A,A.u+8),j=$(A),y+=d[y].value,y+=j&(1<<U)-1),te(A,A.u+d[y].g),d[y].value}function kn(d,y,A){return A.g+=d.g,A.value+=d.value<<y>>>0,e(8>=A.g),d.g}function Nn(d,y,A){var j=d.xc;return e((y=j==0?0:d.vc[d.md*(A>>j)+(y>>j)])<d.Wb),d.Ya[y]}function Bn(d,y,A,j){var U=d.ab,z=d.c*y,q=d.C;y=q+y;var W=A,G=j;for(j=d.Ta,A=d.Ua;0<U--;){var ee=d.gc[U],le=q,ye=y,ve=W,fe=G,ke=(G=j,W=A,ee.Ea);switch(e(le<ye),e(ye<=ee.nc),ee.hc){case 2:Kf(ve,fe,(ye-le)*ke,G,W);break;case 0:var Ne=le,ce=ye,ue=G,Ce=W,Te=(He=ee).Ea;Ne==0&&(k0(ve,fe,null,null,1,ue,Ce),tt(ve,fe+1,0,0,Te-1,ue,Ce+1),fe+=Te,Ce+=Te,++Ne);for(var Ee=1<<He.b,Ge=Ee-1,Ue=Je(Te,He.b),st=He.K,He=He.w+(Ne>>He.b)*Ue;Ne<ce;){var Ut=st,$t=He,Mt=1;for(Rh(ve,fe,ue,Ce-Te,1,ue,Ce);Mt<Te;){var Et=(Mt&~Ge)+Ee;Et>Te&&(Et=Te),(0,wa[Ut[$t++]>>8&15])(ve,fe+ +Mt,ue,Ce+Mt-Te,Et-Mt,ue,Ce+Mt),Mt=Et}fe+=Te,Ce+=Te,++Ne&Ge||(He+=Ue)}ye!=ee.nc&&r(G,W-ke,G,W+(ye-le-1)*ke,ke);break;case 1:for(ke=ve,ce=fe,Te=(ve=ee.Ea)-(Ce=ve&~(ue=(fe=1<<ee.b)-1)),Ne=Je(ve,ee.b),Ee=ee.K,ee=ee.w+(le>>ee.b)*Ne;le<ye;){for(Ge=Ee,Ue=ee,st=new $e,He=ce+Ce,Ut=ce+ve;ce<He;)Rt(Ge[Ue++],st),Wl(st,ke,ce,fe,G,W),ce+=fe,W+=fe;ce<Ut&&(Rt(Ge[Ue++],st),Wl(st,ke,ce,Te,G,W),ce+=Te,W+=Te),++le&ue||(ee+=Ne)}break;case 3:if(ve==G&&fe==W&&0<ee.b){for(ce=G,ve=ke=W+(ye-le)*ke-(Ce=(ye-le)*Je(ee.Ea,ee.b)),fe=G,ue=W,Ne=[],Ce=(Te=Ce)-1;0<=Ce;--Ce)Ne[Ce]=fe[ue+Ce];for(Ce=Te-1;0<=Ce;--Ce)ce[ve+Ce]=Ne[Ce];Ri(ee,le,ye,G,ke,G,W)}else Ri(ee,le,ye,ve,fe,G,W)}W=j,G=A}G!=A&&r(j,A,W,G,z)}function ra(d,y){var A=d.V,j=d.Ba+d.c*d.C,U=y-d.C;if(e(y<=d.l.o),e(16>=U),0<U){var z=d.l,q=d.Ta,W=d.Ua,G=z.width;if(Bn(d,U,A,j),U=W=[W],e((A=d.C)<(j=y)),e(z.v<z.va),j>z.o&&(j=z.o),A<z.j){var ee=z.j-A;A=z.j,U[0]+=ee*G}if(A>=j?A=0:(U[0]+=4*z.v,z.ka=A-z.j,z.U=z.va-z.v,z.T=j-A,A=1),A){if(W=W[0],11>(A=d.ca).S){var le=A.f.RGBA,ye=(j=A.S,U=z.U,z=z.T,ee=le.eb,le.A),ve=z;for(le=le.fb+d.Ma*le.A;0<ve--;){var fe=q,ke=W,Ne=U,ce=ee,ue=le;switch(j){case ep:ei(fe,ke,Ne,ce,ue);break;case tp:Br(fe,ke,Ne,ce,ue);break;case I0:Br(fe,ke,Ne,ce,ue),Oi(ce,ue,0,Ne,1,0);break;case a5:So(fe,ke,Ne,ce,ue);break;case np:tn(fe,ke,Ne,ce,ue,1);break;case j0:tn(fe,ke,Ne,ce,ue,1),Oi(ce,ue,0,Ne,1,0);break;case rp:tn(fe,ke,Ne,ce,ue,0);break;case ip:tn(fe,ke,Ne,ce,ue,0),Oi(ce,ue,1,Ne,1,0);break;case T0:_a(fe,ke,Ne,ce,ue);break;case L0:_a(fe,ke,Ne,ce,ue),rn(ce,ue,Ne,1,0);break;case l5:No(fe,ke,Ne,ce,ue);break;default:e(0)}W+=G,le+=ye}d.Ma+=z}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=A.height)}}d.C=y,e(d.C<=d.i)}function Xi(d){var y;if(0<d.ua)return 0;for(y=0;y<d.Wb;++y){var A=d.Ya[y].G,j=d.Ya[y].H;if(0<A[1][j[1]+0].g||0<A[2][j[2]+0].g||0<A[3][j[3]+0].g)return 0}return 1}function xr(d,y,A,j,U,z){if(d.Z!=0){var q=d.qd,W=d.rd;for(e(Ca[d.Z]!=null);y<A;++y)Ca[d.Z](q,W,j,U,j,U,z),q=j,W=U,U+=z;d.qd=q,d.rd=W}}function Xr(d,y){var A=d.l.ma,j=A.Z==0||A.Z==1?d.l.j:d.C;if(j=d.C<j?j:d.C,e(y<=d.l.o),y>j){var U=d.l.width,z=A.ca,q=A.tb+U*j,W=d.V,G=d.Ba+d.c*j,ee=d.gc;e(d.ab==1),e(ee[0].hc==3),Yf(ee[0],j,y,W,G,z,q),xr(A,j,y,z,q,U)}d.C=d.Ma=y}function Or(d,y,A,j,U,z,q){var W=d.$/j,G=d.$%j,ee=d.m,le=d.s,ye=A+d.$,ve=ye;U=A+j*U;var fe=A+j*z,ke=280+le.ua,Ne=d.Pb?W:16777216,ce=0<le.ua?le.Wa:null,ue=le.wc,Ce=ye<fe?Nn(le,G,W):null;e(d.C<z),e(fe<=U);var Te=!1;e:for(;;){for(;Te||ye<fe;){var Ee=0;if(W>=Ne){var Ge=ye-A;e((Ne=d).Pb),Ne.wd=Ne.m,Ne.xd=Ge,0<Ne.s.ua&&Ae(Ne.s.Wa,Ne.s.vb),Ne=W+vk}if(G&ue||(Ce=Nn(le,G,W)),e(Ce!=null),Ce.Qb&&(y[ye]=Ce.qb,Te=!0),!Te)if(re(ee),Ce.jc){Ee=ee,Ge=y;var Ue=ye,st=Ce.pd[$(Ee)&ar-1];e(Ce.jc),256>st.g?(te(Ee,Ee.u+st.g),Ge[Ue]=st.value,Ee=0):(te(Ee,Ee.u+st.g-256),e(256<=st.value),Ee=st.value),Ee==0&&(Te=!0)}else Ee=Vn(Ce.G[0],Ce.H[0],ee);if(ee.h)break;if(Te||256>Ee){if(!Te)if(Ce.nd)y[ye]=(Ce.qb|Ee<<8)>>>0;else{if(re(ee),Te=Vn(Ce.G[1],Ce.H[1],ee),re(ee),Ge=Vn(Ce.G[2],Ce.H[2],ee),Ue=Vn(Ce.G[3],Ce.H[3],ee),ee.h)break;y[ye]=(Ue<<24|Te<<16|Ee<<8|Ge)>>>0}if(Te=!1,++ye,++G>=j&&(G=0,++W,q!=null&&W<=z&&!(W%16)&&q(d,W),ce!=null))for(;ve<ye;)Ee=y[ve++],ce.X[(506832829*Ee&4294967295)>>>ce.Mb]=Ee}else if(280>Ee){if(Ee=Qr(Ee-256,ee),Ge=Vn(Ce.G[4],Ce.H[4],ee),re(ee),Ge=vr(j,Ge=Qr(Ge,ee)),ee.h)break;if(ye-A<Ge||U-ye<Ee)break e;for(Ue=0;Ue<Ee;++Ue)y[ye+Ue]=y[ye+Ue-Ge];for(ye+=Ee,G+=Ee;G>=j;)G-=j,++W,q!=null&&W<=z&&!(W%16)&&q(d,W);if(e(ye<=U),G&ue&&(Ce=Nn(le,G,W)),ce!=null)for(;ve<ye;)Ee=y[ve++],ce.X[(506832829*Ee&4294967295)>>>ce.Mb]=Ee}else{if(!(Ee<ke))break e;for(Te=Ee-280,e(ce!=null);ve<ye;)Ee=y[ve++],ce.X[(506832829*Ee&4294967295)>>>ce.Mb]=Ee;Ee=ye,e(!(Te>>>(Ge=ce).Xa)),y[Ee]=Ge.X[Te],Te=!0}Te||e(ee.h==Q(ee))}if(d.Pb&&ee.h&&ye<U)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Ae(d.s.vb,d.s.Wa);else{if(ee.h)break e;q!=null&&q(d,W>z?z:W),d.a=0,d.$=ye-A}return 1}return d.a=3,0}function Fr(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var y=d.Wa;y!=null&&(y.X=null),d.vb=null,e(d!=null)}function Pn(){var d=new nu;return d==null?null:(d.a=0,d.xb=h5,Ii("Predictor","VP8LPredictors"),Ii("Predictor","VP8LPredictors_C"),Ii("PredictorAdd","VP8LPredictorsAdd"),Ii("PredictorAdd","VP8LPredictorsAdd_C"),Kf=lt,Wl=at,ei=We,Br=_n,_a=Pt,No=Yr,So=Bt,N.VP8LMapColor32b=au,N.VP8LMapColor8b=Qf,d)}function pi(d,y,A,j,U){var z=1,q=[d],W=[y],G=j.m,ee=j.s,le=null,ye=0;e:for(;;){if(A)for(;z&&se(G,1);){var ve=q,fe=W,ke=j,Ne=1,ce=ke.m,ue=ke.gc[ke.ab],Ce=se(ce,2);if(ke.Oc&1<<Ce)z=0;else{switch(ke.Oc|=1<<Ce,ue.hc=Ce,ue.Ea=ve[0],ue.nc=fe[0],ue.K=[null],++ke.ab,e(4>=ke.ab),Ce){case 0:case 1:ue.b=se(ce,3)+2,Ne=pi(Je(ue.Ea,ue.b),Je(ue.nc,ue.b),0,ke,ue.K),ue.K=ue.K[0];break;case 3:var Te,Ee=se(ce,8)+1,Ge=16<Ee?0:4<Ee?1:2<Ee?2:3;if(ve[0]=Je(ue.Ea,Ge),ue.b=Ge,Te=Ne=pi(Ee,1,0,ke,ue.K)){var Ue,st=Ee,He=ue,Ut=1<<(8>>He.b),$t=s(Ut);if($t==null)Te=0;else{var Mt=He.K[0],Et=He.w;for($t[0]=He.K[0][0],Ue=1;Ue<1*st;++Ue)$t[Ue]=Me(Mt[Et+Ue],$t[Ue-1]);for(;Ue<4*Ut;++Ue)$t[Ue]=0;He.K[0]=null,He.K[0]=$t,Te=1}}Ne=Te;break;case 2:break;default:e(0)}z=Ne}}if(q=q[0],W=W[0],z&&se(G,1)&&!(z=1<=(ye=se(G,4))&&11>=ye)){j.a=3;break e}var Zt;if(Zt=z)t:{var Xt,_t,Un,ti=j,zn=q,ni=W,Wt=ye,xi=A,bi=ti.m,Jn=ti.s,lr=[null],zr=1,Bi=0,Os=yk[Wt];n:for(;;){if(xi&&se(bi,1)){var Zn=se(bi,3)+2,ko=Je(zn,Zn),Xl=Je(ni,Zn),du=ko*Xl;if(!pi(ko,Xl,0,ti,lr))break n;for(lr=lr[0],Jn.xc=Zn,Xt=0;Xt<du;++Xt){var Ea=lr[Xt]>>8&65535;lr[Xt]=Ea,Ea>=zr&&(zr=Ea+1)}}if(bi.h)break n;for(_t=0;5>_t;++_t){var An=c5[_t];!_t&&0<Wt&&(An+=1<<Wt),Bi<An&&(Bi=An)}var O0=o(zr*Os,T),b5=zr,w5=o(b5,Y);if(w5==null)var lp=null;else e(65536>=b5),lp=w5;var Uh=s(Bi);if(lp==null||Uh==null||O0==null){ti.a=1;break n}var cp=O0;for(Xt=Un=0;Xt<zr;++Xt){var as=lp[Xt],fu=as.G,pu=as.H,_5=0,up=1,N5=0;for(_t=0;5>_t;++_t){An=c5[_t],fu[_t]=cp,pu[_t]=Un,!_t&&0<Wt&&(An+=1<<Wt);i:{var hp,F0=An,dp=ti,zh=Uh,Fk=cp,Vk=Un,V0=0,ka=dp.m,Bk=se(ka,1);if(i(zh,0,0,F0),Bk){var Uk=se(ka,1)+1,zk=se(ka,1),S5=se(ka,zk==0?1:8);zh[S5]=1,Uk==2&&(zh[S5=se(ka,8)]=1);var fp=1}else{var A5=s(19),C5=se(ka,4)+4;if(19<C5){dp.a=3;var pp=0;break i}for(hp=0;hp<C5;++hp)A5[mk[hp]]=se(ka,3);var B0=void 0,qh=void 0,E5=dp,qk=A5,mp=F0,k5=zh,U0=0,Pa=E5.m,P5=8,T5=o(128,T);r:for(;k(T5,0,7,qk,19);){if(se(Pa,1)){var Hk=2+2*se(Pa,3);if((B0=2+se(Pa,Hk))>mp)break r}else B0=mp;for(qh=0;qh<mp&&B0--;){re(Pa);var I5=T5[0+(127&$(Pa))];te(Pa,Pa.u+I5.g);var mu=I5.value;if(16>mu)k5[qh++]=mu,mu!=0&&(P5=mu);else{var $k=mu==16,j5=mu-16,Wk=fk[j5],L5=se(Pa,dk[j5])+Wk;if(qh+L5>mp)break r;for(var Gk=$k?P5:0;0<L5--;)k5[qh++]=Gk}}U0=1;break r}U0||(E5.a=3),fp=U0}(fp=fp&&!ka.h)&&(V0=k(Fk,Vk,8,zh,F0)),fp&&V0!=0?pp=V0:(dp.a=3,pp=0)}if(pp==0)break n;if(up&&pk[_t]==1&&(up=cp[Un].g==0),_5+=cp[Un].g,Un+=pp,3>=_t){var Hh,z0=Uh[0];for(Hh=1;Hh<An;++Hh)Uh[Hh]>z0&&(z0=Uh[Hh]);N5+=z0}}if(as.nd=up,as.Qb=0,up&&(as.qb=(fu[3][pu[3]+0].value<<24|fu[1][pu[1]+0].value<<16|fu[2][pu[2]+0].value)>>>0,_5==0&&256>fu[0][pu[0]+0].value&&(as.Qb=1,as.qb+=fu[0][pu[0]+0].value<<8)),as.jc=!as.Qb&&6>N5,as.jc){var gp,Po=as;for(gp=0;gp<ar;++gp){var Ta=gp,Ia=Po.pd[Ta],yp=Po.G[0][Po.H[0]+Ta];256<=yp.value?(Ia.g=yp.g+256,Ia.value=yp.value):(Ia.g=0,Ia.value=0,Ta>>=kn(yp,8,Ia),Ta>>=kn(Po.G[1][Po.H[1]+Ta],16,Ia),Ta>>=kn(Po.G[2][Po.H[2]+Ta],0,Ia),kn(Po.G[3][Po.H[3]+Ta],24,Ia))}}}Jn.vc=lr,Jn.Wb=zr,Jn.Ya=lp,Jn.yc=O0,Zt=1;break t}Zt=0}if(!(z=Zt)){j.a=3;break e}if(0<ye){if(ee.ua=1<<ye,!rt(ee.Wa,ye)){j.a=1,z=0;break e}}else ee.ua=0;var q0=j,R5=q,Kk=W,H0=q0.s,$0=H0.xc;if(q0.c=R5,q0.i=Kk,H0.md=Je(R5,$0),H0.wc=$0==0?-1:(1<<$0)-1,A){j.xb=Ak;break e}if((le=s(q*W))==null){j.a=1,z=0;break e}z=(z=Or(j,le,0,q,W,W,null))&&!G.h;break e}return z?(U!=null?U[0]=le:(e(le==null),e(A)),j.$=0,A||Fr(ee)):Fr(ee),z}function As(d,y){var A=d.c*d.i,j=A+y+16*y;return e(d.c<=y),d.V=s(j),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+A+y,1)}function Cs(d,y){var A=d.C,j=y-A,U=d.V,z=d.Ba+d.c*A;for(e(y<=d.l.o);0<j;){var q=16<j?16:j,W=d.l.ma,G=d.l.width,ee=G*q,le=W.ca,ye=W.tb+G*A,ve=d.Ta,fe=d.Ua;Bn(d,q,U,z),In(ve,fe,le,ye,ee),xr(W,A,A+q,le,ye,G),j-=q,U+=q*d.c,A+=q}e(A==y),d.C=d.Ma=y}function Es(){this.ub=this.yd=this.td=this.Rb=0}function ho(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function fo(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Wc(){this.Yb=function(){var d=[];return function y(A,j,U){for(var z=U[j],q=0;q<z&&(A.push(U.length>j+1?[]:0),!(U.length<j+1));q++)y(A[q],j+1,U)}(d,0,[3,11]),d}()}function ia(){this.jb=s(3),this.Wc=a([4,8],Wc),this.Xc=a([4,17],Wc)}function Gc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ks(){this.ld=this.La=this.dd=this.tc=0}function Ps(){this.Na=this.la=0}function Ji(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function po(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Eh(){this.uc=this.M=this.Nb=0,this.wa=Array(new ks),this.Y=0,this.ya=Array(new po),this.aa=0,this.l=new mo}function jl(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Kc(){this.cb=this.a=0,this.sc="",this.m=new me,this.Od=new Es,this.Kc=new ho,this.ed=new Gc,this.Qa=new fo,this.Ic=this.$c=this.Aa=0,this.D=new Eh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,me),this.ia=0,this.pb=o(4,Ji),this.Pa=new ia,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new jl),this.Hd=0,this.rb=Array(new Ps),this.sb=0,this.wa=Array(new ks),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new po),this.L=this.aa=0,this.gd=a([4,2],ks),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function mo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ll(){var d=new Kc;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Vh||(Vh=Yc)),d}function cn(d,y,A){return d.a==0&&(d.a=y,d.sc=A,d.cb=0),0}function Rl(d,y,A){return 3<=A&&d[y+0]==157&&d[y+1]==1&&d[y+2]==42}function Dl(d,y){if(d==null)return 0;if(d.a=0,d.sc="OK",y==null)return cn(d,2,"null VP8Io passed to VP8GetHeaders()");var A=y.data,j=y.w,U=y.ha;if(4>U)return cn(d,7,"Truncated header.");var z=A[j+0]|A[j+1]<<8|A[j+2]<<16,q=d.Od;if(q.Rb=!(1&z),q.td=z>>1&7,q.yd=z>>4&1,q.ub=z>>5,3<q.td)return cn(d,3,"Incorrect keyframe parameters.");if(!q.yd)return cn(d,4,"Frame not displayable.");j+=3,U-=3;var W=d.Kc;if(q.Rb){if(7>U)return cn(d,7,"cannot parse picture header");if(!Rl(A,j,U))return cn(d,3,"Bad code word");W.c=16383&(A[j+4]<<8|A[j+3]),W.Td=A[j+4]>>6,W.i=16383&(A[j+6]<<8|A[j+5]),W.Ud=A[j+6]>>6,j+=7,U-=7,d.za=W.c+15>>4,d.Ub=W.i+15>>4,y.width=W.c,y.height=W.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,i((z=d.Pa).jb,0,255,z.jb.length),e((z=d.Qa)!=null),z.Cb=0,z.Bb=0,z.Fb=1,i(z.Zb,0,0,z.Zb.length),i(z.Lb,0,0,z.Lb)}if(q.ub>U)return cn(d,7,"bad partition length");ae(z=d.m,A,j,q.ub),j+=q.ub,U-=q.ub,q.Rb&&(W.Ld=ge(z),W.Kd=ge(z)),W=d.Qa;var G,ee=d.Pa;if(e(z!=null),e(W!=null),W.Cb=ge(z),W.Cb){if(W.Bb=ge(z),ge(z)){for(W.Fb=ge(z),G=0;4>G;++G)W.Zb[G]=ge(z)?J(z,7):0;for(G=0;4>G;++G)W.Lb[G]=ge(z)?J(z,6):0}if(W.Bb)for(G=0;3>G;++G)ee.jb[G]=ge(z)?Z(z,8):255}else W.Bb=0;if(z.Ka)return cn(d,3,"cannot parse segment header");if((W=d.ed).zd=ge(z),W.Tb=Z(z,6),W.wb=Z(z,3),W.Pc=ge(z),W.Pc&&ge(z)){for(ee=0;4>ee;++ee)ge(z)&&(W.vd[ee]=J(z,6));for(ee=0;4>ee;++ee)ge(z)&&(W.od[ee]=J(z,6))}if(d.L=W.Tb==0?0:W.zd?1:2,z.Ka)return cn(d,3,"cannot parse filter header");var le=U;if(U=G=j,j=G+le,W=le,d.Xb=(1<<Z(d.m,2))-1,le<3*(ee=d.Xb))A=7;else{for(G+=3*ee,W-=3*ee,le=0;le<ee;++le){var ye=A[U+0]|A[U+1]<<8|A[U+2]<<16;ye>W&&(ye=W),ae(d.Jc[+le],A,G,ye),G+=ye,W-=ye,U+=3}ae(d.Jc[+ee],A,G,W),A=G<j?0:5}if(A!=0)return cn(d,A,"cannot parse partitions");for(A=Z(G=d.m,7),U=ge(G)?J(G,4):0,j=ge(G)?J(G,4):0,W=ge(G)?J(G,4):0,ee=ge(G)?J(G,4):0,G=ge(G)?J(G,4):0,le=d.Qa,ye=0;4>ye;++ye){if(le.Cb){var ve=le.Zb[ye];le.Fb||(ve+=A)}else{if(0<ye){d.pb[ye]=d.pb[0];continue}ve=A}var fe=d.pb[ye];fe.Sc[0]=R0[qt(ve+U,127)],fe.Sc[1]=D0[qt(ve+0,127)],fe.Eb[0]=2*R0[qt(ve+j,127)],fe.Eb[1]=101581*D0[qt(ve+W,127)]>>16,8>fe.Eb[1]&&(fe.Eb[1]=8),fe.Qc[0]=R0[qt(ve+ee,117)],fe.Qc[1]=D0[qt(ve+G,127)],fe.lc=ve+G}if(!q.Rb)return cn(d,4,"Not a key frame.");for(ge(z),q=d.Pa,A=0;4>A;++A){for(U=0;8>U;++U)for(j=0;3>j;++j)for(W=0;11>W;++W)ee=be(z,Nk[A][U][j][W])?Z(z,8):wk[A][U][j][W],q.Wc[A][U].Yb[j][W]=ee;for(U=0;17>U;++U)q.Xc[A][U]=q.Wc[A][Sk[U]]}return d.kc=ge(z),d.kc&&(d.Bd=Z(z,8)),d.cb=1}function Yc(d,y,A,j,U,z,q){var W=y[U].Yb[A];for(A=0;16>U;++U){if(!be(d,W[A+0]))return U;for(;!be(d,W[A+1]);)if(W=y[++U].Yb[0],A=0,U==16)return 16;var G=y[U+1].Yb;if(be(d,W[A+2])){var ee=d,le=0;if(be(ee,(ve=W)[(ye=A)+3]))if(be(ee,ve[ye+6])){for(W=0,ye=2*(le=be(ee,ve[ye+8]))+(ve=be(ee,ve[ye+9+le])),le=0,ve=xk[ye];ve[W];++W)le+=le+be(ee,ve[W]);le+=3+(8<<ye)}else be(ee,ve[ye+7])?(le=7+2*be(ee,165),le+=be(ee,145)):le=5+be(ee,159);else le=be(ee,ve[ye+4])?3+be(ee,ve[ye+5]):2;W=G[2]}else le=1,W=G[1];G=q+bk[U],0>(ee=d).b&&pe(ee);var ye,ve=ee.b,fe=(ye=ee.Ca>>1)-(ee.I>>ve)>>31;--ee.b,ee.Ca+=fe,ee.Ca|=1,ee.I-=(ye+1&fe)<<ve,z[G]=((le^fe)-fe)*j[(0<U)+0]}return 16}function Ml(d){var y=d.rb[d.sb-1];y.la=0,y.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function Qc(d,y){if(d==null)return 0;if(y==null)return cn(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!Dl(d,y))return 0;if(e(d.cb),y.ac==null||y.ac(y)){y.ob&&(d.L=0);var A=ap[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=y.v-A>>4,d.zb=y.j-A>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=y.o+15+A>>4,d.Hb=y.va+15+A>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var j=d.ed;for(A=0;4>A;++A){var U;if(d.Qa.Cb){var z=d.Qa.Lb[A];d.Qa.Fb||(z+=j.Tb)}else z=j.Tb;for(U=0;1>=U;++U){var q=d.gd[A][U],W=z;if(j.Pc&&(W+=j.vd[0],U&&(W+=j.od[0])),0<(W=0>W?0:63<W?63:W)){var G=W;0<j.wb&&(G=4<j.wb?G>>2:G>>1)>9-j.wb&&(G=9-j.wb),1>G&&(G=1),q.dd=G,q.tc=2*W+G,q.ld=40<=W?2:15<=W?1:0}else q.tc=0;q.La=U}}}A=0}else cn(d,6,"Frame setup failed"),A=d.a;if(A=A==0){if(A){d.$c=0,0<d.Aa||(d.Ic=Ok);e:{A=d.Ic,j=4*(G=d.za);var ee=32*G,le=G+1,ye=0<d.L?G*(0<d.Aa?2:1):0,ve=(d.Aa==2?2:1)*G;if((q=j+832+(U=3*(16*A+ap[d.L])/2*ee)+(z=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=q)A=0;else{if(q>d.Vb){if(d.Vb=0,d.Ec=s(q),d.Fc=0,d.Ec==null){A=cn(d,1,"no memory during frame initialization.");break e}d.Vb=q}q=d.Ec,W=d.Fc,d.Ac=q,d.Bc=W,W+=j,d.Gd=o(ee,jl),d.Hd=0,d.rb=o(le+1,Ps),d.sb=1,d.wa=ye?o(ye,ks):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=G),e(!0),d.oc=q,d.pc=W,W+=832,d.ya=o(ve,po),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=G),d.R=16*G,d.B=8*G,G=(ee=ap[d.L])*d.R,ee=ee/2*d.B,d.sa=q,d.ta=W+G,d.qa=d.sa,d.ra=d.ta+16*A*d.R+ee,d.Ha=d.qa,d.Ia=d.ra+8*A*d.B+ee,d.$c=0,W+=U,d.mb=z?q:null,d.nb=z?W:null,e(W+z<=d.Fc+d.Vb),Ml(d),i(d.Ac,d.Bc,0,j),A=1}}if(A){if(y.ka=0,y.y=d.sa,y.O=d.ta,y.f=d.qa,y.N=d.ra,y.ea=d.Ha,y.Vd=d.Ia,y.fa=d.R,y.Rc=d.B,y.F=null,y.J=0,!Jf){for(A=-255;255>=A;++A)Gn[255+A]=0>A?-A:A;for(A=-1020;1020>=A;++A)Co[1020+A]=-128>A?-128:127<A?127:A;for(A=-112;112>=A;++A)Fh[112+A]=-16>A?-16:15<A?15:A;for(A=-255;510>=A;++A)hu[255+A]=0>A?0:255<A?255:A;Jf=1}lu=vo,Ao=oa,Dh=Ol,Ur=Ht,Di=yo,Tn=go,cu=fa,Xf=rs,Mh=ma,Gl=$l,Kl=pa,Na=bo,Yl=ga,uu=Ls,Ql=xo,Sa=yi,Oh=Wn,Mi=tu,os[0]=Li,os[1]=kh,os[2]=Is,os[3]=Th,os[4]=Zc,os[5]=ca,os[6]=mi,os[7]=Vl,os[8]=ha,os[9]=ua,Aa[0]=Ts,Aa[1]=Ph,Aa[2]=es,Aa[3]=aa,Aa[4]=un,Aa[5]=Jc,Aa[6]=Fl,Eo[0]=ns,Eo[1]=Xc,Eo[2]=eu,Eo[3]=ts,Eo[4]=zt,Eo[5]=Bl,Eo[6]=Ul,A=1}else A=0}A&&(A=function(fe,ke){for(fe.M=0;fe.M<fe.Va;++fe.M){var Ne,ce=fe.Jc[fe.M&fe.Xb],ue=fe.m,Ce=fe;for(Ne=0;Ne<Ce.za;++Ne){var Te=ue,Ee=Ce,Ge=Ee.Ac,Ue=Ee.Bc+4*Ne,st=Ee.zc,He=Ee.ya[Ee.aa+Ne];if(Ee.Qa.Bb?He.$b=be(Te,Ee.Pa.jb[0])?2+be(Te,Ee.Pa.jb[2]):be(Te,Ee.Pa.jb[1]):He.$b=0,Ee.kc&&(He.Ad=be(Te,Ee.Bd)),He.Za=!be(Te,145)+0,He.Za){var Ut=He.Ob,$t=0;for(Ee=0;4>Ee;++Ee){var Mt,Et=st[0+Ee];for(Mt=0;4>Mt;++Mt){Et=_k[Ge[Ue+Mt]][Et];for(var Zt=u5[be(Te,Et[0])];0<Zt;)Zt=u5[2*Zt+be(Te,Et[Zt])];Et=-Zt,Ge[Ue+Mt]=Et}r(Ut,$t,Ge,Ue,4),$t+=4,st[0+Ee]=Et}}else Et=be(Te,156)?be(Te,128)?1:3:be(Te,163)?2:0,He.Ob[0]=Et,i(Ge,Ue,Et,4),i(st,0,Et,4);He.Dd=be(Te,142)?be(Te,114)?be(Te,183)?1:3:2:0}if(Ce.m.Ka)return cn(fe,7,"Premature end-of-partition0 encountered.");for(;fe.ja<fe.za;++fe.ja){if(Ce=ce,Te=(ue=fe).rb[ue.sb-1],Ge=ue.rb[ue.sb+ue.ja],Ne=ue.ya[ue.aa+ue.ja],Ue=ue.kc?Ne.Ad:0)Te.la=Ge.la=0,Ne.Za||(Te.Na=Ge.Na=0),Ne.Hc=0,Ne.Gc=0,Ne.ia=0;else{var Xt,_t;if(Te=Ge,Ge=Ce,Ue=ue.Pa.Xc,st=ue.ya[ue.aa+ue.ja],He=ue.pb[st.$b],Ee=st.ad,Ut=0,$t=ue.rb[ue.sb-1],Et=Mt=0,i(Ee,Ut,0,384),st.Za)var Un=0,ti=Ue[3];else{Zt=s(16);var zn=Te.Na+$t.Na;if(zn=Vh(Ge,Ue[1],zn,He.Eb,0,Zt,0),Te.Na=$t.Na=(0<zn)+0,1<zn)lu(Zt,0,Ee,Ut);else{var ni=Zt[0]+3>>3;for(Zt=0;256>Zt;Zt+=16)Ee[Ut+Zt]=ni}Un=1,ti=Ue[0]}var Wt=15&Te.la,xi=15&$t.la;for(Zt=0;4>Zt;++Zt){var bi=1&xi;for(ni=_t=0;4>ni;++ni)Wt=Wt>>1|(bi=(zn=Vh(Ge,ti,zn=bi+(1&Wt),He.Sc,Un,Ee,Ut))>Un)<<7,_t=_t<<2|(3<zn?3:1<zn?2:Ee[Ut+0]!=0),Ut+=16;Wt>>=4,xi=xi>>1|bi<<7,Mt=(Mt<<8|_t)>>>0}for(ti=Wt,Un=xi>>4,Xt=0;4>Xt;Xt+=2){for(_t=0,Wt=Te.la>>4+Xt,xi=$t.la>>4+Xt,Zt=0;2>Zt;++Zt){for(bi=1&xi,ni=0;2>ni;++ni)zn=bi+(1&Wt),Wt=Wt>>1|(bi=0<(zn=Vh(Ge,Ue[2],zn,He.Qc,0,Ee,Ut)))<<3,_t=_t<<2|(3<zn?3:1<zn?2:Ee[Ut+0]!=0),Ut+=16;Wt>>=2,xi=xi>>1|bi<<5}Et|=_t<<4*Xt,ti|=Wt<<4<<Xt,Un|=(240&xi)<<Xt}Te.la=ti,$t.la=Un,st.Hc=Mt,st.Gc=Et,st.ia=43690&Et?0:He.ia,Ue=!(Mt|Et)}if(0<ue.L&&(ue.wa[ue.Y+ue.ja]=ue.gd[Ne.$b][Ne.Za],ue.wa[ue.Y+ue.ja].La|=!Ue),Ce.Ka)return cn(fe,7,"Premature end-of-file encountered.")}if(Ml(fe),ue=ke,Ce=1,Ne=(ce=fe).D,Te=0<ce.L&&ce.M>=ce.zb&&ce.M<=ce.Va,ce.Aa==0)e:{if(Ne.M=ce.M,Ne.uc=Te,Ds(ce,Ne),Ce=1,Ne=(_t=ce.D).Nb,Te=(Et=ap[ce.L])*ce.R,Ge=Et/2*ce.B,Zt=16*Ne*ce.R,ni=8*Ne*ce.B,Ue=ce.sa,st=ce.ta-Te+Zt,He=ce.qa,Ee=ce.ra-Ge+ni,Ut=ce.Ha,$t=ce.Ia-Ge+ni,xi=(Wt=_t.M)==0,Mt=Wt>=ce.Va-1,ce.Aa==2&&Ds(ce,_t),_t.uc)for(bi=(zn=ce).D.M,e(zn.D.uc),_t=zn.yb;_t<zn.Hb;++_t){Un=_t,ti=bi;var Jn=(lr=(An=zn).D).Nb;Xt=An.R;var lr=lr.wa[lr.Y+Un],zr=An.sa,Bi=An.ta+16*Jn*Xt+16*Un,Os=lr.dd,Zn=lr.tc;if(Zn!=0)if(e(3<=Zn),An.L==1)0<Un&&Sa(zr,Bi,Xt,Zn+4),lr.La&&Mi(zr,Bi,Xt,Zn),0<ti&&Ql(zr,Bi,Xt,Zn+4),lr.La&&Oh(zr,Bi,Xt,Zn);else{var ko=An.B,Xl=An.qa,du=An.ra+8*Jn*ko+8*Un,Ea=An.Ha,An=An.Ia+8*Jn*ko+8*Un;Jn=lr.ld,0<Un&&(Xf(zr,Bi,Xt,Zn+4,Os,Jn),Gl(Xl,du,Ea,An,ko,Zn+4,Os,Jn)),lr.La&&(Na(zr,Bi,Xt,Zn,Os,Jn),uu(Xl,du,Ea,An,ko,Zn,Os,Jn)),0<ti&&(cu(zr,Bi,Xt,Zn+4,Os,Jn),Mh(Xl,du,Ea,An,ko,Zn+4,Os,Jn)),lr.La&&(Kl(zr,Bi,Xt,Zn,Os,Jn),Yl(Xl,du,Ea,An,ko,Zn,Os,Jn))}}if(ce.ia&&alert("todo:DitherRow"),ue.put!=null){if(_t=16*Wt,Wt=16*(Wt+1),xi?(ue.y=ce.sa,ue.O=ce.ta+Zt,ue.f=ce.qa,ue.N=ce.ra+ni,ue.ea=ce.Ha,ue.W=ce.Ia+ni):(_t-=Et,ue.y=Ue,ue.O=st,ue.f=He,ue.N=Ee,ue.ea=Ut,ue.W=$t),Mt||(Wt-=Et),Wt>ue.o&&(Wt=ue.o),ue.F=null,ue.J=null,ce.Fa!=null&&0<ce.Fa.length&&_t<Wt&&(ue.J=ba(ce,ue,_t,Wt-_t),ue.F=ce.mb,ue.F==null&&ue.F.length==0)){Ce=cn(ce,3,"Could not decode alpha data.");break e}_t<ue.j&&(Et=ue.j-_t,_t=ue.j,e(!(1&Et)),ue.O+=ce.R*Et,ue.N+=ce.B*(Et>>1),ue.W+=ce.B*(Et>>1),ue.F!=null&&(ue.J+=ue.width*Et)),_t<Wt&&(ue.O+=ue.v,ue.N+=ue.v>>1,ue.W+=ue.v>>1,ue.F!=null&&(ue.J+=ue.v),ue.ka=_t-ue.j,ue.U=ue.va-ue.v,ue.T=Wt-_t,Ce=ue.put(ue))}Ne+1!=ce.Ic||Mt||(r(ce.sa,ce.ta-Te,Ue,st+16*ce.R,Te),r(ce.qa,ce.ra-Ge,He,Ee+8*ce.B,Ge),r(ce.Ha,ce.Ia-Ge,Ut,$t+8*ce.B,Ge))}if(!Ce)return cn(fe,6,"Output aborted.")}return 1}(d,y)),y.bc!=null&&y.bc(y),A&=1}return A?(d.cb=0,A):0}function Jr(d,y,A,j,U){U=d[y+A+32*j]+(U>>3),d[y+A+32*j]=-256&U?0>U?0:255:U}function sa(d,y,A,j,U,z){Jr(d,y,0,A,j+U),Jr(d,y,1,A,j+z),Jr(d,y,2,A,j-z),Jr(d,y,3,A,j-U)}function Sn(d){return(20091*d>>16)+d}function Vr(d,y,A,j){var U,z=0,q=s(16);for(U=0;4>U;++U){var W=d[y+0]+d[y+8],G=d[y+0]-d[y+8],ee=(35468*d[y+4]>>16)-Sn(d[y+12]),le=Sn(d[y+4])+(35468*d[y+12]>>16);q[z+0]=W+le,q[z+1]=G+ee,q[z+2]=G-ee,q[z+3]=W-le,z+=4,y++}for(U=z=0;4>U;++U)W=(d=q[z+0]+4)+q[z+8],G=d-q[z+8],ee=(35468*q[z+4]>>16)-Sn(q[z+12]),Jr(A,j,0,0,W+(le=Sn(q[z+4])+(35468*q[z+12]>>16))),Jr(A,j,1,0,G+ee),Jr(A,j,2,0,G-ee),Jr(A,j,3,0,W-le),z++,j+=32}function go(d,y,A,j){var U=d[y+0]+4,z=35468*d[y+4]>>16,q=Sn(d[y+4]),W=35468*d[y+1]>>16;sa(A,j,0,U+q,d=Sn(d[y+1]),W),sa(A,j,1,U+z,d,W),sa(A,j,2,U-z,d,W),sa(A,j,3,U-q,d,W)}function oa(d,y,A,j,U){Vr(d,y,A,j),U&&Vr(d,y+16,A,j+4)}function Ol(d,y,A,j){Ao(d,y+0,A,j,1),Ao(d,y+32,A,j+128,1)}function Ht(d,y,A,j){var U;for(d=d[y+0]+4,U=0;4>U;++U)for(y=0;4>y;++y)Jr(A,j,y,U,d)}function yo(d,y,A,j){d[y+0]&&Ur(d,y+0,A,j),d[y+16]&&Ur(d,y+16,A,j+4),d[y+32]&&Ur(d,y+32,A,j+128),d[y+48]&&Ur(d,y+48,A,j+128+4)}function vo(d,y,A,j){var U,z=s(16);for(U=0;4>U;++U){var q=d[y+0+U]+d[y+12+U],W=d[y+4+U]+d[y+8+U],G=d[y+4+U]-d[y+8+U],ee=d[y+0+U]-d[y+12+U];z[0+U]=q+W,z[8+U]=q-W,z[4+U]=ee+G,z[12+U]=ee-G}for(U=0;4>U;++U)q=(d=z[0+4*U]+3)+z[3+4*U],W=z[1+4*U]+z[2+4*U],G=z[1+4*U]-z[2+4*U],ee=d-z[3+4*U],A[j+0]=q+W>>3,A[j+16]=ee+G>>3,A[j+32]=q-W>>3,A[j+48]=ee-G>>3,j+=64}function Zi(d,y,A){var j,U=y-32,z=vi,q=255-d[U-1];for(j=0;j<A;++j){var W,G=z,ee=q+d[y-1];for(W=0;W<A;++W)d[y+W]=G[ee+d[U+W]];y+=32}}function kh(d,y){Zi(d,y,4)}function Xc(d,y){Zi(d,y,8)}function Ph(d,y){Zi(d,y,16)}function es(d,y){var A;for(A=0;16>A;++A)r(d,y+32*A,d,y-32,16)}function aa(d,y){var A;for(A=16;0<A;--A)i(d,y,d[y-1],16),y+=32}function la(d,y,A){var j;for(j=0;16>j;++j)i(y,A+32*j,d,16)}function Ts(d,y){var A,j=16;for(A=0;16>A;++A)j+=d[y-1+32*A]+d[y+A-32];la(j>>5,d,y)}function un(d,y){var A,j=8;for(A=0;16>A;++A)j+=d[y-1+32*A];la(j>>4,d,y)}function Jc(d,y){var A,j=8;for(A=0;16>A;++A)j+=d[y+A-32];la(j>>4,d,y)}function Fl(d,y){la(128,d,y)}function ht(d,y,A){return d+2*y+A+2>>2}function Is(d,y){var A,j=y-32;for(j=new Uint8Array([ht(d[j-1],d[j+0],d[j+1]),ht(d[j+0],d[j+1],d[j+2]),ht(d[j+1],d[j+2],d[j+3]),ht(d[j+2],d[j+3],d[j+4])]),A=0;4>A;++A)r(d,y+32*A,j,0,j.length)}function Th(d,y){var A=d[y-1],j=d[y-1+32],U=d[y-1+64],z=d[y-1+96];Re(d,y+0,16843009*ht(d[y-1-32],A,j)),Re(d,y+32,16843009*ht(A,j,U)),Re(d,y+64,16843009*ht(j,U,z)),Re(d,y+96,16843009*ht(U,z,z))}function Li(d,y){var A,j=4;for(A=0;4>A;++A)j+=d[y+A-32]+d[y-1+32*A];for(j>>=3,A=0;4>A;++A)i(d,y+32*A,j,4)}function Zc(d,y){var A=d[y-1+0],j=d[y-1+32],U=d[y-1+64],z=d[y-1-32],q=d[y+0-32],W=d[y+1-32],G=d[y+2-32],ee=d[y+3-32];d[y+0+96]=ht(j,U,d[y-1+96]),d[y+1+96]=d[y+0+64]=ht(A,j,U),d[y+2+96]=d[y+1+64]=d[y+0+32]=ht(z,A,j),d[y+3+96]=d[y+2+64]=d[y+1+32]=d[y+0+0]=ht(q,z,A),d[y+3+64]=d[y+2+32]=d[y+1+0]=ht(W,q,z),d[y+3+32]=d[y+2+0]=ht(G,W,q),d[y+3+0]=ht(ee,G,W)}function mi(d,y){var A=d[y+1-32],j=d[y+2-32],U=d[y+3-32],z=d[y+4-32],q=d[y+5-32],W=d[y+6-32],G=d[y+7-32];d[y+0+0]=ht(d[y+0-32],A,j),d[y+1+0]=d[y+0+32]=ht(A,j,U),d[y+2+0]=d[y+1+32]=d[y+0+64]=ht(j,U,z),d[y+3+0]=d[y+2+32]=d[y+1+64]=d[y+0+96]=ht(U,z,q),d[y+3+32]=d[y+2+64]=d[y+1+96]=ht(z,q,W),d[y+3+64]=d[y+2+96]=ht(q,W,G),d[y+3+96]=ht(W,G,G)}function ca(d,y){var A=d[y-1+0],j=d[y-1+32],U=d[y-1+64],z=d[y-1-32],q=d[y+0-32],W=d[y+1-32],G=d[y+2-32],ee=d[y+3-32];d[y+0+0]=d[y+1+64]=z+q+1>>1,d[y+1+0]=d[y+2+64]=q+W+1>>1,d[y+2+0]=d[y+3+64]=W+G+1>>1,d[y+3+0]=G+ee+1>>1,d[y+0+96]=ht(U,j,A),d[y+0+64]=ht(j,A,z),d[y+0+32]=d[y+1+96]=ht(A,z,q),d[y+1+32]=d[y+2+96]=ht(z,q,W),d[y+2+32]=d[y+3+96]=ht(q,W,G),d[y+3+32]=ht(W,G,ee)}function Vl(d,y){var A=d[y+0-32],j=d[y+1-32],U=d[y+2-32],z=d[y+3-32],q=d[y+4-32],W=d[y+5-32],G=d[y+6-32],ee=d[y+7-32];d[y+0+0]=A+j+1>>1,d[y+1+0]=d[y+0+64]=j+U+1>>1,d[y+2+0]=d[y+1+64]=U+z+1>>1,d[y+3+0]=d[y+2+64]=z+q+1>>1,d[y+0+32]=ht(A,j,U),d[y+1+32]=d[y+0+96]=ht(j,U,z),d[y+2+32]=d[y+1+96]=ht(U,z,q),d[y+3+32]=d[y+2+96]=ht(z,q,W),d[y+3+64]=ht(q,W,G),d[y+3+96]=ht(W,G,ee)}function ua(d,y){var A=d[y-1+0],j=d[y-1+32],U=d[y-1+64],z=d[y-1+96];d[y+0+0]=A+j+1>>1,d[y+2+0]=d[y+0+32]=j+U+1>>1,d[y+2+32]=d[y+0+64]=U+z+1>>1,d[y+1+0]=ht(A,j,U),d[y+3+0]=d[y+1+32]=ht(j,U,z),d[y+3+32]=d[y+1+64]=ht(U,z,z),d[y+3+64]=d[y+2+64]=d[y+0+96]=d[y+1+96]=d[y+2+96]=d[y+3+96]=z}function ha(d,y){var A=d[y-1+0],j=d[y-1+32],U=d[y-1+64],z=d[y-1+96],q=d[y-1-32],W=d[y+0-32],G=d[y+1-32],ee=d[y+2-32];d[y+0+0]=d[y+2+32]=A+q+1>>1,d[y+0+32]=d[y+2+64]=j+A+1>>1,d[y+0+64]=d[y+2+96]=U+j+1>>1,d[y+0+96]=z+U+1>>1,d[y+3+0]=ht(W,G,ee),d[y+2+0]=ht(q,W,G),d[y+1+0]=d[y+3+32]=ht(A,q,W),d[y+1+32]=d[y+3+64]=ht(j,A,q),d[y+1+64]=d[y+3+96]=ht(U,j,A),d[y+1+96]=ht(z,U,j)}function eu(d,y){var A;for(A=0;8>A;++A)r(d,y+32*A,d,y-32,8)}function ts(d,y){var A;for(A=0;8>A;++A)i(d,y,d[y-1],8),y+=32}function gi(d,y,A){var j;for(j=0;8>j;++j)i(y,A+32*j,d,8)}function ns(d,y){var A,j=8;for(A=0;8>A;++A)j+=d[y+A-32]+d[y-1+32*A];gi(j>>4,d,y)}function Bl(d,y){var A,j=4;for(A=0;8>A;++A)j+=d[y+A-32];gi(j>>3,d,y)}function zt(d,y){var A,j=4;for(A=0;8>A;++A)j+=d[y-1+32*A];gi(j>>3,d,y)}function Ul(d,y){gi(128,d,y)}function da(d,y,A){var j=d[y-A],U=d[y+0],z=3*(U-j)+P0[1020+d[y-2*A]-d[y+A]],q=Zf[112+(z+4>>3)];d[y-A]=vi[255+j+Zf[112+(z+3>>3)]],d[y+0]=vi[255+U-q]}function zl(d,y,A,j){var U=d[y+0],z=d[y+A];return Fi[255+d[y-2*A]-d[y-A]]>j||Fi[255+z-U]>j}function ql(d,y,A,j){return 4*Fi[255+d[y-A]-d[y+0]]+Fi[255+d[y-2*A]-d[y+A]]<=j}function Hl(d,y,A,j,U){var z=d[y-3*A],q=d[y-2*A],W=d[y-A],G=d[y+0],ee=d[y+A],le=d[y+2*A],ye=d[y+3*A];return 4*Fi[255+W-G]+Fi[255+q-ee]>j?0:Fi[255+d[y-4*A]-z]<=U&&Fi[255+z-q]<=U&&Fi[255+q-W]<=U&&Fi[255+ye-le]<=U&&Fi[255+le-ee]<=U&&Fi[255+ee-G]<=U}function xo(d,y,A,j){var U=2*j+1;for(j=0;16>j;++j)ql(d,y+j,A,U)&&da(d,y+j,A)}function yi(d,y,A,j){var U=2*j+1;for(j=0;16>j;++j)ql(d,y+j*A,1,U)&&da(d,y+j*A,1)}function Wn(d,y,A,j){var U;for(U=3;0<U;--U)xo(d,y+=4*A,A,j)}function tu(d,y,A,j){var U;for(U=3;0<U;--U)yi(d,y+=4,A,j)}function js(d,y,A,j,U,z,q,W){for(z=2*z+1;0<U--;){if(Hl(d,y,A,z,q))if(zl(d,y,A,W))da(d,y,A);else{var G=d,ee=y,le=A,ye=G[ee-2*le],ve=G[ee-le],fe=G[ee+0],ke=G[ee+le],Ne=G[ee+2*le],ce=27*(Ce=P0[1020+3*(fe-ve)+P0[1020+ye-ke]])+63>>7,ue=18*Ce+63>>7,Ce=9*Ce+63>>7;G[ee-3*le]=vi[255+G[ee-3*le]+Ce],G[ee-2*le]=vi[255+ye+ue],G[ee-le]=vi[255+ve+ce],G[ee+0]=vi[255+fe-ce],G[ee+le]=vi[255+ke-ue],G[ee+2*le]=vi[255+Ne-Ce]}y+=j}}function sr(d,y,A,j,U,z,q,W){for(z=2*z+1;0<U--;){if(Hl(d,y,A,z,q))if(zl(d,y,A,W))da(d,y,A);else{var G=d,ee=y,le=A,ye=G[ee-le],ve=G[ee+0],fe=G[ee+le],ke=Zf[112+((Ne=3*(ve-ye))+4>>3)],Ne=Zf[112+(Ne+3>>3)],ce=ke+1>>1;G[ee-2*le]=vi[255+G[ee-2*le]+ce],G[ee-le]=vi[255+ye+Ne],G[ee+0]=vi[255+ve-ke],G[ee+le]=vi[255+fe-ce]}y+=j}}function fa(d,y,A,j,U,z){js(d,y,A,1,16,j,U,z)}function rs(d,y,A,j,U,z){js(d,y,1,A,16,j,U,z)}function pa(d,y,A,j,U,z){var q;for(q=3;0<q;--q)sr(d,y+=4*A,A,1,16,j,U,z)}function bo(d,y,A,j,U,z){var q;for(q=3;0<q;--q)sr(d,y+=4,1,A,16,j,U,z)}function ma(d,y,A,j,U,z,q,W){js(d,y,U,1,8,z,q,W),js(A,j,U,1,8,z,q,W)}function $l(d,y,A,j,U,z,q,W){js(d,y,1,U,8,z,q,W),js(A,j,1,U,8,z,q,W)}function ga(d,y,A,j,U,z,q,W){sr(d,y+4*U,U,1,8,z,q,W),sr(A,j+4*U,U,1,8,z,q,W)}function Ls(d,y,A,j,U,z,q,W){sr(d,y+4,1,U,8,z,q,W),sr(A,j+4,1,U,8,z,q,W)}function wo(){this.ba=new ir,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new nn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ya(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function _o(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function va(){this.ua=0,this.Wa=new ie,this.vb=new ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new T}function nu(){this.xb=this.a=0,this.l=new mo,this.ca=new ir,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new va,this.ab=0,this.gc=o(4,_o),this.Oc=0}function is(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new mo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Rs(d,y,A,j,U,z,q){for(d=d==null?0:d[y+0],y=0;y<q;++y)U[z+y]=d+A[j+y]&255,d=U[z+y]}function xa(d,y,A,j,U,z,q){var W;if(d==null)Rs(null,null,A,j,U,z,q);else for(W=0;W<q;++W)U[z+W]=d[y+W]+A[j+W]&255}function br(d,y,A,j,U,z,q){if(d==null)Rs(null,null,A,j,U,z,q);else{var W,G=d[y+0],ee=G,le=G;for(W=0;W<q;++W)ee=le+(G=d[y+W])-ee,le=A[j+W]+(-256&ee?0>ee?0:255:ee)&255,ee=G,U[z+W]=le}}function ba(d,y,A,j){var U=y.width,z=y.o;if(e(d!=null&&y!=null),0>A||0>=j||A+j>z)return null;if(!d.Cc){if(d.ga==null){var q;if(d.ga=new is,(q=d.ga==null)||(q=y.width*y.o,e(d.Gb.length==0),d.Gb=s(q),d.Uc=0,d.Gb==null?q=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,q=1),q=!q),!q){q=d.ga;var W=d.Fa,G=d.P,ee=d.qc,le=d.mb,ye=d.nb,ve=G+1,fe=ee-1,ke=q.l;if(e(W!=null&&le!=null&&y!=null),Ca[0]=null,Ca[1]=Rs,Ca[2]=xa,Ca[3]=br,q.ca=le,q.tb=ye,q.c=y.width,q.i=y.height,e(0<q.c&&0<q.i),1>=ee)y=0;else if(q.$a=W[G+0]>>0&3,q.Z=W[G+0]>>2&3,q.Lc=W[G+0]>>4&3,G=W[G+0]>>6&3,0>q.$a||1<q.$a||4<=q.Z||1<q.Lc||G)y=0;else if(ke.put=yr,ke.ac=Fn,ke.bc=fi,ke.ma=q,ke.width=y.width,ke.height=y.height,ke.Da=y.Da,ke.v=y.v,ke.va=y.va,ke.j=y.j,ke.o=y.o,q.$a)e:{e(q.$a==1),y=Pn();t:for(;;){if(y==null){y=0;break e}if(e(q!=null),q.mc=y,y.c=q.c,y.i=q.i,y.l=q.l,y.l.ma=q,y.l.width=q.c,y.l.height=q.i,y.a=0,K(y.m,W,ve,fe),!pi(q.c,q.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&Xi(y.s)?(q.ic=1,W=y.c*y.i,y.Ta=null,y.Ua=0,y.V=s(W),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(q.ic=0,y=As(y,q.c)),!y))break t;y=1;break e}q.mc=null,y=0}else y=fe>=q.c*q.i;q=!y}if(q)return null;d.ga.Lc!=1?d.Ga=0:j=z-A}e(d.ga!=null),e(A+j<=z);e:{if(y=(W=d.ga).c,z=W.l.o,W.$a==0){if(ve=d.rc,fe=d.Vc,ke=d.Fa,G=d.P+1+A*y,ee=d.mb,le=d.nb+A*y,e(G<=d.P+d.qc),W.Z!=0)for(e(Ca[W.Z]!=null),q=0;q<j;++q)Ca[W.Z](ve,fe,ke,G,ee,le,y),ve=ee,fe=le,le+=y,G+=y;else for(q=0;q<j;++q)r(ee,le,ke,G,y),ve=ee,fe=le,le+=y,G+=y;d.rc=ve,d.Vc=fe}else{if(e(W.mc!=null),y=A+j,e((q=W.mc)!=null),e(y<=q.i),q.C>=y)y=1;else if(W.ic||de(),W.ic){W=q.V,ve=q.Ba,fe=q.c;var Ne=q.i,ce=(ke=1,G=q.$/fe,ee=q.$%fe,le=q.m,ye=q.s,q.$),ue=fe*Ne,Ce=fe*y,Te=ye.wc,Ee=ce<Ce?Nn(ye,ee,G):null;e(ce<=ue),e(y<=Ne),e(Xi(ye));t:for(;;){for(;!le.h&&ce<Ce;){if(ee&Te||(Ee=Nn(ye,ee,G)),e(Ee!=null),re(le),256>(Ne=Vn(Ee.G[0],Ee.H[0],le)))W[ve+ce]=Ne,++ce,++ee>=fe&&(ee=0,++G<=y&&!(G%16)&&Xr(q,G));else{if(!(280>Ne)){ke=0;break t}Ne=Qr(Ne-256,le);var Ge,Ue=Vn(Ee.G[4],Ee.H[4],le);if(re(le),!(ce>=(Ue=vr(fe,Ue=Qr(Ue,le)))&&ue-ce>=Ne)){ke=0;break t}for(Ge=0;Ge<Ne;++Ge)W[ve+ce+Ge]=W[ve+ce+Ge-Ue];for(ce+=Ne,ee+=Ne;ee>=fe;)ee-=fe,++G<=y&&!(G%16)&&Xr(q,G);ce<Ce&&ee&Te&&(Ee=Nn(ye,ee,G))}e(le.h==Q(le))}Xr(q,G>y?y:G);break t}!ke||le.h&&ce<ue?(ke=0,q.a=le.h?5:3):q.$=ce,y=ke}else y=Or(q,q.V,q.Ba,q.c,q.i,y,Cs);if(!y){j=0;break e}}A+j>=z&&(d.Cc=1),j=1}if(!j)return null;if(d.Cc&&((j=d.ga)!=null&&(j.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+A*U}function b(d,y,A,j,U,z){for(;0<U--;){var q,W=d,G=y+(A?1:0),ee=d,le=y+(A?0:3);for(q=0;q<j;++q){var ye=ee[le+4*q];ye!=255&&(ye*=32897,W[G+4*q+0]=W[G+4*q+0]*ye>>23,W[G+4*q+1]=W[G+4*q+1]*ye>>23,W[G+4*q+2]=W[G+4*q+2]*ye>>23)}y+=z}}function B(d,y,A,j,U){for(;0<j--;){var z;for(z=0;z<A;++z){var q=d[y+2*z+0],W=15&(ee=d[y+2*z+1]),G=4369*W,ee=(240&ee|ee>>4)*G>>16;d[y+2*z+0]=(240&q|q>>4)*G>>16&240|(15&q|q<<4)*G>>16>>4&15,d[y+2*z+1]=240&ee|W}y+=U}}function ne(d,y,A,j,U,z,q,W){var G,ee,le=255;for(ee=0;ee<U;++ee){for(G=0;G<j;++G){var ye=d[y+G];z[q+4*G]=ye,le&=ye}y+=A,q+=W}return le!=255}function oe(d,y,A,j,U){var z;for(z=0;z<U;++z)A[j+z]=d[y+z]>>8}function de(){Oi=b,rn=B,sn=ne,In=oe}function Se(d,y,A){N[d]=function(j,U,z,q,W,G,ee,le,ye,ve,fe,ke,Ne,ce,ue,Ce,Te){var Ee,Ge=Te-1>>1,Ue=W[G+0]|ee[le+0]<<16,st=ye[ve+0]|fe[ke+0]<<16;e(j!=null);var He=3*Ue+st+131074>>2;for(y(j[U+0],255&He,He>>16,Ne,ce),z!=null&&(He=3*st+Ue+131074>>2,y(z[q+0],255&He,He>>16,ue,Ce)),Ee=1;Ee<=Ge;++Ee){var Ut=W[G+Ee]|ee[le+Ee]<<16,$t=ye[ve+Ee]|fe[ke+Ee]<<16,Mt=Ue+Ut+st+$t+524296,Et=Mt+2*(Ut+st)>>3;He=Et+Ue>>1,Ue=(Mt=Mt+2*(Ue+$t)>>3)+Ut>>1,y(j[U+2*Ee-1],255&He,He>>16,Ne,ce+(2*Ee-1)*A),y(j[U+2*Ee-0],255&Ue,Ue>>16,Ne,ce+(2*Ee-0)*A),z!=null&&(He=Mt+st>>1,Ue=Et+$t>>1,y(z[q+2*Ee-1],255&He,He>>16,ue,Ce+(2*Ee-1)*A),y(z[q+2*Ee+0],255&Ue,Ue>>16,ue,Ce+(2*Ee+0)*A)),Ue=Ut,st=$t}1&Te||(He=3*Ue+st+131074>>2,y(j[U+Te-1],255&He,He>>16,Ne,ce+(Te-1)*A),z!=null&&(He=3*st+Ue+131074>>2,y(z[q+Te-1],255&He,He>>16,ue,Ce+(Te-1)*A)))}}function Ie(){Vi[ep]=Ck,Vi[tp]=d5,Vi[a5]=Ek,Vi[np]=f5,Vi[rp]=p5,Vi[T0]=m5,Vi[l5]=kk,Vi[I0]=d5,Vi[j0]=f5,Vi[ip]=p5,Vi[L0]=m5}function ze(d){return d&~Pk?0>d?0:255:d>>g5}function f(d,y){return ze((19077*d>>8)+(26149*y>>8)-14234)}function E(d,y,A){return ze((19077*d>>8)-(6419*y>>8)-(13320*A>>8)+8708)}function R(d,y){return ze((19077*d>>8)+(33050*y>>8)-17685)}function H(d,y,A,j,U){j[U+0]=f(d,A),j[U+1]=E(d,y,A),j[U+2]=R(d,y)}function he(d,y,A,j,U){j[U+0]=R(d,y),j[U+1]=E(d,y,A),j[U+2]=f(d,A)}function xe(d,y,A,j,U){var z=E(d,y,A);y=z<<3&224|R(d,y)>>3,j[U+0]=248&f(d,A)|z>>5,j[U+1]=y}function je(d,y,A,j,U){var z=240&R(d,y)|15;j[U+0]=240&f(d,A)|E(d,y,A)>>4,j[U+1]=z}function yt(d,y,A,j,U){j[U+0]=255,H(d,y,A,j,U+1)}function Ct(d,y,A,j,U){he(d,y,A,j,U),j[U+3]=255}function vt(d,y,A,j,U){H(d,y,A,j,U),j[U+3]=255}function qt(d,y){return 0>d?0:d>y?y:d}function Jt(d,y,A){N[d]=function(j,U,z,q,W,G,ee,le,ye){for(var ve=le+(-2&ye)*A;le!=ve;)y(j[U+0],z[q+0],W[G+0],ee,le),y(j[U+1],z[q+0],W[G+0],ee,le+A),U+=2,++q,++G,le+=2*A;1&ye&&y(j[U+0],z[q+0],W[G+0],ee,le)}}function ss(d,y,A){return A==0?d==0?y==0?6:5:y==0?4:0:A}function or(d,y,A,j,U){switch(d>>>30){case 3:Ao(y,A,j,U,0);break;case 2:Tn(y,A,j,U);break;case 1:Ur(y,A,j,U)}}function Ds(d,y){var A,j,U=y.M,z=y.Nb,q=d.oc,W=d.pc+40,G=d.oc,ee=d.pc+584,le=d.oc,ye=d.pc+600;for(A=0;16>A;++A)q[W+32*A-1]=129;for(A=0;8>A;++A)G[ee+32*A-1]=129,le[ye+32*A-1]=129;for(0<U?q[W-1-32]=G[ee-1-32]=le[ye-1-32]=129:(i(q,W-32-1,127,21),i(G,ee-32-1,127,9),i(le,ye-32-1,127,9)),j=0;j<d.za;++j){var ve=y.ya[y.aa+j];if(0<j){for(A=-1;16>A;++A)r(q,W+32*A-4,q,W+32*A+12,4);for(A=-1;8>A;++A)r(G,ee+32*A-4,G,ee+32*A+4,4),r(le,ye+32*A-4,le,ye+32*A+4,4)}var fe=d.Gd,ke=d.Hd+j,Ne=ve.ad,ce=ve.Hc;if(0<U&&(r(q,W-32,fe[ke].y,0,16),r(G,ee-32,fe[ke].f,0,8),r(le,ye-32,fe[ke].ea,0,8)),ve.Za){var ue=q,Ce=W-32+16;for(0<U&&(j>=d.za-1?i(ue,Ce,fe[ke].y[15],4):r(ue,Ce,fe[ke+1].y,0,4)),A=0;4>A;A++)ue[Ce+128+A]=ue[Ce+256+A]=ue[Ce+384+A]=ue[Ce+0+A];for(A=0;16>A;++A,ce<<=2)ue=q,Ce=W+v5[A],os[ve.Ob[A]](ue,Ce),or(ce,Ne,16*+A,ue,Ce)}else if(ue=ss(j,U,ve.Ob[0]),Aa[ue](q,W),ce!=0)for(A=0;16>A;++A,ce<<=2)or(ce,Ne,16*+A,q,W+v5[A]);for(A=ve.Gc,ue=ss(j,U,ve.Dd),Eo[ue](G,ee),Eo[ue](le,ye),ce=Ne,ue=G,Ce=ee,255&(ve=A>>0)&&(170&ve?Dh(ce,256,ue,Ce):Di(ce,256,ue,Ce)),ve=le,ce=ye,255&(A>>=8)&&(170&A?Dh(Ne,320,ve,ce):Di(Ne,320,ve,ce)),U<d.Ub-1&&(r(fe[ke].y,0,q,W+480,16),r(fe[ke].f,0,G,ee+224,8),r(fe[ke].ea,0,le,ye+224,8)),A=8*z*d.B,fe=d.sa,ke=d.ta+16*j+16*z*d.R,Ne=d.qa,ve=d.ra+8*j+A,ce=d.Ha,ue=d.Ia+8*j+A,A=0;16>A;++A)r(fe,ke+A*d.R,q,W+32*A,16);for(A=0;8>A;++A)r(Ne,ve+A*d.B,G,ee+32*A,8),r(ce,ue+A*d.B,le,ye+32*A,8)}}function Ms(d,y,A,j,U,z,q,W,G){var ee=[0],le=[0],ye=0,ve=G!=null?G.kd:0,fe=G??new ya;if(d==null||12>A)return 7;fe.data=d,fe.w=y,fe.ha=A,y=[y],A=[A],fe.gb=[fe.gb];e:{var ke=y,Ne=A,ce=fe.gb;if(e(d!=null),e(Ne!=null),e(ce!=null),ce[0]=0,12<=Ne[0]&&!n(d,ke[0],"RIFF")){if(n(d,ke[0]+8,"WEBP")){ce=3;break e}var ue=Be(d,ke[0]+4);if(12>ue||4294967286<ue){ce=3;break e}if(ve&&ue>Ne[0]-8){ce=7;break e}ce[0]=ue,ke[0]+=12,Ne[0]-=12}ce=0}if(ce!=0)return ce;for(ue=0<fe.gb[0],A=A[0];;){e:{var Ce=d;Ne=y,ce=A;var Te=ee,Ee=le,Ge=ke=[0];if((He=ye=[ye])[0]=0,8>ce[0])ce=7;else{if(!n(Ce,Ne[0],"VP8X")){if(Be(Ce,Ne[0]+4)!=10){ce=3;break e}if(18>ce[0]){ce=7;break e}var Ue=Be(Ce,Ne[0]+8),st=1+Ve(Ce,Ne[0]+12);if(2147483648<=st*(Ce=1+Ve(Ce,Ne[0]+15))){ce=3;break e}Ge!=null&&(Ge[0]=Ue),Te!=null&&(Te[0]=st),Ee!=null&&(Ee[0]=Ce),Ne[0]+=18,ce[0]-=18,He[0]=1}ce=0}}if(ye=ye[0],ke=ke[0],ce!=0)return ce;if(Ne=!!(2&ke),!ue&&ye)return 3;if(z!=null&&(z[0]=!!(16&ke)),q!=null&&(q[0]=Ne),W!=null&&(W[0]=0),q=ee[0],ke=le[0],ye&&Ne&&G==null){ce=0;break}if(4>A){ce=7;break}if(ue&&ye||!ue&&!ye&&!n(d,y[0],"ALPH")){A=[A],fe.na=[fe.na],fe.P=[fe.P],fe.Sa=[fe.Sa];e:{Ue=d,ce=y,ue=A;var He=fe.gb;Te=fe.na,Ee=fe.P,Ge=fe.Sa,st=22,e(Ue!=null),e(ue!=null),Ce=ce[0];var Ut=ue[0];for(e(Te!=null),e(Ge!=null),Te[0]=null,Ee[0]=null,Ge[0]=0;;){if(ce[0]=Ce,ue[0]=Ut,8>Ut){ce=7;break e}var $t=Be(Ue,Ce+4);if(4294967286<$t){ce=3;break e}var Mt=8+$t+1&-2;if(st+=Mt,0<He&&st>He){ce=3;break e}if(!n(Ue,Ce,"VP8 ")||!n(Ue,Ce,"VP8L")){ce=0;break e}if(Ut[0]<Mt){ce=7;break e}n(Ue,Ce,"ALPH")||(Te[0]=Ue,Ee[0]=Ce+8,Ge[0]=$t),Ce+=Mt,Ut-=Mt}}if(A=A[0],fe.na=fe.na[0],fe.P=fe.P[0],fe.Sa=fe.Sa[0],ce!=0)break}A=[A],fe.Ja=[fe.Ja],fe.xa=[fe.xa];e:if(He=d,ce=y,ue=A,Te=fe.gb[0],Ee=fe.Ja,Ge=fe.xa,Ue=ce[0],Ce=!n(He,Ue,"VP8 "),st=!n(He,Ue,"VP8L"),e(He!=null),e(ue!=null),e(Ee!=null),e(Ge!=null),8>ue[0])ce=7;else{if(Ce||st){if(He=Be(He,Ue+4),12<=Te&&He>Te-12){ce=3;break e}if(ve&&He>ue[0]-8){ce=7;break e}Ee[0]=He,ce[0]+=8,ue[0]-=8,Ge[0]=st}else Ge[0]=5<=ue[0]&&He[Ue+0]==47&&!(He[Ue+4]>>5),Ee[0]=ue[0];ce=0}if(A=A[0],fe.Ja=fe.Ja[0],fe.xa=fe.xa[0],y=y[0],ce!=0)break;if(4294967286<fe.Ja)return 3;if(W==null||Ne||(W[0]=fe.xa?2:1),q=[q],ke=[ke],fe.xa){if(5>A){ce=7;break}W=q,ve=ke,Ne=z,d==null||5>A?d=0:5<=A&&d[y+0]==47&&!(d[y+4]>>5)?(ue=[0],He=[0],Te=[0],K(Ee=new O,d,y,A),Ye(Ee,ue,He,Te)?(W!=null&&(W[0]=ue[0]),ve!=null&&(ve[0]=He[0]),Ne!=null&&(Ne[0]=Te[0]),d=1):d=0):d=0}else{if(10>A){ce=7;break}W=ke,d==null||10>A||!Rl(d,y+3,A-3)?d=0:(ve=d[y+0]|d[y+1]<<8|d[y+2]<<16,Ne=16383&(d[y+7]<<8|d[y+6]),d=16383&(d[y+9]<<8|d[y+8]),1&ve||3<(ve>>1&7)||!(ve>>4&1)||ve>>5>=fe.Ja||!Ne||!d?d=0:(q&&(q[0]=Ne),W&&(W[0]=d),d=1))}if(!d||(q=q[0],ke=ke[0],ye&&(ee[0]!=q||le[0]!=ke)))return 3;G!=null&&(G[0]=fe,G.offset=y-G.w,e(4294967286>y-G.w),e(G.offset==G.ha-A));break}return ce==0||ce==7&&ye&&G==null?(z!=null&&(z[0]|=fe.na!=null&&0<fe.na.length),j!=null&&(j[0]=q),U!=null&&(U[0]=ke),0):ce}function Ih(d,y,A){var j=y.width,U=y.height,z=0,q=0,W=j,G=U;if(y.Da=d!=null&&0<d.Da,y.Da&&(W=d.cd,G=d.bd,z=d.v,q=d.j,11>A||(z&=-2,q&=-2),0>z||0>q||0>=W||0>=G||z+W>j||q+G>U))return 0;if(y.v=z,y.j=q,y.va=z+W,y.o=q+G,y.U=W,y.T=G,y.da=d!=null&&0<d.da,y.da){if(!mt(W,G,A=[d.ib],z=[d.hb]))return 0;y.ib=A[0],y.hb=z[0]}return y.ob=d!=null&&d.ob,y.Kb=d==null||!d.Sd,y.da&&(y.ob=y.ib<3*j/4&&y.hb<3*U/4,y.Kb=0),1}function jh(d){if(d==null)return 2;if(11>d.S){var y=d.f.RGBA;y.fb+=(d.height-1)*y.A,y.A=-y.A}else y=d.f.kb,d=d.height,y.O+=(d-1)*y.fa,y.fa=-y.fa,y.N+=(d-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(d-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(d-1)*y.lb,y.lb=-y.lb);return 0}function ru(d,y,A,j){if(j==null||0>=d||0>=y)return 2;if(A!=null){if(A.Da){var U=A.cd,z=A.bd,q=-2&A.v,W=-2&A.j;if(0>q||0>W||0>=U||0>=z||q+U>d||W+z>y)return 2;d=U,y=z}if(A.da){if(!mt(d,y,U=[A.ib],z=[A.hb]))return 2;d=U[0],y=z[0]}}j.width=d,j.height=y;e:{var G=j.width,ee=j.height;if(d=j.S,0>=G||0>=ee||!(d>=ep&&13>d))d=2;else{if(0>=j.Rd&&j.sd==null){q=z=U=y=0;var le=(W=G*x5[d])*ee;if(11>d||(z=(ee+1)/2*(y=(G+1)/2),d==12&&(q=(U=G)*ee)),(ee=s(le+2*z+q))==null){d=1;break e}j.sd=ee,11>d?((G=j.f.RGBA).eb=ee,G.fb=0,G.A=W,G.size=le):((G=j.f.kb).y=ee,G.O=0,G.fa=W,G.Fd=le,G.f=ee,G.N=0+le,G.Ab=y,G.Cd=z,G.ea=ee,G.W=0+le+z,G.Db=y,G.Ed=z,d==12&&(G.F=ee,G.J=0+le+2*z),G.Tc=q,G.lb=U)}if(y=1,U=j.S,z=j.width,q=j.height,U>=ep&&13>U)if(11>U)d=j.f.RGBA,y&=(W=Math.abs(d.A))*(q-1)+z<=d.size,y&=W>=z*x5[U],y&=d.eb!=null;else{d=j.f.kb,W=(z+1)/2,le=(q+1)/2,G=Math.abs(d.fa),ee=Math.abs(d.Ab);var ye=Math.abs(d.Db),ve=Math.abs(d.lb),fe=ve*(q-1)+z;y&=G*(q-1)+z<=d.Fd,y&=ee*(le-1)+W<=d.Cd,y=(y&=ye*(le-1)+W<=d.Ed)&G>=z&ee>=W&ye>=W,y&=d.y!=null,y&=d.f!=null,y&=d.ea!=null,U==12&&(y&=ve>=z,y&=fe<=d.Tc,y&=d.F!=null)}else y=0;d=y?0:2}}return d!=0||A!=null&&A.fd&&(d=jh(j)),d}var ar=64,iu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],su=24,ou=32,Lh=8,Zr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Fe("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(d){return d},N.Predictor2=function(d,y,A){return y[A+0]},N.Predictor3=function(d,y,A){return y[A+1]},N.Predictor4=function(d,y,A){return y[A-1]},N.Predictor5=function(d,y,A){return qe(qe(d,y[A+1]),y[A+0])},N.Predictor6=function(d,y,A){return qe(d,y[A-1])},N.Predictor7=function(d,y,A){return qe(d,y[A+0])},N.Predictor8=function(d,y,A){return qe(y[A-1],y[A+0])},N.Predictor9=function(d,y,A){return qe(y[A+0],y[A+1])},N.Predictor10=function(d,y,A){return qe(qe(d,y[A-1]),qe(y[A+0],y[A+1]))},N.Predictor11=function(d,y,A){var j=y[A+0];return 0>=gt(j>>24&255,d>>24&255,(y=y[A-1])>>24&255)+gt(j>>16&255,d>>16&255,y>>16&255)+gt(j>>8&255,d>>8&255,y>>8&255)+gt(255&j,255&d,255&y)?j:d},N.Predictor12=function(d,y,A){var j=y[A+0];return(et((d>>24&255)+(j>>24&255)-((y=y[A-1])>>24&255))<<24|et((d>>16&255)+(j>>16&255)-(y>>16&255))<<16|et((d>>8&255)+(j>>8&255)-(y>>8&255))<<8|et((255&d)+(255&j)-(255&y)))>>>0},N.Predictor13=function(d,y,A){var j=y[A-1];return(ut((d=qe(d,y[A+0]))>>24&255,j>>24&255)<<24|ut(d>>16&255,j>>16&255)<<16|ut(d>>8&255,j>>8&255)<<8|ut(d>>0&255,j>>0&255))>>>0};var k0=N.PredictorAdd0;N.PredictorAdd1=tt,Fe("Predictor2","PredictorAdd2"),Fe("Predictor3","PredictorAdd3"),Fe("Predictor4","PredictorAdd4"),Fe("Predictor5","PredictorAdd5"),Fe("Predictor6","PredictorAdd6"),Fe("Predictor7","PredictorAdd7"),Fe("Predictor8","PredictorAdd8"),Fe("Predictor9","PredictorAdd9"),Fe("Predictor10","PredictorAdd10"),Fe("Predictor11","PredictorAdd11"),Fe("Predictor12","PredictorAdd12"),Fe("Predictor13","PredictorAdd13");var Rh=N.PredictorAdd2;Nt("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var Kf,Ri=N.ColorIndexInverseTransform,au=N.MapARGB,Yf=N.VP8LColorIndexInverseTransformAlpha,Qf=N.MapAlpha,wa=N.VP8LPredictorsAdd=[];wa.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Wl,ei,Br,_a,No,So,lu,Ao,Tn,Dh,Ur,Di,cu,Xf,Mh,Gl,Kl,Na,Yl,uu,Ql,Sa,Oh,Mi,Oi,rn,sn,In,Gn=s(511),Co=s(2041),Fh=s(225),hu=s(767),Jf=0,P0=Co,Zf=Fh,vi=hu,Fi=Gn,ep=0,tp=1,a5=2,np=3,rp=4,T0=5,l5=6,I0=7,j0=8,ip=9,L0=10,dk=[2,3,7],fk=[3,3,11],c5=[280,256,256,256,40],pk=[0,1,1,1,0],mk=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],gk=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],yk=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vk=8,R0=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],D0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vh=null,xk=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],bk=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],u5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],wk=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],_k=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Nk=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Sk=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Aa=[],os=[],Eo=[],Ak=1,h5=2,Ca=[],Vi=[];Se("UpsampleRgbLinePair",H,3),Se("UpsampleBgrLinePair",he,3),Se("UpsampleRgbaLinePair",vt,4),Se("UpsampleBgraLinePair",Ct,4),Se("UpsampleArgbLinePair",yt,4),Se("UpsampleRgba4444LinePair",je,2),Se("UpsampleRgb565LinePair",xe,2);var Ck=N.UpsampleRgbLinePair,Ek=N.UpsampleBgrLinePair,d5=N.UpsampleRgbaLinePair,f5=N.UpsampleBgraLinePair,p5=N.UpsampleArgbLinePair,m5=N.UpsampleRgba4444LinePair,kk=N.UpsampleRgb565LinePair,sp=16,op=1<<sp-1,Bh=-227,M0=482,g5=6,Pk=(256<<g5)-1,y5=0,Tk=s(256),Ik=s(256),jk=s(256),Lk=s(256),Rk=s(M0-Bh),Dk=s(M0-Bh);Jt("YuvToRgbRow",H,3),Jt("YuvToBgrRow",he,3),Jt("YuvToRgbaRow",vt,4),Jt("YuvToBgraRow",Ct,4),Jt("YuvToArgbRow",yt,4),Jt("YuvToRgba4444Row",je,2),Jt("YuvToRgb565Row",xe,2);var v5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ap=[0,2,8],Mk=[8,7,6,4,4,2,2,2,1,1,1,1],Ok=1;this.WebPDecodeRGBA=function(d,y,A,j,U){var z=tp,q=new wo,W=new ir;q.ba=W,W.S=z,W.width=[W.width],W.height=[W.height];var G=W.width,ee=W.height,le=new di;if(le==null||d==null)var ye=2;else e(le!=null),ye=Ms(d,y,A,le.width,le.height,le.Pd,le.Qd,le.format,null);if(ye!=0?G=0:(G!=null&&(G[0]=le.width[0]),ee!=null&&(ee[0]=le.height[0]),G=1),G){W.width=W.width[0],W.height=W.height[0],j!=null&&(j[0]=W.width),U!=null&&(U[0]=W.height);e:{if(j=new mo,(U=new ya).data=d,U.w=y,U.ha=A,U.kd=1,y=[0],e(U!=null),((d=Ms(U.data,U.w,U.ha,null,null,null,y,null,U))==0||d==7)&&y[0]&&(d=4),(y=d)==0){if(e(q!=null),j.data=U.data,j.w=U.w+U.offset,j.ha=U.ha-U.offset,j.put=yr,j.ac=Fn,j.bc=fi,j.ma=q,U.xa){if((d=Pn())==null){q=1;break e}if(function(ve,fe){var ke=[0],Ne=[0],ce=[0];t:for(;;){if(ve==null)return 0;if(fe==null)return ve.a=2,0;if(ve.l=fe,ve.a=0,K(ve.m,fe.data,fe.w,fe.ha),!Ye(ve.m,ke,Ne,ce)){ve.a=3;break t}if(ve.xb=h5,fe.width=ke[0],fe.height=Ne[0],!pi(ke[0],Ne[0],1,ve,null))break t;return 1}return e(ve.a!=0),0}(d,j)){if(j=(y=ru(j.width,j.height,q.Oa,q.ba))==0){t:{j=d;n:for(;;){if(j==null){j=0;break t}if(e(j.s.yc!=null),e(j.s.Ya!=null),e(0<j.s.Wb),e((A=j.l)!=null),e((U=A.ma)!=null),j.xb!=0){if(j.ca=U.ba,j.tb=U.tb,e(j.ca!=null),!Ih(U.Oa,A,np)){j.a=2;break n}if(!As(j,A.width)||A.da)break n;if((A.da||jt(j.ca.S))&&de(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&de()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!rt(j.s.vb,j.s.Wa.Xa)){j.a=1;break n}j.xb=0}if(!Or(j,j.V,j.Ba,j.c,j.i,A.o,ra))break n;U.Dc=j.Ma,j=1;break t}e(j.a!=0),j=0}j=!j}j&&(y=d.a)}else y=d.a}else{if((d=new Ll)==null){q=1;break e}if(d.Fa=U.na,d.P=U.P,d.qc=U.Sa,Dl(d,j)){if((y=ru(j.width,j.height,q.Oa,q.ba))==0){if(d.Aa=0,A=q.Oa,e((U=d)!=null),A!=null){if(0<(G=0>(G=A.Md)?0:100<G?255:255*G/100)){for(ee=le=0;4>ee;++ee)12>(ye=U.pb[ee]).lc&&(ye.ia=G*Mk[0>ye.lc?0:ye.lc]>>3),le|=ye.ia;le&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=A.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}Qc(d,j)||(y=d.a)}}else y=d.a}y==0&&q.Oa!=null&&q.Oa.fd&&(y=jh(q.ba))}q=y}z=q!=0?null:11>z?W.f.RGBA.eb:W.f.kb.y}else z=null;return z};var x5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(N,L){for(var M="",k=0;k<4;k++)M+=String.fromCharCode(N[L++]);return M}function h(N,L){return(N[L+0]<<0|N[L+1]<<8|N[L+2]<<16)>>>0}function p(N,L){return(N[L+0]<<0|N[L+1]<<8|N[L+2]<<16|N[L+3]<<24)>>>0}new l;var m=[0],g=[0],v=[],w=new l,C=t,x=function(N,L){var M={},k=0,T=!1,D=0,Y=0;if(M.frames=[],!function($,Q,te,re){for(var pe=0;pe<re;pe++)if($[Q+pe]!=te.charCodeAt(pe))return!0;return!1}(N,L,"RIFF",4)){var ae,Z;for(p(N,L+=4),L+=8;L<N.length;){var J=u(N,L),K=p(N,L+=4);L+=4;var X=K+(1&K);switch(J){case"VP8 ":case"VP8L":M.frames[k]===void 0&&(M.frames[k]={}),(O=M.frames[k]).src_off=T?Y:L-8,O.src_size=D+K+8,k++,T&&(T=!1,D=0,Y=0);break;case"VP8X":(O=M.header={}).feature_flags=N[L];var se=L+4;O.canvas_width=1+h(N,se),se+=3,O.canvas_height=1+h(N,se),se+=3;break;case"ALPH":T=!0,D=X+8,Y=L-8;break;case"ANIM":(O=M.header).bgcolor=p(N,L),se=L+4,O.loop_count=(ae=N)[(Z=se)+0]<<0|ae[Z+1]<<8,se+=2;break;case"ANMF":var me,O;(O=M.frames[k]={}).offset_x=2*h(N,L),L+=3,O.offset_y=2*h(N,L),L+=3,O.width=1+h(N,L),L+=3,O.height=1+h(N,L),L+=3,O.duration=h(N,L),L+=3,me=N[L++],O.dispose=1&me,O.blend=me>>1&1}J!="ANMF"&&(L+=X)}return M}}(C,0);x.response=C,x.rgbaoutput=!0,x.dataurl=!1;var _=x.header?x.header:null,S=x.frames?x.frames:null;if(_){_.loop_counter=_.loop_count,m=[_.canvas_height],g=[_.canvas_width];for(var I=0;I<S.length&&S[I].blend!=0;I++);}var F=S[0],V=w.WebPDecodeRGBA(C,F.src_off,F.src_size,g,m);F.rgba=V,F.imgwidth=g[0],F.imgheight=m[0];for(var P=0;P<g[0]*m[0]*4;P++)v[P]=V[P];return this.width=g,this.height=m,this.data=v,this}(function(t){var e=function(){return typeof Tv=="function"},n=function(m,g,v,w){var C=4,x=o;switch(w){case t.image_compression.FAST:C=1,x=s;break;case t.image_compression.MEDIUM:C=6,x=a;break;case t.image_compression.SLOW:C=9,x=l}m=r(m,g,v,x);var _=Tv(m,{level:C});return t.__addimage__.arrayBufferToBinaryString(_)},r=function(m,g,v,w){for(var C,x,_,S=m.length/g,I=new Uint8Array(m.length+S),F=h(),V=0;V<S;V+=1){if(_=V*g,C=m.subarray(_,_+g),w)I.set(w(C,v,x),_+V);else{for(var P,N=F.length,L=[];P<N;P+=1)L[P]=F[P](C,v,x);var M=p(L.concat());I.set(L[M],_+V)}x=C}return I},i=function(m){var g=Array.apply([],m);return g.unshift(0),g},s=function(m,g){var v,w=[],C=m.length;w[0]=1;for(var x=0;x<C;x+=1)v=m[x-g]||0,w[x+1]=m[x]-v+256&255;return w},o=function(m,g,v){var w,C=[],x=m.length;C[0]=2;for(var _=0;_<x;_+=1)w=v&&v[_]||0,C[_+1]=m[_]-w+256&255;return C},a=function(m,g,v){var w,C,x=[],_=m.length;x[0]=3;for(var S=0;S<_;S+=1)w=m[S-g]||0,C=v&&v[S]||0,x[S+1]=m[S]+256-(w+C>>>1)&255;return x},l=function(m,g,v){var w,C,x,_,S=[],I=m.length;S[0]=4;for(var F=0;F<I;F+=1)w=m[F-g]||0,C=v&&v[F]||0,x=v&&v[F-g]||0,_=u(w,C,x),S[F+1]=m[F]-_+256&255;return S},u=function(m,g,v){if(m===g&&g===v)return m;var w=Math.abs(g-v),C=Math.abs(m-v),x=Math.abs(m+g-v-v);return w<=C&&w<=x?m:C<=x?g:v},h=function(){return[i,s,o,a,l]},p=function(m){var g=m.map(function(v){return v.reduce(function(w,C){return w+Math.abs(C)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(m,g,v,w){var C,x,_,S,I,F,V,P,N,L,M,k,T,D,Y,ae=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(_=new sq(m)).imgData,x=_.bits,C=_.colorSpace,I=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){N=(P=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,M=new Uint8Array(N*_.colors),L=new Uint8Array(N);var J,K=_.pixelBitlength-_.bits;for(D=0,Y=0;D<N;D++){for(T=P[D],J=0;J<K;)M[Y++]=T>>>J&255,J+=_.bits;L[D]=T>>>J&255}}if(_.bits===16){N=(P=new Uint32Array(_.decodePixels().buffer)).length,M=new Uint8Array(N*(32/_.pixelBitlength)*_.colors),L=new Uint8Array(N*(32/_.pixelBitlength)),k=_.colors>1,D=0,Y=0;for(var X=0;D<N;)T=P[D++],M[Y++]=T>>>0&255,k&&(M[Y++]=T>>>16&255,T=P[D++],M[Y++]=T>>>0&255),L[X++]=T>>>16&255;x=8}w!==t.image_compression.NONE&&e()?(m=n(M,_.width*_.colors,_.colors,w),V=n(L,_.width,1,w)):(m=M,V=L,ae=void 0)}if(_.colorType===3&&(C=this.color_spaces.INDEXED,F=_.palette,_.transparency.indexed)){var se=_.transparency.indexed,me=0;for(D=0,N=se.length;D<N;++D)me+=se[D];if((me/=255)===N-1&&se.indexOf(0)!==-1)S=[se.indexOf(0)];else if(me!==N){for(P=_.decodePixels(),L=new Uint8Array(P.length),D=0,N=P.length;D<N;D++)L[D]=se[P[D]];V=n(L,_.width,1)}}var O=function($){var Q;switch($){case t.image_compression.FAST:Q=11;break;case t.image_compression.MEDIUM:Q=13;break;case t.image_compression.SLOW:Q=14;break;default:Q=12}return Q}(w);return ae===this.decode.FLATE_DECODE&&(Z="/Predictor "+O+" "),Z+="/Colors "+I+" /BitsPerComponent "+x+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(V&&this.__addimage__.isArrayBuffer(V)||this.__addimage__.isArrayBufferView(V))&&(V=this.__addimage__.arrayBufferToBinaryString(V)),{alias:v,data:m,index:g,filter:ae,decodeParameters:Z,transparency:S,palette:F,sMask:V,predictor:O,width:_.width,height:_.height,bitsPerComponent:x,colorSpace:C}}}})(ot.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new oq(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},h=new J1(100).encode(u,100);return t.processJPEG.call(this,h,n,r,i)},t.processGIF87A=t.processGIF89A}(ot.API),us.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},us.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){en.log("bit decode error:"+n)}},us.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},us.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},us.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},us.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,h=r*this.width*4+4*i;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=u}this.pos+=t}},us.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=u,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=t}},us.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},us.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},us.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new us(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new J1(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(ot.API),KN.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new KN(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new J1(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(ot.API),ot.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var h=r[u],p=r[u+1],m=r[u+2],g=r[u+3];s[a++]=h,s[a++]=p,s[a++]=m,o[l++]=g}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ot.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},xu=ot.API,im=xu.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=u.fof?u.fof:1,p=e.doKerning!==!1,m=0,g=t.length,v=0,w=a[0]||l,C=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?C.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(m=p&&Kt(u[r])==="object"&&!isNaN(parseInt(u[r][v],10))?u[r][v]/h:0,C.push((a[r]||w)/l+m)),v=r;return C},HN=xu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return xu.processArabic&&(t=xu.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:im.apply(this,arguments).reduce(function(s,o){return s+o},0)},$N=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},WN=function(t,e,n){n||(n={});var r,i,s,o,a,l,u,h=[],p=[h],m=n.textIndent||0,g=0,v=0,w=t.split(" "),C=im.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?w[0].length+2:n.lineIndent||0){var x=Array(l).join(" "),_=[];w.map(function(I){(I=I.split(/\s*\n/)).length>1?_=_.concat(I.map(function(F,V){return(V&&F.length?`
`:"")+F})):_.push(I[0])}),w=_,l=HN.apply(this,[x,n])}for(s=0,o=w.length;s<o;s++){var S=0;if(r=w[s],l&&r[0]==`
`&&(r=r.substr(1),S=1),m+g+(v=(i=im.apply(this,[r,n])).reduce(function(I,F){return I+F},0))>e||S){if(v>e){for(a=$N.apply(this,[r,i,e-(m+g),e]),h.push(a.shift()),h=[a.pop()];a.length;)p.push([a.shift()]);v=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(I,F){return I+F},0)}else h=[r];p.push(h),m=v+l,g=C}else h.push(r),m+=g+v,g=C}return u=l?function(I,F){return(F?x:"")+I.join(" ")}:function(I){return I.join(" ")},p.map(u)},xu.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(WN.apply(this,[r[a],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var m,g,v,w,C=["{"];for(var x in p){if(m=p[x],isNaN(parseInt(x,10))?g="'"+x+"'":(x=parseInt(x,10),g=(g=s(x).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof m=="number")m<0?(v=s(m).slice(3),w="-"):(v=s(m).slice(2),w=""),v=w+v.slice(0,-1)+r[v.slice(-1)];else{if(Kt(m)!=="object")throw new Error("Don't know what to do with value type "+Kt(m)+".");v=o(m)}C.push(g+v)}return C.push("}"),C.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,v,w,C={},x=1,_=C,S=[],I="",F="",V=p.length-1,P=1;P<V;P+=1)(w=p[P])=="'"?m?(v=m.join(""),m=void 0):m=[]:m?m.push(w):w=="{"?(S.push([_,v]),_={},v=void 0):w=="}"?((g=S.pop())[0][g[1]]=_,v=void 0,_=g[0]):w=="-"?x=-1:v===void 0?n.hasOwnProperty(w)?(I+=n[w],v=parseInt(I,16)*x,x=1,I=""):I+=w:n.hasOwnProperty(w)?(F+=n[w],_[v]=parseInt(F,16)*x,x=1,v=void 0,F=""):F+=w;return C},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var m=p.font,g=h.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var v=u.Unicode[m.postScriptName];v&&(m.metadata.Unicode.encoding=v,m.encoding=v.codePages[0])}])}(ot.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Md(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(ot),function(t){function e(){return(ct.canvg?Promise.resolve(ct.canvg):Av(()=>import("./index.es-Di8D_aLL.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}ot.API.addSvgAsImage=function(n,r,i,s,o,a,l,u){if(isNaN(r)||isNaN(i))throw en.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw en.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=o;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(v){return v.fromString(p,n,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(m)}).then(function(){g.addImage(h.toDataURL("image/jpeg",1),r,i,s,o,l,u)})}}(),ot.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},ot.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,h=0,p=0;function m(v,w){var C,x=!1;for(C=0;C<v.length;C+=1)v[C]===w&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(Kt(t)==="object"){for(i in t)if(s=t[i],m(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&m(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(h=0;h<s[u].length;h+=1)typeof s[u][h]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,w=[];for(v in n)n[v].explicitSet===!0&&(n[v].type==="name"?w.push("/"+v+" /"+n[v].value):w.push("/"+v+" "+n[v].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(ot.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],p=0,m=s.length;p<m;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(u[4-a.length],a)}return h.join("")},r=function(s){var o,a,l,u,h,p,m;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,m=(a=Object.keys(s).sort(function(g,v){return g-v})).length;p<m;p++)o=a[p],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",v=0;v<m.length;v++)g+=String.fromCharCode(m[v]);var w=u();h({data:g,addLength1:!0,objectId:w}),l("endobj");var C=u();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:C}),l("endobj");var x=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Su(a.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var _=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Su(a.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+C+" 0 R"),l("/BaseFont /"+Su(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+_+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,m="",g=0;g<p.length;g++)m+=String.fromCharCode(p[g]);var v=u();h({data:m,addLength1:!0,objectId:v}),l("endobj");var w=u();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var C=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Su(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var x=0;x<a.metadata.hmtx.widths.length;x++)a.metadata.hmtx.widths[x]=parseInt(a.metadata.hmtx.widths[x]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+Su(a.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,h=s.options||{},p=s.mutex||{},m=p.pdfEscape,g=p.activeFontKey,v=p.fonts,w=g,C="",x=0,_="",S=v[w].encoding;if(v[w].encoding!=="Identity-H")return{text:a,x:l,y:u,options:h,mutex:p};for(_=a,w=g,Array.isArray(a)&&(_=a[0]),x=0;x<_.length;x+=1)v[w].metadata.hasOwnProperty("cmap")&&(o=v[w].metadata.cmap.unicode.codeMap[_[x].charCodeAt(0)]),o||_[x].charCodeAt(0)<256&&v[w].metadata.hasOwnProperty("Unicode")?C+=_[x]:C+="";var I="";return parseInt(w.slice(1))<14||S==="WinAnsiEncoding"?I=m(C,w).split("").map(function(F){return F.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(I=n(C,v[w])),p.isHex=!0,{text:I,x:l,y:u,options:h,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(ot),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(ot.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,h,p=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,S=0;this.__bidiEngine__={};var I=function(k){var T=k.charCodeAt(),D=T>>8,Y=w[D];return Y!==void 0?p[256*Y+(255&T)]:D===252||D===253?"AL":x.test(D)?"L":D===8?"R":"N"},F=function(k){for(var T,D=0;D<k.length;D++){if((T=I(k.charAt(D)))==="L")return!1;if(T==="R")return!0}return!1},V=function(k,T,D,Y){var ae,Z,J,K,X=T[Y];switch(X){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(X="AN");break;case"AL":_=!0,X="R";break;case"WS":X="N";break;case"CS":Y<1||Y+1>=T.length||(ae=D[Y-1])!=="EN"&&ae!=="AN"||(Z=T[Y+1])!=="EN"&&Z!=="AN"?X="N":_&&(Z="AN"),X=Z===ae?Z:"N";break;case"ES":X=(ae=Y>0?D[Y-1]:"B")==="EN"&&Y+1<T.length&&T[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&D[Y-1]==="EN"){X="EN";break}if(_){X="N";break}for(J=Y+1,K=T.length;J<K&&T[J]==="ET";)J++;X=J<K&&T[J]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(K=T.length,J=Y+1;J<K&&T[J]==="NSM";)J++;if(J<K){var se=k[Y],me=se>=1425&&se<=2303||se===64286;if(ae=T[J],me&&(ae==="R"||ae==="AL")){X="R";break}}}X=Y<1||(ae=T[Y-1])==="B"?"N":D[Y-1];break;case"B":_=!1,i=!0,X=S;break;case"S":s=!0,X="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":X="N"}return X},P=function(k,T,D){var Y=k.split("");return D&&N(Y,D,{hiLevel:S}),Y.reverse(),T&&T.reverse(),Y.join("")},N=function(k,T,D){var Y,ae,Z,J,K,X=-1,se=k.length,me=0,O=[],$=S?g:m,Q=[];for(_=!1,i=!1,s=!1,ae=0;ae<se;ae++)Q[ae]=I(k[ae]);for(Z=0;Z<se;Z++){if(K=me,O[Z]=V(k,Q,O,Z),Y=240&(me=$[K][v[O[Z]]]),me&=15,T[Z]=J=$[me][5],Y>0)if(Y===16){for(ae=X;ae<Z;ae++)T[ae]=1;X=-1}else X=-1;if($[me][6])X===-1&&(X=Z);else if(X>-1){for(ae=X;ae<Z;ae++)T[ae]=J;X=-1}Q[Z]==="B"&&(T[Z]=0),D.hiLevel|=J}s&&function(te,re,pe){for(var ge=0;ge<pe;ge++)if(te[ge]==="S"){re[ge]=S;for(var be=ge-1;be>=0&&te[be]==="WS";be--)re[be]=S}}(Q,T,se)},L=function(k,T,D,Y,ae){if(!(ae.hiLevel<k)){if(k===1&&S===1&&!i)return T.reverse(),void(D&&D.reverse());for(var Z,J,K,X,se=T.length,me=0;me<se;){if(Y[me]>=k){for(K=me+1;K<se&&Y[K]>=k;)K++;for(X=me,J=K-1;X<J;X++,J--)Z=T[X],T[X]=T[J],T[J]=Z,D&&(Z=D[X],D[X]=D[J],D[J]=Z);me=K}me++}}},M=function(k,T,D){var Y=k.split(""),ae={hiLevel:S};return D||(D=[]),N(Y,D,ae),function(Z,J,K){if(K.hiLevel!==0&&h)for(var X,se=0;se<Z.length;se++)J[se]===1&&(X=C.indexOf(Z[se]))>=0&&(Z[se]=C[X+1])}(Y,D,ae),L(2,Y,T,D,ae),L(1,Y,T,D,ae),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(k,T,D){if(function(ae,Z){if(Z)for(var J=0;J<ae.length;J++)Z[J]=J;a===void 0&&(a=F(ae)),u===void 0&&(u=F(ae))}(k,T),o||!l||u)if(o&&l&&a^u)S=a?1:0,k=P(k,T,D);else if(!o&&l&&u)S=a?1:0,k=M(k,T,D),k=P(k,T);else if(!o||a||l||u){if(o&&!l&&a^u)k=P(k,T),a?(S=0,k=M(k,T,D)):(S=1,k=M(k,T,D),k=P(k,T));else if(o&&a&&!l&&u)S=1,k=M(k,T,D),k=P(k,T);else if(!o&&!l&&a^u){var Y=h;a?(S=1,k=M(k,T,D),S=0,h=!1,k=M(k,T,D),h=Y):(S=0,k=M(k,T,D),k=P(k,T),S=1,h=!1,k=M(k,T,D),h=Y,k=P(k,T))}}else S=0,k=M(k,T,D);else S=a?1:0,k=M(k,T,D);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,l=k.isOutputVisual,a=k.isInputRtl,u=k.isOutputRtl,h=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(ot),ot.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Nl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new wq(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new aq(this.contents),this.head=new cq(this),this.name=new pq(this),this.cmap=new ck(this),this.toUnicode={},this.hhea=new uq(this),this.maxp=new mq(this),this.hmtx=new gq(this),this.post=new dq(this),this.os2=new hq(this),this.loca=new bq(this),this.glyf=new yq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Ns,Nl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),aq=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,u,h,p,m,g,v,w;for(w in g=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(g)/l),o=Math.floor(p/l),h=16*g-p,(i=new Nl).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(o),i.writeShort(h),s=16*g,u=i.pos+s,a=null,v=[],n)for(m=n[w],i.writeString(w),i.writeInt(t(m)),i.writeInt(u),i.writeInt(m.length),v=v.concat(m),w==="head"&&(a=u),u+=m.length;u%4;)v.push(0),u++;return i.write(v),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=uk.call(n);n.length%4;)n.push(0);for(s=new Nl(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),lq={}.hasOwnProperty,uo=function(t,e){for(var n in e)lq.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Ns=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var cq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return uo(e,Ns),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Nl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),YN=function(){function t(e,n){var r,i,s,o,a,l,u,h,p,m,g,v,w,C,x,_,S;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,s=function(){var I,F;for(F=[],l=I=0;0<=m?I<m:I>m;l=0<=m?++I:--I)F.push(e.readUInt16());return F}(),e.pos+=2,w=function(){var I,F;for(F=[],l=I=0;0<=m?I<m:I>m;l=0<=m?++I:--I)F.push(e.readUInt16());return F}(),u=function(){var I,F;for(F=[],l=I=0;0<=m?I<m:I>m;l=0<=m?++I:--I)F.push(e.readUInt16());return F}(),h=function(){var I,F;for(F=[],l=I=0;0<=m?I<m:I>m;l=0<=m?++I:--I)F.push(e.readUInt16());return F}(),i=(this.length-e.pos+this.offset)/2,a=function(){var I,F;for(F=[],l=I=0;0<=i?I<i:I>i;l=0<=i?++I:--I)F.push(e.readUInt16());return F}(),l=x=0,S=s.length;x<S;l=++x)for(C=s[l],r=_=v=w[l];v<=C?_<=C:_>=C;r=v<=C?++_:--_)h[l]===0?o=r+u[l]:(o=a[h[l]/2+(r-v)-(m-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,u,h,p,m,g,v,w,C,x,_,S,I,F,V,P,N,L,M,k,T,D,Y,ae,Z,J,K,X,se,me,O,$,Q,te,re,pe,ge,be,Re,Le,Ve;switch(Y=new Nl,o=Object.keys(e).sort(function(Be,rt){return Be-rt}),n){case"macroman":for(w=0,C=function(){var Be=[];for(v=0;v<256;++v)Be.push(0);return Be}(),_={0:0},s={},ae=0,X=o.length;ae<X;ae++)_[be=e[i=o[ae]]]==null&&(_[be]=++w),s[i]={old:e[i],new:_[e[i]]},C[i]=_[e[i]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(C),{charMap:s,subtable:Y.data,maxGlyphID:w+1};case"unicode":for(T=[],p=[],S=0,_={},r={},x=u=null,Z=0,se=o.length;Z<se;Z++)_[F=e[i=o[Z]]]==null&&(_[F]=++S),r[i]={old:F,new:_[F]},a=_[F]-i,x!=null&&a===u||(x&&p.push(x),T.push(i),u=a),x=i;for(x&&p.push(x),p.push(65535),T.push(65535),M=2*(L=T.length),N=2*Math.pow(Math.log(L)/Math.LN2,2),m=Math.log(N/2)/Math.LN2,P=2*L-N,l=[],V=[],g=[],v=J=0,me=T.length;J<me;v=++J){if(k=T[v],h=p[v],k===65535){l.push(0),V.push(0);break}if(k-(D=r[k].new)>=32768)for(l.push(0),V.push(2*(g.length+L-v)),i=K=k;k<=h?K<=h:K>=h;i=k<=h?++K:--K)g.push(r[i].new);else l.push(D-k),V.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*L+2*g.length),Y.writeUInt16(0),Y.writeUInt16(M),Y.writeUInt16(N),Y.writeUInt16(m),Y.writeUInt16(P),pe=0,O=p.length;pe<O;pe++)i=p[pe],Y.writeUInt16(i);for(Y.writeUInt16(0),ge=0,$=T.length;ge<$;ge++)i=T[ge],Y.writeUInt16(i);for(Re=0,Q=l.length;Re<Q;Re++)a=l[Re],Y.writeUInt16(a);for(Le=0,te=V.length;Le<te;Le++)I=V[Le],Y.writeUInt16(I);for(Ve=0,re=g.length;Ve<re;Ve++)w=g[Ve],Y.writeUInt16(w);return{charMap:r,subtable:Y.data,maxGlyphID:S+1}}},t}(),ck=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return uo(e,Ns),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new YN(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=YN.encode(n,r),(s=new Nl).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),uq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return uo(e,Ns),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),hq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return uo(e,Ns),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),dq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return uo(e,Ns),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(n.readUInt32());return u}).call(this)}},e}(),fq=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return uo(e,Ns),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,u,h,p,m,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},o=p=0,m=i.length;p<m;o=++p)s=i[o],n.pos=s.offset,h=n.readString(s.length),a=new fq(h,s),u[g=s.nameID]==null&&(u[g]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),mq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return uo(e,Ns),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),gq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return uo(e,Ns),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,p;for(p=[],r=h=0;0<=s?h<s:h>s;r=0<=s?++h:--h)p.push(n.readInt16());return p}(),this.widths=(function(){var h,p,m,g;for(g=[],h=0,p=(m=this.metrics).length;h<p;h++)o=m[h],g.push(o.advance);return g}).call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),uk=[].slice,yq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return uo(e,Ns),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,u,h,p,m;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Nl(r.read(s))).readShort(),h=l.readShort(),m=l.readShort(),u=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new xq(l,h,m,u,p):new vq(l,a,h,m,u,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,u;for(a=[],o=[],l=0,u=r.length;l<u;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),vq=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),xq=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Nl(uk.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),bq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return uo(e,Ns),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var h=new Array(4*i.length),p=0;p<i.length;++p)h[4*p+3]=255&i[p],h[4*p+2]=(65280&i[p])>>8,h[4*p+1]=(16711680&i[p])>>16,h[4*p]=(4278190080&i[p])>>24;return h},e}(),wq=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,u,h,p,m,g,v,w,C,x;for(i in r=ck.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},x=r.charMap)g[(l=x[i]).old]=l.new;for(v in m=r.maxGlyphID,o)v in g||(g[v]=m++);return h=function(_){var S,I;for(S in I={},_)I[_[S]]=S;return I}(g),p=Object.keys(h).sort(function(_,S){return _-S}),w=function(){var _,S,I;for(I=[],_=0,S=p.length;_<S;_++)a=p[_],I.push(h[a]);return I}(),s=this.font.glyf.encode(o,w,g),u=this.font.loca.encode(s.offsets,w),C={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},t}();ot.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,u;for(u=[],a=0,l=n.length;a<l;a++)r=n[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const _q=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Zz,AcroFormAppearance:Xe,AcroFormButton:Yn,AcroFormCheckBox:Vd,AcroFormChoiceField:bc,AcroFormComboBox:_c,AcroFormEditBox:Od,AcroFormListBox:wc,AcroFormPasswordField:Bd,AcroFormPushButton:Fd,AcroFormRadioButton:Nc,AcroFormTextField:fl,GState:Sf,ShadingPattern:Ga,TilingPattern:pc,default:ot,jsPDF:ot},Symbol.toStringTag,{value:"Module"}));var hk={exports:{}};const Nq=Xk(_q);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,e){(function(r,i){t.exports=i(function(){try{return Nq}catch{}}())})(typeof globalThis<"u"?globalThis:typeof W0<"u"?W0:typeof window<"u"?window:typeof self<"u"?self:W0,function(n){return function(){var r={172:function(a,l){var u=this&&this.__extends||function(){var m=function(g,v){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,C){w.__proto__=C}||function(w,C){for(var x in C)Object.prototype.hasOwnProperty.call(C,x)&&(w[x]=C[x])},m(g,v)};return function(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");m(g,v);function w(){this.constructor=g}g.prototype=v===null?Object.create(v):(w.prototype=v.prototype,new w)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var h=function(){function m(g,v,w){this.table=v,this.pageNumber=v.pageNumber,this.pageCount=this.pageNumber,this.settings=v.settings,this.cursor=w,this.doc=g.getDocument()}return m}();l.HookData=h;var p=function(m){u(g,m);function g(v,w,C,x,_,S){var I=m.call(this,v,w,S)||this;return I.cell=C,I.row=x,I.column=_,I.section=x.section,I}return g}(h);l.CellHookData=p},340:function(a,l,u){Object.defineProperty(l,"__esModule",{value:!0});var h=u(4),p=u(136),m=u(744),g=u(776),v=u(664),w=u(972);function C(x){x.API.autoTable=function(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];var I;_.length===1?I=_[0]:(console.error("Use of deprecated autoTable initiation"),I=_[2]||{},I.columns=_[0],I.body=_[1]);var F=(0,g.parseInput)(this,I),V=(0,w.createTable)(this,F);return(0,v.drawTable)(this,V),this},x.API.lastAutoTable=!1,x.API.previousAutoTable=!1,x.API.autoTable.previous=!1,x.API.autoTableText=function(_,S,I,F){(0,p.default)(_,S,I,F,this)},x.API.autoTableSetDefaults=function(_){return m.DocHandler.setDefaults(_,this),this},x.autoTableSetDefaults=function(_,S){m.DocHandler.setDefaults(_,S)},x.API.autoTableHtmlToJson=function(_,S){var I;if(S===void 0&&(S=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var F=new m.DocHandler(this),V=(0,h.parseHtml)(F,_,window,S,!1),P=V.head,N=V.body,L=((I=P[0])===null||I===void 0?void 0:I.map(function(M){return M.content}))||[];return{columns:L,rows:N,data:N}},x.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var _=this.lastAutoTable;return _&&_.finalY?_.finalY:0},x.API.autoTableAddPageContent=function(_){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),x.API.autoTable.globalDefaults||(x.API.autoTable.globalDefaults={}),x.API.autoTable.globalDefaults.addPageContent=_,this},x.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=C},136:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function u(h,p,m,g,v){g=g||{};var w=1.15,C=v.internal.scaleFactor,x=v.internal.getFontSize()/C,_=v.getLineHeightFactor?v.getLineHeightFactor():w,S=x*_,I=/\r\n|\r|\n/g,F="",V=1;if((g.valign==="middle"||g.valign==="bottom"||g.halign==="center"||g.halign==="right")&&(F=typeof h=="string"?h.split(I):h,V=F.length||1),m+=x*(2-w),g.valign==="middle"?m-=V/2*S:g.valign==="bottom"&&(m-=V*S),g.halign==="center"||g.halign==="right"){var P=x;if(g.halign==="center"&&(P*=.5),F&&V>=1){for(var N=0;N<F.length;N++)v.text(F[N],p-v.getStringUnitWidth(F[N])*P,m),m+=S;return v}p-=v.getStringUnitWidth(h)*P}return g.halign==="justify"?v.text(h,p,m,{maxWidth:g.maxWidth||100,align:"justify"}):v.text(h,p,m),v}l.default=u},420:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function u(v,w,C){C.applyStyles(w,!0);var x=Array.isArray(v)?v:[v],_=x.map(function(S){return C.getTextWidth(S)}).reduce(function(S,I){return Math.max(S,I)},0);return _}l.getStringWidth=u;function h(v,w,C,x){var _=w.settings.tableLineWidth,S=w.settings.tableLineColor;v.applyStyles({lineWidth:_,lineColor:S});var I=p(_,!1);I&&v.rect(C.x,C.y,w.getWidth(v.pageSize().width),x.y-C.y,I)}l.addTableBorder=h;function p(v,w){var C=v>0,x=w||w===0;return C&&x?"DF":C?"S":x?"F":null}l.getFillStyle=p;function m(v,w){var C,x,_,S;if(v=v||w,Array.isArray(v)){if(v.length>=4)return{top:v[0],right:v[1],bottom:v[2],left:v[3]};if(v.length===3)return{top:v[0],right:v[1],bottom:v[2],left:v[1]};if(v.length===2)return{top:v[0],right:v[1],bottom:v[0],left:v[1]};v.length===1?v=v[0]:v=w}return typeof v=="object"?(typeof v.vertical=="number"&&(v.top=v.vertical,v.bottom=v.vertical),typeof v.horizontal=="number"&&(v.right=v.horizontal,v.left=v.horizontal),{left:(C=v.left)!==null&&C!==void 0?C:w,top:(x=v.top)!==null&&x!==void 0?x:w,right:(_=v.right)!==null&&_!==void 0?_:w,bottom:(S=v.bottom)!==null&&S!==void 0?S:w}):(typeof v!="number"&&(v=w),{top:v,right:v,bottom:v,left:v})}l.parseSpacing=m;function g(v,w){var C=m(w.settings.margin,0);return v.pageSize().width-(C.left+C.right)}l.getPageAvailableWidth=g},796:function(a,l){var u=this&&this.__extends||function(){var g=function(v,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,x){C.__proto__=x}||function(C,x){for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(C[_]=x[_])},g(v,w)};return function(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");g(v,w);function C(){this.constructor=v}v.prototype=w===null?Object.create(w):(C.prototype=w.prototype,new C)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var h=function(g){u(v,g);function v(w){var C=g.call(this)||this;return C._element=w,C}return v}(Array);l.HtmlRowInput=h;function p(g){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/g,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=p;function m(g){var v={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return v[g]}l.getTheme=m},903:function(a,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var h=u(420);function p(C,x,_,S,I){var F={},V=1.3333333333333333,P=g(x,function(X){return I.getComputedStyle(X).backgroundColor});P!=null&&(F.fillColor=P);var N=g(x,function(X){return I.getComputedStyle(X).color});N!=null&&(F.textColor=N);var L=w(S,_);L&&(F.cellPadding=L);var M="borderTopColor",k=V*_,T=S.borderTopWidth;if(S.borderBottomWidth===T&&S.borderRightWidth===T&&S.borderLeftWidth===T){var D=(parseFloat(T)||0)/k;D&&(F.lineWidth=D)}else F.lineWidth={top:(parseFloat(S.borderTopWidth)||0)/k,right:(parseFloat(S.borderRightWidth)||0)/k,bottom:(parseFloat(S.borderBottomWidth)||0)/k,left:(parseFloat(S.borderLeftWidth)||0)/k},F.lineWidth.top||(F.lineWidth.right?M="borderRightColor":F.lineWidth.bottom?M="borderBottomColor":F.lineWidth.left&&(M="borderLeftColor"));var Y=g(x,function(X){return I.getComputedStyle(X)[M]});Y!=null&&(F.lineColor=Y);var ae=["left","right","center","justify"];ae.indexOf(S.textAlign)!==-1&&(F.halign=S.textAlign),ae=["middle","bottom","top"],ae.indexOf(S.verticalAlign)!==-1&&(F.valign=S.verticalAlign);var Z=parseInt(S.fontSize||"");isNaN(Z)||(F.fontSize=Z/V);var J=m(S);J&&(F.fontStyle=J);var K=(S.fontFamily||"").toLowerCase();return C.indexOf(K)!==-1&&(F.font=K),F}l.parseCss=p;function m(C){var x="";return(C.fontWeight==="bold"||C.fontWeight==="bolder"||parseInt(C.fontWeight)>=700)&&(x="bold"),(C.fontStyle==="italic"||C.fontStyle==="oblique")&&(x+="italic"),x}function g(C,x){var _=v(C,x);if(!_)return null;var S=_.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!S||!Array.isArray(S))return null;var I=[parseInt(S[1]),parseInt(S[2]),parseInt(S[3])],F=parseInt(S[4]);return F===0||isNaN(I[0])||isNaN(I[1])||isNaN(I[2])?null:I}function v(C,x){var _=x(C);return _==="rgba(0, 0, 0, 0)"||_==="transparent"||_==="initial"||_==="inherit"?C.parentElement==null?null:v(C.parentElement,x):_}function w(C,x){var _=[C.paddingTop,C.paddingRight,C.paddingBottom,C.paddingLeft],S=96/(72/x),I=(parseInt(C.lineHeight)-parseInt(C.fontSize))/x/2,F=_.map(function(P){return parseInt(P||"0")/S}),V=(0,h.parseSpacing)(F,0);return I>V.top&&(V.top=I),I>V.bottom&&(V.bottom=I),V}},744:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var u={},h=function(){function p(m){this.jsPDFDocument=m,this.userStyles={textColor:m.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:m.internal.getFontSize(),fontStyle:m.internal.getFont().fontStyle,font:m.internal.getFont().fontName,lineWidth:m.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:m.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return p.setDefaults=function(m,g){g===void 0&&(g=null),g?g.__autoTableDocumentDefaults=m:u=m},p.unifyColor=function(m){return Array.isArray(m)?m:typeof m=="number"?[m,m,m]:typeof m=="string"?[m]:null},p.prototype.applyStyles=function(m,g){var v,w,C;g===void 0&&(g=!1),m.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(m.fontStyle);var x=this.jsPDFDocument.internal.getFont(),_=x.fontStyle,S=x.fontName;if(m.font&&(S=m.font),m.fontStyle){_=m.fontStyle;var I=this.getFontList()[S];I&&I.indexOf(_)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(I[0]),_=I[0])}if(this.jsPDFDocument.setFont(S,_),m.fontSize&&this.jsPDFDocument.setFontSize(m.fontSize),!g){var F=p.unifyColor(m.fillColor);F&&(v=this.jsPDFDocument).setFillColor.apply(v,F),F=p.unifyColor(m.textColor),F&&(w=this.jsPDFDocument).setTextColor.apply(w,F),F=p.unifyColor(m.lineColor),F&&(C=this.jsPDFDocument).setDrawColor.apply(C,F),typeof m.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(m.lineWidth)}},p.prototype.splitTextToSize=function(m,g,v){return this.jsPDFDocument.splitTextToSize(m,g,v)},p.prototype.rect=function(m,g,v,w,C){return this.jsPDFDocument.rect(m,g,v,w,C)},p.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},p.prototype.getTextWidth=function(m){return this.jsPDFDocument.getTextWidth(m)},p.prototype.getDocument=function(){return this.jsPDFDocument},p.prototype.setPage=function(m){this.jsPDFDocument.setPage(m)},p.prototype.addPage=function(){return this.jsPDFDocument.addPage()},p.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},p.prototype.getGlobalOptions=function(){return u||{}},p.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},p.prototype.pageSize=function(){var m=this.jsPDFDocument.internal.pageSize;return m.width==null&&(m={width:m.getWidth(),height:m.getHeight()}),m},p.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},p.prototype.getLineHeightFactor=function(){var m=this.jsPDFDocument;return m.getLineHeightFactor?m.getLineHeightFactor():1.15},p.prototype.getLineHeight=function(m){return m/this.scaleFactor()*this.getLineHeightFactor()},p.prototype.pageNumber=function(){var m=this.jsPDFDocument.internal.getCurrentPageInfo();return m?m.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},p}();l.DocHandler=h},4:function(a,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var h=u(903),p=u(796);function m(w,C,x,_,S){var I,F;_===void 0&&(_=!1),S===void 0&&(S=!1);var V;typeof C=="string"?V=x.document.querySelector(C):V=C;var P=Object.keys(w.getFontList()),N=w.scaleFactor(),L=[],M=[],k=[];if(!V)return console.error("Html table could not be found with input: ",C),{head:L,body:M,foot:k};for(var T=0;T<V.rows.length;T++){var D=V.rows[T],Y=(F=(I=D==null?void 0:D.parentElement)===null||I===void 0?void 0:I.tagName)===null||F===void 0?void 0:F.toLowerCase(),ae=g(P,N,x,D,_,S);ae&&(Y==="thead"?L.push(ae):Y==="tfoot"?k.push(ae):M.push(ae))}return{head:L,body:M,foot:k}}l.parseHtml=m;function g(w,C,x,_,S,I){for(var F=new p.HtmlRowInput(_),V=0;V<_.cells.length;V++){var P=_.cells[V],N=x.getComputedStyle(P);if(S||N.display!=="none"){var L=void 0;I&&(L=(0,h.parseCss)(w,P,C,N,x)),F.push({rowSpan:P.rowSpan,colSpan:P.colSpan,styles:L,_element:P,content:v(P)})}}var M=x.getComputedStyle(_);if(F.length>0&&(S||M.display!=="none"))return F}function v(w){var C=w.cloneNode(!0);return C.innerHTML=C.innerHTML.replace(/\n/g,"").replace(/ +/g," "),C.innerHTML=C.innerHTML.split(/<br.*?>/).map(function(x){return x.trim()}).join(`
`),C.innerText||C.textContent||""}},776:function(a,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var h=u(4),p=u(356),m=u(420),g=u(744),v=u(792);function w(V,P){var N=new g.DocHandler(V),L=N.getDocumentOptions(),M=N.getGlobalOptions();(0,v.default)(N,M,L,P);var k=(0,p.assign)({},M,L,P),T;typeof window<"u"&&(T=window);var D=C(M,L,P),Y=x(M,L,P),ae=_(N,k),Z=I(N,k,T);return{id:P.tableId,content:Z,hooks:Y,styles:D,settings:ae}}l.parseInput=w;function C(V,P,N){for(var L={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},M=function(Y){if(Y==="columnStyles"){var ae=V[Y],Z=P[Y],J=N[Y];L.columnStyles=(0,p.assign)({},ae,Z,J)}else{var K=[V,P,N],X=K.map(function(se){return se[Y]||{}});L[Y]=(0,p.assign)({},X[0],X[1],X[2])}},k=0,T=Object.keys(L);k<T.length;k++){var D=T[k];M(D)}return L}function x(V,P,N){for(var L=[V,P,N],M={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},k=0,T=L;k<T.length;k++){var D=T[k];D.didParseCell&&M.didParseCell.push(D.didParseCell),D.willDrawCell&&M.willDrawCell.push(D.willDrawCell),D.didDrawCell&&M.didDrawCell.push(D.didDrawCell),D.willDrawPage&&M.willDrawPage.push(D.willDrawPage),D.didDrawPage&&M.didDrawPage.push(D.didDrawPage)}return M}function _(V,P){var N,L,M,k,T,D,Y,ae,Z,J,K,X,se=(0,m.parseSpacing)(P.margin,40/V.scaleFactor()),me=(N=S(V,P.startY))!==null&&N!==void 0?N:se.top,O;P.showFoot===!0?O="everyPage":P.showFoot===!1?O="never":O=(L=P.showFoot)!==null&&L!==void 0?L:"everyPage";var $;P.showHead===!0?$="everyPage":P.showHead===!1?$="never":$=(M=P.showHead)!==null&&M!==void 0?M:"everyPage";var Q=(k=P.useCss)!==null&&k!==void 0?k:!1,te=P.theme||(Q?"plain":"striped"),re=!!P.horizontalPageBreak,pe=(T=P.horizontalPageBreakRepeat)!==null&&T!==void 0?T:null;return{includeHiddenHtml:(D=P.includeHiddenHtml)!==null&&D!==void 0?D:!1,useCss:Q,theme:te,startY:me,margin:se,pageBreak:(Y=P.pageBreak)!==null&&Y!==void 0?Y:"auto",rowPageBreak:(ae=P.rowPageBreak)!==null&&ae!==void 0?ae:"auto",tableWidth:(Z=P.tableWidth)!==null&&Z!==void 0?Z:"auto",showHead:$,showFoot:O,tableLineWidth:(J=P.tableLineWidth)!==null&&J!==void 0?J:0,tableLineColor:(K=P.tableLineColor)!==null&&K!==void 0?K:200,horizontalPageBreak:re,horizontalPageBreakRepeat:pe,horizontalPageBreakBehaviour:(X=P.horizontalPageBreakBehaviour)!==null&&X!==void 0?X:"afterAllRows"}}function S(V,P){var N=V.getLastAutoTable(),L=V.scaleFactor(),M=V.pageNumber(),k=!1;if(N&&N.startPageNumber){var T=N.startPageNumber+N.pageNumber-1;k=T===M}return typeof P=="number"?P:(P==null||P===!1)&&k&&(N==null?void 0:N.finalY)!=null?N.finalY+20/L:null}function I(V,P,N){var L=P.head||[],M=P.body||[],k=P.foot||[];if(P.html){var T=P.includeHiddenHtml;if(N){var D=(0,h.parseHtml)(V,P.html,N,T,P.useCss)||{};L=D.head||L,M=D.body||L,k=D.foot||L}else console.error("Cannot parse html in non browser environment")}var Y=P.columns||F(L,M,k);return{columns:Y,head:L,body:M,foot:k}}function F(V,P,N){var L=V[0]||P[0]||N[0]||[],M=[];return Object.keys(L).filter(function(k){return k!=="_element"}).forEach(function(k){var T=1,D;Array.isArray(L)?D=L[parseInt(k)]:D=L[k],typeof D=="object"&&!Array.isArray(D)&&(T=(D==null?void 0:D.colSpan)||1);for(var Y=0;Y<T;Y++){var ae=void 0;Array.isArray(L)?ae=M.length:ae=k+(Y>0?"_".concat(Y):"");var Z={dataKey:ae};M.push(Z)}}),M}},792:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function u(p,m,g,v){for(var w=function(S){S&&typeof S!="object"&&console.error("The options parameter should be of type object, is: "+typeof S),typeof S.extendWidth<"u"&&(S.tableWidth=S.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof S.margins<"u"&&(typeof S.margin>"u"&&(S.margin=S.margins),console.error("Use of deprecated option: margins, use margin instead.")),S.startY&&typeof S.startY!="number"&&(console.error("Invalid value for startY option",S.startY),delete S.startY),!S.didDrawPage&&(S.afterPageContent||S.beforePageContent||S.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),S.didDrawPage=function(k){p.applyStyles(p.userStyles),S.beforePageContent&&S.beforePageContent(k),p.applyStyles(p.userStyles),S.afterPageContent&&S.afterPageContent(k),p.applyStyles(p.userStyles),S.afterPageAdd&&k.pageNumber>1&&k.afterPageAdd(k),p.applyStyles(p.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(k){S[k]&&console.error('The "'.concat(k,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(k){var T=k[0],D=k[1];S[D]&&(console.error("Use of deprecated option ".concat(D,". Use ").concat(T," instead")),S[T]=S[D])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(k){var T=typeof k=="string"?k:k[0],D=typeof k=="string"?k:k[1];typeof S[T]<"u"&&(typeof S.styles[D]>"u"&&(S.styles[D]=S[T]),console.error("Use of deprecated option: "+T+", use the style "+D+" instead."))});for(var I=0,F=["styles","bodyStyles","headStyles","footStyles"];I<F.length;I++){var V=F[I];h(S[V]||{})}for(var P=S.columnStyles||{},N=0,L=Object.keys(P);N<L.length;N++){var M=L[N];h(P[M]||{})}},C=0,x=[m,g,v];C<x.length;C++){var _=x[C];w(_)}}l.default=u;function h(p){p.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),p.minCellHeight||(p.minCellHeight=p.rowHeight)):p.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),p.cellWidth||(p.cellWidth=p.columnWidth))}},260:function(a,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var h=u(796),p=u(172),m=u(420),g=function(){function x(_,S){this.pageNumber=1,this.pageCount=1,this.id=_.id,this.settings=_.settings,this.styles=_.styles,this.hooks=_.hooks,this.columns=S.columns,this.head=S.head,this.body=S.body,this.foot=S.foot}return x.prototype.getHeadHeight=function(_){return this.head.reduce(function(S,I){return S+I.getMaxCellHeight(_)},0)},x.prototype.getFootHeight=function(_){return this.foot.reduce(function(S,I){return S+I.getMaxCellHeight(_)},0)},x.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},x.prototype.callCellHooks=function(_,S,I,F,V,P){for(var N=0,L=S;N<L.length;N++){var M=L[N],k=new p.CellHookData(_,this,I,F,V,P),T=M(k)===!1;if(I.text=Array.isArray(I.text)?I.text:[I.text],T)return!1}return!0},x.prototype.callEndPageHooks=function(_,S){_.applyStyles(_.userStyles);for(var I=0,F=this.hooks.didDrawPage;I<F.length;I++){var V=F[I];V(new p.HookData(_,this,S))}},x.prototype.callWillDrawPageHooks=function(_,S){for(var I=0,F=this.hooks.willDrawPage;I<F.length;I++){var V=F[I];V(new p.HookData(_,this,S))}},x.prototype.getWidth=function(_){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var S=this.columns.reduce(function(F,V){return F+V.wrappedWidth},0);return S}else{var I=this.settings.margin;return _-I.left-I.right}},x}();l.Table=g;var v=function(){function x(_,S,I,F,V){V===void 0&&(V=!1),this.height=0,this.raw=_,_ instanceof h.HtmlRowInput&&(this.raw=_._element,this.element=_._element),this.index=S,this.section=I,this.cells=F,this.spansMultiplePages=V}return x.prototype.getMaxCellHeight=function(_){var S=this;return _.reduce(function(I,F){var V;return Math.max(I,((V=S.cells[F.index])===null||V===void 0?void 0:V.height)||0)},0)},x.prototype.hasRowSpan=function(_){var S=this;return _.filter(function(I){var F=S.cells[I.index];return F?F.rowSpan>1:!1}).length>0},x.prototype.canEntireRowFit=function(_,S){return this.getMaxCellHeight(S)<=_},x.prototype.getMinimumRowHeight=function(_,S){var I=this;return _.reduce(function(F,V){var P=I.cells[V.index];if(!P)return 0;var N=S.getLineHeight(P.styles.fontSize),L=P.padding("vertical"),M=L+N;return M>F?M:F},0)},x}();l.Row=v;var w=function(){function x(_,S,I){var F,V;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=S,this.section=I,this.raw=_;var P=_;_!=null&&typeof _=="object"&&!Array.isArray(_)?(this.rowSpan=_.rowSpan||1,this.colSpan=_.colSpan||1,P=(V=(F=_.content)!==null&&F!==void 0?F:_.title)!==null&&V!==void 0?V:_,_._element&&(this.raw=_._element)):(this.rowSpan=1,this.colSpan=1);var N=P!=null?""+P:"",L=/\r\n|\r|\n/g;this.text=N.split(L)}return x.prototype.getTextPos=function(){var _;if(this.styles.valign==="top")_=this.y+this.padding("top");else if(this.styles.valign==="bottom")_=this.y+this.height-this.padding("bottom");else{var S=this.height-this.padding("vertical");_=this.y+S/2+this.padding("top")}var I;if(this.styles.halign==="right")I=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var F=this.width-this.padding("horizontal");I=this.x+F/2+this.padding("left")}else I=this.x+this.padding("left");return{x:I,y:_}},x.prototype.getContentHeight=function(_,S){S===void 0&&(S=1.15);var I=Array.isArray(this.text)?this.text.length:1,F=this.styles.fontSize/_*S,V=I*F+this.padding("vertical");return Math.max(V,this.styles.minCellHeight)},x.prototype.padding=function(_){var S=(0,m.parseSpacing)(this.styles.cellPadding,0);return _==="vertical"?S.top+S.bottom:_==="horizontal"?S.left+S.right:S[_]},x}();l.Cell=w;var C=function(){function x(_,S,I){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=_,this.raw=S,this.index=I}return x.prototype.getMaxCustomCellWidth=function(_){for(var S=0,I=0,F=_.allRows();I<F.length;I++){var V=F[I],P=V.cells[this.index];P&&typeof P.styles.cellWidth=="number"&&(S=Math.max(S,P.styles.cellWidth))}return S},x}();l.Column=C},356:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function u(h,p,m,g,v){if(h==null)throw new TypeError("Cannot convert undefined or null to object");for(var w=Object(h),C=1;C<arguments.length;C++){var x=arguments[C];if(x!=null)for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(w[_]=x[_])}return w}l.assign=u},972:function(a,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var h=u(744),p=u(260),m=u(324),g=u(796),v=u(356);function w(V,P){var N=new h.DocHandler(V),L=C(P,N.scaleFactor()),M=new p.Table(P,L);return(0,m.calculateWidths)(N,M),N.applyStyles(N.userStyles),M}l.createTable=w;function C(V,P){var N=V.content,L=I(N.columns);if(N.head.length===0){var M=_(L,"head");M&&N.head.push(M)}if(N.foot.length===0){var M=_(L,"foot");M&&N.foot.push(M)}var k=V.settings.theme,T=V.styles;return{columns:L,head:x("head",N.head,L,T,k,P),body:x("body",N.body,L,T,k,P),foot:x("foot",N.foot,L,T,k,P)}}function x(V,P,N,L,M,k){var T={},D=P.map(function(Y,ae){for(var Z=0,J={},K=0,X=0,se=0,me=N;se<me.length;se++){var O=me[se];if(T[O.index]==null||T[O.index].left===0)if(X===0){var $=void 0;Array.isArray(Y)?$=Y[O.index-K-Z]:$=Y[O.dataKey];var Q={};typeof $=="object"&&!Array.isArray($)&&(Q=($==null?void 0:$.styles)||{});var te=F(V,O,ae,M,L,k,Q),re=new p.Cell($,te,V);J[O.dataKey]=re,J[O.index]=re,X=re.colSpan-1,T[O.index]={left:re.rowSpan-1,times:X}}else X--,K++;else T[O.index].left--,X=T[O.index].times,Z++}return new p.Row(Y,ae,V,J)});return D}function _(V,P){var N={};return V.forEach(function(L){if(L.raw!=null){var M=S(P,L.raw);M!=null&&(N[L.dataKey]=M)}}),Object.keys(N).length>0?N:null}function S(V,P){if(V==="head"){if(typeof P=="object")return P.header||P.title||null;if(typeof P=="string"||typeof P=="number")return P}else if(V==="foot"&&typeof P=="object")return P.footer;return null}function I(V){return V.map(function(P,N){var L,M,k;return typeof P=="object"?k=(M=(L=P.dataKey)!==null&&L!==void 0?L:P.key)!==null&&M!==void 0?M:N:k=N,new p.Column(k,P,N)})}function F(V,P,N,L,M,k,T){var D=(0,g.getTheme)(L),Y;V==="head"?Y=M.headStyles:V==="body"?Y=M.bodyStyles:V==="foot"&&(Y=M.footStyles);var ae=(0,v.assign)({},D.table,D[V],M.styles,Y),Z=M.columnStyles[P.dataKey]||M.columnStyles[P.index]||{},J=V==="body"?Z:{},K=V==="body"&&N%2===0?(0,v.assign)({},D.alternateRow,M.alternateRowStyles):{},X=(0,g.defaultStyles)(k),se=(0,v.assign)({},X,ae,K,J);return(0,v.assign)(se,T)}},664:function(a,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var h=u(420),p=u(260),m=u(744),g=u(356),v=u(136),w=u(224);function C(Z,J){var K=J.settings,X=K.startY,se=K.margin,me={x:se.left,y:X},O=J.getHeadHeight(J.columns)+J.getFootHeight(J.columns),$=X+se.bottom+O;if(K.pageBreak==="avoid"){var Q=J.body,te=Q.reduce(function(ge,be){return ge+be.height},0);$+=te}var re=new m.DocHandler(Z);(K.pageBreak==="always"||K.startY!=null&&$>re.pageSize().height)&&(ae(re),me.y=se.top),J.callWillDrawPageHooks(re,me);var pe=(0,g.assign)({},me);J.startPageNumber=re.pageNumber(),K.horizontalPageBreak?x(re,J,pe,me):(re.applyStyles(re.userStyles),(K.showHead==="firstPage"||K.showHead==="everyPage")&&J.head.forEach(function(ge){return M(re,J,ge,me,J.columns)}),re.applyStyles(re.userStyles),J.body.forEach(function(ge,be){var Re=be===J.body.length-1;L(re,J,ge,Re,pe,me,J.columns)}),re.applyStyles(re.userStyles),(K.showFoot==="lastPage"||K.showFoot==="everyPage")&&J.foot.forEach(function(ge){return M(re,J,ge,me,J.columns)})),(0,h.addTableBorder)(re,J,pe,me),J.callEndPageHooks(re,me),J.finalY=me.y,Z.lastAutoTable=J,Z.previousAutoTable=J,Z.autoTable&&(Z.autoTable.previous=J),re.applyStyles(re.userStyles)}l.drawTable=C;function x(Z,J,K,X){var se=(0,w.calculateAllColumnsCanFitInPage)(Z,J),me=J.settings;if(me.horizontalPageBreakBehaviour==="afterAllRows")se.forEach(function(te,re){Z.applyStyles(Z.userStyles),re>0?Y(Z,J,K,X,te.columns,!0):_(Z,J,X,te.columns),S(Z,J,K,X,te.columns),F(Z,J,X,te.columns)});else for(var O=-1,$=se[0],Q=function(){var te=O;if($){Z.applyStyles(Z.userStyles);var re=$.columns;O>=0?Y(Z,J,K,X,re,!0):_(Z,J,X,re),te=I(Z,J,O+1,X,re),F(Z,J,X,re)}var pe=te-O;se.slice(1).forEach(function(ge){Z.applyStyles(Z.userStyles),Y(Z,J,K,X,ge.columns,!0),I(Z,J,O+1,X,ge.columns,pe),F(Z,J,X,ge.columns)}),O=te};O<J.body.length-1;)Q()}function _(Z,J,K,X){var se=J.settings;Z.applyStyles(Z.userStyles),(se.showHead==="firstPage"||se.showHead==="everyPage")&&J.head.forEach(function(me){return M(Z,J,me,K,X)})}function S(Z,J,K,X,se){Z.applyStyles(Z.userStyles),J.body.forEach(function(me,O){var $=O===J.body.length-1;L(Z,J,me,$,K,X,se)})}function I(Z,J,K,X,se,me){Z.applyStyles(Z.userStyles),me=me??J.body.length;var O=Math.min(K+me,J.body.length),$=-1;return J.body.slice(K,O).forEach(function(Q,te){var re=K+te===J.body.length-1,pe=D(Z,J,re,X);Q.canEntireRowFit(pe,se)&&(M(Z,J,Q,X,se),$=K+te)}),$}function F(Z,J,K,X){var se=J.settings;Z.applyStyles(Z.userStyles),(se.showFoot==="lastPage"||se.showFoot==="everyPage")&&J.foot.forEach(function(me){return M(Z,J,me,K,X)})}function V(Z,J,K){var X=K.getLineHeight(Z.styles.fontSize),se=Z.padding("vertical"),me=Math.floor((J-se)/X);return Math.max(0,me)}function P(Z,J,K,X){var se={};Z.spansMultiplePages=!0,Z.height=0;for(var me=0,O=0,$=K.columns;O<$.length;O++){var Q=$[O],te=Z.cells[Q.index];if(te){Array.isArray(te.text)||(te.text=[te.text]);var re=new p.Cell(te.raw,te.styles,te.section);re=(0,g.assign)(re,te),re.text=[];var pe=V(te,J,X);te.text.length>pe&&(re.text=te.text.splice(pe,te.text.length));var ge=X.scaleFactor(),be=X.getLineHeightFactor();te.contentHeight=te.getContentHeight(ge,be),te.contentHeight>=J&&(te.contentHeight=J,re.styles.minCellHeight-=J),te.contentHeight>Z.height&&(Z.height=te.contentHeight),re.contentHeight=re.getContentHeight(ge,be),re.contentHeight>me&&(me=re.contentHeight),se[Q.index]=re}}var Re=new p.Row(Z.raw,-1,Z.section,se,!0);Re.height=me;for(var Le=0,Ve=K.columns;Le<Ve.length;Le++){var Q=Ve[Le],re=Re.cells[Q.index];re&&(re.height=Re.height);var te=Z.cells[Q.index];te&&(te.height=Z.height)}return Re}function N(Z,J,K,X){var se=Z.pageSize().height,me=X.settings.margin,O=me.top+me.bottom,$=se-O;J.section==="body"&&($-=X.getHeadHeight(X.columns)+X.getFootHeight(X.columns));var Q=J.getMinimumRowHeight(X.columns,Z),te=Q<K;if(Q>$)return console.error("Will not be able to print row ".concat(J.index," correctly since it's minimum height is larger than page height")),!0;if(!te)return!1;var re=J.hasRowSpan(X.columns),pe=J.getMaxCellHeight(X.columns)>$;return pe?(re&&console.error("The content of row ".concat(J.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(re||X.settings.rowPageBreak==="avoid")}function L(Z,J,K,X,se,me,O){var $=D(Z,J,X,me);if(K.canEntireRowFit($,O))M(Z,J,K,me,O);else if(N(Z,K,$,J)){var Q=P(K,$,J,Z);M(Z,J,K,me,O),Y(Z,J,se,me,O),L(Z,J,Q,X,se,me,O)}else Y(Z,J,se,me,O),L(Z,J,K,X,se,me,O)}function M(Z,J,K,X,se){X.x=J.settings.margin.left;for(var me=0,O=se;me<O.length;me++){var $=O[me],Q=K.cells[$.index];if(!Q){X.x+=$.width;continue}Z.applyStyles(Q.styles),Q.x=X.x,Q.y=X.y;var te=J.callCellHooks(Z,J.hooks.willDrawCell,Q,K,$,X);if(te===!1){X.x+=$.width;continue}k(Z,Q,X);var re=Q.getTextPos();(0,v.default)(Q.text,re.x,re.y,{halign:Q.styles.halign,valign:Q.styles.valign,maxWidth:Math.ceil(Q.width-Q.padding("left")-Q.padding("right"))},Z.getDocument()),J.callCellHooks(Z,J.hooks.didDrawCell,Q,K,$,X),X.x+=$.width}X.y+=K.height}function k(Z,J,K){var X=J.styles;if(Z.getDocument().setFillColor(Z.getDocument().getFillColor()),typeof X.lineWidth=="number"){var se=(0,h.getFillStyle)(X.lineWidth,X.fillColor);se&&Z.rect(J.x,K.y,J.width,J.height,se)}else typeof X.lineWidth=="object"&&(X.fillColor&&Z.rect(J.x,K.y,J.width,J.height,"F"),T(Z,J,K,X.lineWidth))}function T(Z,J,K,X){var se,me,O,$;X.top&&(se=K.x,me=K.y,O=K.x+J.width,$=K.y,X.right&&(O+=.5*X.right),X.left&&(se-=.5*X.left),Q(X.top,se,me,O,$)),X.bottom&&(se=K.x,me=K.y+J.height,O=K.x+J.width,$=K.y+J.height,X.right&&(O+=.5*X.right),X.left&&(se-=.5*X.left),Q(X.bottom,se,me,O,$)),X.left&&(se=K.x,me=K.y,O=K.x,$=K.y+J.height,X.top&&(me-=.5*X.top),X.bottom&&($+=.5*X.bottom),Q(X.left,se,me,O,$)),X.right&&(se=K.x+J.width,me=K.y,O=K.x+J.width,$=K.y+J.height,X.top&&(me-=.5*X.top),X.bottom&&($+=.5*X.bottom),Q(X.right,se,me,O,$));function Q(te,re,pe,ge,be){Z.getDocument().setLineWidth(te),Z.getDocument().line(re,pe,ge,be,"S")}}function D(Z,J,K,X){var se=J.settings.margin.bottom,me=J.settings.showFoot;return(me==="everyPage"||me==="lastPage"&&K)&&(se+=J.getFootHeight(J.columns)),Z.pageSize().height-X.y-se}function Y(Z,J,K,X,se,me){se===void 0&&(se=[]),me===void 0&&(me=!1),Z.applyStyles(Z.userStyles),J.settings.showFoot==="everyPage"&&!me&&J.foot.forEach(function($){return M(Z,J,$,X,se)}),J.callEndPageHooks(Z,X);var O=J.settings.margin;(0,h.addTableBorder)(Z,J,K,X),ae(Z),J.pageNumber++,J.pageCount++,X.x=O.left,X.y=O.top,K.y=O.top,J.callWillDrawPageHooks(Z,X),J.settings.showHead==="everyPage"&&(J.head.forEach(function($){return M(Z,J,$,X,se)}),Z.applyStyles(Z.userStyles))}l.addPage=Y;function ae(Z){var J=Z.pageNumber();Z.setPage(J+1);var K=Z.pageNumber();return K===J?(Z.addPage(),!0):!1}},224:function(a,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var h=u(420);function p(g,v,w){var C;w===void 0&&(w={});var x=(0,h.getPageAvailableWidth)(g,v),_=new Map,S=[],I=[],F=[];v.settings.horizontalPageBreakRepeat,Array.isArray(v.settings.horizontalPageBreakRepeat)?F=v.settings.horizontalPageBreakRepeat:(typeof v.settings.horizontalPageBreakRepeat=="string"||typeof v.settings.horizontalPageBreakRepeat=="number")&&(F=[v.settings.horizontalPageBreakRepeat]),F.forEach(function(L){var M=v.columns.find(function(k){return k.dataKey===L||k.index===L});M&&!_.has(M.index)&&(_.set(M.index,!0),S.push(M.index),I.push(v.columns[M.index]),x-=M.wrappedWidth)});for(var V=!0,P=(C=w==null?void 0:w.start)!==null&&C!==void 0?C:0;P<v.columns.length;){if(_.has(P)){P++;continue}var N=v.columns[P].wrappedWidth;if(V||x>=N)V=!1,S.push(P),I.push(v.columns[P]),x-=N;else break;P++}return{colIndexes:S,columns:I,lastIndex:P-1}}function m(g,v){for(var w=[],C=0;C<v.columns.length;C++){var x=p(g,v,{start:C});x.columns.length&&(w.push(x),C=x.lastIndex)}return w}l.calculateAllColumnsCanFitInPage=m},324:function(a,l,u){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var h=u(420);function p(S,I){m(S,I);var F=[],V=0;I.columns.forEach(function(N){var L=N.getMaxCustomCellWidth(I);L?N.width=L:(N.width=N.wrappedWidth,F.push(N)),V+=N.width});var P=I.getWidth(S.pageSize().width)-V;P&&(P=g(F,P,function(N){return Math.max(N.minReadableWidth,N.minWidth)})),P&&(P=g(F,P,function(N){return N.minWidth})),P=Math.abs(P),!I.settings.horizontalPageBreak&&P>.1/S.scaleFactor()&&(P=P<1?P:Math.round(P),console.warn("Of the table content, ".concat(P," units width could not fit page"))),w(I),C(I,S),v(I)}l.calculateWidths=p;function m(S,I){var F=S.scaleFactor(),V=I.settings.horizontalPageBreak,P=(0,h.getPageAvailableWidth)(S,I);I.allRows().forEach(function(N){for(var L=0,M=I.columns;L<M.length;L++){var k=M[L],T=N.cells[k.index];if(T){var D=I.hooks.didParseCell;I.callCellHooks(S,D,T,N,k,null);var Y=T.padding("horizontal");T.contentWidth=(0,h.getStringWidth)(T.text,T.styles,S)+Y;var ae=(0,h.getStringWidth)(T.text.join(" ").split(/[^\S\u00A0]+/),T.styles,S);if(T.minReadableWidth=ae+T.padding("horizontal"),typeof T.styles.cellWidth=="number")T.minWidth=T.styles.cellWidth,T.wrappedWidth=T.styles.cellWidth;else if(T.styles.cellWidth==="wrap"||V===!0)T.contentWidth>P?(T.minWidth=P,T.wrappedWidth=P):(T.minWidth=T.contentWidth,T.wrappedWidth=T.contentWidth);else{var Z=10/F;T.minWidth=T.styles.minCellWidth||Z,T.wrappedWidth=T.contentWidth,T.minWidth>T.wrappedWidth&&(T.wrappedWidth=T.minWidth)}}}}),I.allRows().forEach(function(N){for(var L=0,M=I.columns;L<M.length;L++){var k=M[L],T=N.cells[k.index];if(T&&T.colSpan===1)k.wrappedWidth=Math.max(k.wrappedWidth,T.wrappedWidth),k.minWidth=Math.max(k.minWidth,T.minWidth),k.minReadableWidth=Math.max(k.minReadableWidth,T.minReadableWidth);else{var D=I.styles.columnStyles[k.dataKey]||I.styles.columnStyles[k.index]||{},Y=D.cellWidth||D.minCellWidth;Y&&typeof Y=="number"&&(k.minWidth=Y,k.wrappedWidth=Y)}T&&(T.colSpan>1&&!k.minWidth&&(k.minWidth=T.minWidth),T.colSpan>1&&!k.wrappedWidth&&(k.wrappedWidth=T.minWidth))}})}function g(S,I,F){for(var V=I,P=S.reduce(function(Z,J){return Z+J.wrappedWidth},0),N=0;N<S.length;N++){var L=S[N],M=L.wrappedWidth/P,k=V*M,T=L.width+k,D=F(L),Y=T<D?D:T;I-=Y-L.width,L.width=Y}if(I=Math.round(I*1e10)/1e10,I){var ae=S.filter(function(Z){return I<0?Z.width>F(Z):!0});ae.length&&(I=g(ae,I,F))}return I}l.resizeColumns=g;function v(S){for(var I={},F=1,V=S.allRows(),P=0;P<V.length;P++)for(var N=V[P],L=0,M=S.columns;L<M.length;L++){var k=M[L],T=I[k.index];if(F>1)F--,delete N.cells[k.index];else if(T)T.cell.height+=N.height,F=T.cell.colSpan,delete N.cells[k.index],T.left--,T.left<=1&&delete I[k.index];else{var D=N.cells[k.index];if(!D)continue;if(D.height=N.height,D.rowSpan>1){var Y=V.length-P,ae=D.rowSpan>Y?Y:D.rowSpan;I[k.index]={cell:D,left:ae,row:N}}}}}function w(S){for(var I=S.allRows(),F=0;F<I.length;F++)for(var V=I[F],P=null,N=0,L=0,M=0;M<S.columns.length;M++){var k=S.columns[M];if(L-=1,L>1&&S.columns[M+1])N+=k.width,delete V.cells[k.index];else if(P){var T=P;delete V.cells[k.index],P=null,T.width=k.width+N}else{var T=V.cells[k.index];if(!T)continue;if(L=T.colSpan,N=0,T.colSpan>1){P=T,N+=k.width;continue}T.width=k.width+N}}}function C(S,I){for(var F={count:0,height:0},V=0,P=S.allRows();V<P.length;V++){for(var N=P[V],L=0,M=S.columns;L<M.length;L++){var k=M[L],T=N.cells[k.index];if(T){I.applyStyles(T.styles,!0);var D=T.width-T.padding("horizontal");if(T.styles.overflow==="linebreak")T.text=I.splitTextToSize(T.text,D+1/I.scaleFactor(),{fontSize:T.styles.fontSize});else if(T.styles.overflow==="ellipsize")T.text=x(T.text,D,T.styles,I,"...");else if(T.styles.overflow==="hidden")T.text=x(T.text,D,T.styles,I,"");else if(typeof T.styles.overflow=="function"){var Y=T.styles.overflow(T.text,D);typeof Y=="string"?T.text=[Y]:T.text=Y}T.contentHeight=T.getContentHeight(I.scaleFactor(),I.getLineHeightFactor());var ae=T.contentHeight/T.rowSpan;T.rowSpan>1&&F.count*F.height<ae*T.rowSpan?F={height:ae,count:T.rowSpan}:F&&F.count>0&&F.height>ae&&(ae=F.height),ae>N.height&&(N.height=ae)}}F.count--}}function x(S,I,F,V,P){return S.map(function(N){return _(N,I,F,V,P)})}l.ellipsize=x;function _(S,I,F,V,P){var N=1e4*V.scaleFactor();if(I=Math.ceil(I*N)/N,I>=(0,h.getStringWidth)(S,F,V))return S;for(;I<(0,h.getStringWidth)(S+P,F,V)&&!(S.length<=1);)S=S.substring(0,S.length-1);return S.trim()+P}},964:function(a){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=n}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var u=i[a]={exports:{}};return r[a].call(u.exports,u,u.exports,s),u.exports}var o={};return function(){var a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=s(340),u=s(776),h=s(664),p=s(972),m=s(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return m.Table}});var g=s(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return g.CellHookData}});var v=s(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return v.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return v.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return v.Row}});function w(I){(0,l.default)(I)}a.applyPlugin=w;function C(I,F){var V=(0,u.parseInput)(I,F),P=(0,p.createTable)(I,V);(0,h.drawTable)(I,P)}function x(I,F){var V=(0,u.parseInput)(I,F);return(0,p.createTable)(I,V)}a.__createTable=x;function _(I,F){(0,h.drawTable)(I,F)}a.__drawTable=_;try{var S=s(964);S.jsPDF&&(S=S.jsPDF),w(S)}catch{}a.default=C}(),o}()})})(hk);var Sq=hk.exports;const sm=QN(Sq);function Aq(t,e,n,r,i,s){const o=new ot,a=o.internal.pageSize.width;o.setFontSize(20),o.text(t,a/2,20,{align:"center"}),o.setFontSize(12),o.text(`Período: ${new Date(e.startDate).toLocaleDateString()} - ${new Date(e.endDate).toLocaleDateString()}`,a/2,30,{align:"center"}),o.setFontSize(14),o.text("Resumen Financiero",14,45);const l=[["Total Ventas",_e(s.totalSales)],["Total Gastos",_e(s.totalExpenses)],["Total Comisiones",_e(s.totalCommissions)],["Ganancia Bruta",_e(s.grossProfit)],["Ganancia Neta",_e(s.netProfit)],["Dinero en Caja",_e(s.cashInRegister)]];sm(o,{startY:50,head:[["Concepto","Monto"]],body:l,theme:"striped",headStyles:{fillColor:[37,99,235]},styles:{fontSize:10}}),o.addPage(),o.setFontSize(14),o.text("Detalle de Ventas",14,20);const u=n.map(m=>[new Date(m.date).toLocaleDateString(),m.client.name,m.payment.method==="cash"?"Efectivo":m.payment.method==="card"?"Tarjeta":"Transferencia",_e(m.total)]);sm(o,{startY:25,head:[["Fecha","Cliente","Método","Total"]],body:u,theme:"striped",headStyles:{fillColor:[37,99,235]},styles:{fontSize:10}}),o.addPage(),o.setFontSize(14),o.text("Detalle de Gastos",14,20);const h=r.map(m=>[new Date(m.date).toLocaleDateString(),m.reason,_e(m.amount)]);sm(o,{startY:25,head:[["Fecha","Concepto","Monto"]],body:h,theme:"striped",headStyles:{fillColor:[37,99,235]},styles:{fontSize:10}}),o.addPage(),o.setFontSize(14),o.text("Detalle de Créditos",14,20);const p=i.map(m=>{const g=m.payments.reduce((w,C)=>C.status==="active"?w+C.amount:w,0),v=m.totalAmount-g;return[m.clientName,_e(m.totalAmount),_e(g),_e(v),m.status]});sm(o,{startY:25,head:[["Cliente","Total","Pagado","Pendiente","Estado"]],body:p,theme:"striped",headStyles:{fillColor:[37,99,235]},styles:{fontSize:10}}),o.save(`reporte-financiero-${new Date().toISOString().split("T")[0]}.pdf`)}function Cq({title:t,dateRange:e,sales:n,expenses:r,credits:i,summary:s}){const o=()=>{Aq(t,e,n,r,i,s)};return c.jsxs("button",{onClick:o,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[c.jsx(RI,{className:"h-5 w-5"}),c.jsx("span",{children:"Exportar PDF"})]})}function Eq({dateRange:t}){const{sales:e}=x0(),{expenses:n}=b0(),{balance:r}=_0(),{products:i}=Il(),{credits:s}=w0(),o=e.filter(S=>{const I=new Date(S.date),F=new Date(t.startDate),V=new Date(t.endDate);return V.setHours(23,59,59),I>=F&&I<=V&&S.status!=="cancelled"}),a=n.filter(S=>{const I=new Date(S.date),F=new Date(t.startDate),V=new Date(t.endDate);return V.setHours(23,59,59),I>=F&&I<=V&&S.status!=="cancelled"}),l=s.filter(S=>{const I=new Date(S.dueDate),F=new Date(t.startDate),V=new Date(t.endDate);return V.setHours(23,59,59),I>=F&&I<=V}),u=o.reduce((S,I)=>S+I.total,0),h=o.reduce((S,I)=>I.payment.method==="cash"?S+I.total:S,0),p=o.reduce((S,I)=>I.payment.method==="card"?S+I.total:S,0),m=o.reduce((S,I)=>I.payment.method==="transfer"?S+I.total:S,0),g=a.reduce((S,I)=>S+I.amount,0),v=o.reduce((S,I)=>I.staff?S+I.staff.commissionAmount:S,0),w=o.reduce((S,I)=>S+I.products.reduce((F,V)=>{const P=i.find(N=>N.code===V.code);return P?F+P.costPrice*V.quantity:F},0),0),C=u-w,x=C-g-v,_=h-g-v+r;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Reporte de Caja"}),c.jsx(Cq,{title:"Reporte de Caja",dateRange:t,sales:o,expenses:a,credits:l,summary:{totalSales:u,totalExpenses:g,totalCommissions:v,grossProfit:C,netProfit:x,cashInRegister:_}})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Dinero en Caja"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_e(_)}),c.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Efectivo - Gastos - Comisiones + Caja Chica"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Ventas"}),c.jsx("p",{className:"text-2xl font-bold text-green-600",children:_e(u)}),c.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Todos los métodos de pago"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Gastos y Comisiones"}),c.jsx("p",{className:"text-2xl font-bold text-red-600",children:_e(g+v)}),c.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Gastos: ",_e(g)," | Comisiones: ",_e(v)]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Ganancia Neta"}),c.jsx("p",{className:`text-2xl font-bold ${x>=0?"text-blue-600":"text-red-600"}`,children:_e(x)}),c.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Ventas - Costos - Gastos - Comisiones"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumen por Método de Pago"}),c.jsx(bz,{cashSales:h,cardSales:p,transferSales:m,expenses:g,commissions:v,pettyCashBalance:r,costOfGoodsSold:w,grossProfit:C,netProfit:x})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Flujo de Caja"}),c.jsx(xz,{sales:o,expenses:a})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Movimientos de Caja"}),c.jsx(wz,{sales:o,expenses:a})]})]})}function kq({value:t,onChange:e}){return c.jsxs("div",{className:"flex items-center space-x-4 bg-white p-3 rounded-lg shadow-sm border",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Inicial"}),c.jsx("input",{type:"date",value:t.startDate,onChange:n=>e({...t,startDate:n.target.value}),max:t.endDate,className:"px-3 py-1.5 border rounded-lg focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Final"}),c.jsx("input",{type:"date",value:t.endDate,onChange:n=>e({...t,endDate:n.target.value}),min:t.startDate,max:new Date().toISOString().split("T")[0],className:"px-3 py-1.5 border rounded-lg focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]})}const Pq=[{id:"sales",label:"Ventas",icon:c.jsx(Kg,{className:"h-5 w-5"})},{id:"expenses",label:"Gastos",icon:c.jsx(F2,{className:"h-5 w-5"})},{id:"credits",label:"Créditos",icon:c.jsx(Gg,{className:"h-5 w-5"})},{id:"cashRegister",label:"Dinero en Caja",icon:c.jsx(LI,{className:"h-5 w-5"})},{id:"pettyCash",label:"Caja Chica",icon:c.jsx(h3,{className:"h-5 w-5"})},{id:"profit",label:"Ganancias",icon:c.jsx(u3,{className:"h-5 w-5"})},{id:"staff",label:"Comisiones",icon:c.jsx(O2,{className:"h-5 w-5"})}],Tq=[{id:"sales",label:"Ventas",icon:c.jsx(Kg,{className:"h-5 w-5"})},{id:"expenses",label:"Gastos",icon:c.jsx(F2,{className:"h-5 w-5"})}];function Iq({value:t,onChange:e,userRole:n}){const r=n==="admin"?Pq:Tq;return c.jsx("div",{className:"flex space-x-2",children:r.map(i=>c.jsxs("button",{onClick:()=>e(i.id),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${t===i.id?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:[i.icon,c.jsx("span",{children:i.label})]},i.id))})}function jq({userRole:t}){const[e,n]=we.useState("sales"),[r,i]=we.useState({startDate:new Date(new Date().setDate(1)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),s=()=>{switch(e){case"sales":return c.jsx(zU,{dateRange:r});case"expenses":return c.jsx(WU,{dateRange:r});case"credits":return t==="admin"?c.jsx(QU,{dateRange:r}):null;case"profit":return t==="admin"?c.jsx(uz,{dateRange:r}):null;case"staff":return t==="admin"?c.jsx(pz,{dateRange:r}):null;case"pettyCash":return t==="admin"?c.jsx(vz,{dateRange:r}):null;case"cashRegister":return t==="admin"?c.jsx(Eq,{dateRange:r}):null;default:return null}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Reportes Financieros"}),c.jsx(Iq,{value:e,onChange:n,userRole:t})]}),c.jsx(kq,{value:r,onChange:i})]}),s()]})}function Lq({currentModule:t,userRole:e}){const n=()=>{switch(t){case"appointments":return c.jsx(EM,{});case"products":return e==="admin"?c.jsx(BM,{}):null;case"sales":return c.jsx(bO,{});case"clients":return c.jsx(SO,{});case"credits":return c.jsx(QO,{});case"pettyCash":return c.jsx(EF,{});case"expenses":return c.jsx(OO,{});case"staff":return e==="admin"?c.jsx(iF,{}):null;case"reports":return c.jsx(jq,{userRole:e});case"settings":return e==="admin"?c.jsx(_F,{}):null;default:return c.jsx("div",{className:"text-center text-gray-500",children:"Este módulo está en construcción"})}};return c.jsx("div",{className:"space-y-6",children:n()})}function Rq({onLogout:t,currentUser:e}){const[n,r]=we.useState("appointments");return c.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[c.jsx(hM,{currentModule:n,onModuleChange:r,onLogout:t,userRole:e.role}),c.jsxs("div",{className:"flex-1 flex flex-col",children:[c.jsx(GI,{}),c.jsx("main",{className:"flex-1 overflow-auto p-6",children:c.jsx(Lq,{title:Ba.modules[n],currentModule:n,userRole:e.role})})]})]})}function Dq(){const[t,e]=we.useState(""),[n,r]=we.useState(""),{isLoggedIn:i,error:s,currentUser:o,login:a,logout:l}=XC(),{images:u,colors:h}=Tl(),p=m=>{m.preventDefault(),a(t,n)};return i&&o?c.jsx(Rq,{onLogout:l,currentUser:o}):c.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 bg-cover bg-center",style:{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('${u.loginBackground}')`},children:c.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-xl",children:[c.jsx(PC,{}),c.jsx(WI,{username:t,password:n,error:s,onUsernameChange:e,onPasswordChange:r,onSubmit:p,primaryColor:h.primary,loginButtonColor:h.loginButton})]})})}const Mq=we.createContext(null);function Oq({children:t}){return c.jsx(Mq.Provider,{value:{db:Pl,auth:sM,storage:oM},children:t})}c3(document.getElementById("root")).render(c.jsx(we.StrictMode,{children:c.jsx(Oq,{children:c.jsx(Dq,{})})}));export{Kt as _,W0 as c,QN as g};
